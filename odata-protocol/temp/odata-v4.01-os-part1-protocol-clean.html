<html>

<head>
<meta name="description" content="This document defines the core semantics and facilities of OData">
<meta http-equiv=Content-Type content="text/html; charset=windows-1252">
<meta name=Generator content="Microsoft Word 15 (filtered)">
<title>OData Version 4.01. Part 1: Protocol</title>


</head>

<body>
<h1>Introduction</h1>

</div>

<p class=MsoNormal>The Open Data Protocol (OData) enables the creation of
REST-based data services which allow resources, identified using Uniform
Resource Locators (URLs) and defined in a data model, to be published and edited
by Web clients using simple HTTP messages. This specification defines the core
semantics and the behavioral aspects of the protocol.</p>

<p class=MsoNormal>The <a href="#ODataURL">OData&#8209;URL</a>
specification defines a set of rules for constructing URLs to identify the data
and metadata exposed by an OData service as well as a set of reserved URL query
options.</p>

<p class=MsoNormal>The <a href="#ODataCSDL">OData-CSDLJSON</a>
specification defines a JSON representation of the entity data model exposed by
an OData service.</p>

<p class=MsoNormal>The <a href="#ODataCSDL">OData-CSDLXML</a>
specification defines an XML representation of the entity data model exposed by
an OData service.</p>

<p class=MsoNormal>The <a href="#ODataJSON">OData-JSON</a> document
specifies the JSON format of the resource representations that are exchanged
using OData.</p>

<h2><a
name="_Toc19865974">1.0 IPR Policy</a></h2>

<p class=MsoNormal>This specification is provided under the <a
href="https://www.oasis-open.org/policies-guidelines/ipr#RF-on-RAND-Mode">RF on
RAND Terms</a> Mode of the <a
href="https://www.oasis-open.org/policies-guidelines/ipr">OASIS IPR Policy</a>,
the mode chosen when the Technical Committee was established. For information
on whether any patents have been disclosed that may be essential to
implementing this specification, and any offers of patent licensing terms,
please refer to the Intellectual Property Rights section of the TC’s web page (<a
href="https://www.oasis-open.org/committees/odata/ipr.php">https://www.oasis-open.org/committees/odata/ipr.php</a>).</p>

<h2>Terminology</h2>

<p class=MsoNormal>The key words “MUST”, “MUST NOT”, “REQUIRED”, “SHALL”, “SHALL
NOT”, “SHOULD”, “SHOULD NOT”, “RECOMMENDED”, “MAY”, and “OPTIONAL” in this
document are to be interpreted as described in <a href="#RFC2119"><b>[RFC2119]</b></a>.</p>

<h2>Normative References</h2>

<p class=MsoNormal style='margin-left:127.6pt;text-indent:-113.4pt'><span
class=Refterm>[<a name=ABNF>OData-ABNF</a>]</span>                 <i>OData
ABNF Construction Rules Version 4.01</i>. <br>
See link in &quot;Additional artifacts&quot; section on cover page. </p>

<p class=MsoNormal style='margin-left:127.6pt;text-indent:-113.4pt'><b>[<a
name=ODataAggregationRef>OData-Aggregation</a></b><span class=Hyperlink1><b>]</b></span>      <i>OData
Extension for Data Aggregation Version 4.0</i>. <br>
See link in &quot;Related work&quot; section on cover page.</p>

<p class=MsoNormal style='margin-left:127.6pt;text-indent:-113.4pt'><span
class=Refterm>[<a name=ODataCSDLJSONRef></a><a name=ODataCSDLRef>OData-CSDL</a>JSON]</span>        <i>OData
Common Schema Definition Language (CSDL) JSON Representation Version 4.01</i>. See
link in &quot;Related work&quot; section on cover page.</p>

<p class=MsoNormal style='margin-left:127.6pt;text-indent:-113.4pt'><a
name=ODataCSDLXMLRef><b>[</b></a><span class=Refterm>OData-CSDLXML]</span>          <i>OData
Common Schema Definition Language (CSDL) XML Representation Version 4.01.</i> See
link in &quot;Related work&quot; section on cover page</p>

<p class=MsoNormal style='margin-left:127.6pt;text-indent:-113.4pt'><b>[<a
name=ODataJSONRef>OData-JSON</a></b><span class=Hyperlink1><b>]</b></span>                 <i>OData
JSON Format Version 4.01.</i> <br>
See link in &quot;Related work&quot; section on cover page.</p>

<p class=MsoNormal style='margin-left:127.6pt;text-indent:-113.4pt'><b>[<a
name=ODataURLRef>OData-URL</a>]</b>                   <i>OData Version 4.01
Part 2: URL Conventions</i>. <br>
See link in &quot;Additional artifacts&quot; section on cover page.</p>

<p class=MsoNormal style='margin-left:127.6pt;text-indent:-113.4pt'><b>[<a
name=VocCapabilities>OData-VocCap</a>]</b>              <i>OData Vocabularies
Version 4.0: Capabilities Vocabulary. </i><br>
See link in &quot;Related work&quot; section on cover page.</p>

<p class=MsoNormal style='margin-left:127.6pt;text-indent:-113.4pt'><b>[<a
name=VocCore>OData-VocCore</a>]</b>            <i>OData Vocabularies Version
4.0: Core Vocabulary. </i><br>
See link in &quot;Related work&quot; section on cover page.</p>

<p class=MsoNormal style='margin-left:127.6pt;text-indent:-113.4pt'><b>[<a
name=RFC2046>RFC2046</a>]                      </b>Freed, N. and N. Borenstein,
&quot;Multipurpose Internet Mail Extensions (MIME) Part Two: Media Types&quot;,
RFC 2046, November 1996. <a href="https://tools.ietf.org/html/rfc2046">https://tools.ietf.org/html/rfc2046</a><span
class=MsoHyperlink>.</span></p>

<p class=MsoNormal style='margin-left:127.6pt;text-indent:-113.4pt'><span
class=Refterm>[<a name=RFC2119>RFC2119</a>]</span>                      Bradner,
S., “Key words for use in RFCs to Indicate Requirement Levels”, BCP 14, RFC
2119, March 1997. <a href="https://tools.ietf.org/html/rfc2119">https://tools.ietf.org/html/rfc2119</a>.</p>

<p class=MsoNormal style='margin-left:127.6pt;text-indent:-113.4pt'><span
class=Refterm>[<a name=RFC3987>RFC3987</a>]</span>                      Duerst,
M. and, M. Suignard, “Internationalized Resource Identifiers (IRIs)”, RFC 3987,
January 2005. <a href="https://tools.ietf.org/html/rfc3987">https://tools.ietf.org/html/rfc3987</a>.
</p>

<p class=Ref><span class=Refterm>[<a name=rfc5646>RFC5646</a>]</span>                      Phillips,
A., Ed., and M. Davis, Ed., “Tags for Identifying Languages”, BCP 47, RFC 5646,
September 2009. <a href="http://tools.ietf.org/html/rfc5646">http://tools.ietf.org/html/rfc5646</a>.
</p>

<p class=MsoNormal style='margin-left:127.6pt;text-indent:-113.4pt'><b>[<a
name=RFC5789>RFC5789</a>]</b>                      Dusseault, L., <span
style='color:black;background:white'>and J. Snell</span>, “Patch Method for HTTP”,
RFC 5789, March 2010. <a href="http://tools.ietf.org/html/rfc5789">http://tools.ietf.org/html/rfc5789</a>.</p>

<p class=MsoNormal style='margin-left:127.6pt;text-indent:-113.4pt'><b>[<a
name=HTTPMessage>RFC7230</a>]</b>                      Fielding, R., Ed. and J.
Reschke, Ed., “Hypertext Transfer Protocol (HTTP/1.1): Message Syntax and
Routing”,<span style='font-size:10.5pt;color:#333333'> </span><span
style='color:#333333'>RFC 7230, June 2014.</span> <a
href="https://tools.ietf.org/html/rfc7230">https://tools.ietf.org/html/rfc7230</a>.</p>

<p class=MsoNormal style='margin-left:127.6pt;text-indent:-113.4pt'><b>[<a
name=HTTPSemantic>RFC7231</a>]</b>                      Fielding, R., Ed. and
J. Reschke, Ed., “Hypertext Transfer Protocol (HTTP/1.1): Semantics and
Content”<span style='font-size:10.5pt;color:#333333'>,</span><span
style='color:#333333'> RFC 7231, June 2014.</span> <a
href="https://tools.ietf.org/html/rfc7231">https://tools.ietf.org/html/rfc7231</a>.</p>

<p class=MsoNormal style='margin-left:127.6pt;text-indent:-113.4pt'><b>[<a
name=HTTPConditional>RFC7232</a>]                      </b>Fielding, R., Ed.
and J. Reschke, Ed., “Hypertext Transfer Protocol (HTTP/1.1): Conditional
Requests”<span style='font-size:10.5pt;color:#333333'>, </span><span
style='color:#333333'>RFC 7232, June 2014.</span> <a
href="https://tools.ietf.org/html/rfc7232">https://tools.ietf.org/html/rfc7232</a><span
style='color:#333333'>.</span></p>

<p class=MsoNormal style='margin-left:127.6pt;text-indent:-113.4pt'><a name="_Toc370125980"><b>[</b></a><a
name=HTTPPREFER><b>RFC7240</b></a><b>]</b>                      Snell, J.,
&quot;Prefer Header for HTTP&quot;,<span style='font-size:10.5pt;color:#333333'>
</span><span style='color:#333333'>RFC 7240, June 2014.https://tools.ietf.org/html/rfc7240</span>.</p>

<p class=MsoNormal style='margin-left:127.6pt;text-indent:-113.4pt'><span class=Refterm>[<a
name=RFC7617>RFC7617</a>]</span><span style='font-size:10.5pt;color:#333333;
background:white'>                      </span><span style='color:#333333;
background:white'>Reschke, J., &quot;The 'Basic' HTTP Authentication
Scheme&quot;, RFC 7617, September 2015. </span><a
href="https://tools.ietf.org/html/rfc7617"><span style='background:white'>https://tools.ietf.org/html/</span>rfc7617</a><span
class=MsoHyperlink>.  </span></p>

<h2>Typographical Conventions</h2>

<p class=MsoNormal>Keywords defined by this specification use this <code>monospaced</code> font.</p>

<p class=SourceCode>Normative source code uses this paragraph style.</p>

<p class=MsoNormal>Some sections of this specification are illustrated with
non-normative examples. </p>

<p class=MsoCaption>Example 1: text describing an example uses this paragraph
style</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>Non-normative examples use this paragraph style.</p>

</div>

<p class=MsoNormal>All examples in this document are non-normative and
informative only.</p>

<p class=MsoNormal>All other text is normative unless otherwise labeled.</p>

<div style='border:none;border-top:solid gray 1.0pt;padding:6.0pt 0in 0in 0in'>

<h1>Overview</h1>

</div>

<p class=MsoNormal>The OData Protocol is an application-level protocol for
interacting with data via RESTful interfaces. The protocol supports the
description of data models and the editing and querying of data according to
those models. It provides facilities for:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:4.0pt;
margin-left:35.7pt;text-indent:-17.85pt'><span style='font-family:Symbol'>· </span>Metadata: a machine-readable description of the data model
exposed by a particular service.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:4.0pt;
margin-left:35.7pt;text-indent:-17.85pt'><span style='font-family:Symbol'>· </span>Data: sets of data entities and the relationships between them.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:4.0pt;
margin-left:35.7pt;text-indent:-17.85pt'><span style='font-family:Symbol'>· </span>Querying: requesting that the service perform a set of filtering
and other transformations to its data, then return the results.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:4.0pt;
margin-left:35.7pt;text-indent:-17.85pt'><span style='font-family:Symbol'>· </span>Editing: creating, updating, and deleting data.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:4.0pt;
margin-left:35.7pt;text-indent:-17.85pt'><span style='font-family:Symbol'>· </span>Operations: invoking custom logic</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:4.0pt;
margin-left:35.7pt;text-indent:-17.85pt'><span style='font-family:Symbol'>· </span>Vocabularies: attaching custom semantics</p>

<p class=MsoNormal>The OData Protocol is different from other REST-based web
service approaches in that it provides a uniform way to describe both the data
and the data model. This improves semantic interoperability between systems and
allows an ecosystem to emerge.</p>

<p class=MsoNormal>Towards that end, the OData Protocol follows these design
principles:</p>

<p class=MsoNormal style='margin-left:35.7pt;text-indent:-17.85pt'><span
style='font-family:Symbol'>· </span>Prefer mechanisms that work on a variety of data sources. In
particular, do not assume a relational data model.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:4.0pt;
margin-left:35.7pt;text-indent:-17.85pt'><span style='font-family:Symbol'>· </span>Extensibility is important. Services should be able to support
extended functionality without breaking clients unaware of those extensions.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:4.0pt;
margin-left:35.7pt;text-indent:-17.85pt'><span style='font-family:Symbol'>· </span>Follow REST principles.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:4.0pt;
margin-left:35.7pt;text-indent:-17.85pt'><span style='font-family:Symbol'>· </span>OData should build incrementally. A very basic, compliant service
should be easy to build, with additional work necessary only to support
additional capabilities.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:4.0pt;
margin-left:35.7pt;text-indent:-17.85pt'><span style='font-family:Symbol'>· </span>Keep it simple. Address the common cases and provide
extensibility where necessary.</p>

<div style='border:none;border-top:solid gray 1.0pt;padding:6.0pt 0in 0in 0in'>

<h1>3 Data Model</h1>

</div>

<p class=MsoNormal>This section provides a high-level description of the <i>Entity
Data Model (EDM)</i>: the abstract data model that is used to describe the data
exposed by an OData service. An <a href="#sec_MetadataDocumentRequest">OData
Metadata Document</a> is a representation of a service's data model exposed for
client consumption.</p>

<p class=MsoNormal>The central concepts in the EDM are entities, relationships,
entity sets, actions, and functions.</p>

<p class=MsoNormal><i>Entities</i> are instances of entity types (e.g. <code>Customer</code>, <code>Employee</code>, etc.). </p>

<p class=MsoNormal><i>Entity types</i> are named structured types with a key.
They define the named properties and relationships of an entity. Entity types
may derive by single inheritance from other entity types.</p>

<p class=MsoNormal>The <i>key</i> of an entity type is formed from a subset of
the primitive properties (e.g. <code>CustomerId</code>, <code>OrderId</code>, <code>LineId</code>, etc.) of the
entity type.</p>

<p class=MsoNormal><i>Complex types</i> are keyless named structured types
consisting of a set of properties. These are value types whose instances cannot
be referenced outside of their containing entity. Complex types are commonly used
as property values in an entity or as parameters to operations.</p>

<p class=MsoNormal>Properties declared as part of a structured type's
definition are called <i>declared properties</i>. Instances of structured types
may contain additional undeclared <i>dynamic properties</i>. A dynamic property
cannot have the same name as a declared property. Entity or complex types which
allow clients to persist additional undeclared properties are called <i>open
types</i>.</p>

<p class=MsoNormal>Relationships from one entity to another are represented as <i>navigation
properties. </i>Navigation properties are generally defined as part of an entity
type, but can also appear on entity instances as undeclared <i>dynamic
navigation properties</i>. Each relationship has a cardinality. </p>

<p class=MsoNormal><i>Enumeration types </i>are named primitive types whose
values are named constants with underlying integer values.</p>

<p class=MsoNormal><i>Type definitions</i> are named primitive types with fixed
facet values such as maximum length or precision. Type definitions can be used
in place of primitive typed properties, for example, within property
definitions.</p>

<p class=MsoNormal><i>Entity sets</i> are named collections of entities (e.g. <code>Customers</code> is an entity set containing <code>Customer</code> entities). An entity's key uniquely identifies
the entity within an entity set. If multiple entity sets use the same entity
type, the same combination of key values can appear in more than one entity set
and identifies different entities, one per entity set where this key
combination appears. Each of these entities has a different <a
href="#sec_EntityIdsandEntityReferences">entity-id</a>. Entity sets provide
entry points into the data model. </p>

<p class=MsoNormal><i>Operations</i> allow the execution of custom logic on
parts of a data model. <a href="#sec_Functions"><i>Functions</i></a><span
class=MsoHyperlink> </span>are operations that do not have side effects and may
support further composition, for example, with additional filter operations,
functions or an action. <a href="#sec_Actions"><i>Actions</i></a><span
class=MsoHyperlink> </span>are operations that allow side effects, such as data
modification, and cannot be further composed in order to avoid
non-deterministic behavior. Actions and functions are either <i>bound</i> to a
type, enabling them to be called as members of an instance of that type, or
unbound, in which case they are called as static operations. <i>Action imports</i>
and <i>function imports</i> enable unbound actions and functions to be called
from the service root.</p>

<p class=MsoNormal><i>Singletons </i>are named entities which can be accessed
as direct children of the entity container. A singleton may also be a member of
an entity set.</p>

<p class=MsoNormal>An OData <i>resource</i> is anything in the model that can
be addressed (an entity set, entity, property, or operation).</p>

<p class=MsoNormal>Refer to <a href="#ODataCSDL">OData-CSDLJSON</a>
or<span style='color:black;background:white'> </span><a href="#ODataCSDL">OData-CSDLXML</a>
for more information on the OData entity data model.</p>

<h2>3.1 Annotations</h2>

<p class=MsoNormal>Model and instance elements can be decorated with <i>Annotations</i>.</p>

<p class=MsoNormal>Annotations can be used to specify an individual fact about
an element, such as whether it is read-only, or to define a common concept,
such as a person or a movie.</p>

<p class=MsoNormal>Applied <i>annotations</i> consist of a <i>term</i> (the
namespace-qualified name of the annotation being applied), a <i>target</i> (the
model or instance element to which the term is applied), and a <i>value</i>.
The value may be a static value, or an expression that may contain a path to
one or more properties of an annotated entity.</p>

<p class=MsoNormal>Annotation terms are defined in metadata and have a name and
a type. </p>

<p class=MsoNormal>A set of related terms in a common namespace comprises a <i>Vocabulary</i>.</p>

<div style='border:none;border-top:solid gray 1.0pt;padding:6.0pt 0in 0in 0in'>

<h1>Service Model</h1>

</div>

<p class=MsoNormal>OData services are defined using a common data model. The
service advertises its concrete data model in a machine-readable form, allowing
generic clients to interact with the service in a well-defined way.</p>

<p class=MsoNormal>An OData service exposes two well-defined resources that
describe its data model; a service document and a metadata document. </p>

<p class=MsoNormal>The <a href="#sec_ServiceDocumentRequest"><i>service
document</i></a><span class=MsoHyperlink><i> </i></span>lists entity sets,
functions, and singletons that can be retrieved. Clients can use the service
document to navigate the model in a hypermedia-driven fashion.</p>

<p class=MsoNormal>The <a href="#sec_MetadataDocumentRequest"><i>metadata
document</i></a> describes the types, sets, functions and actions understood by
the OData service. Clients can use the metadata document to understand how to
query and interact with entities in the service.</p>

<p class=MsoNormal>In addition to these two “fixed” resources, an OData service
consists of dynamic resources. The URLs for many of these resources can be
computed from the information in the metadata document.</p>

<p class=MsoNormal>See <a href="#sec_RequestingData">Requesting Data</a> and <a
href="#sec_DataModification">Data Modification</a> for details.</p>

<h2>4.1 Entity-Ids and Entity References</h2>

<p class=MsoNormal style='margin:0in;margin-bottom:.0001pt'>Whereas entities
within an entity set are uniquely identified by their key values, entities are
also uniquely identified by a durable, opaque, globally unique <i>entity-id</i>.
The entity-id MUST be an IRI as defined in <a href="#RFC3987"><b>[RFC3987]</b></a>
and MAY be expressed in payloads, headers, and URLs as a relative reference as
appropriate. While the client MUST be prepared to
accept any IRI, services MUST use valid URIs in this version of the
specification since there is currently no lossless representation of an IRI in
the <a href="#sec_HeaderODataEntityId"><code>EntityId</code></a> header. </p>

<p class=MsoNormal>Services are strongly encouraged to use the canonical URL
for an entity as defined in <b>OData-URL</b> as its entity-id, but clients cannot
assume the entity-id can be used to locate the entity unless the <a
href="https://github.com/oasis-tcs/odata-vocabularies/blob/master/vocabularies/Org.OData.Core.V1.md#DereferenceableIDs"><code>Core.DereferenceableIDs</code></a> term is
applied to the entity container, nor can the client assume any semantics from the
structure of the entity-id. The canonical resource <code>$entity</code>
provides a general mechanism for <a href="#sec_ResolvinganEntityId">resolving
an entity-id</a> into an entity representation. </p>

<p class=MsoNormal>Services that use the standard URL conventions for
entity-ids annotate their entity container with the term <a
href="https://github.com/oasis-tcs/odata-vocabularies/blob/master/vocabularies/Org.OData.Core.V1.md#ConventionalIDs"><code>Core.ConventionalIDs</code></a>, see <a
href="#ODataVocCore">OData-VocCore</a>.</p>

<p class=MsoNormal><i>Entity references</i> refer to an entity using the
entity's entity-id.</p>

<h2>4.2 Read URLs and
Edit URLs</h2>

<p class=MsoNormal>The read URL of an entity is the URL that can be used to
read the entity. </p>

<p class=MsoNormal>The edit URL of an entity is the URL that can be used to
update or delete the entity. </p>

<p class=MsoNormal>The edit URL of a property is the edit URL of the entity
with appended segment(s) containing the path to the property. </p>

<p class=MsoNormal>Services are strongly encouraged to use the canonical URL
for an entity as defined in <b>OData-URL</b> for both the read URL and the edit
URL of an entity, with a cast segment to the type of the entity appended to the
canonical URL if the type of the entity is derived from the declared type of
the entity set. However, clients cannot assume this convention and must use the
links specified in the payload according to the appropriate format as the two
URLs may be different from one another, or one or both of them may differ from
convention.</p>

<h2>4.3 Transient
Entities</h2>

<p class=MsoNormal>Transient entities are instances of an entity type that are
“calculated on the fly” and only exist within a single payload. They cannot be
reread or updated and consequently possess neither a stable entity-id nor a
read URL or an update URL.</p>

<h2>4.4 Default
Namespaces</h2>

<p class=MsoNormal>References to actions, functions, and types within a URL
typically requires prefixing the name of the action, function, or type with the
namespace or alias in which it is defined. This namespace qualification enables
differentiating between similarly named elements across schema, or between
properties and bound functions, actions, or types with the same name.</p>

<p class=MsoNormal>Services MAY define one or more default namespaces through
the <a
href="https://github.com/oasis-tcs/odata-vocabularies/blob/master/vocabularies/Org.OData.Core.V1.md#DefaultNamespace"><code>Core.DefaultNamespace</code></a><span
class=Datatype><span style='font-family:"Arial",sans-serif'> </span></span>term
defined in <a href="#ODataVocCore">OData-VocCore</a><span
class=MsoHyperlink>. </span>Functions, actions and types in a default namespace
can be referenced in URLs with or without namespace or alias qualification.<span
class=MsoHyperlink> </span></p>

<p class=MsoNormal>Service designers should ensure uniqueness of schema
children across all default namespaces, and should avoid naming bound
functions, actions, or derived types with the same name as a structural or
navigation property of the type. </p>

<p class=MsoNormal>In the case where ambiguity does exist, an unqualified
segment appended to a structured value is always first compared to the list of
properties defined on the structured type. If no defined property with a name
matching the unqualified segment exists, or the preceding segment represents a
collection or a scalar value, it is next compared to the names of any bound
functions or actions, or derived type names, defined within any default
namespace. If it still does not match, and the preceding segment represents a
structured value, it is interpreted as a dynamic property.</p>

<p class=MsoNormal>Services MAY disallow dynamic properties on structured
values whose names conflict with a bound action, function, or derived type defined
within in a default namespace.</p>

<p class=MsoNormal>The behavior if name conflicts occur across children of
default namespaces is undefined. Generic clients are encouraged to always
qualify action, function, and type names in order to avoid any possible
ambiguity.</p>

<div style='border:none;border-top:solid gray 1.0pt;padding:6.0pt 0in 0in 0in'>

<h1>5 Versioning</h1>

</div>

<p class=MsoNormal>Versioning enables clients and services to evolve
independently. OData defines semantics for both protocol and data model
versioning.</p>

<h2>Protocol Versioning</h2>

<p class=MsoNormal>OData requests and responses are versioned according to the <a
href="#sec_HeaderODataVersion"><code>OData-Version</code></a>
header.</p>

<p class=MsoNormal>OData clients include the <a
href="#sec_HeaderODataMaxVersion"><code>OData-MaxVersion</code></a><code> </code>header in requests in order to
specify the maximum acceptable response version. Services respond with the
maximum supported version that is less than or equal to the requested <code>OData-MaxVersion</code>, using decimal comparison. The syntax of the <code>OData-Version</code>
and <code>OData-MaxVersion</code> header fields is defined in <a
href="#ODataABNF">OData-ABNF</a>. </p>

<p class=MsoNormal>Services SHOULD advertise supported versions of OData
through the <a
href="https://github.com/oasis-tcs/odata-vocabularies/blob/master/vocabularies/Org.OData.Core.V1.md#ODataVersions"><code>Core.ODataVersions</code></a> term, defined
in <a href="#ODataVocCore">OData-VocCore</a>. </p>

<p class=MsoNormal>This version of the specification defines OData version
values <code>4.0</code> and <code>4.01</code>.
Content that applies only to one version or another is explicitly called out in
the text.</p>

<h2>5.2 Model
Versioning</h2>

<p class=MsoNormal>The <a href="#sec_DataModel">Data Model</a> exposed by an
OData Service defines a contract between the OData service and its clients.
Services are allowed to extend their model only to the degree that it does not
break existing clients. Breaking changes, such as removing properties, changing
the type of existing properties, adding or removing key properties, or
reordering action or function parameters, require that a new service version is
provided at a different service root URL for the new model, or that the service
version its metadata using the <a
href="https://github.com/oasis-tcs/odata-vocabularies/blob/master/vocabularies/Org.OData.Core.V1.md#SchemaVersion"><code>Core.SchemaVersion</code></a> annotation,
defined in <a href="#ODataVocCore">OData-VocCore</a>.</p>

<p class=MsoNormal>Services that version their metadata MUST support
version-specific requests according to the <a
href="#sec_SystemQueryOptionschemaversion"><code>$schemaversion</code></a>
system query option. The following Data Model additions are considered safe and
do not require services to version their entry point or schema.</p>

<p class=MsoNormal style='margin-left:35.7pt;text-indent:-17.85pt'><span
style='font-family:Symbol'>· </span>Adding a property that is nullable or has a default value; if it
has the same name as an existing dynamic property, it must have the same type
(or base type) as the existing dynamic property</p>

<p class=MsoNormal style='margin-left:35.7pt;text-indent:-17.85pt'><span
style='font-family:Symbol'>· </span>Adding a navigation property that is nullable or
collection-valued; if it has the same name as an existing dynamic navigation
property, it must have the same type (or base type) as the existing dynamic
navigation property</p>

<p class=MsoNormal style='margin-left:35.7pt;text-indent:-17.85pt'><span
style='font-family:Symbol'>· </span>Adding a new entity type to the model</p>

<p class=MsoNormal style='margin-left:35.7pt;text-indent:-17.85pt'><span
style='font-family:Symbol'>· </span>Adding a new complex type to the model</p>

<p class=MsoNormal style='margin-left:35.7pt;text-indent:-17.85pt'><span
style='font-family:Symbol'>· </span>Adding a new entity set</p>

<p class=MsoNormal style='margin-left:35.7pt;text-indent:-17.85pt'><span
style='font-family:Symbol'>· </span>Adding a new singleton</p>

<p class=MsoNormal style='margin-left:35.7pt;text-indent:-17.85pt'><span
style='font-family:Symbol'>· </span>Adding an action, a function, an action import, or function
import </p>

<p class=MsoNormal style='margin-left:35.7pt;text-indent:-17.85pt'><span
style='font-family:Symbol'>· </span>Adding an action parameter that is nullable after existing
parameters</p>

<p class=MsoNormal style='margin-left:35.7pt;text-indent:-17.85pt'><span
style='font-family:Symbol'>· </span>Adding an action or function parameter that is annotated with <a
href="https://github.com/oasis-tcs/odata-vocabularies/blob/master/vocabularies/Org.OData.Core.V1.md#OptionalParameter"><code>Core.OptionalParameter</code></a> after
existing parameters</p>

<p class=MsoNormal style='margin-left:35.7pt;text-indent:-17.85pt'><span
style='font-family:Symbol'>· </span>Adding a type definition or enumeration</p>

<p class=MsoNormal style='margin-left:35.7pt;text-indent:-17.85pt'><span
style='font-family:Symbol'>· </span>Adding a new term</p>

<p class=MsoNormal style='margin-left:35.7pt;text-indent:-17.85pt'><span
style='font-family:Symbol'>· </span>Adding any annotation to a model element that does not need to be
understood by the client in order to correctly interact with the service</p>

<p class=MsoNormal>Clients SHOULD be prepared for services to make such
incremental changes to their model. In particular, clients SHOULD be prepared
to receive properties and derived types not previously defined by the service.</p>

<p class=MsoNormal><span style='color:black'>Services SHOULD NOT change their
data model depending on the authenticated user. If the data model is user or
user-group dependent, all changes MUST be <i>safe changes</i> as defined in
this section when comparing the full model to the model visible to users with
restricted authorizations.</span></p>

<p class=MsoNormal>&nbsp;</p>

<div style='border:none;border-top:solid gray 1.0pt;padding:6.0pt 0in 0in 0in'>

<h1>6 Extensibility</h1>

</div>

<p class=MsoNormal>The OData protocol supports both user- and version-driven
extensibility through a combination of versioning, convention, and explicit
extension points.</p>

<h2>Query Option Extensibility</h2>

<p class=MsoNormal>Query options within the request URL can control how a
particular request is processed by the service.</p>

<p class=MsoNormal>OData-defined system query options are optionally prefixed
with &quot;<code>$</code>&quot;. Services may support additional
custom query options not defined in the OData specification, but they MUST NOT
begin with the &quot;<code>$</code>&quot; or &quot;<code>@</code>&quot; character and MUST NOT conflict with any OData-defined
system query options defined in the OData version supported by the service.</p>

<p class=MsoNormal>OData services SHOULD NOT require any query options to be
specified in a request. Services SHOULD fail any request that contains query
options that they do not understand and MUST fail any request that contains
unsupported OData query options defined in the version of this specification
supported by the service.</p>

<p class=MsoNormal>In many cases OData services return URLs to identify
resources that are later requested by clients. Where possible, interoperability
is enhanced by providing all identifying information in the path portion of the
URL. However, clients should be prepared for such URLs to include custom query
options and propagate any such custom query options in future requests to the identified
resource. </p>

<h2>6.2 Payload
Extensibility</h2>

<p class=MsoNormal>OData supports extensibility in the payload, according to
the specific format.</p>

<p class=MsoNormal>Regardless of the format, additional content MUST NOT be
present if it needs to be understood by the receiver in order to correctly
interpret the payload according to the specified <a
href="#sec_HeaderODataVersion">OData-Version</a><span class=MsoHyperlink> </span>header.
Thus, clients and services MUST be prepared to handle or safely ignore any
content not specifically defined in the version of the payload specified by the
<code>OData-Version</code><span
class=Hyperlink1><code> </code></span>header.</p>

<h2>Action/Function Extensibility</h2>

<p class=MsoNormal><a href="#sec_Actions">Actions</a><span class=MsoHyperlink> </span>and
<a href="#sec_Functions">Functions</a><span class=MsoHyperlink> </span>extend
the set of operations that can be performed on or with a service or resource. <span
class=Hyperlink1>Actions</span> can have side-effects. For example, <span
class=Hyperlink1>Actions</span> can be used to modify data or to invoke custom
operations. Functions MUST NOT have side-effects. Functions can be invoked from
a URL that addresses a resource or within an expression to a <a
href="#sec_SystemQueryOptionfilter"><code>$filter</code></a>
or <a href="#sec_SystemQueryOptionorderby"><code>$orderby</code></a>
system query option.</p>

<p class=MsoNormal>Fully qualified action and function names include a
namespace or alias prefix. The <code>Edm</code>, <code>odata</code> and <code>geo</code> namespaces are
reserved for the use of this specification.</p>

<p class=MsoNormal>An OData service MUST fail any request that contains actions
or functions that it does not understand.</p>

<h2>Vocabulary Extensibility</h2>

<p class=MsoNormal>The set of <a href="#sec_Annotations">annotations</a>
defined within a schema comprise a <i>vocabulary</i>. Shared vocabularies
provide a powerful extensibility point for OData.</p>

<p class=MsoNormal>Metadata annotations can be used to define additional
characteristics or capabilities of a metadata element, such as a service,
entity type, property, function, action or parameter. For example, a metadata
annotation could define ranges of valid values for a particular property.</p>

<p class=MsoNormal>Instance annotations can be used to define additional
information associated with a particular result, entity, property, or error;
for example whether a property is read-only for a particular instance.</p>

<p class=MsoNormal>Where annotations apply across all instances of a type,
services are encouraged to specify the annotation in metadata rather than repeating
in each instance of the payload. Where the same annotation is defined at both
the metadata and instance level, the instance-level annotation overrides the
one specified at the metadata level.</p>

<p class=MsoNormal>A service MUST NOT require the client to understand custom
annotations in order to accurately interpret a response.</p>

<p class=MsoNormal>OData defines a <code>Core</code><b> </b>vocabulary
with a set of basic terms describing behavioral aspects along with terms that
can be used in defining other vocabularies; see <a href="#ODataVocCore">OData-VocCore</a>.</p>

<h2>6.5 Header Field Extensibility</h2>

<p class=MsoNormal>OData defines semantics around certain HTTP request and
response headers. Services that support a version of OData conform to the processing
requirements for the headers defined by this specification for that version.</p>

<p class=MsoNormal>Individual services may define custom headers. These headers
MUST NOT begin with <code>OData</code>. Custom headers SHOULD be
optional when making requests to the service. A service MUST NOT require the
client to understand custom headers to accurately interpret the response.</p>

<h2>Format Extensibility</h2>

<p class=MsoNormal>An OData service MUST support <a href="#ODataJSON">OData-JSON</a>
and MAY support additional formats for both request and response bodies.</p>

<div style='border:none;border-top:solid gray 1.0pt;padding:6.0pt 0in 0in 0in'>

<h1>7 Formats</h1>

</div>

<p class=MsoNormal>The client MAY request a particular response format through
the <a href="#sec_HeaderAccept"><code>Accept</code></a>
header, as defined in <a href="#HTTPSemantic"><b>[RFC7231]</b></a>, or through
the system query option <a href="#sec_SystemQueryOptionformat">$format</a><span
class=MsoHyperlink>.</span></p>

<p class=MsoNormal>In the case that both the <code>Accept</code>
header and the <code>$format</code><span class=Datatype><span
style='font-family:"Arial",sans-serif'> system </span></span>query option are
specified on a request, the value specified in the <code>$format</code>
query option MUST be used.</p>

<p class=MsoNormal>If the service does not support the requested format, it
replies with a <a href="#sec_ResponseCode406NotAcceptable"><code>406 Not Acceptable</code></a> error response.</p>

<p class=MsoNormal>Services SHOULD advertise their supported formats in the
metadata document by annotating their entity container with the term <a
href="https://github.com/oasis-tcs/odata-vocabularies/blob/master/vocabularies/Org.OData.Capabilities.V1.md#SupportedFormats"><code>Capabilities</code>.<code>SupportedFormats</code></a>, as defined in <a
href="#ODataVocCap">OData-VocCap</a>, listing all available
formats and combinations of supported format parameters.</p>

<p class=MsoNormal>The media types for the JSON and XML representation of the
metadata document are described in section “<a
href="#sec_MetadataDocumentRequest">Metadata Document Request</a>”. </p>

<p class=MsoNormal>The format specification <a href="#ODataJSON">OData-JSON</a>
describes the media type and the format parameters for non-metadata requests
and responses.</p>

<p class=MsoNormal><span style='color:#333333;background:white'>For
non-metadata requests, if</span> <span style='color:#333333;background:white'>neither
the </span><code>Accept</code><span style='color:#333333;
background:white'> header nor the </span><code>$format</code><span
style='color:#333333;background:white'> query option are specified, the service
MAY respond to requests in any format. </span></p>

<p class=MsoNormal>Client libraries MUST retain the order of objects within an
array in JSON responses, and elements in document order for XML responses,
including CSDL documents. </p>

<div style='border:none;border-top:solid gray 1.0pt;padding:6.0pt 0in 0in 0in'>

<h1>Header Fields</h1>

</div>

<p class=MsoNormal>OData defines semantics around the following request and
response headers. Additional headers may be specified, but have no unique
semantics defined in OData.</p>

<h2>8.1 Common Headers</h2>

<p class=MsoNormal>The following headers are common between OData requests and
responses.</p>

<h3>8.1.1 <a href="#sec_HeaderContentType">Header <code>Content-Type</code></a></h3>

<p class=MsoNormal>The format of a non-empty individual request or response
body, alone or within a batch, MUST be specified in the <code>Content-Type</code>
header of a request or response. The exception to this is if the body
represents the media stream of a <a
href="#sec_RequestingtheMediaStreamofaMediaEnti">media entity</a> or <a
href="#sec_ManagingStreamProperties">stream property</a>, in which case the <code>Content-Type</code> header SHOULD be present.</p>

<p class=MsoNormal>The specified format MAY include format parameters. Clients
MUST be prepared for the service to return custom format parameters not defined
in OData and SHOULD NOT expect that such format parameters can be ignored.
Custom format parameters MUST NOT start with &quot;odata&quot; and services
MUST NOT require generic OData consumers to understand custom format parameters
in order to correctly interpret the payload.</p>

<p class=MsoNormal>See <a href="#ODataJSON">OData-JSON</a> for
format-specific details about format parameters within the <code>Content-Type</code> header.</p>

<h3><a
href="#sec_HeaderContentEncoding">Header <code>Content-Encoding</code></a></h3>

<p class=MsoNormal>As defined in <a href="#HTTPSemantic"><b>[RFC7231]</b></a>, the
<code>Content-Encoding</code> header field is
used as a modifier to the media-type (as indicated in the <code>Content-Type</code>). When present, its value
indicates what additional content codings have been applied to the entity-body.
<br>
A service MAY specify a list of acceptable content codings using an annotation
with term <a
href="https://github.com/oasis-tcs/odata-vocabularies/blob/master/vocabularies/Org.OData.Capabilities.V1.md#AcceptableEncodings"><code>Capabilities</code><code>.AcceptableEncodings</code></a>, see <a href="#ODataVocCap">OData-VocCap</a>.</p>

<p class=MsoNormal>If the <code>Content-Encoding</code>
header is specified on an individual request or response within a batch, then
it specifies the encoding for that individual request or response. Individual
requests or responses that don’t include the <code>Content-Encoding</code>
header inherit the encoding of the overall batch request or response.</p>

<h3>8.1.3 <a
href="#sec_HeaderContentLanguage">Header <code>Content-Language</code></a></h3>

<p class=MsoNormal>As defined in <a href="#HTTPSemantic"><b>[RFC7231]</b></a><span
class=MsoHyperlink><b><span style='color:windowtext'>,</span></b></span> a
request or response can include a <code>Content-Language</code>
header to indicate the natural language of the intended audience for the
enclosed message body. OData does not add any
additional requirements over HTTP for including <code>Content-Language</code>. OData services can annotate model elements whose content
depends on the content language with the term <a
href="https://github.com/oasis-tcs/odata-vocabularies/blob/master/vocabularies/Org.OData.Core.V1.md#IsLanguageDependent"><code>Core.IsLanguageDependent</code></a>, see <a href="#ODataVocCore">OData-VocCore</a>.</p>

<p class=MsoNormal>If the <code>Content-Language</code> header
is specified on an individual request or response within a batch, then it
specifies the language for that individual request or response. Individual
requests or responses that don’t include the <code>Content-Language</code>
header inherit the language of the overall batch request or response.</p>

<h3><a
href="#sec_HeaderContentLength">Header <code>Content-Length</code></a></h3>

<p class=MsoNormal>As defined in <a href="#HTTPMessage"><b>[RFC7230]</b></a><span
class=MsoHyperlink><b><span style='color:windowtext'>,</span></b></span> a
request or response SHOULD include a <code>Content-Length</code>
header when the message's length can be determined
prior to being transferred. OData does not add any additional requirements over HTTP for writing <code>Content-Length</code>.</p>

<p class=MsoNormal>If the <code>Content-Length</code> header is
specified on an individual request or response within a batch, then it
specifies the length for that individual request or response. </p>

<h3>8.1.5 <a
href="#sec_HeaderODataVersion">Header <code>OData-Version</code></a></h3>

<p class=MsoNormal>OData clients SHOULD use the <code>OData-Version</code>
header on a request to specify the version of the protocol used to generate the
request payload.</p>

<p class=MsoNormal>If present on a request, the service MUST interpret the
request payload according to the rules defined in the specified version of the
protocol or fail the request with a <code>4xx</code> response
code.</p>

<p class=MsoNormal>If not specified in a request, the service MUST assume the
request payload is generated using the minimum of the <a
href="#sec_HeaderODataMaxVersion"><code>OData-MaxVersion</code></a>,
if specified, and the maximum version of the protocol that the service
understands.</p>

<p class=MsoNormal>OData services MUST include the <code>OData-Version</code>
header on a response to specify the version of the protocol used to generate
the response payload. The client MUST interpret the response payload according
to the rules defined in the specified version of the protocol. Request and
response payloads are independent and may have different <code>OData-Version</code>
headers according to the above rules.</p>

<p class=MsoNormal>For more details, see <a href="#sec_Versioning">Versioning</a>.</p>

<p class=MsoNormal><a name="_Toc477876571">If the </a><code>OData-Version</code>
header is specified on an individual request or response within a batch, then
it specifies the OData version for that individual request or response.
Individual requests or responses that don’t include the <code>OData-Version</code>
header inherit the OData version of the overall batch request or response. This
OData version does not typically vary within a batch. </p>

<h2>Request
Headers</h2>

<p class=MsoNormal>In addition to the <a href="#sec_CommonHeaders">Common
Headers</a>, the client may specify any combination of the following request
headers.</p>

<h3>8.2.1 <a href="#sec_HeaderAccept">Header <code>Accept</code></a></h3>

<p class=MsoNormal>As defined in <a href="#HTTPSemantic"><b>[RFC7231]</b></a>,
the client MAY specify the set of accepted <a href="#sec_Formats">formats</a>
with the <code>Accept</code> Header.</p>

<p class=MsoNormal>Services MUST reject formats that specify unknown or
unsupported format parameters.</p>

<p class=MsoNormal>If a media type specified in the <code>Accept</code> header includes a <code>charset</code>
format parameter and the request also contains an <a
href="#sec_HeaderAcceptCharset"><code>Accept-Charset</code></a>
header, then the <code>Accept-Charset</code>
header MUST be used.</p>

<p class=MsoNormal>If the media type specified in the <code>Accept</code> header does not include a <code>charset</code> format parameter, then the <a
href="#sec_HeaderContentType"><code>Content-Type</code></a>
header of the response MUST NOT contain a <code>charset</code>
format parameter.</p>

<p class=MsoNormal>The service SHOULD NOT add any format parameters to the <code>Content-Type</code> parameter not specified
in the <code>Accept</code> header.</p>

<p class=MsoNormal>If the <code>Accept</code>
header is specified on an individual request within a batch, then it specifies
the acceptable formats for that individual request. Requests within a batch
that don’t include the <code>Accept</code>
header inherit the acceptable formats of the overall batch request.</p>

<h3>8.2.2
<a href="#sec_HeaderAcceptCharset">Header <code>Accept-Charset</code></a></h3>

<p class=MsoNormal>As defined in<b> </b><a href="#HTTPSemantic"><b>[RFC7231]</b></a>,
the client MAY specify the set of accepted character sets with the <code>Accept-Charset</code> header.</p>

<p class=MsoNormal>If the <code>Accept-Charset</code> header is
specified on an individual request within a batch, then it specifies the
acceptable character sets for that individual request. Requests within a batch
that don’t include the <code>Accept-Charset</code> header
inherit the acceptable character sets of the overall batch request.</p>

<h3>8.2.3 <a href="#sec_HeaderAcceptLanguage">Header <code>Accept-Language</code></a></h3>

<p class=MsoNormal>As defined in <a href="#HTTPSemantic"><b>[RFC7231]</b></a>,
the client MAY specify the set of accepted natural languages with the <code>Accept-Language</code> header.</p>

<p class=MsoNormal>If the <code>Accept-Language</code> header is
specified on an individual request within a batch, then it specifies the
acceptable languages for that individual request. Requests within a batch that
don’t include the <code>Accept-Language</code> header inherit
the acceptable languages of the overall batch request.</p>

<h3>8.2.4 <a href="#sec_HeaderIfMatch">Header <code>If-Match</code></a></h3>

<p class=MsoNormal>As defined in <a href="#HTTPConditional"><b>[RFC7232]</b></a><span
class=MsoHyperlink>,</span> a client MAY include an <code>If-Match</code>
header in a request to <code>GET</code>, <code>POST</code>,
<code>PUT</code>, <code>PATCH</code> or <code>DELETE</code>. The value of the <code>If-Match</code>
request header MUST be an ETag value previously retrieved for the resource, or <code>*</code> to match any value.</p>

<p class=MsoNormal>If an operation on an existing resource requires an ETag,
(see term <a
href="https://github.com/oasis-tcs/odata-vocabularies/blob/master/vocabularies/Org.OData.Core.V1.md#OptimisticConcurrency"><code>Core.OptimisticConcurrency</code></a><span
class=Datatype><span style='font-family:"Arial",sans-serif'> </span></span>in <a
href="#ODataVocCore">OData-VocCore</a> and
property <code>OptimisticConcurrencyControl</code> of type <a
href="https://github.com/oasis-tcs/odata-vocabularies/blob/master/vocabularies/Org.OData.Capabilities.V1.md#NavigationPropertyRestriction"><code>Capabilities.NavigationPropertyRestriction</code></a> in <b> </b><a href="#ODataVocCap">OData-VocCap</a>) and the client does not specify an <code>If-Match</code> request header in a <a
href="#sec_DataModification">Data Modification Request</a> or in an <a href="#sec_Actions">Action Request</a> invoking an action bound to the resource, the service
responds with a <code>428 Precondition Required</code> and MUST ensure that no observable change occurs as a
result of the request.</p>

<p class=MsoNormal>If present, the request MUST only be processed if the
specified ETag value matches the current ETag value of the target resource.
Services sending <a href="#sec_HeaderETag"><code>ETag</code>
headers</a> with weak ETags that only depend on the representation-independent
entity state MUST use the weak comparison function because it is sufficient to
prevent accidental overwrites. This is a deviation from <a
href="#HTTPConditional"><b>[RFC7232]</b></a>. </p>

<p class=MsoNormal>If the value does not match the current ETag value of the
resource for a <a href="#sec_DataModification">Data Modification Request<span
style='color:windowtext'> </span></a>or <a href="#sec_Actions">Action Request</a>,
the service MUST respond with <a href="#sec_ResponseCode412PreconditionFailed"><code>412 Precondition Failed</code></a> and MUST
ensure that no observable change occurs as a result of the request. In the case of an <a href="#sec_UpsertanEntity">upsert</a>, if the addressed entity does not exist the provided ETag value
is considered not to match.</p>

<p class=MsoNormal>An <code>If-Match</code> header with a value
of <code>*</code> in a <code>PUT</code> or <code>PATCH</code> request results in an <a href="#sec_UpsertanEntity">upsert
request</a> being processed as an update and not an insert.</p>

<p class=MsoNormal>The <code>If-Match</code> header MUST NOT be
specified on a batch request, but MAY be specified on individual requests
within the batch.</p>

<h3>8.2.5
<a href="#sec_HeaderIfNoneMatch">Header <code>If-None-Match</code></a></h3>

<p class=MsoNormal>As defined in <a href="#HTTPConditional"><b>[RFC7232]</b></a>,
a client MAY include an <code>If-None-Match</code> header in a
request to <code>GET</code>, <code>POST</code>, <code>PUT</code>, <code>PATCH</code> or <code>DELETE</code>. The value of the <code>If-None-Match
</code>request header MUST be an ETag value previously retrieved for the
resource, or <code>*</code>.</p>

<p class=MsoNormal>If present, the request MUST only be processed if the
specified ETag value does not match the current ETag value of the resource,
using the weak comparison function (see<span class=MsoHyperlink><b> </b></span><a
href="#HTTPConditional"><b>[RFC7232]</b></a>). If the value matches the current
ETag value of the resource, then for a <code>GET</code> request,
the service SHOULD respond with <a href="#sec_ResponseCode304NotModified"><code>304 Not Modified</code></a>, and for a <a
href="#sec_DataModification">Data Modification Request<span style='color:windowtext'>
</span></a>or <a href="#sec_Actions">Action Request</a><span
class=MsoHyperlink>,</span> the service MUST respond with <a
href="#sec_ResponseCode412PreconditionFailed"><code>412
Precondition Failed</code></a> and MUST ensure that no observable change occurs
as a result of the request.</p>

<p class=MsoNormal>An <code>If-None-Match</code> header with a
value of <code>*</code> in a <code>PUT</code> or <code>PATCH</code> request results in an <a href="#sec_UpsertanEntity">upsert
request</a> being processed as an <a href="#sec_CreateanEntity">insert</a> and
not an <a href="#sec_UpdateanEntity">update</a>.</p>

<p class=MsoNormal>The <code>If-None-Match</code> header MUST
NOT be specified on a batch request, but MAY be specified on individual
requests within the batch.</p>

<h3>8.2.6 <a
href="#sec_HeaderIsolationODataIsolation">Header <code>Isolation</code>
(<code>OData-Isolation</code>)</a></h3>

<p class=MsoNormal>The <span style='font-family:"Courier New";color:black;
background:white'>Isolation</span> header specifies the isolation of the
current request from external changes. The only supported value for this header
is <code>snapshot</code>.</p>

<p class=MsoNormal>If the service doesn’t support <span style='font-family:
"Courier New";color:black;background:white'>Isolation:snapshot </span>and this
header was specified on the request, the service MUST NOT process the request
and MUST respond with <code>412 Precondition Failed.</code> </p>

<p class=MsoNormal><i>Snapshot isolation</i> guarantees that all data returned
for a request, including multiple requests within a <a href="#sec_BatchRequests">batch</a><span
class=MsoHyperlink> </span>or results retrieved across multiple <a
href="#sec_ServerDrivenPaging">pages</a>, will be consistent as of a single
point in time. Only data modifications made within the request (for example, by
a data modification request within the same batch) are visible. The effect is
as if the request generates a &quot;snapshot&quot; of the committed data as it
existed at the start of the request.</p>

<p class=MsoNormal><span style='color:black;background:white'>The</span><span
style='font-family:"Courier New";color:black;background:white'> Isolation </span>header
may be specified on a single or batch request. If it is specified on a batch
then the value is applied to all statements within the batch.</p>

<p class=MsoNormal><span style='color:black;background:white'>Next links
returned within a snapshot return results within the same snapshot as the
initial request;</span> the client is not required to repeat the header on each
individual page request.</p>

<p class=MsoNormal><span style='color:black;background:white'>The </span><code>Isolation</code> header<span style='color:black;background:white'>
has no effect on links other than the next link. Navigation links, read links,
and edit links return the current version of the data.</span></p>

<p class=MsoNormal><span style='color:black;background:white'>A service returns
</span><a href="#sec_ResponseCode410Gone"><code>410
Gone</code></a><span style='color:black;background:white'> or </span><a
href="#sec_ResponseCode404NotFound"><code>404
Not Found</code></a><span style='color:black;background:white'> if a consumer
tries to follow a next link referring to a snapshot that is no longer
available.</span></p>

<p class=MsoNormal>The syntax of the <span
style='font-family:"Courier New";color:black;background:white'>Isolation</span>
header is defined in <a href="#ODataABNF">OData-ABNF</a>.</p>

<p class=MsoNormal>A service MAY specify the support for <span
style='font-family:"Courier New";color:black;background:white'>Isolation:snapshot</span>
using an annotation with term <a
href="https://github.com/oasis-tcs/odata-vocabularies/blob/master/vocabularies/Org.OData.Capabilities.V1.md#IsolationSupported"><code>Capabilities.IsolationSupported</code></a>,
see<b> </b><a href="#ODataVocCap">OData-VocCap</a>.</p>

<p class=MsoNormal>Note: The <span style='font-family:"Courier New";color:black;
background:white'>Isolation</span> header was named <span style='font-family:
"Courier New";color:black;background:white'>OData-Isolation</span> in OData
version 4.0. Services that support the<span style='font-family:"Courier New";
color:black;background:white'> Isolation</span> header SHOULD also support <span
style='font-family:"Courier New";color:black;background:white'>OData-Isolation</span>
for OData 4.0 clients and clients SHOULD use <span style='font-family:"Courier New";
color:black;background:white'>OData-Isolation</span> for compatibility with
OData 4.0 services. If both <span style='font-family:"Courier New";color:black;
background:white'>Isolation</span> and <span style='font-family:"Courier New";
color:black;background:white'>OData-Isolation</span> headers are specified in
the same request, the value of the <span style='font-family:"Courier New";
color:black;background:white'>Isolation</span> header SHOULD be used.</p>

<h3>8.2.7 <a href="#sec_HeaderODataMaxVersion">Header
<code>OData-MaxVersion</code></a></h3>

<p class=MsoNormal>Clients SHOULD specify an <code>OData-MaxVersion</code>
request header.</p>

<p class=MsoNormal>If specified, the service MUST generate a response with the
greatest supported <a href="#sec_HeaderODataVersion"><code>OData-Version</code></a> less than or equal to the specified <code>OData-MaxVersion</code>.</p>

<p class=MsoNormal>If <code>OData-MaxVersion</code> is not
specified, then the service SHOULD return responses with the same OData version
over time and interpret the request as having an <code>OData-MaxVersion</code>
equal to the maximum OData version supported by the service at its initial
publication.</p>

<p class=MsoNormal>If the <code>OData-MaxVersion</code> header
is specified on an individual request within a batch, then it specifies the
maximum OData version for that individual request. Individual requests that don’t
include the <code>OData-MaxVersion</code> header inherit the
maximum OData version of the overall batch request or response. The maximum
OData version does not typically vary within a batch. </p>

<p class=MsoNormal>For more details, see <a href="#sec_Versioning">Versioning</a>.
</p>

<h3>8.2.8 <a href="#sec_HeaderPrefer">Header <code>Prefer</code></a></h3>

<p class=MsoNormal>The <code>Prefer</code> header, as defined in
<a href="#HTTPPREFER"><b>[RFC7240]</b></a>, allows clients to request certain behavior
from the service. The service MUST ignore preference values that are either not
supported or not known by the service.</p>

<p class=MsoNormal>The value of the <code>Prefer</code> header
is a comma-separated list of <i>preferences</i>. The following subsections
describe preferences whose meaning in OData is defined by this specification.</p>

<p class=MsoNormal>In response to a request containing a <code>Prefer</code>
header, the service MAY return the <a href="#sec_HeaderPreferenceApplied"><code>Preference-Applied</code></a> and <a
href="#sec_HeaderVary"><code>Vary</code></a>
headers.</p>

<h4><a
href="#sec_Preferenceallowentityreferencesodata">Preference <code>allow-entityreferences</code> (<code>odata.allow-entityreferences</code>)</a></h4>

<p class=MsoNormal>The <code>allow-entityreferences</code>
preference indicates that the service is allowed to return entity references in
place of entities that have previously been returned, with at least the
properties requested, in the same response (for example, when serializing the
expanded results of many-to-many relationships). The service MUST NOT return
entity references in place of requested entities if <code>allow-entityreferences </code>has not been specified in the
request, unless explicitly defined by other rules in this document<code>.</code> The syntax
of the <code>allow-entityreferences </code>preference
is defined in <a href="#ODataABNF">OData-ABNF</a>.</p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt'>In the case
the service applies the <code>allow-entityreferences</code>
preference it MUST include a <a href="#sec_HeaderPreferenceApplied"><code>Preference-Applied</code></a> response header
containing the <code>allow-entityreferences</code> preference to
indicate that entity references MAY be returned in place of entities that have
previously been returned<span style='font-family:"Calibri",sans-serif'>.</span></p>

<p class=MsoNormal>If the <code>allow-entityreferences</code>
preference is specified on an individual request within a batch, then it
specifies the preference for that individual request. Individual requests
within a batch that don’t include the <code>allow-entityreferences</code>
preference inherit the preference of the overall batch request. </p>

<p class=MsoNormal>Note: The <span style='font-family:"Courier New";color:black;
background:white'>allow-entityreferences</span> preference was named <span
style='font-family:"Courier New";color:black;background:white'>odata.allow-entityreferences</span>
in OData version 4.0. Services that support the<span style='font-family:"Courier New";
color:black;background:white'> allow-entityreferences</span> preference SHOULD
also support <span style='font-family:"Courier New";color:black;background:
white'>odata.allow-entityreferences</span> for OData 4.0 clients and clients
SHOULD use <span style='font-family:"Courier New";color:black;background:white'>odata.allow-entityreferences</span>
for compatibility with OData 4.0 services.</p>

<h4>8.2.8.2 <a
href="#sec_Preferencecallbackodatacallback">Preference <code>callback</code> (<code>odata.callback</code>)</a></h4>

<p class=MsoNormal>For scenarios in which links returned by the service are
used by the client to poll for additional information, the client can specify
the <code>callback</code> preference to
request that the service notify the client when data is available.</p>

<p class=MsoNormal style='page-break-after:avoid'>The <code>callback</code> preference can be specified:</p>

<ul style='margin-top:0in' type=disc>
 <li class=MsoNormal style='page-break-after:avoid'>when requesting
     asynchronous processing of a request with the <a
     href="#sec_Preferencerespondasync"><code>respond-async</code></a><span
     class=MsoHyperlink><code> </code></span>preference,
     or</li>
 <li class=MsoNormal>on a <code>GET</code> request to a <a
     href="#sec_DeltaLinks">delta link</a><span class=MsoHyperlink>.</span> </li>
</ul>

<p class=MsoNormal>The <code>callback</code>
preference MUST include the parameter <code>url</code>
whose value is the URL of a callback endpoint to be invoked by the OData
service when data is available. The syntax of the <code>callback</code> preference is defined in <a
href="#ODataABNF">OData-ABNF</a>.</p>

<p class=MsoNormal>For HTTP based callbacks, the OData service executes an HTTP
<code>GET</code> request against the specified URL. </p>

<p class=MsoNormal>Services that support <code>callback</code>
SHOULD support notifying the client through HTTP. Services can advertise
callback support using the <a
href="https://github.com/oasis-tcs/odata-vocabularies/blob/master/vocabularies/Org.OData.Capabilities.V1.md#CallbackSupported"><code>Capabilities</code>.<code>CallbackSupported</code></a> annotation term defined in <a
href="#ODataVocCap">OData-VocCap</a>.</p>

<p class=MsoNormal>If the service applies the <code>callback</code>
preference it MUST include the <code>callback</code>
preference in the <a href="#sec_HeaderPreferenceApplied"><code>Preference-Applied</code></a> response
header. </p>

<p class=MsoNormal>When the <code>callback</code>
preference is applied to asynchronous requests, the OData service invokes the
callback endpoint once it has finished processing the request. The status
monitor resource, returned in the <a href="#sec_HeaderLocation"><code>Location</code> header</a> of the previously
returned <a href="#sec_ResponseCode202Accepted"><code>202
Accepted</code></a> response, can then be used to retrieve the results of the
asynchronously executed request.</p>

<p class=MsoNormal>When the <code>callback</code>
preference is specified on a <code>GET</code> request to a delta
link and there are no changes available, the OData service returns a <a
href="#sec_ResponseCode202Accepted"><code>202
Accepted</code></a> response with a <a href="#sec_HeaderLocation"><code>Location</code> header</a> specifying the delta
link to be used to check for future updates. The OData service then invokes the
specified callback endpoint once new changes become available.</p>

<p class=MsoNormal>Combining <a href="#sec_Preferencerespondasync"><code>respond-async</code></a>, <code>callback</code> and <a
href="#sec_Preferencetrackchangesodatatrackchan"><code>track-changes</code></a>
preferences on a <code>GET</code> request to a delta-link might
influence the response in a couple of ways. </p>

<ul style='margin-top:0in' type=disc>
 <li class=MsoNormal style='margin-top:0in'><span class=Datatype><span
     style='font-family:"Arial",sans-serif'>If the service processes the
     request synchronously, and no updates are available, then the response is
     the same as if the </span></span><code>respond-async</code><span
     class=Datatype><span style='font-family:"Arial",sans-serif'> hadn’t been
     specified and results in a response as described above. </span></span></li>
 <li class=MsoNormal style='margin-top:0in'><span class=Datatype><span
     style='font-family:"Arial",sans-serif'>If the service processes the
     request asynchronously, then it responds with a </span></span><a
     href="#sec_ResponseCode202Accepted"><code>202
     Accepted</code></a><span class=Datatype><span style='font-family:"Arial",sans-serif'>
     response specifying the URL to the status monitor resource as it would
     have with any other asynchronous request. Once the service has finished
     processing the asynchronous request to the delta link resource, if changes
     are available it invokes the specified callback endpoint. If no changes
     are available, the service SHOULD wait to notify the client until changes
     are available. Once notified, the client uses the status monitor resource
     from the </span></span><code>Location</code><span
     class=Datatype><span style='font-family:"Arial",sans-serif'> header of the
     previously returned </span></span><a href="#sec_ResponseCode202Accepted"><span
     style='font-family:"Courier New"'>202 Accepted</span></a><span
     class=Datatype><span style='font-family:"Arial",sans-serif'> response to
     retrieve the results. In case no updates were available after processing
     the initial request, the result will contain no updates and the client can
     use the delta-link contained in the result to retrieve the updates that
     have since become available.</span></span></li>
</ul>

<p class=MsoNormal>If the consumer specifies the same URL as callback endpoint
in multiple requests, the service MAY collate them into a single notification
once additional data is available for any of the requests. However, the
consumer MUST be prepared to deal with receiving up to as many notifications as
it requested.</p>

<p class=MsoCaption>Example 2: using a HTTP callback endpoint to receive
notification</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>Prefer: callback; url=&quot;http://myserver/notfication/token/12345&quot;</p>

</div>

<p class=MsoNormal>If the <span style='font-family:
"Courier New";color:black;background:white'>callback</span> preference is
specified on an individual request within a batch, then it specifies the
callback to be used for tracking changes to that individual request. If the <span
style='font-family:"Courier New";color:black;background:white'>callback</span>
preference is specified on a batch, then it specifies the callback to be used
for async responses to the batch. </p>

<p class=MsoNormal>Note: The <span style='font-family:"Courier New";color:black;
background:white'>callback</span> preference was named <span style='font-family:
"Courier New";color:black;background:white'>odata.callback</span> in OData
version 4.0. Services that support the<span style='font-family:"Courier New";
color:black;background:white'> callback</span> preference SHOULD also support <span
style='font-family:"Courier New";color:black;background:white'>odata.callback</span>
for OData 4.0 clients and clients SHOULD use <span style='font-family:"Courier New";
color:black;background:white'>odata.callback</span> for compatibility with
OData 4.0 services. If both <span style='font-family:"Courier New";color:black;
background:white'>callback</span> and <span style='font-family:"Courier New";
color:black;background:white'>odata.callback</span> preferences are specified
in the same request, the value of the <span style='font-family:"Courier New";
color:black;background:white'>callback</span> preference SHOULD be used.</p>

<h4><a
href="#sec_Preferencecontinueonerrorodatacontin">Preference <code>continue-on-error</code> (<code>odata.continue-on-error</code>)</a></h4>

<p class=MsoNormal>The <code>continue-on-error</code>
preference on a <a href="#sec_BatchRequests">batch request</a> is used to
request whether, upon encountering a request within the batch that returns an
error, the service return the error for that request and continue processing
additional requests within the batch (if specified with an implicit or explicit
value of <code>true</code>), or rather stop further processing
(if specified with an explicit value of <code>false</code>). The syntax of the <code>continue-on-error</code>
preference is defined in <a href="#ODataABNF">OData-ABNF</a>.</p>

<p class=MsoNormal>The <code>continue-on-error</code>
preference can also be used on a <a href="#sec_UpdateaCollectionofEntities">delta
update</a>, <a href="#sec_UpdateMembersofaCollection">set-based update</a>, or <a
href="#sec_DeleteMembersofaCollection">set-based delete</a> to request that the
service continue attempting to process changes after receiving an error.</p>

<p class=MsoNormal>A service MAY specify support for the <code>continue-on-error</code> preference using an
annotation with term <a
href="https://github.com/oasis-tcs/odata-vocabularies/blob/master/vocabularies/Org.OData.Capabilities.V1.md#BatchContinueOnErrorSupported"><code>Capabilities.BatchContinueOnErrorSupported</code></a>,
see<b> </b><a href="#ODataVocCap">OData-VocCap</a>.</p>

<p class=MsoNormal>The <span style='font-family:"Courier New";color:black;
background:white'>continue-on-error</span> preference SHOULD NOT be applied to
individual requests within a batch. </p>

<p class=MsoNormal>Note: The <span style='font-family:"Courier New";color:black;
background:white'>continue-on-error</span> preference was named <span
style='font-family:"Courier New";color:black;background:white'>odata.continue-on-error</span>
in OData version 4.0. Services that support the<span style='font-family:"Courier New";
color:black;background:white'> continue-on-error</span> preference SHOULD also
support <span style='font-family:"Courier New";color:black;background:white'>odata.continue-on-error</span>
for OData 4.0 clients and clients SHOULD use <span style='font-family:"Courier New";
color:black;background:white'>odata.continue-on-error</span> for compatibility
with OData 4.0 services.</p>

<h4><a
href="#sec_Preferenceincludeannotationsodatainc">Preference <code>include-annotations</code> (<code>odata.include-annotations</code>)</a></h4>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt'>The <code>include-annotations</code> preference in a
request for <a href="#sec_RequestingData">data</a> or <a
href="#sec_MetadataDocumentRequest">metadata</a> is used to specify the set of
annotations the client requests to be included, where applicable, in the
response. </p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt'>The value of
the <code>include-annotations</code>
preference is a comma-separated list of
namespace-qualified term names or term name patterns to include or exclude, with
<code>*</code> as a wildcard
for name segments. Term names and term name patterns can optionally be followed
by a hash (<code>#</code>)
character and an annotation qualifier. The full syntax of the <code>include-annotations</code> preference is
defined in <a href="#ODataABNF">OData-ABNF</a>.</p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt'>The most specific identifier always takes precedence, with
an explicit name taking precedence over a name pattern, and a longer pattern
taking precedence over a shorter pattern. If the same identifier value is
requested to both be excluded and included the behavior is undefined; the
service MAY return or omit the specified vocabulary but MUST NOT raise an
exception. </p>

<p class=MsoCaption>Example 3: a <code>Prefer</code>
header requesting all annotations within a metadata document to be returned</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>Prefer: include-annotations=&quot;*&quot; </p>

</div>

<p class=MsoCaption>Example 4: a <code>Prefer</code>
header requesting that no annotations are returned</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>Prefer: include-annotations=&quot;-*&quot; </p>

</div>

<p class=MsoCaption>Example 5: a <code>Prefer</code>
header requesting that all annotations defined under the &quot;display&quot;
namespace (recursively) be returned</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>Prefer: include-annotations=&quot;display.*&quot; </p>

</div>

<p class=MsoCaption>Example 6: a <code>Prefer</code>
header requesting that the annotation with the term name <code>subject</code>
within the <code>display</code> namespace be returned</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>Prefer: include-annotations=&quot;display.subject&quot;</p>

</div>

<p class=MsoCaption>Example 7: a <code>Prefer</code>
header requesting that all annotations defined under the &quot;display&quot;
namespace (recursively) with the qualifier “tablet” be returned</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>Prefer: include-annotations=&quot;display.*#tablet&quot;</p>

</div>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt'>The <code>include-annotations</code> preference is only a hint to the service. The service MAY
ignore the preference and is free to decide whether or not to return
annotations not specified in the <code>include-annotations</code> preference. </p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt'>In the case
that the client has specified the <code>include-annotations</code>
preference in the request, the service SHOULD include a <a
href="#sec_HeaderPreferenceApplied"><code>Preference-Applied</code></a>
response header containing the <code>include-annotations</code>
preference to specify the annotations actually
included, where applicable, in the response. This value may differ from the
annotations requested in the <a href="#sec_HeaderPrefer"><code>Prefer</code></a> header
of the request. </p>

<p class=MsoNormal>If the <code>include-annotations</code>
preference is specified on an individual request within a batch, then it
specifies the preference for that individual request. Individual requests
within a batch that don’t include the <code>include-annotations</code>
preference inherit the preference of the overall batch request. </p>

<p class=MsoNormal>Note: The <span style='font-family:"Courier New";color:black;
background:white'>include-annotations </span>preference was named <span
style='font-family:"Courier New";color:black;background:white'>odata.include-annotations</span>
in OData version 4.0. Services that support the<span style='font-family:"Courier New";
color:black;background:white'> include-annotations </span>preference SHOULD
also support <span style='font-family:"Courier New";color:black;background:
white'>odata.include-annotations</span> for OData 4.0 clients and clients
SHOULD use <span style='font-family:"Courier New";color:black;background:white'>odata.include-annotations</span>
for compatibility with OData 4.0 services. If both <span style='font-family:
"Courier New";color:black;background:white'>include-annotations</span> and <span
style='font-family:"Courier New";color:black;background:white'>odata.include-annotations</span>
preferences are specified in the same request, the value of the <span
style='font-family:"Courier New";color:black;background:white'>include-annotations</span>
preference SHOULD be used.</p>

<h4>8.2.8.5
<a href="#sec_Preferencemaxpagesizeodatamaxpagesiz">Preference <code>maxpagesize</code> (<code>odata.maxpagesize</code>)</a></h4>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt'>The <code>maxpagesize</code> preference is used to
request that each collection within the response contain no more than the
number of items specified as the positive integer value of this preference. The syntax of the <code>maxpagesize</code>
preference is defined in <a href="#ODataABNF">OData-ABNF</a>.</p>

<p class=MsoCaption>Example 8: a request for customers and their orders would
result in a response containing one collection with customer entities and for
every customer a separate collection with order entities. The client could
specify <code>maxpagesize=50 </code>in order
to request that each page of results contain a maximum of 50 customers, each
with a maximum of 50 orders. </p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt'>If a
collection within the result contains more than the specified <span
class=Keyword>maxpagesize</span>, the collection SHOULD be <a
href="#sec_ServerDrivenPaging">a partial set of the results</a> with a <a
href="#sec_ServerDrivenPaging">next link</a> to the next page of results. The
client MAY specify a different value for this preference with every request
following a next link.</p>

<p class=MsoCaption>In the example given above, the result page should include
a next link for the customer collection, if there are more than 50 customers,
and additional next links for all returned orders collections with more than 50
entities.</p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt'>If the
client has specified the <code>maxpagesize</code>
preference in the request, and the service limits the number of items in
collections within the response through <a href="#sec_ServerDrivenPaging">server-driven
paging</a>, the service MAY include a <a href="#sec_HeaderPreferenceApplied"><code>Preference-Applied</code></a><code> </code>response header containing the <code>maxpagesize</code> preference and the maximum page size applied.
This value may differ from the value requested by the client.</p>

<p class=MsoNormal>The <code>maxpagesize</code>
preference SHOULD NOT be applied to a batch request, but MAY be applied to
individual requests within a batch. </p>

<p class=MsoNormal>Note: The <code>maxpagesize</code>
preference was named <span style='font-family:"Courier New";color:black;
background:white'>odata.</span><code>maxpagesize</code>
in OData version 4.0. Services that support the<span style='font-family:"Courier New";
color:black;background:white'> </span><code>maxpagesize</code>
preference SHOULD also support <span style='font-family:"Courier New";
color:black;background:white'>odata.</span><code>maxpagesize</code>
for OData 4.0 clients and clients SHOULD use <span style='font-family:"Courier New";
color:black;background:white'>odata.</span><code>maxpagesize</code>
for compatibility with OData 4.0 services. If both <code>maxpagesize</code> and <span style='font-family:"Courier New";
color:black;background:white'>odata.</span><code>maxpagesize</code>
preferences are specified in the same request, the value of the <code>maxpagesize</code> preference SHOULD be used.</p>

<h4>8.2.8.6 <a href="#sec_Preferenceomitvalues">Preference
<code>omit-values</code></a></h4>

<p class=MsoNormal>The <code>omit-values</code> preference
specifies values that MAY be omitted from a response payload. Valid values are <code>nulls</code> or <code>defaults</code>.</p>

<p class=MsoNormal>If <code>nulls</code> is specified, then the
service MAY omit properties containing null values from the response, in which
case it MUST specify the <code>Preference-Applied</code>
response header with <code>omit-values=nulls</code>. </p>

<p class=MsoNormal>If <code>defaults</code> is specified, then
the service MAY omit properties containing default values from the response,
including nulls for properties that have no other defined default value. Nulls
MUST be included for properties that have a non-null default value defined. If
the service omits default values, it MUST specify the <code>Preference-Applied</code>
response header with <code>omit-values=defaults</code>.</p>

<p class=MsoNormal>Properties with instance annotations are not affected by
this preference and MUST be included in the payload if they would be included
without this preference. Clients MUST NOT try to reconstruct a null or default
value for properties for which an instance annotation is present and no
property value is present, for example if the property is omitted due to
permissions and has been replaced with the instance annotation <code>Core.Permissions</code> and a value of <code>None</code>,
see  <a href="#ODataVocCore">OData-VocCore</a>.</p>

<p class=MsoNormal>Properties with null or default values MUST be included in
delta payloads, if modified.</p>

<p class=MsoNormal>The response to a POST operation MUST include any properties
not set to their default value, and the response to a PUT/PATCH operation MUST
include any properties whose values were changed as part of the operation. </p>

<p class=MsoNormal>The <code>omit-values</code> preference does
not affect a request payload.</p>

<h4>8.2.8.7 <a
href="#sec_Preferencereturnrepresentationandret">Preference <code>return=representation</code> and <code>return=minimal</code></a></h4>

<p class=MsoNormal style='margin-left:99.25pt;text-indent:-99.25pt'>The <code>return=representation</code> and <code>return=minimal</code> preferences are defined in <a
href="#HTTPPREFER"><b>[RFC7240]</b></a>.</p>

<p class=MsoNormal>In OData, <code>return=representation</code> or <code>return=minimal</code> is defined for
use with a <code>POST</code>, <code>PUT</code>, or <code>PATCH</code> <a
href="#sec_DataModification">Data Modification Request</a>, or with an <a href="#sec_Actions">Action Request</a>. Specifying a preference of <code>return=representation</code> or <code>return=minimal</code> in a <code>GET</code> or <code>DELETE</code> request does not have any effect. </p>

<p class=MsoNormal>A preference of <code>return=representation</code> or <code>return=minimal</code> is allowed on an
individual <a href="#sec_DataModification">Data Modification Request</a> or <a href="#sec_Actions">Action Request</a><span
class=MsoHyperlink> </span>within a batch, subject to
the same restrictions, but SHOULD return a <code>4xx
Client Error</code> if specified on the batch request
itself. </p>

<p class=MsoNormal>A preference of <code>return=minimal</code>
requests that the service invoke the request but does not return content in the
response. The service MAY apply this preference by returning <a
href="#sec_ResponseCode204NoContent"><code>204
No Content</code></a><code> </code>in which
case it MAY include a <a href="#sec_HeaderPreferenceApplied"><code>Preference-Applied</code></a><span
class=Datatype><span style='font-family:"Arial",sans-serif'> </span></span>response
header containing the <code>return=minimal </code>preference<span
style='font-family:"Calibri",sans-serif'>.</span></p>

<p class=MsoNormal>A preference of<span style='font-family:"Calibri",sans-serif'>
</span><code>return=representation</code> requests that the
service invokes the request and returns the modified resource. The service MAY
apply this preference by returning the representation of the successfully
modified resource in the body of the response, formatted according to the rules
specified for the requested <a href="#sec_Formats">format</a><span
class=Hyperlink1>. In this case the service</span> MAY include a <a
href="#sec_HeaderPreferenceApplied"><code>Preference-Applied</code></a>
response header containing the <code>return=representation</code>
preference.</p>

<p class=MsoNormal>The <code>return</code>
preference SHOULD NOT be applied to a batch request, but MAY be applied to
individual requests within a batch. </p>

<h4>8.2.8.8
<a href="#sec_Preferencerespondasync">Preference <code>respond-async</code></a></h4>

<p class=MsoNormal>The <code>respond-async </code>preference, as
defined in <a href="#HTTPPREFER"><b>[RFC7240]</b></a>, allows clients to
request that the service process the request asynchronously. </p>

<p class=MsoNormal>If the client has specified<code> respond-async</code>
in the request, the service MAY process the request asynchronously and return a
<a href="#sec_ResponseCode202Accepted"><code>202
Accepted</code></a> response.</p>

<p class=MsoNormal>The <code>respond-async</code> preference MAY
be used for batch requests, in which case it applies to the batch request as a
whole and not to individual requests within the batch request.</p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt'>In the case
that the service applies the <code>respond-async</code>
preference it MUST include a <a href="#sec_HeaderPreferenceApplied"><code>Preference-Applied</code></a><code> </code>response header containing the <code>respond-async</code>
preference.</p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt'>A service
MAY specify the support for the <code>respond-async</code>
preference using an annotation with term <a
href="https://github.com/oasis-tcs/odata-vocabularies/blob/master/vocabularies/Org.OData.Capabilities.V1.md#AsynchronousRequestsSupported"><code>Capabilities.AsynchronousRequestsSupported</code></a>,
see<b> </b><a href="#ODataVocCap">OData-VocCap</a>.</p>

<p class=MsoCaption>Example 9: a service receiving the following header might
choose to respond </p>

<p class=MsoCaption style='margin-left:55.85pt;text-indent:-.25in;page-break-after:
avoid'><span style='font-family:Symbol;font-style:normal'>· </span>asynchronously if the synchronous processing of the request will
take longer than 10 seconds</p>

<p class=MsoCaption style='margin-left:55.85pt;text-indent:-.25in;page-break-after:
avoid'><span style='font-family:Symbol;font-style:normal'>· </span>synchronously after 5 seconds</p>

<p class=MsoCaption style='margin-left:55.85pt;text-indent:-.25in;page-break-after:
avoid'><span style='font-family:Symbol;font-style:normal'>· </span>asynchronously (ignoring the <a href="#sec_Preferencewait"><code>wait</code></a> preference)</p>

<p class=MsoCaption style='margin-left:55.85pt;text-indent:-.25in;page-break-after:
avoid'><span style='font-family:Symbol;font-style:normal'>· </span>synchronously after 15 seconds (ignoring <code>respond-</code>async
preference and the <a href="#sec_Preferencewait"><code>wait</code></a>
preference)</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>Prefer: respond-async, wait=10</p>

</div>

<h4>8.2.8.9 <a
href="#sec_Preferencetrackchangesodatatrackchan">Preference <code>track-changes</code> (<code>odata.track-changes</code>)</a></h4>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt'>The <code>track-changes</code> preference is used to
request that the service return a<span class=MsoHyperlink> </span><a
href="#sec_DeltaLinks">delta link</a> that can subsequently be used to obtain <a
href="#sec_RequestingChanges">changes </a>(deltas) to this result. The syntax of the <code>track-changes
</code>preference is defined in <a href="#ODataABNF">OData-ABNF</a>.</p>

<p class=MsoNormal>For <a href="#sec_ServerDrivenPaging">paged results</a>, the
preference MUST be specified on the initial request. Services MUST ignore the <a
href="#sec_Preferencetrackchangesodatatrackchan"><code>track-changes</code></a>
preference if applied to the next link.</p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt'>The delta
link MUST only be returned on the final page of results in place of the next
link.</p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt'>The service includes
a <a href="#sec_HeaderPreferenceApplied"><code>Preference-Applied</code></a><span
class=Datatype><span style='font-family:"Arial",sans-serif'> </span></span>response
header in the first page of the response containing the <code>track-changes</code>
preference to signal that changes are being tracked.</p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt'>A service
MAY specify the support for the <code>track-changes</code>
preference using an annotation with term <a
href="https://github.com/oasis-tcs/odata-vocabularies/blob/master/vocabularies/Org.OData.Capabilities.V1.md#ChangeTracking"><code>Capabilities.ChangeTracking</code></a>, see<b>
</b><a href="#ODataVocCap">OData-VocCap</a>.</p>

<p class=MsoNormal>The <code>track-changes</code> preference
SHOULD NOT be applied to a batch request, but MAY be applied to individual
requests within a batch.</p>

<p class=MsoNormal>Note: The <code>track-changes</code>
preference was named <span style='font-family:"Courier New";color:black;
background:white'>odata</span><code>.track-changes</code> in
OData version 4.0. Services that support the<span style='font-family:"Courier New";
color:black;background:white'> </span><code>track-changes</code>
preference SHOULD also support <span style='font-family:"Courier New";
color:black;background:white'>odata.</span><code>track-changes</code>
for OData 4.0 clients and clients SHOULD use <span style='font-family:"Courier New";
color:black;background:white'>odata.</span><code>track-changes</code>
for compatibility with OData 4.0 services.</p>

<h4><a
href="#sec_Preferencewait">Preference <code>wait</code></a></h4>

<p class=MsoNormal>The <code>wait</code> preference, as defined
in <a href="#HTTPPREFER"><b>[RFC7240]</b></a>, is used to establish an upper
bound on the length of time, in seconds, the client is prepared to wait for the
service to process the request synchronously once it has been received. </p>

<p class=MsoNormal>If the <a href="#sec_Preferencerespondasync"><code>respond-async</code></a> preference is also
specified, the client requests that the service respond asynchronously after
the specified length of time. </p>

<p class=MsoNormal>If the <code>respond-async</code>
preference has not been specified, the service MAY interpret the <code>wait</code> as a request to timeout after the
specified period of time. </p>

<p class=MsoNormal>If the <span style='font-family:"Courier New";color:black;
background:white'>wait</span> preference is specified on an individual request
within a batch, then it specifies the maximum amount of time to wait for that
individual request. If the <span style='font-family:"Courier New";color:black;
background:white'>wait</span> preference is specified on a batch, then it
specifies the maximum time to wait for the entire batch.</p>

<h2>8.3 Response
Headers</h2>

<p class=MsoNormal>In addition to the <a href="#sec_CommonHeaders">Common
Headers</a>, the following response headers have defined meaning in OData.</p>

<h3>8.3.1 <a href="#sec_HeaderAsyncResult">Header <code>AsyncResult</code></a></h3>

<p class=MsoNormal>A <span class=Datatype><span style='font-family:"Arial",sans-serif'>4.01</span></span>
service MUST include the <code>AsyncResult</code> header in <a
href="#sec_ResponseCode200OK"><code>200 OK</code></a><span
class=MsoHyperlink><code> </code></span>response
from a status monitor resource in order to indicate the final <a
href="#sec_CommonResponseStatusCodes">HTTP Response Status Code</a> of an <a
href="#sec_AsynchronousRequests">asynchronously executed request</a>.</p>

<p class=MsoNormal>The <code>AsyncResult</code> header SHOULD
NOT be applied to individual responses within a batch.</p>

<h3><a href="#sec_HeaderETag">Header <code>ETag</code></a></h3>

<p class=MsoNormal>A response MAY include an <code>ETag</code>
header, see <a href="#HTTPConditional"><b>[RFC7232]</b></a>. Services MUST include
this header if they require an ETag to be specified when modifying the resource.</p>

<p class=MsoNormal>Services MUST support specifying the value returned in the <span
class=VerbatimChar>ETag</span> header in an <a href="#sec_HeaderIfNoneMatch"><code>If-None-Match</code></a> header of a
subsequent <a href="#sec_RequestingData">Data Request</a> for the resource.
Clients MUST specify the value returned in the <span class=VerbatimChar>ETag</span>
header, or star (<code>*</code>), in an <a
href="#sec_HeaderIfMatch"><code>If-Match</code></a>
header of a subsequent <a href="#sec_DataModification">Data Modification
Request</a> or <a href="#sec_Actions">Action Request</a> in order to apply <a
href="#sec_UseofETagsforAvoidingUpdateConflicts">optimistic concurrency</a>
control in updating, deleting, or invoking an action bound to the resource.</p>

<p class=MsoNormal>As OData allows multiple formats for representing the same
structured information, services SHOULD use weak ETags that only depend on the
representation-independent entity state. A strong ETag MUST change whenever the
representation of an entity changes, so it has to depend on the <a
href="#sec_HeaderContentType"><code>Content-Type</code></a>,
the <a href="#sec_HeaderContentEncoding"><code>Content-Encoding</code></a>,
and potentially other characteristics of the response.</p>

<p class=MsoNormal>An <code>ETag</code>
header MAY also be returned on a <a href="#sec_MetadataDocumentRequest">metadata
document request</a> or <a href="#sec_ServiceDocumentRequest">service document
request</a> to allow the client subsequently to make a conditional request for
the metadata or service document. Clients can also compare the value of the <code>ETag</code> header returned from a metadata document request to
the metadata ETag returned in a response in order to verify the version of the
metadata used to generate that response.</p>

<p class=MsoNormal>The <code>ETag</code> header SHOULD NOT be
included for the overall batch response, but MAY be included in individual
responses within a batch.</p>

<h3>8.3.3 <a href="#sec_HeaderLocation">Header <code>Location</code></a></h3>

<p class=MsoNormal>The <code>Location</code>
header MUST be returned in the response from a <a href="#sec_CreateanEntity">Create
Entity</a> or <a href="#sec_CreateaMediaEntity">Create Media Entity</a> request
to specify the edit URL, or for read-only entities the read URL, of the created
entity, and in responses returning <a href="#sec_ResponseCode202Accepted"><code>202 Accepted</code></a> to specify the URL
that the client can use to request the status of an asynchronous request.</p>

<p class=MsoNormal>The <code>Location</code> header SHOULD NOT
be included for the overall batch response, but MAY be included in individual
responses within a batch.</p>

<h3>8.3.4 <a href="#sec_HeaderODataEntityId">Header
<code>OData-EntityId</code></a></h3>

<p class=MsoNormal>A response to a <a href="#sec_CreateanEntity">create</a><span
class=MsoHyperlink> </span><span class=MsoHyperlink><span style='color:windowtext'>or
</span></span><a href="#sec_UpsertanEntity">upsert</a><span class=MsoHyperlink>
operation</span> that returns <a href="#sec_ResponseCode204NoContent"><code>204 </code><code>No
Content</code></a><span style='font-family:"Calibri",sans-serif'> </span>MUST
include an <span style='font-family:"Courier New";color:black;background:white'>OData-</span><code>EntityId</code> response header. The value of the header is the <a
href="#sec_EntityIdsandEntityReferences">entity-id</a> of the entity that was
acted on by the request. The syntax of the <span
style='font-family:"Courier New";color:black;background:white'>OData-</span><code>EntityId</code> header is defined in <a href="#ODataABNF">OData-ABNF</a>.</p>

<p class=MsoNormal>The <span style='font-family:"Courier New";color:black;
background:white'>OData-</span><code>EntityID</code> header
SHOULD NOT be included for the overall batch response, but MAY be included in
individual responses within a batch.</p>

<h3><a href="#sec_HeaderODataError">Header
<code>OData-Error</code></a></h3>

<p class=MsoNormal>A response with an <a href="#sec_InStreamErrors">in-stream
error</a> MAY include an <code>OData-Error</code> trailing
header if the transport protocol supports trailing headers (e.g. HTTP/1.1 with
chunked transfer encoding, or HTTP/2).</p>

<p class=MsoNormal>The value of this trailing header is a standard OData error
response according to the OData response format, encoded suitably for transport
in a header, see e.g. <a href="#ODataJSON">OData-JSON</a>.</p>

<h3><a
href="#sec_HeaderPreferenceApplied">Header <code>Preference-Applied</code></a></h3>

<p class=MsoNormal>In a response to a request that specifies a <a
href="#sec_HeaderPrefer"><code>Prefer</code></a>
header, a service MAY include a <code>Preference-Applied</code>
header, as defined in <a href="#HTTPPREFER"><b>[RFC7240]</b></a>, specifying
how individual preferences within the request were handled.</p>

<p class=MsoNormal>The value of the <code>Preference-Applied</code>
header is a comma-separated list of preferences applied in the response. For
more information on the individual preferences, see the <a
href="#sec_HeaderPrefer"><code>Prefer</code></a>
header.</p>

<p class=MsoNormal>If the <span style='font-family:"Courier New";color:black;
background:white'>Preference-Applied</span> header is specified on an
individual response within a batch, then it specifies the preferences applied
to that individual response. If the <span style='font-family:"Courier New";
color:black;background:white'>Preference-Applied</span> header is specified on
a batch response, then it specifies the preferences applied to the overall
batch. </p>

<h3>8.3.7 <a
href="#sec_HeaderRetryAfter">Header <code>Retry-After</code></a></h3>

<p class=MsoNormal>A service MAY include a <code>Retry-After</code>
header, as defined in <a href="#HTTPSemantic"><b>[RFC7231]</b></a><span
class=MsoHyperlink><b>,</b></span> in <a href="#sec_ResponseCode202Accepted"><code>202 Accepted</code></a> and in <a
href="#sec_ResponseCode3xxRedirection"><code>3xx
Redirect</code></a> responses</p>

<p class=MsoNormal>The <code>Retry-After</code> header specifies
the duration of time, in seconds, that the client is asked to wait before
retrying the request or issuing a request to the resource returned as the value
of the <a href="#sec_HeaderLocation"><code>Location</code>
header</a>.</p>

<h3><a href="#sec_HeaderVary">Header <code>Vary</code></a></h3>

<p class=MsoNormal>If a response varies depending on the <a
href="#sec_HeaderODataVersion"><code>OData-Version</code></a>
of the response, the service MUST include a <code>Vary</code> header
listing the <a href="#sec_HeaderODataMaxVersion"><code>OData-MaxVersion</code></a>
request header field to allow correct caching of the response.</p>

<p class=MsoNormal>If a response varies depending on the applied preferences (<a
href="#sec_Preferenceallowentityreferencesodata"><code>allow-entityreferences</code></a>,
<a href="#sec_Preferenceincludeannotationsodatainc"><code>include-annotations</code></a>, <a
href="#sec_Preferenceomitvalues"><code>omit-values</code></a><span
class=Datatype><span style='font-family:"Arial",sans-serif'>, </span></span><a
href="#sec_Preferencereturnrepresentationandret"><code>return</code></a>),
the service MUST include a <code>Vary</code> header listing the <a
href="#sec_HeaderPrefer"><code>Prefer</code></a>
request header field to allow correct caching of the response. </p>

<p class=MsoNormal>Alternatively, the server MAY include a <code>Vary</code> header with the special value <code>*</code>
as defined by <a href="#HTTPSemantic"><b>[RFC7231]</b></a>, Section 8.2.1. Note
that this will make it impossible for a proxy to cache the response, see <a
href="#HTTPPREFER"><b>[RFC7240]</b></a><span class=MsoHyperlink><b>.</b></span></p>

<div style='border:none;border-top:solid gray 1.0pt;padding:6.0pt 0in 0in 0in'>

<h1>9 Common Response Status Codes</h1>

</div>

<p class=MsoNormal>An OData service MAY respond to any request using any valid
HTTP status code appropriate for the request. A service SHOULD be as specific
as possible in its choice of HTTP status codes.</p>

<p class=MsoNormal>The following represent the most common success response
codes. In some cases, a service MAY respond with a more specific success code.</p>

<h2>9.1 Success
Responses</h2>

<p class=MsoNormal>The following response codes represent successful requests.</p>

<h3>9.1.1 <a
href="#sec_ResponseCode200OK">Response Code <code>200
OK</code><code> </code></a> </h3>

<p class=MsoNormal>A request that does not create a resource returns <code>200 OK</code> if it is completed successfully and the value of
the resource is not <code>null</code>. In this case, the
response body MUST contain the value of the resource specified in the request
URL.</p>

<h3>9.1.2 <a
href="#sec_ResponseCode201Created">Response Code <code>201
Created</code></a></h3>

<p class=MsoNormal>A <a href="#sec_CreateanEntity">Create Entity</a>, <a
href="#sec_CreateaMediaEntity">Create Media Entity</a>, or <a
href="#sec_InvokinganAction">Invoke Action</a> request that successfully
creates a resource returns <code>201 Created</code>. In this
case, the response body MUST contain the resource created.</p>

<h3>9.1.3 <a
href="#sec_ResponseCode202Accepted">Response Code <code>202 Accepted</code></a></h3>

<p class=MsoNormal><code>202 Accepted</code> indicates that the <a
href="#sec_DataServiceRequests">Data Service Request</a> has been accepted and
has not yet completed executing asynchronously. The asynchronous handling of
requests is defined in the sections on <a href="#sec_AsynchronousRequests">Asynchronous
Requests</a> and <a href="#sec_AsynchronousBatchRequests">Asynchronous Batch
Requests</a>..</p>

<h3>9.1.4 <a
href="#sec_ResponseCode204NoContent">Response Code <code>204 No Content</code></a></h3>

<p class=MsoNormal>A request returns <code>204 No Content</code>
if the requested resource has the <code>null</code> value, or if
the service applies a <a href="#sec_Preferencereturnrepresentationandret"><code>return=minimal</code> preference</a>. In this
case, the response body MUST be empty.</p>

<p class=MsoNormal>As defined in <a href="#HTTPSemantic"><b>[RFC7231]</b></a>,
a <a href="#sec_DataModification">Data Modification Request</a> that responds
with <code>204 No Content</code><span class=Datatype><span
style='font-family:"Arial",sans-serif'> MAY </span></span>include an <code>ETag</code> header with a value reflecting the result of the
data modification if and only if the client can reasonably “know” the new representation
of the resource without actually receiving it. For a <code>PUT</code>
request this means that the response body of a corresponding <code>200 OK</code> or <code>201 Created</code>
response would have been identical to the request body, i.e. no server-side
modification of values sent in the request body, no server-calculated values
etc. For a <code>PATCH</code> request this means that the
response body of a corresponding <code>200 OK</code> or <code>201 Created</code> response would have consisted of all values
sent in the request body, plus (for values not sent in the request body) server-side
values corresponding to the <code>ETag</code> value sent in the <code>If-Match</code> header of the <code>PATCH</code>
request, i.e. the previous values “known” to the client.</p>

<h3>9.1.5 <a
href="#sec_ResponseCode3xxRedirection">Response Code <code>3xx Redirection</code></a></h3>

<p class=MsoNormal>As per <a href="#HTTPSemantic"><b>[RFC7231]</b></a>, a <code>3xx Redirection</code> indicates that further action needs to be
taken by the client in order to fulfill the request. In this case, the response
SHOULD include a <a href="#sec_HeaderLocation"><code>Location</code>
header</a><span class=MsoHyperlink>, </span>as appropriate, with the URL from
which the result can be obtained; it MAY include a <a
href="#sec_HeaderRetryAfter"><code>Retry-After</code>
header</a>.</p>

<h3>9.1.6 <a
href="#sec_ResponseCode304NotModified">Response Code <code>304 Not Modified</code></a></h3>

<p class=MsoNormal>As per <a href="#HTTPConditional"><b>[RFC7232]</b></a>, a <code>304 Not Modified</code> is returned when the
client performs a <code>GET</code> request containing an <a
href="#sec_HeaderIfNoneMatch"><span class=Datatype><span style='color:windowtext'>If-None-Match</span></span></a>
header and the content has not changed. In this case the response SHOULD NOT
include other headers in order to prevent inconsistencies between cached
entity-bodies and updated headers.</p>

<p class=MsoNormal>The service MUST ensure that no observable change has
occurred to the state of the service as a result of any request that returns a <code>304 Not Modified</code>.</p>

<h2>9.2 <a href="#sec_ClientErrorResponses">Client
Error Responses </a> </h2>

<p class=MsoNormal>Error codes in the <code>4xx</code> range
indicate a client error, such as a malformed request.</p>

<p class=MsoNormal>The service MUST ensure that no observable change has
occurred to the state of the service as a result of any request that returns an
error status code.</p>

<p class=MsoNormal>In the case that a response body is defined for the error
code, the body of the error is as defined for the appropriate <a
href="#sec_Formats">format</a>.</p>

<h3>9.2.1 <a
href="#sec_ResponseCode404NotFound">Response Code <code>404 Not Found</code></a></h3>

<p class=MsoNormal><code>404 Not Found </code>indicates that the
resource specified by the request URL does not exist. The response body MAY
provide additional information.</p>

<h3>9.2.2 <a
href="#sec_ResponseCode405MethodNotAllowed">Response Code <code>405 Method Not Allowed</code></a></h3>

<p class=MsoNormal><code>405 Method Not Allowed</code> indicates
that the resource specified by the request URL does not support the request
method. In this case the response MUST include an <code>Allow</code>
header containing a list of valid request methods for the requested resource as
defined in <a href="#HTTPSemantic"><b>[RFC7231]</b></a>.</p>

<h3>9.2.3 <a
href="#sec_ResponseCode406NotAcceptable">Response Code <code>406 Not Acceptable</code></a></h3>

<p class=MsoNormal><a name="_Toc477876608"><code>406 Not Acceptable</code>
indicates that the resource specified by the request URL does not have a
current representation that would be acceptable for the client according to the
request headers </a><a href="#sec_HeaderAccept"><code>Accept</code></a>,
<a href="#sec_HeaderAcceptCharset"><code>Accept-Charset</code></a>,
and <a href="#sec_HeaderAcceptLanguage"><code>Accept-Language</code></a>,
and that the service is unwilling to supply a default representation.</p>

<h3><a
href="#sec_ResponseCode410Gone">Response Code <code>410
Gone</code></a></h3>

<p class=MsoNormal><code>410 Gone</code> indicates that the
requested resource is no longer available. This can happen if a client has
waited too long to follow a <a href="#sec_DeltaLinks">delta link</a> or a <a
href="#sec_AsynchronousRequests">status-monitor-resource</a> link, or a next
link on a collection that was requested with <a
href="#sec_HeaderIsolationODataIsolation">snapshot isolation</a>.</p>

<h3>9.2.5 <a
href="#sec_ResponseCode412PreconditionFailed">Response Code <code>412 Precondition Failed</code></a></h3>

<p class=MsoNormal>As defined in <a href="#HTTPConditional"><b>[RFC7232]</b></a><span
class=MsoHyperlink>,<b> </b></span><code>412 Precondition Failed</code>
indicates that the client has performed a conditional request and the resource
fails the condition. The service MUST ensure that no observable change occurs
as a result of the request.</p>

<h3><a
href="#sec_ResponseCode424FailedDependency">Response Code <code>424 Failed Dependency</code></a></h3>

<p class=MsoNormal><code>424 Failed Dependency</code> indicates
that a request was not performed due to a failed dependency; for example, a
request within a batch that depended upon a request that failed.</p>

<h2>Server Error Responses</h2>

<p class=MsoNormal>As defined in <a href="#HTTPSemantic"><b>[RFC7231]</b></a><span
class=MsoHyperlink>, </span>error codes in the <code>5xx</code>
range indicate service errors<span class=MsoHyperlink>.</span></p>

<h3>9.3.1 <a
href="#sec_ResponseCode501NotImplemented">Response Code <code>501 Not Implemented</code></a></h3>

<p class=MsoNormal>If the client requests functionality not implemented by the
OData Service, the service responds with <code>501 Not
Implemented</code> and SHOULD include a response body describing the functionality
not implemented.</p>

<h2>9.4 Error
Response Body</h2>

<p class=MsoNormal>The representation of an error response body is
format-specific. It consists at least of the following information:</p>

<p class=MsoListParagraphCxSpFirst style='text-indent:-.25in'><span
style='font-family:Symbol'>· </span><code>code</code>: required non-null, non-empty,
language-independent string. Its value is a service-defined error code. This
code serves as a sub-status for the HTTP error code specified in the response.</p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-.25in'><span
style='font-family:Symbol'>· </span><code>message</code>: required non-null,
non-empty, language-dependent, human-readable string describing the error. The&nbsp;<a href="#sec_HeaderContentLanguage"><code>Content-Language</code></a>&nbsp;header MUST contain the language code from <a
href="#rfc5646"><b>[RFC5646]</b></a> corresponding to
the language in which the value for message is written.</p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-.25in'><span
style='font-family:Symbol'>· </span><code>target</code>: optional nullable,
potentially empty string indicating the target of the error, for example, the
name of the property in error.</p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-.25in'><span
style='font-family:Symbol'>· </span><code>details</code>: optional, potentially empty
collection of structured instances with <code>code</code>, <code>message</code>, and <code>target</code> following
the rules above.</p>

<p class=MsoListParagraphCxSpLast style='text-indent:-.25in'><span
style='font-family:Symbol'>· </span><code>innererror</code>: optional structured
instance with service-defined content. </p>

<p class=MsoNormal>Service implementations SHOULD carefully consider which
information to include in production environments to guard against potential
security concerns around information disclosure.</p>

<h2>In-Stream
Errors</h2>

<p class=MsoNormal style='page-break-after:avoid'>In the case that the service
encounters an error after sending a success status to the client, the service
MUST leave the response malformed according to its <a
href="#sec_HeaderContentType">content-type</a>. Clients MUST treat the entire
response as being in error.</p>

<p class=MsoNormal style='page-break-after:avoid'>Services MAY include the
header <a href="#sec_HeaderODataError"><code>OData-Error</code></a>
as a trailing header if supported by the transport protocol (e.g. HTTP/1.1 with
chunked transfer encoding, or HTTP/2).</p>

<div style='border:none;border-top:solid gray 1.0pt;padding:6.0pt 0in 0in 0in'>

<h1>10 Context URL</h1>

</div>

<p class=MsoNormal>The <i>context URL</i> describes the content of the payload.
It consists of the canonical <a href="#sec_MetadataDocumentRequest">metadata
document URL</a> and a fragment identifying the relevant portion of the
metadata document. The context URL makes response payloads “self-contained”,
allowing a recipient to retrieve metadata, resolve references, and construct
canonical links omitted from response payloads in certain optimized formats.</p>

<p class=MsoNormal>Request payloads generally do not require context URLs as
the type of the payload can generally be determined from the request URL.</p>

<p class=MsoNormal>For details on how the context URL is used to describe a
payload, see the relevant sections in the particular format. </p>

<p class=MsoNormal>The following subsections describe how the context URL is
constructed for each category of payload by providing a <i>context URL template</i>.
The context URL template uses the following terms:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:4.0pt;
margin-left:35.7pt;text-indent:-17.85pt'><span style='font-family:Symbol'>· </span><code>{context-url}</code> is the canonical resource
path to the <code>$metadata</code> document,</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:4.0pt;
margin-left:35.7pt;text-indent:-17.85pt'><span style='font-family:Symbol'>· </span><code>{entity-set}</code> is the name of an entity
set or path to a containment navigation property,</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:4.0pt;
margin-left:35.7pt;text-indent:-17.85pt'><span style='font-family:Symbol'>· </span><code>{entity}</code> is the canonical URL for an
entity,</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:4.0pt;
margin-left:35.7pt;text-indent:-17.85pt'><span style='font-family:Symbol'>· </span><code>{singleton}</code> is the canonical URL for
a singleton entity,</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:4.0pt;
margin-left:35.7pt;text-indent:-17.85pt'><span style='font-family:Symbol'>· </span><code>{select-list}</code> is an optional
parenthesized comma-separated list of selected properties, instance
annotations, functions, and actions,</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:4.0pt;
margin-left:35.7pt;text-indent:-17.85pt'><span class=Datatype><span
style='font-family:Symbol'>· </span></span><code>{property-path}</code> is the path to
a structural property of the entity,</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:4.0pt;
margin-left:35.7pt;text-indent:-17.85pt'><span style='font-family:Symbol'>· </span><code>{type-name}</code> is a qualified type name,</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:4.0pt;
margin-left:35.7pt;text-indent:-17.85pt'><span style='font-family:Symbol'>· </span><code>{/type-name}</code> is an optional type-cast
segment containing the qualified name of a derived or implemented type prefixed
with a forward slash.</p>

<p class=MsoNormal>The full grammar for the context URL is defined in <a
href="#ODataABNF">OData-ABNF</a>. Note that the syntax of the context URL
is independent of whatever URL conventions the service uses for addressing
individual entities.</p>

<h2>Service Document</h2>

<p class=MsoNormal style='page-break-after:avoid'>Context URL template:</p>

<p class=SourceCode><code>{context-url}</code></p>

<p class=MsoNormal style='page-break-after:avoid'>The context URL of the
service document is the metadata document URL of the service.</p>

<p class=MsoCaption>Example 10: resource URL and corresponding context URL</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'><span
class=Datatype>http://host/service/</span></p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>http://host/service/$metadata</p>

</div>

<h2>Collection of Entities</h2>

<p class=MsoNormal style='page-break-after:avoid'>Context URL template:</p>

<p class=SourceCode><code>{context-url}#{entity-set}</code></p>

<p class=SourceCode>{context-url}#Collection({type-name})</p>

<p class=MsoNormal style='page-break-after:avoid'>If all entities in the
collection are members of one entity set, its name is the context URL fragment.
</p>

<p class=MsoCaption>Example 11: resource URL and corresponding context URL</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>http://host/service/Customers</p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>http://host/service/$metadata#Customers</p>

</div>

<p class=MsoNormal style='page-break-after:avoid'>If the entities are
contained, then <code>entity-set</code> is the top-level entity
set or singleton followed by the path to the containment navigation property of
the containing entity.</p>

<p class=MsoCaption>Example 12: resource URL and corresponding context URL for
contained entities</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>http://host/service/Orders(4711)/Items</p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>http://host/service/$metadata#Orders(4711)/Items</p>

</div>

<p class=MsoNormal style='page-break-after:avoid'>If the entities in the
response are not bound to a single entity set, such as from a function or
action with no entity set path, a function import or action import with no
specified entity set, or a navigation property with no navigation property
binding, the context URL specifies the type of the returned entity collection. </p>

<h2>Entity</h2>

<p class=MsoNormal style='page-break-after:avoid'>Context URL template: </p>

<p class=SourceCode style='page-break-after:avoid'><code>{context-url}#{entity-set}/$entity</code></p>

<p class=SourceCode style='page-break-after:avoid'>{context-url}#{type-name}</p>

<p class=MsoNormal style='page-break-after:avoid'>If a response or response
part is a single entity of the declared type of an entity set, <code>/$entity</code> is appended to the context URL.</p>

<p class=MsoCaption>Example 13: resource URL and corresponding context URL</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'><span
class=Datatype>http://host/service/Customers(1)</span></p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>http://host/service/$metadata#Customers/$entity</p>

</div>

<p class=MsoNormal style='page-break-after:avoid'>If the entity is contained,
then <code>entity-set</code> is the canonical URL for the
containment navigation property of the containing entity, e.g.
Orders(4711)/Items.</p>

<p class=MsoCaption>Example 14: resource URL and corresponding context URL for
contained entity</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>http://host/service/Orders(4711)/Items(1)</p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>http://host/service/$metadata#Orders(4711)/Items/$entity</p>

</div>

<p class=MsoNormal style='page-break-after:avoid'>If the response is not bound
to a single entity set, such as an entity returned from a function or action
with no entity set path, a function import or action import with no specified
entity set, or a navigation property with no navigation property binding, the
context URL specifies the type of the returned entity. </p>

<h2>Singleton</h2>

<p class=MsoNormal style='page-break-after:avoid'>Context URL template:</p>

<p class=SourceCode><code>{context-url}#{singleton}</code></p>

<p class=MsoNormal style='page-break-after:avoid'>If a response or response
part is a singleton, its name is the context URL fragment. </p>

<p class=MsoCaption>Example 15: resource URL and corresponding context URL</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'><span
class=Datatype>http://host/service/MainSupplier</span></p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'><span
style='color:black'>http://host/service/$metadata#<code>MainSupplier</code></span></p>

</div>

<h2>Collection of Derived Entities</h2>

<p class=MsoNormal style='page-break-after:avoid'>Context URL template:</p>

<p class=SourceCode><code>{context-url}#{entity-set}{/type-name}</code></p>

<p class=MsoNormal style='page-break-after:avoid'>If an entity set consists
exclusively of derived entities, a type-cast segment is added to the context
URL.</p>

<p class=MsoCaption>Example 16: resource URL and corresponding context URL</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>http://host/service/Customers/Model.VipCustomer</p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>http://host/service/$metadata#Customers/Model.VipCustomer</p>

</div>

<h2>Derived Entity</h2>

<p class=MsoNormal style='page-break-after:avoid'>Context URL template:</p>

<p class=SourceCode><code>{context-url}#{entity-set}{/type-name}/$entity</code></p>

<p class=MsoNormal style='page-break-after:avoid'>If a response or response
part is a single entity of a type derived from the declared type of an entity
set, a type-cast segment is appended to the entity set name.</p>

<p class=MsoCaption>Example 17: resource URL and corresponding context URL</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'><span
class=Datatype>http://host/service/Customers(2)/Model.VipCustomer</span></p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>http://host/service/$metadata#Customers/Model.VipCustomer/$entity</p>

</div>

<h2>Collection of Projected
Entities</h2>

<p class=MsoNormal style='page-break-after:avoid'>Context URL templates:</p>

<p class=SourceCode style='page-break-after:avoid'><code>{context-url}#{entity-set}{/type-name}{select-list}</code></p>

<p class=SourceCode style='page-break-after:avoid'><code>{context-url}#Collection({type-name}){select-list}</code></p>

<p class=MsoNormal style='page-break-after:avoid'>If a result contains only a
subset of properties, the parenthesized comma-separated list of the selected
defined or dynamic properties, instance annotations, navigation properties,
functions, and actions is appended to the context URL representing the <a
href="#sec_CollectionofEntities">collection of entities</a>. </p>

<p class=MsoNormal style='page-break-after:avoid'>Regardless of how contained
structural properties are represented in the request URL (as paths or as select
options) they are represented in the context URL using path syntax, as defined
in OData 4.0. </p>

<p class=MsoNormal style='page-break-after:avoid'>The shortcut <code>*</code> represents the list of all structural properties. Properties
defined on types derived from the declared type of the entity set (or type
specified in the type-cast segment if specified) are prefixed with the
qualified name of the derived type as defined in <a href="#ODataABNF">OData-ABNF</a>.</p>

<p class=MsoNormal style='page-break-after:avoid'>The list also contains explicitly
selected or expanded instance annotations. It is possible to select or expand only
instance annotations, in which case only those selected or expanded annotations
appear in the result. Note that annotations specified only in the <a
href="#sec_Preferenceincludeannotationsodatainc"><code>include-annotations</code></a>
preference do not appear in the context URL and do not affect the
selected/expanded properties.</p>

<p class=MsoNormal style='page-break-after:avoid'>Operations in the context URL
are represented using the namespace- or alias-qualified name. Function names
suffixed with parentheses represent a specific overload, while function names
without parentheses represent all overloads of the function.</p>

<p class=MsoNormal style='page-break-after:avoid'>OData 4.01 responses MAY use
the shortcut pattern <code>{namespace}.*</code> to represent the
list of all bound actions or functions available for entities in the
collection, see system query option <a href="#sec_SystemQueryOptionselect"><code>$select</code></a>.</p>

<p class=MsoCaption>Example 18: resource URL and corresponding context URL</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>http://host/service/Customers?$<span class=Datatype><span
style='font-size:10.0pt;color:black'>select</span></span>=Address,Orders</p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>http://host/service/$metadata#Customers(Address,Orders)</p>

</div>

<h2>Projected Entity</h2>

<p class=MsoNormal style='page-break-after:avoid'>Context URL templates:</p>

<p class=SourceCode><code>{context-url}#{entity-set}{/type-name}{select-list}/$entity</code></p>

<p class=SourceCode><code>{context-url}#{singleton}{select-list}</code></p>

<p class=SourceCode>{context-url}#{type-name}{select-list}</p>

<p class=MsoNormal style='page-break-after:avoid'>If a single entity contains a
subset of properties, the parenthesized comma-separated list of the selected
defined or dynamic properties, instance annotations, navigation properties,
functions, and actions is appended to the <code>{entity-set}</code>
after an optional type-cast segment and prior to appending <code>/$entity</code>. If the response is not a subset of a single
entity set, the <code>{select-list}</code> is instead appended
to the <code>{type-name}</code> of the returned entity. </p>

<p class=MsoNormal style='page-break-after:avoid'>Regardless of how contained
structural properties are represented in the request URL (as paths or as select
options) they are represented in the context URL using path syntax, as defined
in OData 4.0. </p>

<p class=MsoNormal style='page-break-after:avoid'>The shortcut <code>*</code> represents the list of all structural properties. Properties
defined on types derived from the type of the entity set (or type specified in
the type-cast segment if specified) are prefixed with the qualified name of the
derived type as defined in <a href="#ODataABNF">OData-ABNF</a>. Note that
expanded properties are automatically included in the response.</p>

<p class=MsoNormal style='page-break-after:avoid'>The list also contains explicitly
selected or expanded instance annotations. It is possible to select or expand only
instance annotations, in which case only those selected or expanded annotations
appear in the result. Note that annotations specified only in the <a
href="#sec_Preferenceincludeannotationsodatainc"><code>include-annotations</code></a>
preference do not appear in the context URL and do not affect the
selected/expanded properties.</p>

<p class=MsoNormal style='page-break-after:avoid'>Operations in the context URL
are represented using the namespace- or alias-qualified name. Function names
suffixed with parentheses represent a specific overload, while function names
without parentheses represent all overloads of the function.</p>

<p class=MsoNormal style='page-break-after:avoid'>OData 4.01 responses MAY use
the shortcut pattern <code>{namespace}.*</code> to represent the
list of all bound actions or functions available for the returned entity, see
system query option <a href="#sec_SystemQueryOptionselect"><code>$select</code></a>.</p>

<p class=MsoCaption>Example 19: resource URL and corresponding context URL</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>http://host/service/Customers(1)?$select=Name,Rating</p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>http://host/service/$metadata#Customers(Name,Rating)/$entity</p>

</div>

<h2>Collection of Expanded Entities</h2>

<p class=MsoNormal style='page-break-after:avoid'>Context URL template:</p>

<p class=SourceCode><code>{context-url}#{entity-set}{/type-name}{select-list}</code></p>

<p class=SourceCode><code>{context-url}#Collection({type-name}){select-list}</code></p>

<p class=MsoNormal style='page-break-after:avoid'>For a 4.01 response, if a
navigation property is explicitly expanded, then in addition to any
non-suffixed names of any selected properties, navigation properties, functions
or actions, the comma-separated list of properties MUST include the name of the
expanded property, suffixed with the parenthesized comma-separated list of any
properties of the expanded navigation property that are selected or expanded.
If the expanded navigation property does not contain a nested <code>$select </code>or<code> $expand</code>, then the
expanded property is suffixed with empty parentheses. If the expansion is
recursive for nested children, a plus sign (<code>+</code>) is
infixed between the navigation property name and the opening parenthesis. </p>

<p class=MsoNormal style='page-break-after:avoid'>For a 4.0 response, the
expanded navigation property suffixed with parentheses is omitted from the
select-list if it does not contain a nested <code>$select </code>or<code> $expand</code>, but MUST still be present, without a suffix, if
it is explicitly selected. </p>

<p class=MsoNormal style='page-break-after:avoid'>If the context URL includes
only expanded navigation properties (i.e., only navigation properties suffixed
with parentheses), then all structural properties are implicitly selected (same
as if there were no properties listed in the select-list).</p>

<p class=MsoNormal style='page-break-after:avoid'>Navigation properties with
expanded references are not represented in the context URL.</p>

<p class=MsoCaption>Example 20: resource URL and corresponding context URL -
select and expand</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>http://host/service/Customers?$select=Name&amp;$expand=Address/Country</p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>http://host/service/$metadata#Customers(Name,Address/Country())</p>

</div>

<p class=MsoCaption>Example 21: resource URL and corresponding context URL –
expand <code>$ref</code></p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>http://host/service/Customers?$expand=Orders/$ref</p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>http://host/service/$metadata#Customers</p>

</div>

<p class=MsoCaption>Example 22: resource URL and corresponding context URL –
expand with <code>$levels</code></p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'><span
style='color:black'>http://host/service/Employees/Sales.Manager?$select=DirectReports<br>
                &amp;$expand=DirectReports($select=FirstName,LastName;$levels=4)</span></p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'><span
style='color:black'>http://host/service/$metadata<br>
                #Employees/Sales.Manager(DirectReports,<br>
                                         DirectReports+(FirstName,LastName))</span></p>

</div>

<h2>Expanded Entity</h2>

<p class=MsoNormal style='page-break-after:avoid'>Context URL template:</p>

<p class=SourceCode style='page-break-after:avoid'><code>{context-url}#{entity-set}{/type-name}{select-list}/$entity</code></p>

<p class=SourceCode><code>{context-url}#{singleton}{select-list}</code></p>

<p class=SourceCode style='page-break-after:avoid'><code>{context-url}#{type-name}{select-list}</code></p>

<p class=MsoNormal style='page-break-after:avoid'>For a 4.01 response, if a
navigation property is explicitly expanded, then in addition to the
non-suffixed names of any selected properties, navigation properties, functions
or actions, the comma-separated list of properties MUST include the name of the
expanded property, suffixed with the parenthesized comma-separated list of any
properties of the expanded navigation property that are selected or expanded.
If the expanded navigation property does not contain a nested <code>$select </code>or<code> $expand</code>, then the
expanded property is suffixed with empty parentheses. If the expansion is
recursive for nested children, a plus sign (<code>+</code>) is
infixed between the navigation property name and the opening parenthesis. </p>

<p class=MsoNormal style='page-break-after:avoid'>For a 4.0 response, the
expanded navigation property suffixed with parentheses is omitted from the
select-list if it does not contain a nested <code>$select</code><span
class=Datatype><span style='font-family:"Arial",sans-serif'> </span></span>or <code>$expand</code>, but MUST still be present, without a suffix, if
it is explicitly selected.</p>

<p class=MsoNormal style='page-break-after:avoid'>If the context URL includes
only expanded navigation properties (i.e., only navigation properties suffixed
with parentheses), then all structural properties are implicitly selected (same
as if there were no properties listed in the select-list).</p>

<p class=MsoNormal style='page-break-after:avoid'>Navigation properties with
expanded references are not represented in the context URL.</p>

<p class=MsoCaption>Example 23: resource URL and corresponding context URL</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'><span
style='color:black'>http://host/service/Employees(1)/Sales.Manager?<br>
                   $expand=DirectReports($select=FirstName,LastName;$levels=4)</span></p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'><span
style='color:black'>http://host/service/$metadata<br>
       #Employees/Sales.Manager(DirectReports+(FirstName,LastName))/$entity</span></p>

</div>

<h2>Collection of Entity References</h2>

<p class=MsoNormal style='page-break-after:avoid'>Context URL template:</p>

<p class=SourceCode><code>{context-url}#Collection($ref)</code></p>

<p class=MsoNormal style='page-break-after:avoid'>If a response is a collection
of entity references, the context URL does not contain the type of the referenced
entities.</p>

<p class=MsoCaption>Example 24: resource URL and corresponding context URL for
a collection of entity references</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'><span
class=Datatype>http://host/service/Customers('ALFKI')/Orders/$ref</span></p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'><span
class=Datatype>http://host/service/$metadata#Collection($ref)</span></p>

</div>

<h2>Entity Reference</h2>

<p class=MsoNormal style='page-break-after:avoid'>Context URL template:</p>

<p class=SourceCode style='page-break-after:avoid'><code>{context-url}#$ref</code></p>

<p class=MsoNormal style='page-break-after:avoid'>If a response is a single entity
reference, <code>$ref</code> is the context URL fragment.</p>

<p class=MsoCaption>Example 25: resource URL and corresponding context URL for
a single entity reference</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'><span
class=Datatype>http://host/service/Orders(10643)/Customer/$ref</span></p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'><span
class=Datatype>http://host/service/$metadata#$ref</span></p>

</div>

<h2>Property Value</h2>

<p class=MsoNormal style='page-break-after:avoid'>Context URL templates:</p>

<p class=SourceCode><code>{context-url}#{entity}/{property-path}{select-list}</code></p>

<p class=SourceCode style='page-break-after:avoid'><code>{context-url}#{type-name}{select-list}</code></p>

<p class=MsoNormal style='page-break-after:avoid'>If a response represents an <a
href="#sec_RequestingIndividualProperties">individual property</a><span
class=MsoHyperlink> </span>of an entity with a canonical URL, the context URL specifies
the canonical URL of the entity and the path to the structural property of that
entity. The path MUST include cast segments for properties defined on types
derived from the expected type of the previous segment.</p>

<p class=MsoNormal style='page-break-after:avoid'>If the property value does
not contain explicitly or implicitly selected navigation properties or
operations, OData 4.01 responses MAY use the less specific second template.</p>

<p class=MsoCaption>Example 26: resource URL and corresponding context URL</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>http://host/service/Customers(1)/Addresses</p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'><span
class=Datatype>http://host/service/$metadata#Customers(1)/Addresses</span></p>

</div>

<h2>Collection of Complex or
Primitive Types</h2>

<p class=MsoNormal style='page-break-after:avoid'>Context URL template:</p>

<p class=SourceCode><code>{context-url}#Collection({type-name}){select-list}</code></p>

<p class=MsoNormal style='page-break-after:avoid'>If a response is a collection
of complex types or primitive types that do not represent an individual
property of an entity with a canonical URL, the context URL specifies the fully
qualified type of the collection.</p>

<p class=MsoCaption>Example 27: resource URL and corresponding context URL</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>http://host/service/TopFiveHobbies()</p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'><span
class=Datatype>http://host/service/$metadata#Collection(Edm.String)</span></p>

</div>

<h2>Complex or Primitive Type</h2>

<p class=MsoNormal style='page-break-after:avoid'>Context URL template:</p>

<p class=SourceCode style='page-break-after:avoid'><code>{context-url}#{type-name}{select-list}</code></p>

<p class=MsoNormal style='page-break-after:avoid'>If a response is a complex
type or primitive type that does not represent an individual property of an
entity with a canonical URL, the context URL specifies the fully qualified type
of the result.</p>

<p class=MsoCaption>Example 28: resource URL and corresponding context URL</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'><span
class=Datatype>http://host/service/MostPopularName()</span></p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'><span
class=Datatype>http://host/service/$metadata#Edm.String</span></p>

</div>

<h2>Operation Result</h2>

<p class=MsoNormal style='page-break-after:avoid'>Context URL templates:</p>

<p class=SourceCode><code>{context-url}#{entity-set}{/type-name}{select-list}</code></p>

<p class=SourceCode><code>{context-url}#{entity-set}{/type-name}{select-list}/$entity</code></p>

<p class=SourceCode>{context-url}#{entity}/{property-path}<code>{select-list}</code></p>

<p class=SourceCode><code>{context-url}#Collection({type-name}){select-list}</code></p>

<p class=SourceCode><code>{context-url}#{type-name}{select-list}</code></p>

<p class=MsoNormal style='page-break-after:avoid'>If the response from an action
or function is a collection of entities or a single entity that is a member of
an entity set, the context URL identifies the entity set. If the response from
an action or function is a property of a single entity, the context URL
identifies the entity and property. Otherwise, the context URL identifies the type
returned by the operation. The context URL will correspond to one of the former
examples.</p>

<p class=MsoCaption>Example 29: resource URL and corresponding context URL</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>http://host/service/TopFiveCustomers()</p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>http://host/service/$metadata#Customers</p>

</div>

<h2>Delta Payload Response</h2>

<p class=MsoNormal style='page-break-after:avoid'>Context URL template:</p>

<p class=SourceCode><code>{context-url}#{entity-set}{/type-name}{select-list}/$delta</code></p>

<p class=SourceCode><code>{context-url}#{entity}{select-list}/$delta</code></p>

<p class=SourceCode><code>{context-url}#{entity}/{property-path}{select-list}/$delta</code></p>

<p class=SourceCode><code>#$delta</code></p>

<p class=MsoNormal style='page-break-after:avoid'>The context URL of a <a
href="#sec_RequestingChanges">delta response</a><span class=MsoHyperlink> </span>is
the context URL of the response to the defining query, followed by <code>/$delta</code>. This includes singletons,
single-valued navigation properties, and collection-valued navigation
properties.</p>

<p class=MsoNormal style='page-break-after:avoid'>If the entities are
contained, then <code>{entity-set}</code> is the top-level
entity set followed by the path to the containment navigation property of the
containing entity.</p>

<p class=MsoCaption>Example 30: resource URL and corresponding context URL</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'><span
style='color:black'>http://host/service/Customers<code>?$deltatoken=1234</code></span></p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'><span
class=Datatype>http://host/service/$metadata#Customers/$delta</span></p>

</div>

<p class=MsoNormal style='page-break-after:avoid'><a
name="_Toc370126063">The context URL of an update request body for a collection
of entities is simply the fragment </a><code>#$delta</code>.</p>

<h2>Item in a Delta Payload Response</h2>

<p class=MsoNormal style='page-break-after:avoid'>Context URL templates:</p>

<p class=SourceCode><code>{context-url}#{entity-set}/$deletedEntity</code></p>

<p class=SourceCode><code>{context-url}#{entity-set}/$link</code></p>

<p class=SourceCode><code>{context-url}#{entity-set}/$deletedLink
</code></p>

<p class=MsoNormal>In addition to new or changed entities which have the
canonical context URL for an entity, a delta response can contain deleted
entities, new links, and deleted links. They are identified by the corresponding
context URL fragment. <code>{entity-set}</code> corresponds to
the set of the deleted entity, or source entity for an added or deleted link.</p>

<h2>$all Response</h2>

<p class=MsoNormal style='page-break-after:avoid'>Context URL template:</p>

<p class=SourceCode><code>{context-url}#Collection(Edm.EntityType)</code></p>

<p class=MsoNormal>Responses to requests to the virtual collection <code>$all</code> (see <a href="#ODataURL">OData&#8209;URL</a>)
use the built-in abstract entity type. Each single entity in such a response
has its individual context URL that identifies the entity set or singleton.</p>

<h2>$crossjoin Response</h2>

<p class=MsoNormal style='page-break-after:avoid'>Context URL template:</p>

<p class=SourceCode><code>{context-url}#Collection(Edm.ComplexType)</code></p>

<p class=MsoNormal>Responses to requests to the virtual collections <code>$crossjoin(...)</code> (see <a href="#ODataURL">OData&#8209;URL</a>)
use the built-in abstract complex type. Single instances in these responses do
not have a context URL.</p>

<div style='border:none;border-top:solid gray 1.0pt;padding:6.0pt 0in 0in 0in'>

<h1>11 Data Service Requests</h1>

</div>

<p class=MsoNormal>This chapter describes the semantics of the HTTP verbs <code>GET</code>, <code>POST</code>, <code>PATCH</code>, <code>PUT</code>, and <code>DELETE</code> for OData resources.</p>

<p class=MsoNormal><code>GET</code> requests:</p>

<p class=MsoListParagraphCxSpFirst style='text-indent:-.25in'><span
style='font-family:Symbol'>· </span>11.1 <a href="#sec_MetadataRequests">Metadata Requests</a> and
subsections</p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-.25in'><span
style='font-family:Symbol'>· </span>11.2 <a href="#sec_RequestingData">Requesting Data</a> and
subsections</p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-.25in'><span
style='font-family:Symbol'>· </span>11.3 <a href="#sec_RequestingChanges">Requesting Changes</a> and
subsections</p>

<p class=MsoListParagraphCxSpLast style='text-indent:-.25in'><span
style='font-family:Symbol'>· </span>11.5.4 <a href="#sec_Functions">Functions</a> and subsections</p>

<p class=MsoNormal><code>POST</code> requests:</p>

<p class=MsoListParagraphCxSpFirst style='text-indent:-.25in'><span
style='font-family:Symbol'>· </span>11.4.2 <a href="#sec_CreateanEntity">Create an Entity</a> and
subsections</p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-.25in'><span
style='font-family:Symbol'>· </span>11.4.7.1 <a href="#sec_CreateaMediaEntity">Create a Media Entity</a>
</p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-.25in'><span
class=Datatype><span style='font-family:Symbol'>· </span></span><span
class=Datatype><span style='font-family:"Arial",sans-serif'>11.4.11</span></span>
<a href="#sec_PositionalInserts">Positional Inserts</a></p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-.25in'><span
style='font-family:Symbol'>· </span>11.5.5 <a href="#sec_Actions">Actions</a> and subsections</p>

<p class=MsoListParagraphCxSpLast style='text-indent:-.25in'><span
style='font-family:Symbol'>· </span>11.7 <a href="#sec_BatchRequests">Batch Requests</a> and
subsections</p>

<p class=MsoNormal><code>PATCH</code> and <code>PUT</code>
requests:</p>

<p class=MsoListParagraphCxSpFirst style='text-indent:-.25in'><span
style='font-family:Symbol'>· </span>11.4.3 <a href="#sec_UpdateanEntity">Update an Entity</a> and
subsections</p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-.25in'><span
class=Datatype><span style='font-family:Symbol'>· </span></span><span
class=Datatype><span style='font-family:"Arial",sans-serif'>11.4.4</span></span>
<a href="#sec_UpsertanEntity">Upsert an Entity</a></p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-.25in'><span
class=Datatype><span style='font-family:Symbol'>· </span></span><span
class=Datatype><span style='font-family:"Arial",sans-serif'>11.4.6</span></span>
<a href="#sec_ModifyingRelationshipsbetweenEntitie">Modifying Relationships
between Entities</a> and subsections</p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-.25in'><span
class=Datatype><span style='font-family:Symbol'>· </span></span><span
class=Datatype><span style='font-family:"Arial",sans-serif'>11.4.7.2</span></span>
<a href="#sec_UpdateaMediaEntityStream">Update a Media Entity Stream</a></p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-.25in'><span
class=Datatype><span style='font-family:Symbol'>· </span></span><span
class=Datatype><span style='font-family:"Arial",sans-serif'>11.4.8.1</span></span>
<a href="#sec_UpdateStreamValues">Update Stream Values</a></p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-.25in'><span
class=Datatype><span style='font-family:Symbol'>· </span></span><span
class=Datatype><span style='font-family:"Arial",sans-serif'>11.4.9.1</span></span><span
class=Datatype><span style='font-family:"Arial",sans-serif'> </span></span><a
href="#sec_UpdateaPrimitiveProperty">Update a Primitive Property</a></p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-.25in'><span
class=Datatype><span style='font-family:Symbol'>· </span></span><span
class=Datatype><span style='font-family:"Arial",sans-serif'>11.4.9.3</span></span><span
class=Datatype><span style='font-family:"Arial",sans-serif'> </span></span><a
href="#sec_UpdateaComplexProperty">Update a Complex Property</a></p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-.25in'><span
class=Datatype><span style='font-family:Symbol'>· </span></span><span
class=Datatype><span style='font-family:"Arial",sans-serif'>11.4.9.4</span></span><span
class=Datatype><span style='font-family:"Arial",sans-serif'> </span></span><a
href="#sec_UpdateaCollectionProperty">Update a Collection Property</a></p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-.25in'><span
class=Datatype><span style='font-family:Symbol'>· </span></span><span
class=Datatype><span style='font-family:"Arial",sans-serif'>11.4.10</span></span>
<a href="#sec_ManagingMembersofanOrderedCollection">Managing Members of an
Ordered Collection</a></p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-.25in'><span
class=Datatype><span style='font-family:Symbol'>· </span></span>11.4.12 <a href="#sec_UpdateaCollectionofEntities">Update
a Collection of Entities</a></p>

<p class=MsoListParagraphCxSpLast style='text-indent:-.25in'><span
class=Datatype><span style='font-family:Symbol'>· </span></span><span
class=Datatype><span style='font-family:"Arial",sans-serif'>11.4.13</span></span>
<a href="#sec_UpdateMembersofaCollection">Update Members of a Collection</a></p>

<p class=MsoNormal><code>DELETE</code> requests:</p>

<p class=MsoListParagraphCxSpFirst style='margin-left:39.0pt;text-indent:-.25in'><span
style='font-family:Symbol'>· </span>11.4.5 <a href="#sec_DeleteanEntity">Delete an Entity</a></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:39.0pt;text-indent:-.25in'><span
style='font-family:Symbol'>· </span>11.4.7.3 <a href="#sec_DeleteaMediaEntity">Delete a Media Entity</a></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:39.0pt;text-indent:-.25in'><span
style='font-family:Symbol'>· </span>0 <a href="#sec_DeleteStreamValues">Delete Stream Values</a></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:39.0pt;text-indent:-.25in'><span
style='font-family:Symbol'>· </span>11.4.9.2 <a href="#sec_SetaValuetoNull">Set a Value to Null</a></p>

<p class=MsoListParagraphCxSpLast style='margin-left:39.0pt;text-indent:-.25in'><span
style='font-family:Symbol'>· </span>11.4.14 <a href="#sec_DeleteMembersofaCollection">Delete Members
of a Collection</a></p>

<h2>Metadata Requests</h2>

<p class=MsoNormal>An OData service is a self-describing service that exposes
metadata defining the entity sets, singletons, relationships, entity types, and
operations.</p>

<h3>11.1.1 Service Document Request</h3>

<p class=MsoNormal>Service documents enable simple hypermedia-driven clients to
enumerate and explore the resources offered by the data service.</p>

<p class=MsoNormal>OData services MUST support returning a service document
from the root URL of the service (the <i>service root</i>).</p>

<p class=MsoNormal>The format of the service document is dependent upon the
format selected. </p>

<h3>11.1.2 Metadata Document Request</h3>

<p class=MsoNormal>An OData <i>metadata document</i> is a representation of the
<a href="#sec_DataModel">data model</a><span class=MsoHyperlink> </span>that
describes the data and operations exposed by an OData service.</p>

<p class=MsoNormal><a href="#ODataCSDL">OData-CSDLJSON</a>
describes a JSON representation for OData metadata documents and provides a
JSON schema to validate their contents. The media type of the JSON
representation of an OData metadata document is <code>application/json</code>.</p>

<p class=MsoNormal><a href="#ODataCSDL">OData-CSDLXML</a>
describes an XML representation for OData metadata documents and provides an XML
schema to validate their contents. The media type of the XML representation of
an OData metadata document is <code>application/xml</code>.</p>

<p class=MsoNormal>OData services can expose a metadata document that describes
the data model exposed by the service. The <i>metadata document URL</i> MUST be
the root URL of the service with <code>$metadata</code>
appended. To retrieve this document the client issues a <code>GET</code>
request to the metadata document URL.</p>

<p class=MsoNormal>If a request for metadata does not specify a format
preference (via <a href="#sec_HeaderAccept"><code>Accept</code>
header</a> or <a href="#sec_SystemQueryOptionformat"><code>$format</code></a>) then the XML representation MUST be returned.</p>

<h2>11.2 Requesting Data</h2>

<p class=MsoNormal>OData services support requests for data via HTTP <code>GET</code> requests.</p>

<p class=MsoNormal>The path of the URL specifies the target of the request (for
example; the collection of entities, entity, navigation property, structural
property, or operation). Additional query operators, such as filter, sort,
page, and projection operations are specified through query options.</p>

<p class=MsoNormal>This section describes the types of data requests defined by
OData. For complete details on the syntax for building requests, see <a
href="#ODataURL">OData&#8209;URL</a>.</p>

<p class=MsoNormal>OData services are hypermedia driven services that return
URLs to the client. If a client subsequently requests the advertised resource
and the URL has expired, then the service SHOULD respond with <a
href="#sec_ResponseCode410Gone"><code>410
Gone</code></a>. If this is not feasible, the service MUST respond with <a
href="#sec_ResponseCode404NotFound"><code>404
Not Found</code></a>. </p>

<p class=MsoNormal>The format of the returned data is dependent upon the
request and the format specified by the client, either in the <a
href="#sec_HeaderAccept"><code>Accept</code>
header</a> or using the <a href="#sec_SystemQueryOptionformat"><code>$format</code></a><span class=Hyperlink1> </span>query
option. If the client specifies neither an <a href="#sec_HeaderAccept"><code>Accept</code> header</a> nor the <a
href="#sec_SystemQueryOptionformat"><code>$format</code></a><span
class=Hyperlink1> </span>query option, the service is allowed to return the
response in any format.</p>

<h3>11.2.1 System
Query Options</h3>

<p class=MsoNormal><span style='color:black;background:white'>OData defines a
number of system query options that allow refining the request. System query
options are prefixed with the dollar (</span><code>$</code><span
style='color:black;background:white'>) character, which is optional in OData
4.01. </span>4.01 services MUST support case-insensitive system query option
names specified with or without the <code>$</code><span
class=Datatype><span style='font-family:"Arial",sans-serif'> </span></span>prefix.<br>
Clients that want to work with 4.0 services MUST use lower case names and
specify the <code>$</code> prefix.</p>

<p class=MsoNormal><span style='color:black;background:white'>The result of the
request MUST be as if the system query options were evaluated in the following
order.</span></p>

<p class=MsoListParagraph style='text-indent:-.25in'><span style='font-family:
Symbol;color:black'>· </span><a href="#sec_SystemQueryOptionschemaversion"><span
style='font-family:"Courier New";background:white'>$schemaversion</span></a><span
style='color:black;background:white'> MUST be evaluated first, because it may
influence any further processing.</span></p>

<p class=MsoNormal><span style='color:black;background:white'>Prior to applying
any </span><a href="#sec_ServerDrivenPaging"><span style='background:white'>server-driven
paging</span></a><span style='color:black;background:white'>:</span></p>

<ul style='margin-top:0in' type=disc>
 <li class=MsoNormal><code>$appl</code><span style='font-family:
     "Courier New"'>y</span> – defined in <a href="#ODataAggregationRef">OData-Aggregation</a></li>
 <li class=MsoNormal><a href="#sec_SystemQueryOptioncompute"><span
     style='font-family:"Courier New"'>$compute</span></a></li>
 <li class=MsoNormal><a href="#sec_SystemQueryOptionsearch"><span
     style='font-family:"Courier New"'>$search</span></a></li>
 <li class=MsoNormal><a href="#sec_SystemQueryOptionfilter"><span
     style='font-family:"Courier New"'>$filter</span></a></li>
 <li class=MsoNormal><a href="#sec_SystemQueryOptioncount"><span
     style='font-family:"Courier New"'>$count</span></a></li>
 <li class=MsoNormal><a href="#sec_SystemQueryOptionorderby"><span
     style='font-family:"Courier New"'>$orderby</span></a></li>
 <li class=MsoNormal><a href="#sec_SystemQueryOptionskip"><span
     style='font-family:"Courier New"'>$skip</span></a></li>
 <li class=MsoNormal><a href="#sec_SystemQueryOptiontop"><span
     style='font-family:"Courier New"'>$top</span></a></li>
</ul>

<p class=MsoNormal><span style='color:black;background:white'>After applying
any </span><a href="#sec_ServerDrivenPaging"><span style='background:white'>server-driven
paging</span></a><span style='color:black;background:white'>:</span></p>

<ul style='margin-top:0in' type=disc>
 <li class=MsoNormal style='color:#0000EE'><span style='color:windowtext'><a
     href="#sec_SystemQueryOptionexpand"><code>$expand</code></a></span></li>
 <li class=MsoNormal><a href="#sec_SystemQueryOptionselect"><span
     style='font-family:"Courier New"'>$select</span></a></li>
 <li class=MsoNormal><a href="#sec_SystemQueryOptionformat"><span
     style='font-family:"Courier New"'>$format</span></a></li>
</ul>

<h3>Requesting Individual Entities</h3>

<p class=MsoNormal>To retrieve an individual entity, the client makes a <code>GET</code> request to a URL that identifies the entity, e.g. its
read URL.</p>

<p class=MsoNormal>The read URL can be obtained from a response payload
containing that instance, for example as a <code>readLink</code>
or <code>editLink</code> in an <a href="#ODataJSON">OData-JSON</a><span
class=Hyperlink1> payload</span>. In addition, services MAY support conventions
for constructing a read URL using the entity's key value(s), as described in <a
href="#ODataURL">OData&#8209;URL</a>.</p>

<p class=MsoNormal>The set of structural or navigation properties to return may
be specified through <a href="#sec_SystemQueryOptionselect"><code>$select</code></a> or <a
href="#sec_SystemQueryOptionexpand"><code>$expand</code></a><span
class=MsoHyperlink><code> </code></span>system
query options.</p>

<p class=MsoNormal>Clients MUST be prepared to receive additional properties in
an entity or complex type instance that are not advertised in metadata, even
for types not marked as open.</p>

<p class=MsoNormal>Properties that are not available, for example due to
permissions, are not returned. In this case, the <a
href="https://github.com/oasis-tcs/odata-vocabularies/blob/master/vocabularies/Org.OData.Core.V1.md#Permissions"><code>Core.Permissions</code></a> annotation,
defined in <a href="#ODataVocCore">OData-VocCore</a> MUST be returned for
the property with a value of <code>None</code><span
class=Datatype><span style='font-family:"Arial",sans-serif'>.</span></span></p>

<p class=MsoNormal>If no entity exists with the specified request URL, the
service responds with <a href="#sec_ResponseCode404NotFound"><code>404 Not Found</code></a>.</p>

<h3>11.2.3
<a href="#sec_RequestingtheMediaStreamofaMediaEnti">Requesting the Media Stream
of a Media Entity using <code>$value</code></a></h3>

<p class=MsoNormal>A <i>media entity</i> is an entity that represents an
out-of-band stream, such as a photograph.</p>

<p class=MsoNormal>Use a media entity if the out-of-band stream is the main
topic of interest and the media entity is just structured additional
information attached to the stream. Use a normal entity with one or more <a
href="#sec_ManagingStreamProperties">stream properties</a> if the structured
data of the entity is the main topic of interest and the stream data is just
additional information attached to the structured data.</p>

<p class=MsoNormal>To address the media stream represented by a media entity,
clients append <code>/$value</code> to the resource path of the
media entity URL. Services may redirect from this canonical URL to the source
URL of the media stream.</p>

<p class=MsoNormal>Appending <code>/$value</code> to an entity
that is not a media entity returns <span style='font-family:"Courier New"'>400
Bad Request<span class=MsoHyperlink>.</span></span></p>

<p class=MsoNormal>Attempting to retrieve the media stream from a single-valued
navigation property referencing a media entity whose value is null returns <a
href="#sec_ResponseCode404NotFound"><code>404
Not Found</code></a><span class=MsoHyperlink><span style='color:windowtext'>.</span></span></p>

<h3>Requesting Individual
Properties</h3>

<p class=MsoNormal>To retrieve an individual property, the client issues a <code>GET</code> request to the property URL. The property URL is the
entity read URL with <span style='font-family:"Calibri",sans-serif'>&quot;/&quot;</span>
and the property name appended.</p>

<p class=MsoNormal>For complex typed properties, the path can be further
extended with the name of an individual property of the complex type.</p>

<p class=MsoNormal>See <a href="#ODataURL">OData&#8209;URL</a> for
details.</p>

<p class=MsoNormal>If the property is single-valued and has the <code>null</code> value, the service responds with <a
href="#sec_ResponseCode204NoContent"><code>204
No Content</code></a>.</p>

<p class=MsoNormal>If the property is not available, for example due to
permissions, the service responds with <a href="#sec_ResponseCode404NotFound"><code>404 Not Found</code></a>.</p>

<p class=MsoCaption>Example 31:</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>GET http://host/service/Products(1)/Name </p>

</div>

<h4>11.2.4.1 <a
href="#sec_RequestingaPropertysRawValueusingval">Requesting a Property's Raw
Value using <code>$value</code></a></h4>

<p class=MsoNormal style='page-break-after:avoid'>To retrieve the raw value of
a primitive type property, the client sends a <code>GET</code>
request to the property value URL. See the <a href="#ODataURL">OData&#8209;URL</a>
document for details.</p>

<p class=MsoNormal style='page-break-after:avoid'>The <code>Content-Type</code>
of the response is determined using the <code>Accept</code>
header and the <a href="#sec_SystemQueryOptionformat"><code>$format</code></a> system query option. </p>

<p class=MsoNormal><span style='color:black;background:white'>The default
format for </span><code>Edm.Binary</code><span style='color:
black;background:white'> is the format specified by the </span><a
href="https://github.com/oasis-tcs/odata-vocabularies/blob/master/vocabularies/Org.OData.Core.V1.md#MediaType"><code>Core.MediaType</code></a><span
style='color:black;background:white'> annotation of this property (</span>see <a
href="#ODataVocCore">OData-VocCore</a>) <span style='color:black;
background:white'>if this annotation is present. If not annotated, the format
cannot be predicted by the client.</span></p>

<p class=MsoNormal style='page-break-after:avoid'>The default format for <code>Edm.Geo</code> types is <code>text/plain</code>
using the WKT (well-known text) format, see rules <code>fullCollectionLiteral</code>,
<code>fullLineStringLiteral</code>, <code>fullMultiPointLiteral</code>,
<code>fullMultiLineStringLiteral</code>, <code>fullMultiPolygonLiteral</code>,
<code>fullPointLiteral</code>, and <code>fullPolygonLiteral</code>
in <a href="#ODataABNF">OData-ABNF</a>.</p>

<p class=MsoNormal style='page-break-after:avoid'>The default format for single
primitive values except <code>Edm.Binary</code> and the <code>Edm.Geo</code> types is <code>text/plain</code>. Responses
for properties of type <code>Edm.String</code> can use the <code>charset</code> format parameter to specify the character set
used for representing the string value. Responses for the other primitive types
follow the rules <code>booleanValue</code>, <code>byteValue</code>, <code>dateValue</code>, <code>dateTimeOffsetValue</code>, <code>decimalValue</code>,
<code>doubleValue</code>, <code>durationValue</code>,
<code>enumValue</code>, <code>guidValue</code>, <code>int16Value</code>, <code>int32Value</code>, <code>int64Value</code>, <code>sbyteValue</code>, <code>singleValue</code>, and <code>timeOfDayValue</code>
in <a href="#ODataABNF">OData-ABNF</a>. </p>

<p class=MsoNormal>A <code>$value</code> request for a property
that is <code>null</code> results in a <a
href="#sec_ResponseCode204NoContent"><code>204
No Content</code></a> response.</p>

<p class=MsoNormal>If the property is not available, for example due to
permissions, the service responds with <a href="#sec_ResponseCode404NotFound"><code>404 Not Found</code></a>.</p>

<p class=MsoCaption><a name="_Ref356920699">Example </a>32:</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>GET http://host/service/Products(1)/Name/$value </p>

</div>

<h3>11.2.5 Specifying Properties to Return</h3>

<p class=MsoNormal>The <a href="#sec_SystemQueryOptionselect"><code>$select</code></a> and <a
href="#sec_SystemQueryOptionexpand"><code>$expand</code></a>
system query options enable the client to specify the set of structural
properties and navigation properties to include in a response. The service MAY
include additional properties not specified in <a
href="#sec_SystemQueryOptionselect"><code>$select</code></a>
and <a href="#sec_SystemQueryOptionexpand"><code>$expand</code></a>,
including properties not defined in <a href="#sec_MetadataDocumentRequest">the
metadata document</a><span class=MsoHyperlink>.</span></p>

<h4>11.2.5.1 <a
href="#sec_SystemQueryOptionselect">System Query Option <code>$select</code></a></h4>

<p class=MsoNormal>The <code>$select</code> system query option
requests that the service return only the properties, dynamic properties, <a
href="#sec_Actions">actions</a> and <a href="#sec_Functions">functions</a><span
class=MsoHyperlink> </span>explicitly requested by the client. The service
returns the specified content, if available, along with any available <a
href="#sec_SystemQueryOptionexpand">expanded </a>navigation or stream
properties, and MAY return additional information. </p>

<p class=MsoNormal>The value of the <code>$select</code> query
option is a comma-separated list of properties, qualified action names,
qualified function names, the star operator (<code>*</code>), or
the star operator prefixed with the namespace or alias of the schema in order
to specify all operations defined in the schema. Only aliases defined in the
metadata document of the service can be used in URLs.</p>

<p class=MsoCaption>Example 33: request only the <code>Rating</code>
and <code>ReleaseDate</code> for the matching Products</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>GET http://host/service/Products?$select=Rating,ReleaseDate</p>

</div>

<p class=MsoNormal style='page-break-after:avoid'>It is also possible to
request all structural properties, including any dynamic properties, using the
star operator. The star operator SHOULD NOT introduce navigation properties,
actions or functions not otherwise requested.</p>

<p class=MsoCaption>Example 34: </p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>GET http://host/service/Products?$select=*</p>

</div>

<p class=MsoNormal>Properties of related entities can be specified by including
the <code>$select</code> query option within the <code>$expand</code>. </p>

<p class=MsoCaption>Example 35: </p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>GET http://host/service/Products?$expand=Category($select=Name)</p>

</div>

<p class=MsoNormal style='page-break-after:avoid'>The properties specified in <code>$select</code> are represented in addition to any expanded
navigation or stream properties. If a navigation property is specified in <code>$select,</code> then the corresponding navigation link is
represented in the response. If the navigation property also appears in an <a
href="#sec_SystemQueryOptionexpand"><code>$expand</code></a>
query option, then it is additionally represented as inline content.</p>

<p class=MsoCaption>Example 36: for each category, return the <code>CategoryName</code> and the <code>Products</code> navigation link</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>GET http://host/service/Categories?$select=CategoryName,Products</p>

</div>

<p class=MsoNormal style='page-break-after:avoid'>It is also possible to
request all actions or functions available for each returned entity.</p>

<p class=MsoCaption>Example 37: </p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>GET http://host/service/Products?$select=DemoService.*</p>

</div>

<p class=MsoNormal>Query options can be
applied to a selected property by appending a semicolon-separated list of query
options, enclosed in parentheses, to the property. Allowed system query options
are <a href="#sec_SystemQueryOptionselect"><code>$select</code></a>
and <a href="#sec_SystemQueryOptioncompute"><code>$compute</code></a>
for complex properties, plus <a href="#sec_SystemQueryOptionfilter"><code>$filter</code></a>, <a
href="#sec_SystemQueryOptionsearch"><code>$search</code></a>,
<a href="#sec_SystemQueryOptioncount"><code>$count</code></a>,
<a href="#sec_SystemQueryOptionorderby"><code>$orderby</code></a>,
<a href="#sec_SystemQueryOptionskip"><code>$skip</code></a>,
and <a href="#sec_SystemQueryOptiontop"><code>$top</code></a>
for collection-valued properties. A property MUST NOT have select options
specified in more than one place in a request and MUST NOT have both select
options and expand options specified.</p>

<p class=MsoNormal>If the <code>$</code><span class=Datatype><span
style='font-family:"Arial",sans-serif'>select</span></span> query option is not
specified, <a name="_Ref358202018"><span style='color:black;background:white'>the
service returns the full set of properties or a default set of properties. The
default set of properties MUST include all key properties<span
class=apple-converted-space>.</span></span> <span class=apple-converted-space><span
style='color:black;background:white'>Services may change the default set of
properties returned. This includes returning new properties by default and
omitting properties previously returned by default.</span></span></a> <span
class=apple-converted-space><span style='color:black;background:white'>Clients
that rely on specific properties in the response MUST use </span></span><code>$select</code><span class=apple-converted-space><span
style='color:black;background:white'> with the required properties or with </span></span><code>*</code><span class=apple-converted-space><span
style='color:black;background:white'>.</span></span></p>

<p class=MsoNormal><span class=apple-converted-space><span style='font-size:
9.0pt;color:black;background:white'>If t</span></span><span style='color:black;
background:white'>he service returns less than the full set of properties,
either because the client specified a select or because the service returned a
subset of properties in the absence of a select, the </span><a
href="#sec_ContextURL"><span style='background:white'>context URL</span></a><span
style='color:black;background:white'> MUST reflect the set of selected
properties and projected </span><a href="#sec_SystemQueryOptionexpand"><span
style='background:white'>expanded</span></a><span style='color:black;
background:white'> navigation properties.</span></p>

<h4>11.2.5.2 <a
href="#sec_SystemQueryOptionexpand">System Query Option <code>$expand</code></a></h4>

<p class=MsoNormal>The <code>$expand</code> system query option
indicates the related entities and stream values that MUST be represented
inline. The service MUST return the specified content, and MAY choose to return
additional information.</p>

<p class=MsoNormal>The value of the <code>$expand</code> query
option is a comma-separated list of navigation property names, stream property names,
or <code>$value</code> indicating the stream content of a
media-entity. </p>

<p class=MsoNormal>For navigation properties, the navigation property name is
optionally followed by a <code>/$ref</code> path segment or a <code>/$count</code> path segment, and optionally a parenthesized set
of <a href="#sec_ExpandOptions">expand options</a> (for filtering, sorting,
selecting, paging, or expanding the related entities).</p>

<p class=MsoNormal>For a full description of the syntax used when building
requests, see <a href="#ODataURL">OData&#8209;URL</a>.</p>

<p class=MsoCaption>Example 38: for each customer entity within the Customers
entity set the value of all related Orders will be represented inline</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>GET http://host/service.svc/Customers?$expand=Orders</p>

</div>

<p class=MsoCaption>Example 39: for each customer entity within the Customers
entity set the references to the related Orders will be represented inline</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>GET http://host/service.svc/Customers?$expand=Orders/$ref</p>

</div>

<p class=MsoCaption>Example 40:
for each customer entity within the Customers entity set the media stream
representing the customer photo will be represented inline</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>GET http://host/service.svc/Customers?$expand=Photo</p>

</div>

<h5>Expand Options</h5>

<p class=MsoNormal style='page-break-after:avoid'>The set of expanded entities
can be further refined through the application of expand options, expressed as
a semicolon-separated list of system query options, enclosed in parentheses,
see <a href="#ODataURL">OData&#8209;URL</a>.</p>

<p class=MsoNormal>Allowed system query options are <a
href="#sec_SystemQueryOptionfilter"><code>$filter</code></a>,
<a href="#sec_SystemQueryOptionselect"><code>$select</code></a>,
<a href="#sec_SystemQueryOptionorderby"><code>$orderby</code></a>,
<a href="#sec_SystemQueryOptionskip"><code>$skip</code></a>,
<a href="#sec_SystemQueryOptiontop"><code>$top</code></a>,
<a href="#sec_SystemQueryOptioncount"><code>$count</code></a>,
<a href="#sec_SystemQueryOptionsearch"><code>$search</code></a>,
<a href="#sec_SystemQueryOptionexpand"><code>$expand</code></a><span
class=Datatype><span style='font-family:"Arial",sans-serif'>,</span></span> <a
href="#sec_SystemQueryOptioncompute"><code>$compute</code></a><span
class=Datatype><span style='font-family:"Arial",sans-serif'>,</span></span> and
<a href="#sec_ExpandOptionlevels"><code>$levels</code></a>.</p>

<p class=MsoCaption>Example 41: for each customer entity within the <code>Customers</code> entity set, the value of
those related <code>Orders</code> whose <code>Amount</code> is greater than 100 will be
represented inline</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>GET <span lang=FR style='color:black'>http://host/service.svc/Customers?$expand=Orders($filter=Amount
gt 100)</span></p>

</div>

<p class=MsoCaption>Example 42: for each order within the <code>Orders</code> entity set, the following will
be represented inline:</p>

<p class=MsoCaption style='margin-left:55.85pt;text-indent:-.25in;page-break-after:
avoid'><span style='font-family:Symbol;font-style:normal'>· </span>The <code>Items</code> related
to the <code>Orders</code> identified by the
resource path section of the URL and the products related to each order item.</p>

<p class=MsoCaption>The <code>Customer</code>
related to each order returned.</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>GET http://host/service.svc/Orders?$expand=Items($expand=Product),Customer</p>

</div>

<p class=MsoCaption>Example 43: for each customer entity in the Customers
entity set, the value of all related InHouseStaff will be represented inline if
the entity is of type VipCustomer or a subtype of that. For entities that are
not of type <code>VipCustomer</code>, or any of its subtypes,
that entity may be returned with no inline representation for the expanded
navigation property<code> InHouseStaff </code><span
class=Datatype><span style='font-family:"Arial",sans-serif'>(the service can
always send more than requested)</span></span></p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>GET http://host/service.svc/Customers?$expand=SampleModel.VipCustomer/InHouseStaff</p>

</div>

<h6>11.2.5.2.1.1 <a href="#sec_ExpandOptionlevels">Expand Option <code>$levels</code></a></h6>

<p class=MsoNormal style='page-break-after:avoid'>The <code>$levels</code><span
style='font-family:"Calibri",sans-serif'> </span>expand option can be used to
specify the number of levels of recursion for a hierarchy in which the related
entity type is the same as, or can be cast to, the source entity type. A <code>$levels</code> option with a value of 1 specifies a single
expand with no recursion. The same expand options are applied at each level of
the hierarchy. </p>

<p class=MsoNormal style='page-break-after:avoid'>Services MAY support the
symbolic value <code>max</code> in addition to numeric values.
In that case they MUST solve circular dependencies by injecting an entity
reference somewhere in the circular dependency.</p>

<p class=MsoNormal style='page-break-after:avoid'>Clients using <code>$levels=max</code> MUST be prepared to handle entity references
in cases were a circular reference would occur otherwise. </p>

<p class=MsoNormal style='page-break-after:avoid'>4.01 services that support <code>max</code> SHOULD do so in a case-insensitive manner. Clients
that want to work with 4.0 services MUST use lower case.</p>

<p class=MsoCaption>Example 44: return each employee from the Employees entity
set and, for each employee that is a manager, return all direct reports,
recursively to four levels</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>GET
http://host/service/Employees?$expand=Model.Manager/DirectReports($levels=4)</p>

</div>

<h4>11.2.5.3 <a
href="#sec_SystemQueryOptioncompute">System Query Option <code>$compute</code></a></h4>

<p class=MsoNormal>The <code>$compute</code> system query option
allows clients to define computed properties that can be used in a <a
href="#sec_SystemQueryOptionselect"><code>$select</code></a>
or within a <a href="#sec_SystemQueryOptionfilter"><code>$filter</code></a> or <a href="#sec_SystemQueryOptionorderby"><code>$orderby</code></a> expression.</p>

<p class=MsoNormal style='page-break-after:avoid'>Computed properties SHOULD be
included as dynamic properties in the result and MUST be included if <code>$select</code> is specified with the computed property name, or
star (<code>*</code>).</p>

<p class=MsoCaption>Example 45: compute total price for order items (line
breaks only for readability)</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'><span
style='color:black'>GET <span style='background:#D9D9D9'>http://host/service/Customers?<br>
   $filter=Orders/any(o:o/TotalPrice gt 100)<br>
   &amp;$expand=Orders($compute=Price mult Qty as TotalPrice</span></span></p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'><span
style='color:black'>                  ;<span style='background:#D9D9D9'>$select=Name,Price,Qty,TotalPrice)</span></span></p>

</div>

<h3>Querying Collections</h3>

<p class=MsoNormal>OData services support querying collections of entities,
complex type instances, and primitive values.</p>

<p class=MsoNormal>The target collection is specified through a URL, and query
operations such as filter, sort, paging, and projection are specified as <a
href="#sec_SystemQueryOptions"><i>system query options</i></a> optionally
prefixed with a dollar (<code>$</code>) character. 4.01 Services
MUST support case-insensitive system query option names specified with or
without the <code>$ </code>prefix. Clients that want to work
with 4.0 services MUST use lower case names and specify the <code>$</code> prefix. </p>

<p class=MsoNormal>The same system query option MUST NOT be specified more than
once for any resource.</p>

<p class=MsoNormal>An OData service MAY support some or all of the system query
options defined. If a data service does not support a system query option, it
MUST fail any request that contains the unsupported option and SHOULD return <a
href="#sec_ResponseCode501NotImplemented"><span class=Datatype><span
style='color:windowtext'>501 Not Implemented</span></span></a>.</p>

<h4>11.2.6.1 <a href="#sec_SystemQueryOptionfilter">System
Query Option <code>$filter</code></a></h4>

<p class=MsoNormal style='page-break-after:avoid'>The <code>$filter</code>
system query option restricts the set of items returned.</p>

<p class=MsoCaption>Example 46: return all Products whose <code>Price</code>
is less than <span style='font-family:"Calibri",sans-serif'>$10.00</span></p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>GET http://host/service/Products?$filter=Price lt 10.00</p>

</div>

<p class=MsoNormal>The <a href="#sec_SystemQueryOptioncount"><code>$count</code></a> segment may be used within
a <code>$filter </code>expression to limit the items returned
based on the exact count of related entities or items within a
collection-valued property. </p>

<p class=MsoCaption>Example 47: return all Categories with less than 10 products</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>GET http://host/service/Categories?$filter=Products/$count
lt 10</p>

</div>

<p class=MsoNormal>The value of the <code>$filter</code> option
is a Boolean expression as defined in <a href="#ODataABNF">OData-ABNF</a>.</p>

<h5>11.2.6.1.1 Built-in Filter Operations</h5>

<p class=MsoNormal>OData supports a set of built-in filter operations, as
described in this section. </p>

<p class=MsoNormal>4.01 services MUST support case-insensitive operation names.
Clients that want to work with 4.0 services MUST use lower case operation
names. </p>

<p class=MsoNormal>For a full description of the syntax used when building
requests, see <a href="#ODataURL">OData&#8209;URL</a>.</p>

<table class=MsoNormalTable border=0 cellspacing=0 cellpadding=0
 style='margin-left:5.4pt;border-collapse:collapse'>
 <thead>
  <tr>
   <td width=72 valign=top style='width:.75in;background:#EEECE1;padding:0in 5.4pt 0in 5.4pt'>
   <p class=MsoNormal style='page-break-after:avoid'><b>Operator</b></p>
   </td>
   <td width=155 valign=top style='width:116.1pt;background:#EEECE1;padding:
   0in 5.4pt 0in 5.4pt'>
   <p class=MsoNormal style='page-break-after:avoid'><b><span style='color:
   black'>Description</span></b></p>
   </td>
   <td width=385 valign=top style='width:288.9pt;background:#EEECE1;padding:
   0in 5.4pt 0in 5.4pt'>
   <p class=MsoNormal style='page-break-after:avoid'><b><span style='color:
   black'>Example</span></b></p>
   </td>
  </tr>
 </thead>
 <tr>
  <td width=612 colspan=3 valign=top style='width:459.0pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='page-break-after:avoid'><b>Comparison Operators </b></p>
  </td>
 </tr>
 <tr>
  <td width=72 valign=top style='width:.75in;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify;page-break-after:avoid'><span
  style='font-family:"Courier New"'>eq</span></p>
  </td>
  <td width=155 valign=top style='width:116.1pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='page-break-after:avoid'>Equal</p>
  </td>
  <td width=385 valign=top style='width:288.9pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify;page-break-after:avoid'><span
  style='font-size:9.0pt;font-family:"Courier New"'>Address/City eq 'Redmond'</span></p>
  </td>
 </tr>
 <tr>
  <td width=72 valign=top style='width:.75in;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify;page-break-after:avoid'><span
  style='font-family:"Courier New"'>ne</span></p>
  </td>
  <td width=155 valign=top style='width:116.1pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='page-break-after:avoid'>Not equal</p>
  </td>
  <td width=385 valign=top style='width:288.9pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify;page-break-after:avoid'><span
  style='font-size:9.0pt;font-family:"Courier New"'>Address/City ne 'London'</span></p>
  </td>
 </tr>
 <tr>
  <td width=72 valign=top style='width:.75in;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify;page-break-after:avoid'><span
  style='font-family:"Courier New"'>gt</span></p>
  </td>
  <td width=155 valign=top style='width:116.1pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='page-break-after:avoid'>Greater than</p>
  </td>
  <td width=385 valign=top style='width:288.9pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify;page-break-after:avoid'><span
  style='font-size:9.0pt;font-family:"Courier New"'>Price gt 20</span></p>
  </td>
 </tr>
 <tr>
  <td width=72 valign=top style='width:.75in;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify;page-break-after:avoid'><span
  style='font-family:"Courier New"'>ge</span></p>
  </td>
  <td width=155 valign=top style='width:116.1pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='page-break-after:avoid'>Greater than or equal</p>
  </td>
  <td width=385 valign=top style='width:288.9pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify;page-break-after:avoid'><span
  style='font-size:9.0pt;font-family:"Courier New"'>Price ge 10</span></p>
  </td>
 </tr>
 <tr>
  <td width=72 valign=top style='width:.75in;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify;page-break-after:avoid'><span
  style='font-family:"Courier New"'>lt</span></p>
  </td>
  <td width=155 valign=top style='width:116.1pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='page-break-after:avoid'>Less than</p>
  </td>
  <td width=385 valign=top style='width:288.9pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify;page-break-after:avoid'><span
  style='font-size:9.0pt;font-family:"Courier New"'>Price lt 20</span></p>
  </td>
 </tr>
 <tr>
  <td width=72 valign=top style='width:.75in;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify;page-break-after:avoid'><span
  style='font-family:"Courier New"'>le</span></p>
  </td>
  <td width=155 valign=top style='width:116.1pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='page-break-after:avoid'>Less than or equal</p>
  </td>
  <td width=385 valign=top style='width:288.9pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify;page-break-after:avoid'><span
  style='font-size:9.0pt;font-family:"Courier New"'>Price le 100</span></p>
  </td>
 </tr>
 <tr>
  <td width=72 valign=top style='width:.75in;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify'><code>has</code></p>
  </td>
  <td width=155 valign=top style='width:116.1pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Has flags</p>
  </td>
  <td width=385 valign=top style='width:288.9pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify'><span style='font-size:9.0pt;
  font-family:"Courier New"'>Style has Sales.Color'Yellow'</span></p>
  </td>
 </tr>
 <tr>
  <td width=72 valign=top style='width:.75in;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify'><code>in</code></p>
  </td>
  <td width=155 valign=top style='width:116.1pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Is a member of</p>
  </td>
  <td width=385 valign=top style='width:288.9pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify'><span style='font-size:9.0pt;
  font-family:"Courier New"'>Address/City in ('Redmond', 'London')</span></p>
  </td>
 </tr>
 <tr>
  <td width=612 colspan=3 valign=top style='width:459.0pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='page-break-after:avoid'><b>Logical Operators </b></p>
  </td>
 </tr>
 <tr>
  <td width=72 valign=top style='width:.75in;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify;page-break-after:avoid'><span
  style='font-family:"Courier New"'>and</span></p>
  </td>
  <td width=155 valign=top style='width:116.1pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='page-break-after:avoid'>Logical and</p>
  </td>
  <td width=385 valign=top style='width:288.9pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify;page-break-after:avoid'><span
  style='font-size:9.0pt;font-family:"Courier New"'>Price le 200 and Price gt
  3.5</span></p>
  </td>
 </tr>
 <tr>
  <td width=72 valign=top style='width:.75in;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify;page-break-after:avoid'><span
  style='font-family:"Courier New"'>or</span></p>
  </td>
  <td width=155 valign=top style='width:116.1pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='page-break-after:avoid'>Logical or</p>
  </td>
  <td width=385 valign=top style='width:288.9pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify;page-break-after:avoid'><span
  style='font-size:9.0pt;font-family:"Courier New"'>Price le 3.5 or Price gt
  200</span></p>
  </td>
 </tr>
 <tr>
  <td width=72 valign=top style='width:.75in;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify'><code>not</code></p>
  </td>
  <td width=155 valign=top style='width:116.1pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Logical negation</p>
  </td>
  <td width=385 valign=top style='width:288.9pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify'><span style='font-size:9.0pt;
  font-family:"Courier New"'>not endswith(Description,'milk')</span></p>
  </td>
 </tr>
 <tr>
  <td width=612 colspan=3 valign=top style='width:459.0pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='page-break-after:avoid'><b>Arithmetic Operators</b></p>
  </td>
 </tr>
 <tr>
  <td width=72 valign=top style='width:.75in;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify;page-break-after:avoid'><span
  style='font-family:"Courier New"'>add</span></p>
  </td>
  <td width=155 valign=top style='width:116.1pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='page-break-after:avoid'>Addition</p>
  </td>
  <td width=385 valign=top style='width:288.9pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify;page-break-after:avoid'><span
  style='font-size:9.0pt;font-family:"Courier New"'>Price add 5 gt 10</span></p>
  </td>
 </tr>
 <tr>
  <td width=72 valign=top style='width:.75in;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify;page-break-after:avoid'><span
  style='font-family:"Courier New"'>sub</span></p>
  </td>
  <td width=155 valign=top style='width:116.1pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='page-break-after:avoid'>Subtraction</p>
  </td>
  <td width=385 valign=top style='width:288.9pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify;page-break-after:avoid'><span
  style='font-size:9.0pt;font-family:"Courier New"'>Price sub 5 gt 10</span></p>
  </td>
 </tr>
 <tr>
  <td width=72 valign=top style='width:.75in;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify;page-break-after:avoid'><span
  style='font-family:"Courier New"'>mul</span></p>
  </td>
  <td width=155 valign=top style='width:116.1pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='page-break-after:avoid'>Multiplication</p>
  </td>
  <td width=385 valign=top style='width:288.9pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify;page-break-after:avoid'><span
  style='font-size:9.0pt;font-family:"Courier New"'>Price mul 2 gt 2000</span></p>
  </td>
 </tr>
 <tr>
  <td width=72 valign=top style='width:.75in;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify;page-break-after:avoid'><span
  style='font-family:"Courier New"'>div</span></p>
  </td>
  <td width=155 valign=top style='width:116.1pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='page-break-after:avoid'>Division</p>
  </td>
  <td width=385 valign=top style='width:288.9pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify;page-break-after:avoid'><span
  style='font-size:9.0pt;font-family:"Courier New"'>Price div 2 gt 4</span></p>
  </td>
 </tr>
 <tr>
  <td width=72 valign=top style='width:.75in;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify'><code>divby</code></p>
  </td>
  <td width=155 valign=top style='width:116.1pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Decimal Division</p>
  </td>
  <td width=385 valign=top style='width:288.9pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify'><span style='font-size:9.0pt;
  font-family:"Courier New"'>Price divby 2 gt 3.5</span></p>
  </td>
 </tr>
 <tr>
  <td width=72 valign=top style='width:.75in;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify'><code>mod</code></p>
  </td>
  <td width=155 valign=top style='width:116.1pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Modulo</p>
  </td>
  <td width=385 valign=top style='width:288.9pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify'><span style='font-size:9.0pt;
  font-family:"Courier New"'>Price mod 2 eq 0</span></p>
  </td>
 </tr>
 <tr>
  <td width=612 colspan=3 valign=top style='width:459.0pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='page-break-after:avoid'><b>Grouping Operators</b></p>
  </td>
 </tr>
 <tr>
  <td width=72 valign=top style='width:.75in;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify'><code>(
  )</code></p>
  </td>
  <td width=155 valign=top style='width:116.1pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Precedence grouping</p>
  </td>
  <td width=385 valign=top style='width:288.9pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify'><span style='font-size:9.0pt;
  font-family:"Courier New"'>(</span><span style='font-size:9.0pt;font-family:
  "Courier New"'>Price sub 5) gt 10</span></p>
  </td>
 </tr>
</table>

<h5>11.2.6.1.2 Built-in Query Functions</h5>

<p class=MsoNormal>OData supports a set of built-in functions that can be used
within <code>$filter</code> operations. The following table
lists the available functions. </p>

<p class=MsoNormal>4.01 services MUST support case-insensitive built-in
function names. Clients that want to work with 4.0 services MUST use lower case
names. </p>

<p class=MsoNormal>For a full description of the syntax used when building
requests, see <a href="#ODataURL">OData&#8209;URL</a>.</p>

<p class=MsoNormal>OData does not define an ISNULL or COALESCE operator.
Instead, there is a <code>null</code> literal that can be used
in comparisons.</p>

<table class=MsoNormalTable border=0 cellspacing=0 cellpadding=0 width=614
 style='width:460.7pt;margin-left:5.4pt;border-collapse:collapse'>
 <thead>
  <tr>
   <td width=161 valign=top style='width:120.5pt;background:#EEECE1;padding:
   0in 5.4pt 0in 5.4pt'>
   <p class=MsoNormal><b>Function</b></p>
   </td>
   <td width=454 valign=top style='width:340.2pt;background:#EEECE1;padding:
   0in 5.4pt 0in 5.4pt'>
   <p class=MsoNormal><b>Example</b></p>
   </td>
  </tr>
 </thead>
 <tr>
  <td width=614 colspan=2 valign=top style='width:460.7pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='page-break-after:avoid'><b>String and Collection Functions</b></p>
  </td>
 </tr>
 <tr>
  <td width=161 valign=top style='width:120.5pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify;page-break-after:avoid'><span
  style='font-family:"Courier New"'>concat</span></p>
  </td>
  <td width=454 valign=top style='width:340.2pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify;page-break-after:avoid'><span
  style='font-size:9.0pt;font-family:"Courier New"'>concat(concat(City,', '),
  Country) eq 'Berlin, Germany'</span></p>
  </td>
 </tr>
 <tr>
  <td width=161 valign=top style='width:120.5pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify;page-break-after:avoid'><span
  style='font-family:"Courier New"'>contains</span></p>
  </td>
  <td width=454 valign=top style='width:340.2pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify;page-break-after:avoid'><span
  style='font-size:9.0pt;font-family:"Courier New"'>contains(CompanyName,'freds')</span></p>
  </td>
 </tr>
 <tr>
  <td width=161 valign=top style='width:120.5pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify;page-break-after:avoid'><span
  style='font-family:"Courier New"'>endswith</span></p>
  </td>
  <td width=454 valign=top style='width:340.2pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify;page-break-after:avoid'><span
  style='font-size:9.0pt;font-family:"Courier New"'>endswith(CompanyName,'Futterkiste')</span></p>
  </td>
 </tr>
 <tr>
  <td width=161 valign=top style='width:120.5pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify;page-break-after:avoid'><span
  style='font-family:"Courier New"'>indexof</span></p>
  </td>
  <td width=454 valign=top style='width:340.2pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify;page-break-after:avoid'><span
  style='font-size:9.0pt;font-family:"Courier New"'>indexof(CompanyName,'lfreds')
  eq 1</span></p>
  </td>
 </tr>
 <tr>
  <td width=161 valign=top style='width:120.5pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify;page-break-after:avoid'><span
  style='font-family:"Courier New"'>length</span></p>
  </td>
  <td width=454 valign=top style='width:340.2pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify;page-break-after:avoid'><span
  style='font-size:9.0pt;font-family:"Courier New"'>length(CompanyName) eq 19</span></p>
  </td>
 </tr>
 <tr>
  <td width=161 valign=top style='width:120.5pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify;page-break-after:avoid'><span
  style='font-family:"Courier New"'>startswith</span></p>
  </td>
  <td width=454 valign=top style='width:340.2pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify;page-break-after:avoid'><span
  style='font-size:9.0pt;font-family:"Courier New"'>startswith(CompanyName,’Alfr’)</span></p>
  </td>
 </tr>
 <tr>
  <td width=161 valign=top style='width:120.5pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify'><code>substring</code></p>
  </td>
  <td width=454 valign=top style='width:340.2pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify'><span style='font-size:9.0pt;
  font-family:"Courier New"'>substring(CompanyName,1) eq 'lfreds Futterkiste'</span></p>
  </td>
 </tr>
 <tr>
  <td width=614 colspan=2 valign=top style='width:460.7pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='page-break-after:avoid'><b>Collection Functions </b></p>
  </td>
 </tr>
 <tr>
  <td width=161 valign=top style='width:120.5pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify;page-break-after:avoid'><span
  style='font-family:"Courier New"'>hassubset</span></p>
  </td>
  <td width=454 valign=top style='width:340.2pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify;page-break-after:avoid'><span
  style='font-size:9.0pt;font-family:"Courier New"'>hassubset([4,1,3],[3,1])</span></p>
  </td>
 </tr>
 <tr>
  <td width=161 valign=top style='width:120.5pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify'><code>hassubsequence</code></p>
  </td>
  <td width=454 valign=top style='width:340.2pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify'><span style='font-size:9.0pt;
  font-family:"Courier New"'>hassubsequence([4,1,3,1],[1,1])</span></p>
  </td>
 </tr>
 <tr>
  <td width=614 colspan=2 valign=top style='width:460.7pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='page-break-after:avoid'><b>String Functions </b></p>
  </td>
 </tr>
 <tr>
  <td width=161 valign=top style='width:120.5pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify;page-break-after:avoid'><span
  style='font-family:"Courier New"'>matchesPattern</span></p>
  </td>
  <td width=454 valign=top style='width:340.2pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify;page-break-after:avoid'><span
  style='font-size:9.0pt;font-family:"Courier New"'>matchesPattern(CompanyName,'%5EA.*e$')</span></p>
  </td>
 </tr>
 <tr>
  <td width=161 valign=top style='width:120.5pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify;page-break-after:avoid'><span
  style='font-family:"Courier New"'>tolower</span></p>
  </td>
  <td width=454 valign=top style='width:340.2pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify;page-break-after:avoid'><span
  style='font-size:9.0pt;font-family:"Courier New"'>tolower(CompanyName) eq
  'alfreds futterkiste'</span></p>
  </td>
 </tr>
 <tr>
  <td width=161 valign=top style='width:120.5pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify;page-break-after:avoid'><span
  style='font-family:"Courier New"'>toupper</span></p>
  </td>
  <td width=454 valign=top style='width:340.2pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify;page-break-after:avoid'><span
  style='font-size:9.0pt;font-family:"Courier New"'>toupper(CompanyName) eq
  'ALFREDS FUTTERKISTE'</span></p>
  </td>
 </tr>
 <tr>
  <td width=161 valign=top style='width:120.5pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify'><code>trim  </code></p>
  </td>
  <td width=454 valign=top style='width:340.2pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify'><span style='font-size:9.0pt;
  font-family:"Courier New"'>trim(CompanyName) eq 'Alfreds Futterkiste'</span></p>
  </td>
 </tr>
 <tr>
  <td width=614 colspan=2 valign=top style='width:460.7pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='page-break-after:avoid'><b>Date and Time Functions </b></p>
  </td>
 </tr>
 <tr>
  <td width=161 valign=top style='width:120.5pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify;page-break-after:avoid'><span
  style='font-family:"Courier New"'>day</span></p>
  </td>
  <td width=454 valign=top style='width:340.2pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify;page-break-after:avoid'><span
  style='font-size:9.0pt;font-family:"Courier New"'>day(StartTime) eq 8</span></p>
  </td>
 </tr>
 <tr>
  <td width=161 valign=top style='width:120.5pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify;page-break-after:avoid'><span
  style='font-family:"Courier New"'>date</span></p>
  </td>
  <td width=454 valign=top style='width:340.2pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify;page-break-after:avoid'><span
  style='font-size:9.0pt;font-family:"Courier New"'>date(StartTime) ne date(EndTime)
  </span></p>
  </td>
 </tr>
 <tr>
  <td width=161 valign=top style='width:120.5pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify;page-break-after:avoid'><span
  style='font-family:"Courier New"'>fractionalseconds</span></p>
  </td>
  <td width=454 valign=top style='width:340.2pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify;page-break-after:avoid'><span
  style='font-size:9.0pt;font-family:"Courier New"'>second(StartTime) eq 0</span></p>
  </td>
 </tr>
 <tr>
  <td width=161 valign=top style='width:120.5pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify;page-break-after:avoid'><span
  style='font-family:"Courier New"'>hour</span></p>
  </td>
  <td width=454 valign=top style='width:340.2pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify;page-break-after:avoid'><span
  style='font-size:9.0pt;font-family:"Courier New"'>hour(StartTime) eq 1 </span></p>
  </td>
 </tr>
 <tr>
  <td width=161 valign=top style='width:120.5pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify;page-break-after:avoid'><span
  style='font-family:"Courier New"'>maxdatetime</span></p>
  </td>
  <td width=454 valign=top style='width:340.2pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify;page-break-after:avoid'><span
  style='font-size:9.0pt;font-family:"Courier New"'>EndTime eq maxdatetime()</span></p>
  </td>
 </tr>
 <tr>
  <td width=161 valign=top style='width:120.5pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify;page-break-after:avoid'><span
  style='font-family:"Courier New"'>mindatetime</span></p>
  </td>
  <td width=454 valign=top style='width:340.2pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify;page-break-after:avoid'><span
  style='font-size:9.0pt;font-family:"Courier New"'>StartTime eq mindatetime()</span></p>
  </td>
 </tr>
 <tr>
  <td width=161 valign=top style='width:120.5pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify;page-break-after:avoid'><span
  style='font-family:"Courier New"'>minute</span></p>
  </td>
  <td width=454 valign=top style='width:340.2pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify;page-break-after:avoid'><span
  style='font-size:9.0pt;font-family:"Courier New"'>minute(StartTime) eq 0</span></p>
  </td>
 </tr>
 <tr>
  <td width=161 valign=top style='width:120.5pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify;page-break-after:avoid'><span
  style='font-family:"Courier New"'>month</span></p>
  </td>
  <td width=454 valign=top style='width:340.2pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify;page-break-after:avoid'><span
  style='font-size:9.0pt;font-family:"Courier New"'>month(BirthDate) eq 12</span></p>
  </td>
 </tr>
 <tr>
  <td width=161 valign=top style='width:120.5pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify;page-break-after:avoid'><span
  style='font-family:"Courier New"'>now</span></p>
  </td>
  <td width=454 valign=top style='width:340.2pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify;page-break-after:avoid'><span
  style='font-size:9.0pt;font-family:"Courier New"'>StartTime ge now()</span></p>
  </td>
 </tr>
 <tr>
  <td width=161 valign=top style='width:120.5pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify;page-break-after:avoid'><span
  style='font-family:"Courier New"'>second</span></p>
  </td>
  <td width=454 valign=top style='width:340.2pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify;page-break-after:avoid'><span
  style='font-size:9.0pt;font-family:"Courier New"'>second(StartTime) eq 0</span></p>
  </td>
 </tr>
 <tr>
  <td width=161 valign=top style='width:120.5pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify;page-break-after:avoid'><span
  style='font-family:"Courier New"'>time</span></p>
  </td>
  <td width=454 valign=top style='width:340.2pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify;page-break-after:avoid'><span
  style='font-size:9.0pt;font-family:"Courier New"'>time(StartTime) le StartOfDay</span></p>
  </td>
 </tr>
 <tr>
  <td width=161 valign=top style='width:120.5pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify;page-break-after:avoid'><span
  style='font-family:"Courier New"'>totaloffsetminutes</span></p>
  </td>
  <td width=454 valign=top style='width:340.2pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify;page-break-after:avoid'><span
  style='font-size:9.0pt;font-family:"Courier New"'>totaloffsetminutes(StartTime)
  eq 60</span></p>
  </td>
 </tr>
 <tr>
  <td width=161 valign=top style='width:120.5pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify;page-break-after:avoid'><span
  style='font-family:"Courier New"'>totalseconds</span></p>
  </td>
  <td width=454 valign=top style='width:340.2pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify;page-break-after:avoid'><span
  style='font-size:9.0pt;font-family:"Courier New"'>totalseconds(duration'PT1M')
  eq 60</span></p>
  </td>
 </tr>
 <tr>
  <td width=161 valign=top style='width:120.5pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify'><code>year</code></p>
  </td>
  <td width=454 valign=top style='width:340.2pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify'><span style='font-size:9.0pt;
  font-family:"Courier New"'>year(BirthDate) eq 0</span></p>
  </td>
 </tr>
 <tr>
  <td width=614 colspan=2 valign=top style='width:460.7pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='page-break-after:avoid'><b>Arithmetic Functions</b></p>
  </td>
 </tr>
 <tr>
  <td width=161 valign=top style='width:120.5pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify;page-break-after:avoid'><span
  style='font-family:"Courier New"'>ceiling</span></p>
  </td>
  <td width=454 valign=top style='width:340.2pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify;page-break-after:avoid'><span
  style='font-size:9.0pt;font-family:"Courier New"'>ceiling(Freight) eq 33</span></p>
  </td>
 </tr>
 <tr>
  <td width=161 valign=top style='width:120.5pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify;page-break-after:avoid'><span
  style='font-family:"Courier New"'>floor</span></p>
  </td>
  <td width=454 valign=top style='width:340.2pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify;page-break-after:avoid'><span
  style='font-size:9.0pt;font-family:"Courier New"'>floor(Freight) eq 32</span></p>
  </td>
 </tr>
 <tr>
  <td width=161 valign=top style='width:120.5pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify'><code>round</code></p>
  </td>
  <td width=454 valign=top style='width:340.2pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify'><span style='font-size:9.0pt;
  font-family:"Courier New"'>round(Freight) eq 32</span></p>
  </td>
 </tr>
 <tr>
  <td width=614 colspan=2 valign=top style='width:460.7pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='page-break-after:avoid'><b>Type Functions</b></p>
  </td>
 </tr>
 <tr>
  <td width=161 valign=top style='width:120.5pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify;page-break-after:avoid'><span
  style='font-family:"Courier New"'>cast</span></p>
  </td>
  <td width=454 valign=top style='width:340.2pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify;page-break-after:avoid'><span
  style='font-size:9.0pt;font-family:"Courier New"'>cast(ShipCountry,Edm.String)</span></p>
  </td>
 </tr>
 <tr>
  <td width=161 valign=top style='width:120.5pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify;page-break-after:avoid'><span
  style='font-family:"Courier New"'>isof</span></p>
  </td>
  <td width=454 valign=top style='width:340.2pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify;page-break-after:avoid'><span
  style='font-size:9.0pt;font-family:"Courier New"'>isof(NorthwindModel.Order)</span></p>
  </td>
 </tr>
 <tr>
  <td width=161 valign=top style='width:120.5pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify'><code>isof</code></p>
  </td>
  <td width=454 valign=top style='width:340.2pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify'><span style='font-size:9.0pt;
  font-family:"Courier New"'>isof(ShipCountry,Edm.String)</span></p>
  </td>
 </tr>
 <tr>
  <td width=614 colspan=2 valign=top style='width:460.7pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><b>Geo Functions</b></p>
  </td>
 </tr>
 <tr>
  <td width=161 valign=top style='width:120.5pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify;page-break-after:avoid'><span
  style='font-family:"Courier New"'>geo.distance</span></p>
  </td>
  <td width=454 valign=top style='width:340.2pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify;page-break-after:avoid'><span
  style='font-size:9.0pt;font-family:"Courier New"'>geo.distance(CurrentPosition,TargetPosition)</span></p>
  </td>
 </tr>
 <tr>
  <td width=161 valign=top style='width:120.5pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify;page-break-after:avoid'><span
  style='font-family:"Courier New"'>geo.intersects</span></p>
  </td>
  <td width=454 valign=top style='width:340.2pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify;page-break-after:avoid'><span
  style='font-size:9.0pt;font-family:"Courier New"'>geo.intersects(Position,TargetArea)</span></p>
  </td>
 </tr>
 <tr>
  <td width=161 valign=top style='width:120.5pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify'><code>geo.length</code></p>
  </td>
  <td width=454 valign=top style='width:340.2pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify'><span style='font-size:9.0pt;
  font-family:"Courier New"'>geo.length(DirectRoute)</span></p>
  </td>
 </tr>
 <tr>
  <td width=614 colspan=2 valign=top style='width:460.7pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><b>Conditional
  Functions</b></p>
  </td>
 </tr>
 <tr>
  <td width=161 valign=top style='width:120.5pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify'><code>case</code></p>
  </td>
  <td width=454 valign=top style='width:340.2pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify'><span style='font-size:9.0pt;
  font-family:"Courier New"'>case(X gt 0:1,X lt 0:-1,true:0)</span></p>
  </td>
 </tr>
</table>

<h5>Parameter Aliases</h5>

<p class=MsoNormal>Parameter aliases can be used in place of literal values in
entity keys, <a href="#sec_InvokingaFunction">function parameters</a><span
class=MsoHyperlink>,</span> or within a <a href="#sec_SystemQueryOptioncompute"><code>$compute</code></a><span class=Datatype><span
style='font-family:"Arial",sans-serif'>,</span></span> <a
href="#sec_SystemQueryOptionfilter"><code>$filter</code></a>
or <a href="#sec_SystemQueryOptionorderby"><code>$orderby</code></a>
expression. Parameters aliases are names beginning with an at sign (<code>@</code>).</p>

<p class=MsoNormal style='page-break-after:avoid'>Actual parameter values are
specified as query options in the query part of the request URL. The query
option name is the name of the parameter alias, and the query option value is
the value to be used for the specified parameter alias. </p>

<p class=MsoCaption>Example 48: returns all employees whose Region property
matches the string parameter value &quot;WA&quot;</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>GET <span class=VerbatimChar><span style='color:
black'>http://host/service.svc/Employees?$filter=Region eq @p1&amp;@p1='WA'</span></span></p>

</div>

<p class=MsoNormal>Parameter aliases allow the same value to be used multiple
times in a request and may be used to reference primitive, structured, or
collection values.</p>

<p class=MsoNormal>If a parameter alias is not given a value in the query part
of the request URL, the value MUST be assumed to be null. A parameter alias can
be used in multiple places within a request URL, but its value MUST NOT be
specified more than once.</p>

<p class=MsoNormal>Parameter alias values used in <code>/$filter</code>
path segments are always passed as expressions (because that is the expected
type of the parameter). </p>

<p class=MsoNormal>All other parameter alias values are evaluated in the
context of the resource identified by the path segment in which they are assigned
and passed as values into the expression. Parameter alias value assignments MAY
be nested within <code>$expand</code> and <code>$select</code><span
class=Datatype><span style='font-family:"Arial",sans-serif'>, in which case
they are evaluated relative to the resource context of the </span></span><code>$expand</code> or <code>$select</code>.</p>

<p class=MsoCaption>Example 49: returns all employees, expands their manager,
and expands all direct reports with the same first name as the manager, using a
parameter alias for <code>$this</code> to pass the manager into
the filter on the expanded direct reports</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>GET <span class=VerbatimChar><span style='color:
black'>http://host/service.svc/Employees?$expand=Manager(@m=$this;$expand=DirectReports($filter=@m/FirstName
eq FirstName))</span></span></p>

</div>

<h4>11.2.6.2 <a
href="#sec_SystemQueryOptionorderby">System Query Option <code>$orderby</code></a></h4>

<p class=MsoNormal>The <code>$orderby</code> System Query option
specifies the order in which items are returned from the service.</p>

<p class=MsoNormal>The value of the <code>$orderby</code> System
Query option contains a comma-separated list of expressions whose primitive
result values are used to sort the items. A special case of such an expression
is a property path terminating on a primitive property. A type cast using the
qualified entity type name is required to order by a property defined on a
derived type. Only aliases defined in the metadata document of the service can
be used in URLs.</p>

<p class=MsoNormal>The expression can include the suffix <code>asc</code>
for ascending or <code>desc</code> for descending, separated
from the property name by one or more spaces. If <code>asc</code>
or <code>desc</code> is not specified, the service MUST order by
the specified property in ascending order. 4.01 services MUST support
case-insensitive values for <code>asc</code> and <code>desc</code>. Clients that want to work with 4.0 services MUST use
lower case values.</p>

<p class=MsoNormal style='page-break-after:avoid'>Null values come before
non-null values when sorting in ascending order and after non-null values when
sorting in descending order. </p>

<p class=MsoNormal style='page-break-after:avoid'>Items are sorted by the
result values of the first expression, and then items with the same value for
the first expression are sorted by the result value of the second expression,
and so on. </p>

<p class=MsoNormal style='page-break-after:avoid'>The Boolean value false comes
before the value true in ascending order.</p>

<p class=MsoNormal>Services SHOULD order language-dependent strings according
to the <a href="#sec_HeaderContentLanguage">content-language</a> of the
response, and SHOULD annotate string properties with language-dependent order
with the term <a
href="https://github.com/oasis-tcs/odata-vocabularies/blob/master/vocabularies/Org.OData.Core.V1.md#IsLanguageDependent"><code>Core.IsLanguageDependent</code></a>, see <a href="#ODataVocCore">OData-VocCore</a>.</p>

<p class=MsoNormal style='page-break-after:avoid'>Values of type <code>Edm.Stream</code> or any of the <code>Geo</code>
types cannot be sorted.</p>

<p class=MsoCaption>Example 50: return all Products ordered by release date in
ascending order, then by rating in descending order</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>GET http://host/service/Products?$orderby=ReleaseDate asc,
Rating desc</p>

</div>

<p class=MsoNormal>Related entities may be
ordered by specifying <code>$orderby</code> within the <code>$expand</code> clause.</p>

<p class=MsoCaption>Example 51: return all Categories, and their Products
ordered according to release date and in descending order of rating</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'><span
style='color:black'>GET http://host/service/Categories?<br>
   $expand=Products($orderby=ReleaseDate asc, Rating desc)</span></p>

</div>

<p class=MsoNormal><code>$count</code> may be used within a <code>$orderby</code> expression to order the returned items according
to the exact count of related entities or items within a collection-valued
property.</p>

<p class=MsoCaption>Example 52: return all Categories ordered by the number of
Products within each category</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>GET http://host/service/Categories?$orderby=Products/$count</p>

</div>

<h4>11.2.6.3 <a href="#sec_SystemQueryOptiontop">System
Query Option <code>$top</code></a></h4>

<p class=MsoNormal style='page-break-after:avoid'>The <code>$top</code>
system query option specifies a non-negative integer n that limits the number
of items returned from a collection. The service returns the number of
available items up to but not greater than the specified value n.</p>

<p class=MsoCaption>Example 53: return only the first five products of the
Products entity set</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>GET http://host/service/Products?$top=5</p>

</div>

<p class=MsoNormal>If no unique ordering is imposed through an <a
href="#sec_SystemQueryOptionorderby"><code>$orderby</code></a>
query option, the service MUST impose a stable ordering across requests that
include <code>$top</code>.</p>

<h4>11.2.6.4 <a href="#sec_SystemQueryOptionskip">System
Query Option <code>$skip</code></a></h4>

<p class=MsoNormal style='page-break-after:avoid'>The <code>$skip</code>
system query option specifies a non-negative integer n that excludes the first
n items of the queried collection from the result. The service returns items
starting at position n+1.</p>

<p class=MsoCaption>Example 54: return products starting with the 6th product
of the <code>Products</code> entity set</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>GET http://host/service/Products?$skip=5</p>

</div>

<p class=MsoNormal style='page-break-after:avoid'>Where <a
href="#sec_SystemQueryOptiontop"><code>$top</code><span
style='font-family:"Calibri",sans-serif'> </span></a>and <code>$skip</code>
are used together, <code>$skip</code> MUST be applied before <code>$top</code>, regardless of the order in which they appear in the
request. </p>

<p class=MsoCaption>Example 55: return the third through seventh products of
the <code>Products</code> entity set</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>GET http://host/service/Products?$top=5&amp;$skip=2</p>

</div>

<p class=MsoNormal>If no unique ordering is imposed through an <a
href="#sec_SystemQueryOptionorderby"><code>$orderby</code></a>
query option, the service MUST impose a stable ordering across requests that
include <code>$skip</code>.</p>

<h4>11.2.6.5 <a
href="#sec_SystemQueryOptioncount">System Query Option <code>$count</code></a></h4>

<p class=MsoNormal style='page-break-after:avoid'>The <code>$count</code> system query option with a value of <code>true</code> specifies that the total count of
items within a collection matching the request be returned along with the
result. </p>

<p class=MsoCaption>Example 56: return, along with the results, the total
number of products in the collection</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>GET http://host/service/Products?$count=true</p>

</div>

<p class=MsoNormal>The count of related entities can be requested by specifying
the<code> </code><code>$count</code> query option within the <code>$expand</code>
clause. </p>

<p class=MsoCaption>Example 57:</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>GET http://host/service/Categories?$expand=Products($count=true)</p>

</div>

<p class=MsoNormal>A <code>$count</code>
query option with a value of <code>false</code> (or not
specified) hints that the service SHOULD NOT return a count.</p>

<p class=MsoNormal>The service returns an HTTP Status code of <code>400 Bad Request</code> if a value other than <code>true</code> or <code>false</code> is specified.</p>

<p class=MsoNormal>The <code>$count</code> system query option
ignores any <a href="#sec_SystemQueryOptiontop"><code>$top</code></a>,
<a href="#sec_SystemQueryOptionskip"><code>$skip</code></a>,
or <a href="#sec_SystemQueryOptionexpand"><code>$expand</code></a>
query options, and returns the total count of results across all pages
including only those results matching any specified <a
href="#sec_SystemQueryOptionfilter"><code>$filter</code></a>
and <a href="#sec_SystemQueryOptionsearch"><code>$search</code></a>.
Clients should be aware that the count returned inline may not exactly equal
the actual number of items returned, due to latency between calculating the
count and enumerating the last value or due to inexact calculations on the
service.</p>

<p class=MsoNormal>How the count is encoded in the response body is dependent
upon the selected format.</p>

<h4>11.2.6.6 <a
href="#sec_SystemQueryOptionsearch">System Query Option <code>$search</code></a></h4>

<p class=MsoNormal style='page-break-after:avoid'>The <code>$search</code>
system query option restricts the result to include only those items <i>matching</i>
the specified search expression. The definition of what it means to match is
dependent upon the implementation.</p>

<p class=MsoCaption>Example 58: return all Products that match the search term
&quot;bike&quot;</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>GET http://host/service/Products?$search=bike</p>

</div>

<p class=MsoNormal>The search expression can contain phrases, enclosed in
double-quotes. </p>

<p class=MsoCaption>Example 59: return all Products that match the phrase
&quot;mountain bike&quot;</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>GET http://host/service/Products?$search=&quot;mountain
bike&quot;</p>

</div>

<p class=MsoNormal>The upper-case keyword <code>NOT</code> restricts
the set of entities to those that do not match the specified term. </p>

<p class=MsoCaption>Example 60: return all Products that do not match
&quot;clothing&quot;</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>GET http://host/service/Products?$search=NOT clothing</p>

</div>

<p class=MsoNormal>Multiple terms within a search expression are separated by a
space (implicit <code>AND</code>) or the upper-case keyword <code>AND</code>, indicating that all such terms must be matched. </p>

<p class=MsoCaption>Example 61: return all Products that match both
&quot;mountain&quot; and &quot;bike&quot;</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>GET http://host/service/Products?$search=mountain AND bike</p>

</div>

<p class=MsoNormal style='page-break-after:avoid'>The upper-case keyword <code>OR</code> is used to return entities that satisfy either the
immediately preceding or subsequent expression. </p>

<p class=MsoCaption>Example 62: return all Products that match either
&quot;mountain&quot; or &quot;bike&quot;</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>GET http://host/service/Products?$search=mountain OR bike</p>

</div>

<p class=MsoNormal style='page-break-after:avoid'>Parentheses within the search
expression group together multiple expressions. </p>

<p class=MsoCaption>Example 63: return all Products that match either
&quot;mountain&quot; or &quot;bike&quot; and do not match clothing</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'><span
style='color:black'>GET http://host/service/Products?$search=<span
class=MsoHyperlink>(</span>mountain OR bike)
AND NOT clothing </span></p>

</div>

<p class=MsoNormal>The operations within a search expression MUST be evaluated
in the following order: grouping operator, <code>NOT</code>
operator, <code>AND</code> operator, <code>OR</code>
operator</p>

<p class=MsoNormal>If both <code>$search</code> and <a
href="#sec_SystemQueryOptionfilter"><code>$filter</code></a>
are specified in the same request, only those items satisfying both criteria
are returned.</p>

<p class=MsoNormal>The value of the <code>$search</code> option
is a search expression as defined in <a href="#ODataABNF">OData-ABNF</a>.</p>

<h4>11.2.6.7 Server-Driven
Paging</h4>

<p class=MsoNormal>Responses that include only a partial set of the items
identified by the request URL MUST contain a link that allows retrieving the
next partial set of items. This link is called a <i>next link</i>; its representation
is format-specific. The final partial set of items MUST NOT contain a next
link.</p>

<p class=MsoNormal>The client can request a maximum page size through the <a
href="#sec_Preferencemaxpagesizeodatamaxpagesiz"><code>maxpagesize</code></a>
preference. The service may apply this requested page size or implement a page
size different than, or in the absence of, this preference. </p>

<p class=MsoNormal>OData clients MUST treat the URL of the next link as opaque,
and MUST NOT append system query options to the URL of a next link. Services
may not allow a change of format on requests for subsequent pages using the
next link. Clients therefore SHOULD request the same format on subsequent page requests
using a compatible <code>Accept</code> header. OData services
may use the reserved system query option <code>$skiptoken</code>
when building next links. Its content is opaque, service-specific, and must
only follow the rules for URL query parts. </p>

<p class=MsoNormal>OData clients MUST NOT use the system query option <code>$skiptoken</code> when constructing requests. </p>

<h4>11.2.6.8 Requesting an Individual
Member of an Ordered Collection</h4>

<p class=MsoNormal>Individual
members of collections of primitive and complex types annotated with the <code>Ordered</code> term (see <a href="#ODataVocCore">OData-VocCore</a>)
are addressable by appending a segment containing the zero-based ordinal to the
URL of the collection. A negative ordinal indexes from the end of the
collection, with -1 representing the last item in the collection.</p>

<p class=MsoNormal>Entities are stably addressable using their canonical URL
and are not accessible using an ordinal index.</p>

<p class=MsoCaption>Example 64: the first address in a list of addresses for <code>MainSupplier</code></p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;page-break-after:avoid;
background:#D9D9D9'><span style='color:black'>GET <span class=MsoHyperlink>http://host/service/Suppliers(MainSupplier)/Addresses/0</span></span></p>

</div>

<h3>Requesting Related Entities</h3>

<p class=MsoNormal>To request related entities according to a particular
relationship, the client issues a <code>GET</code> request to
the source entity’s request URL, followed by a forward slash and the name of
the navigation property representing the relationship.</p>

<p class=MsoNormal>If the navigation property does not exist on the entity
indicated by the request URL, the service returns <a
href="#sec_ResponseCode404NotFound"><code>404
Not Found</code></a>.</p>

<p class=MsoNormal>If the relationship terminates on a collection, the response
MUST be the format-specific representation of the collection of related
entities. If no entities are related, the response is the format-specific
representation of an empty collection.</p>

<p class=MsoNormal>If the relationship terminates on a single entity, the
response MUST be the format-specific representation of the related single
entity. If no entity is related, the service returns <a
href="#sec_ResponseCode204NoContent"><code>204
No Content</code></a>.</p>

<p class=MsoCaption>Example 65: return the supplier of the product with <code>ID=1 </code>in the Products entity set</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>GET http://host/service/Products(1)/Supplier</p>

</div>

<h3>Requesting Entity References</h3>

<p class=MsoNormal>To request <a href="#sec_EntityIdsandEntityReferences">entity
references</a> in place of the actual entities, the client issues a <code>GET</code> request with <code>/$ref</code>
appended to the resource path.</p>

<p class=MsoNormal>If the resource path does not identify an entity or a
collection of entities, the service returns <code>404 Not Found</code>.</p>

<p class=MsoNormal>If the resource path identifies a collection, the response
MUST be the format-specific representation of a collection of entity references
pointing to the related entities. If no entities are related, the response is
the format-specific representation of an empty collection. The response MAY
contain an <a href="#sec_HeaderETag">ETag header</a> for the collection whose
value changes if the collection of references changes, i.e. a reference is
added or removed.</p>

<p class=MsoNormal>If the resource path identifies a single existing entity,
the response MUST be the format-specific representation of an entity reference.
The response MAY contain an <a href="#sec_HeaderETag">ETag header</a> which
represents the identity of the referenced entity. If the resource path
terminates in a single-valued navigation path, the ETag value changes if the
relationship is changed and points to a different OData entity. If the resource
path is the canonical path for a single entity, the returned ETag can never
change.</p>

<p class=MsoNormal>If the resource path terminates on a single entity and no
such entity exists, the service returns either <a
href="#sec_ResponseCode204NoContent"><code>204
No Content</code></a> or <a href="#sec_ResponseCode404NotFound"><code>404 Not Found</code></a>. </p>

<p class=MsoCaption>Example 66: collection with an entity reference for each
Order related to the Product with <code>ID=0</code></p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>GET http://host/service/Products(0)/Orders/$ref</p>

</div>

<h3>11.2.9 Resolving
an Entity-Id</h3>

<p class=MsoNormal>To resolve an <a href="#sec_EntityIdsandEntityReferences">entity-id</a>,
e.g. obtained in an entity reference, into a representation of the identified
entity, the client issues a <code>GET</code> request to the <code>$entity</code> resource located at the URL <code>$entity</code>
relative to the service root. The entity-id MUST be specified using the system
query option <code>$id</code>.</p>

<p class=MsoCaption>Example 67: return the entity representation for a given
entity-id</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>GET http://host/service/$entity?$id=http://host/service/Products(0)</p>

</div>

<p class=MsoNormal>A type segment following the <code>$entity</code>
resource casts the resource to the specified type. If the identified entity is
not of the specified type, or a type derived from the specified type, the
service returns <code>404 Not Found</code>. </p>

<p class=MsoNormal>After applying a type-cast segment to cast to a specific
type, the system query options <a href="#sec_SystemQueryOptionselect"><code>$select</code></a> and <a
href="#sec_SystemQueryOptionexpand"><code>$expand</code></a>
can be specified in <code>GET</code> requests to the <code>$entity</code> resource.</p>

<p class=MsoCaption>Example 68: return the entity representation for a given
entity-id and specify properties to return</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'><span
style='color:black'>GET http://host/service/$entity/Model.Customer<br>
                           ?$id=http://host/service/Customers('ALFKI')</span></p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>                           &amp;$select=CompanyName,ContactName</p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>                           &amp;$expand=Orders</p>

</div>

<h3>Requesting the Number of Items
in a Collection</h3>

<p class=MsoNormal>To request only the number of items of a collection of
entities or items of a collection-valued property, the client issues a <code>GET</code> request with <code>/$count</code>
appended to the resource path of the collection.</p>

<p class=MsoCommentText>On success, the response body MUST contain the exact
count of items matching the request after applying any <a
href="#sec_SystemQueryOptionfilter"><code>$filter</code></a>
or <a href="#sec_SystemQueryOptionsearch"><code>$search</code></a>
system query options, formatted as a simple primitive integer value with media
type <code>text/plain</code>. Clients SHOULD NOT combine the system
query options <span class=MsoCommentReference><span style='font-size:8.0pt'> </span></span><a
href="#sec_SystemQueryOptiontop"><code>$top</code></a>,
<a href="#sec_SystemQueryOptionskip"><code>$skip</code></a>,
<a href="#sec_SystemQueryOptionorderby"><code>$orderby</code></a>,
<a href="#sec_SystemQueryOptionexpand"><code>$expand</code></a>,
and <a href="#sec_SystemQueryOptionformat"><code>$format</code></a>
with the path suffix <code>/$count</code>. The result of such a
request is undefined.</p>

<p class=MsoCaption>Example 69: return the number of product<span
class=Datatype><span style='font-family:"Arial",sans-serif'>s</span></span><span
class=Datatype><span style='font-family:"Arial",sans-serif'> </span></span>in
the Products entity set</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>GET http://host/service/Products/$count</p>

</div>

<p class=MsoNormal>With 4.01 services the <code>/$count</code>
segment MAY be used in combination with the <code>/$filter</code><span
class=Datatype><span style='font-family:"Arial",sans-serif'> path</span></span>
segment to count the items in the filtered collection.</p>

<p class=MsoCaption>Example 70: return the number of products whose <code>Price</code> is less than <span style='font-family:"Calibri",sans-serif'>$10.00</span></p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>GET http://host/service/Products/$filter(@foo)/$count?@foo=Price
lt 10.00</p>

</div>

<p class=MsoNormal>For backwards compatibility, the <code>/$count</code> suffix MAY be used in combination with the <a
href="#sec_SystemQueryOptionfilter"><code>$filter</code></a>
system query option.</p>

<p class=MsoCaption>Example 71: return the number of products whose <code>Price</code> is less than <span style='font-family:"Calibri",sans-serif'>$10.00</span></p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>GET http://host/service/Products/$count?$filter=Price lt
10.00</p>

</div>

<p class=MsoNormal>The <a href="#sec_SystemQueryOptionfilter"><code>$filter</code></a> system query option MUST
NOT be used in conjunction with a both a <code>/$count</code>
path segment and a <code>/$filter</code> path segment.</p>

<p class=MsoNormal>The <code>/$count</code>
suffix can also be used in path expressions within system query options, e.g. <a
href="#sec_SystemQueryOptionfilter"><code>$filter</code></a>.</p>

<p class=MsoCaption>Example 72: return all customers with more than five
interests</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>GET http://host/service/Customers?$filter=Interests/$count
gt 5</p>

</div>

<p class=MsoCaption>Example 73:
return all categories with more than one product over $5.00</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'><span
style='color:black'>GET http://host/service/Categories?<br>
                       $filter=Products/$filter(Price gt 5.0)/$count gt 1</span></p>

</div>

<h3><a
href="#sec_SystemQueryOptionformat">System Query Option <code>$format</code></a></h3>

<p class=MsoNormal>The <code>$format</code> system query option
specifies the media type of the response.</p>

<p class=MsoNormal>The <code>$format</code> query option, if
present in a request, MUST take precedence over the value(s) specified in the <a
href="#sec_HeaderAccept"><code>Accept</code></a>
request header.</p>

<p class=MsoNormal>The value of the <code>$format</code> system
query option is a valid internet media type, optionally including parameters. </p>

<p class=MsoNormal>In addition, format-specific abbreviations may be used, e.g.
<code>json</code> for <code>application/json</code>,
see <a href="#ODataJSON">OData-JSON</a>, but format parameters MUST
NOT be appended to the format abbreviations.</p>

<p class=MsoCaption>Example 74: the request </p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>GET http://host/service/Orders?$format=application/json;metadata=full</p>

</div>

<p class=MsoCaption>is equivalent to a request with an <code>Accept</code>
header using the same media type; it requests the set of Order entities
represented using the JSON media type including full metadata, as defined in <a
href="#ODataJSON">OData-JSON</a>.</p>

<p class=MsoCaption>Example 75: the request</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>GET http://host/service/Orders?$format=json</p>

</div>

<p class=MsoCaption>is equivalent to a request with the <code>Accept</code>
header set to <code>application/json</code>; it requests the set
of Order entities represented using the JSON media type with minimal metadata,
as defined in <a href="#ODataJSON">OData-JSON</a>.</p>

<p class=MsoNormal>In <a
href="#sec_MetadataDocumentRequest">metadata document requests</a><span
class=MsoHyperlink>,</span> the values <code>application/xml</code>
and <code>application/json</code>, along with their subtypes and
parameterized variants, as well as the format-specific abbreviations <code>xml</code> and <code>json,</code> are reserved
for this specification.</p>

<h3><a href="#sec_SystemQueryOptionschemaversion">System Query Option <code>$schemaversion</code></a></h3>

<p class=MsoNormal>The <span class=VerbatimChar>$schemaversion</span> system
query option MAY be included in any request. For a <a
href="#sec_MetadataDocumentRequest">metadata document request</a> the value of
the <span class=VerbatimChar>$schemaversion</span> system query option
addresses a specific schema version. For all other request types the value
specifies the version of the schema against which the request is made. The syntax of the <span class=VerbatimChar>$schemaversion</span>
system query option is defined in <a href="#ODataABNF">OData-ABNF</a>. </p>

<p class=MsoNormal>The value of the <span class=VerbatimChar>$schemaversion</span>
system query option MUST be a version of the schema as returned in the <a
href="https://github.com/oasis-tcs/odata-vocabularies/blob/master/vocabularies/Org.OData.Core.V1.md#SchemaVersion"><code>Core.SchemaVersion</code></a> annotation,
defined in <a href="#ODataVocCore">OData-VocCore</a>, of a previous request
to the <a href="#sec_MetadataDocumentRequest">metadata document</a>, or <span
class=Keyword>*</span> in order to specify the current version of the metadata.</p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt'>If
specified, the service MUST process the request according to the specified
version of the metadata.</p>

<p class=MsoNormal>Clients can retrieve the current version of the metadata by
making a <a href="#sec_MetadataDocumentRequest">metadata document request</a>
with a <span class=VerbatimChar>$schemaversion</span> system query option value
of <span class=Keyword>*</span>, and SHOULD include the value from the returned
<a
href="https://github.com/oasis-tcs/odata-vocabularies/blob/master/vocabularies/Org.OData.Core.V1.md#SchemaVersion"><code>Core.SchemaVersion</code></a> annotation in
the <span class=VerbatimChar>$schemaversion</span> system query option of
subsequent requests.</p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt'>If the <span
class=VerbatimChar>$schemaversion</span> system query option is not specified
in a request for the metadata document, the service MUST return a version of
the metadata with no breaking changes over time, and the processing of all
other requests that omit the <span class=VerbatimChar>$schemaversion</span>
system query option MUST be compatible with that “unversioned” schema. For more
information on breaking changes, see <a href="#sec_ModelVersioning">Model
Versioning</a>.</p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt'>If the <span
class=VerbatimChar>$schemaversion</span> system query option is specified on an
individual request within a batch, then it specifies the version of the schema
to apply to that individual request. Individual requests within a batch that
don’t include the <span class=VerbatimChar>$schemaversion</span> system query
option inherit the schema version of the overall batch request.</p>

<p class=MsoNormal>If the <span class=VerbatimChar>$schemaversion</span> system
query option is specified, but the version of the schema doesn’t exist, the
request is answered with a <a href="#sec_ResponseCode404NotFound">response code
<code>404 Not Found</code></a>. The response
body SHOULD provide additional information.</p>

<h2>11.3 Requesting Changes</h2>

<p class=MsoNormal>Services advertise their change-tracking capabilities by
annotating entity sets with the <a
href="https://github.com/oasis-tcs/odata-vocabularies/blob/master/vocabularies/Org.OData.Capabilities.V1.md#ChangeTracking"><code>Capabilities</code>.<code>ChangeTracking</code></a> term defined in <a
href="#ODataVocCap">OData-VocCap</a>.</p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt'>Any <code>GET</code> request to retrieve one or more entities MAY allow
change-tracking.</p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt'>Clients
request that the service track changes to a result by specifying the <a
href="#sec_Preferencetrackchangesodatatrackchan"><code>track-changes</code></a>
preference on a request. If supported for the request, the service includes a <a
href="#sec_HeaderPreferenceApplied"><code>Preference-Applied</code></a><code> </code>header in the response containing the <code>track-changes</code> preference and includes a <i>delta link</i>
in a result for a single entity, and on the last page of results for a
collection of entities in place of the next link.</p>

<h3>11.3.1 Delta Links</h3>

<p class=MsoNormal>Delta links are opaque, service-generated links that the
client uses to retrieve subsequent changes to a result. </p>

<p class=MsoNormal>Delta links are based on a <i>defining query</i> that
describes the set of results for which changes are being tracked; for example,
the request that generated the results containing the delta link. The delta
link encodes the collection of entities for which changes are being tracked,
along with a starting point from which to track changes. OData services may use
the reserved system query option <code>$deltatoken</code> when
building delta links. Its content is opaque, service-specific, and must only
follow the rules for URL query parts. </p>

<p class=MsoNormal>If the defining query contains a <a
href="#sec_SystemQueryOptionschemaversion"><code>$schemaversion</code></a>
system query option, the response MUST be represented according to that schema
version.</p>

<p class=MsoNormal>If the defining query contains a <a
href="#sec_SystemQueryOptionfilter"><code>$filter</code></a><span
class=MsoHyperlink> </span>or<span class=MsoHyperlink> </span><a
href="#sec_SystemQueryOptionsearch"><code>$search</code></a>,
the response MUST include only changes to entities matching the specified
criteria. Added entities MUST be returned for entities that were added or
changed and now match the specified criteria, and deleted entities MUST be
returned for entities that are changed to no longer match the criteria of <a
href="#sec_SystemQueryOptionfilter"><code>$filter</code></a>
or <a href="#sec_SystemQueryOptionsearch"><span class=Datatype><span
style='color:windowtext'>$s</span></span><code>earch</code></a>.</p>

<p class=MsoNormal>The delta link MUST NOT encode any client <a
href="#sec_SystemQueryOptiontop">top</a> or <a href="#sec_SystemQueryOptionskip">skip</a>
value, and SHOULD NOT encode a request for an inline count.</p>

<p class=MsoNormal>If the defining query includes expanded relationships, the
delta link MUST return changes, additions, or deletions to the expanded
entities, as well as added or deleted links to expanded entities or nested
collections representing current membership. If the defining query includes
expanded references, then the delta link MUST return changes to the membership
in the set of expanded references.  </p>

<p class=MsoNormal>Navigation properties specified in the <a
href="#sec_SystemQueryOptionselect"><span class=Datatype><span
style='color:windowtext'>$select</span></span></a> list of a defining query are
not used to define the scope or contents of the items being tracked. Clients
can specify <code>/$ref</code> in <a
href="#sec_SystemQueryOptionexpand"><code>$expand</code></a>
in order to specify interest in the set of related entities without interest in
changes to the content of those related entities.</p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt'>If an
expanded entity becomes orphaned because all paths to the entity as specified
in the defining query have been broken (i.e. due to relationship changes and/or
changes or deletions to parent entities) then the service MUST return the
appropriate notifications for the client to determine that the entity has been
orphaned (i.e. the changed relationships and removed parent entities). The
client should not assume that it will receive additional notifications for such
an orphaned entity.</p>

<p class=MsoNormal>Entities are considered changed if any of the structural
properties have changed. Changes to related entities and to streams are not
considered a change to the entity containing the stream or navigation property.
</p>

<p class=MsoNormal>If the defining query contains a <a
href="#sec_SpecifyingPropertiestoReturn">projection</a>, the generated delta
link SHOULD logically include the same projection, such that the delta query
only includes fields specified in the projection. Services MAY use the
projection to limit the entities returned to those that have changed within the
selected fields, but the client MUST be prepared to receive entities returned
whether or not the field that changed was specified in the projection.</p>

<h3>Using Delta Links</h3>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt'>The client
requests changes by invoking the <code>GET</code> method on the <a
href="#sec_DeltaLinks">delta link</a>. The client MUST NOT attempt to append
system query options to the delta link. The <a href="#sec_HeaderAccept"><code>Accept</code></a> header MAY be used to
specify the desired response format.</p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt'>Clients
SHOULD specify the same <a href="#sec_HeaderAcceptLanguage"><code>Accept-Language</code></a> header when
querying the delta link as was specified in the defining query. Services MAY
return <a href="#sec_ResponseCode406NotAcceptable"><code>406 Not Acceptable</code></a> if a different <code>Accept-Language</code> is specified. If a
service does support an <code>Accept-Language</code>
header it MAY return changes only visible in that language, or MAY include
records that have changes not visible in the requested language.</p>

<p class=MsoNormal>The <a href="#sec_RequestingtheNumberofItemsinaCollect"><code>/$count</code></a> segment can be appended to
the path of a delta link in order to get just the number of changes available.
The count includes all added, changed, or deleted entities, as well as added or
deleted links.</p>

<p class=MsoNormal>The results of a request against the delta link may span
multiple pages but MUST be ordered by the service across all pages in such a
way as to guarantee consistency when applied in order to the response which
contained the delta link.</p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt'>Services
SHOULD return only changed entities, but MAY return additional entities
matching the defining query for which the client may not see a change.</p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt'>In order to
continue tracking changes beyond the current set, the client specifies <a
href="#sec_Preferencetrackchangesodatatrackchan"><code>track-changes</code></a>
on the initial request to the delta link but is not required to repeat it for
subsequent <a href="#sec_ServerDrivenPaging">pages</a><span class=MsoHyperlink>.</span>
The new delta link appears at the end of the last page of changes in place of
the next link and MUST return all changes subsequent to the last change of the
previous delta link. </p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt'>If no
changes have occurred, the response is an empty collection that contains a
delta link for subsequent changes if requested. This delta link MAY be
identical to the delta link resulting in the empty collection of changes.</p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt'>If the delta
link is no longer valid, the service responds with <a
href="#sec_ResponseCode410Gone"><code>410
Gone</code></a>, and SHOULD include the URL for refetching the entire set in
the <code>Location</code> header of the
response.</p>

<h3>11.3.3 Delta
Payloads</h3>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt'>A delta payload
represents changes to a known state. A delta payload includes added entities,
changed entities, and deleted entities, as well as a representation of added
and removed relationships.</p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt'>Delta
payloads can be <a href="#sec_RequestingChanges">requested</a> from the service
using a delta link or provided as updates to the service.</p>

<h2>Data
Modification</h2>

<p class=MsoNormal>Updatable OData services support Create, Update, and Delete
operations for some or all exposed entities. Additionally, <a
href="#sec_Actions">Actions</a><span class=MsoHyperlink> </span>supported by a
service can affect the state of the system.</p>

<p class=MsoNormal>A successfully completed <a href="#sec_DataModification">Data
Modification Request</a> must not violate the integrity of the data.</p>

<p class=MsoNormal>The client may request whether content be returned from a
Create, Update, or Delete request, or the invocation of an Action, by
specifying the <a href="#sec_Preferencereturnrepresentationandret"><code>return</code> Prefer header</a>.</p>

<h3>Common Data Modification
Semantics</h3>

<p class=MsoNormal><a href="#sec_DataModification">Data Modification Requests</a>
share the following semantics.</p>

<h4>11.4.1.1 Use of ETags for Avoiding
Update Conflicts</h4>

<p class=MsoNormal>Each entity has its own ETag value that MUST change when
structural properties or links from that entity have changed. In addition,
modifying, adding, or deleting a contained entity MAY change the ETag of the
parent entity.</p>

<p class=MsoNormal>Collections of entities (including collections of related
entities) MAY have their own ETag value whose semantics is service-specific. It
typically changes if entities are added to or removed from the collection, or
if an entity in the collection is changed. The ETag of a collection of related
entities reached via a navigation property MAY differ from the ETag of the
entity containing the navigation property.</p>

<p class=MsoNormal>A <a href="#sec_DataModification">Data Modification Request</a><span
class=MsoHyperlink> </span>on an existing resource or an <a href="#sec_Actions">Action
Request</a> invoking an action bound to an existing
resource MAY require optimistic concurrency control. Services SHOULD
announce this via annotations with the terms <a
href="https://github.com/oasis-tcs/odata-vocabularies/blob/master/vocabularies/Org.OData.Core.V1.md#OptimisticConcurrency"><code>Core.OptimisticConcurrency</code></a><span
class=Datatype><span style='font-family:"Arial",sans-serif'> </span></span>in <a
href="#ODataVocCore">OData-VocCore</a> and <a
href="https://github.com/oasis-tcs/odata-vocabularies/blob/master/vocabularies/Org.OData.Capabilities.V1.md#NavigationRestrictions"><code>Capabilities.NavigationRestrictions</code></a> (nested property <code>OptimisticConcurrencyControl</code>) in<b> </b><a href="#ODataVocCap">OData-VocCap</a>.</p>

<p class=MsoNormal>If optimistic concurrency control
is required for a resource, the service MUST include an <a
href="#sec_HeaderETag">ETag header</a> in a response to a <code>GET</code>
request to the resource, and MAY include the ETag in a format-specific manner
in responses containing that resource.</p>

<p class=MsoNormal>The presence of an <a href="#sec_HeaderETag">ETag header</a>
in a response does not imply in itself that the resource requires optimistic
concurrency control; the ETag may just be used for caching and/or conditional <code>GET</code> requests.</p>

<p class=MsoNormal>If an ETag value is specified in an <a
href="#sec_HeaderIfMatch"><code>If-Match</code></a>
or <a href="#sec_HeaderIfNoneMatch"><code>If-None-Match</code></a>
header of a <a href="#sec_DataModification">Data Modification Request</a> or <a
href="#sec_Actions">Action Request</a>, the operation MUST only be invoked if
the <code>If-Match</code> or <code>If-None-Match</code> condition is satisfied.</p>

<p class=MsoNormal>If the client does not specify an <a
href="#sec_HeaderIfMatch"><code>If-Match</code></a>
request header in a <a
href="#sec_DataModification">Data Modification Request</a> or <a href="#sec_Actions">Action Request</a> on a resource that requires optimistic concurrency control,
the service responds with a <code>428 Precondition
Required</code> and MUST ensure that no observable
change occurs as a result of the request. Clients can attempt to disable
optimistic concurrency control by specifying <code>If-Match</code>
with a value of <code>*</code>. Services MAY reject such
requests.</p>

<p class=MsoNormal>For requests including an <a href="#sec_HeaderODataVersion"><code>OData-Version</code></a> header value of <code>4.01</code>, any ETag values specified in the
request body of an <a href="#sec_UpdateanEntity">update request</a> MUST be <code>*</code> or match the current value for the
record being updated.</p>

<h4>11.4.1.2 Handling of DateTimeOffset Values</h4>

<p class=MsoNormal>Services SHOULD preserve the offset of <code>Edm.DateTimeOffset</code>
values, if possible. However, where the underlying storage does not support
offset services may be forced to normalize the value to some common time zone
(i.e. UTC) in which case the result would be returned with that time zone
offset. If the service normalizes values, it <span style='color:black;
background:white'>MUST fail evaluation of the </span><a
href="#sec_BuiltinQueryFunctions"><span style='background:white'>query
functions </span></a><code>year</code><span style='color:black;
background:white'>, </span><code>month</code><span
style='color:black;background:white'>, </span><code>day</code><span
style='color:black;background:white'>, </span><code>hour</code><span
style='color:black;background:white'>, and </span><code>time</code><span
style='color:black;background:white'> for literal values that are not stated in
the time zone of the normalized values.</span></p>

<h4>Handling of Properties Not
Advertised in Metadata</h4>

<p class=MsoNormal>Clients MUST be prepared to receive additional properties in
an entity or complex type instance that are not advertised in metadata, even
for types not marked as open. By using <code>PATCH</code>
when <a href="#sec_UpdateanEntity">updating entities</a>, clients can ensure
that such properties values are not lost if omitted from the update request. </p>

<h4>11.4.1.4 Handling of Integrity Constraints</h4>

<p class=MsoNormal>Services may impose cross-entity integrity constraints.
Certain referential constraints, such as requiring an entity to be created with
related entities can be satisfied through <a
href="#sec_CreateRelatedEntitiesWhenCreatinganE">creating</a> or <a
href="#sec_LinktoRelatedEntitiesWhenCreatinganE">linking</a> related entities
when creating the entity. Other constraints might require multiple changes to
be processed in an all-or-nothing fashion.</p>

<h4>11.4.1.5 Returning Results from Data
Modification Requests</h4>

<p class=MsoNormal>Clients can request whether created or modified resources
are returned from <a href="#sec_CreateanEntity">create</a>, <a
href="#sec_UpdateanEntity">update</a>, and <a href="#sec_UpsertanEntity">upsert</a>
operations using the <a href="#sec_Preferencereturnrepresentationandret"><code>return</code></a> preference header. In the
absence of such a header, services SHOULD return the created or modified
content unless the resource is a stream property value. </p>

<p class=MsoNormal>When returning content other than for an update to a media
entity stream, services MUST return the same content as a subsequent request to
retrieve the same resource. For updating media entity streams, the content of a
non-empty response body MUST be the updated media entity.</p>

<p class=MsoNormal>Requests that return a single instance of a structured type
or a collection of structured type instances MAY specify the system query
options <a href="#sec_SystemQueryOptionexpand"><code>$expand</code></a><span
class=MsoHyperlink><span style='color:windowtext'> and </span></span><a
href="#sec_SystemQueryOptionselect"><code>$select</code></a>.
</p>

<p class=MsoNormal>Requests that return a collection MAY specify the system
query option <a href="#sec_SystemQueryOptionfilter"><code>$filter</code></a>. </p>

<p class=MsoNormal>If one or more of these query options are present, this
implies a <span class=Keyword>return=representation</span> preference if no <a
href="#sec_Preferencereturnrepresentationandret"><code>return</code></a>
preference is specified. </p>

<p class=MsoNormal>If one or more of these query options are present with a <span
class=Keyword>return=minimal</span> preference, the service SHOULD NOT return a
representation and MUST include a <a href="#sec_HeaderPreferenceApplied"><code>Preference-Applied</code></a> header if it
does not return a representation.</p>

<p class=MsoNormal>If one or more of these query options are present and the
service returns a representation, then the service MUST apply the specified
query options. If it cannot apply the specified query options appropriately, it
MUST NOT fail the request solely due to the presence of these query options and
instead MUST return <span class=Keyword>204 No Content</span>.</p>

<h3>11.4.2 Create an Entity</h3>

<p class=MsoNormal>To create an entity in a collection, the client sends a <code>POST</code> request to that collection's URL. The <code>POST</code> body MUST contain a single valid
entity representation.</p>

<p class=MsoNormal>The entity representation MAY include <a
href="#sec_LinktoRelatedEntitiesWhenCreatinganE">references to existing
entities</a> as well as content for <a
href="#sec_CreateRelatedEntitiesWhenCreatinganE">new related entities</a>, but
MUST NOT contain content for existing related entities. The result of the
operation is the entity with relationships to all included references to
existing entities as well as all related entities created inline. If the key
properties for an entity include key properties of a directly related entity,
those related entities MUST be included either as references to existing
entities or as content for new related entities.</p>

<p class=MsoNormal>An entity may also be created as the result of an <a
href="#sec_UpsertanEntity">Upsert</a> operation.</p>

<p class=MsoNormal>If the target URL for the collection is a navigation link,
the new entity is automatically linked to the entity containing the navigation
link.</p>

<p class=MsoNormal>If the target URL terminates in a type cast segment, then
the segment MUST specify the type of, or a type derived from, the type of the
collection, and the entity MUST be created as that specified type.</p>

<p class=MsoNormal>To create an <i>open entity</i> (an instance of an open
type), additional property values beyond those specified in the metadata MAY be
sent in the request body. The service MUST treat these as dynamic properties
and add them to the created instance.</p>

<p class=MsoNormal>If the entity being created is not an open entity,
additional property values beyond those specified in the metadata SHOULD NOT be
sent in the request body. The service MUST fail if unable to persist all
property values specified in the request.</p>

<p class=MsoNormal>Properties computed by the service (annotated with the term <a
href="https://github.com/oasis-tcs/odata-vocabularies/blob/master/vocabularies/Org.OData.Core.V1.md#Computed"><code>Core.Computed</code></a>, see <a
href="#ODataVocCore">OData-VocCore</a>) and properties that are tied to
properties of the principal entity by a referential constraint, can be omitted
and MUST be ignored if included in the request. </p>

<p class=MsoNormal>Properties with a defined default value, nullable
properties, and collection-valued properties omitted from the request are set
to the default value, null, or an empty collection, respectively.</p>

<p class=MsoNormal>Upon successful completion, the response MUST contain a <a
href="#sec_HeaderLocation"><code>Location</code>
header</a> that contains the edit URL or read URL of the created entity.</p>

<p class=MsoNormal>Upon successful completion the service MUST respond with
either <a href="#sec_ResponseCode201Created"><code>201
Created</code></a> and a representation of the created entity, or <a
href="#sec_ResponseCode204NoContent"><code>204
No Content</code></a> if the request included a <a
href="#sec_Preferencereturnrepresentationandret">Prefer header</a> with a value
of <a href="#sec_Preferencereturnrepresentationandret"><code>return=minimal</code></a> and did not include the system query
options <a href="#sec_SystemQueryOptionselect"><code>$select</code></a>
and <a href="#sec_SystemQueryOptionexpand"><code>$expand</code></a>.</p>

<h4>11.4.2.1 Link to Related Entities When
Creating an Entity</h4>

<p class=MsoNormal>To create a new entity with links to existing entities in a
single request, the client includes references to the related entities in the
request body.</p>

<p class=MsoNormal>The representation for referencing related entities is
format-specific.</p>

<p class=MsoCaption>Example 76: using the JSON format, 4.0 clients can create a
new manager entity with links to two existing employees by applying the <code>odata.bind</code> annotation to the <code>DirectReports</code>
navigation property</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>{ </p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>  &quot;@odata.type&quot;:&quot;#Northwind.Manager&quot;,</p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>  &quot;ID&quot;: 1,</p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>  &quot;FirstName&quot;: &quot;Pat&quot;,</p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>  &quot;LastName&quot;: &quot;Griswold&quot;,</p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>  &quot;DirectReports@odata.bind&quot;: [</p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>    &quot;http://host/service/Employees(5)&quot;,</p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>    &quot;http://host/service/Employees(6)&quot;</p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>  ]</p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>}</p>

</div>

<p class=MsoCaption>Example 77: using the JSON format, 4.01 clients can create
a new manager entity with links to two existing employees by including the
entity-ids within the <code>DirectReports</code> navigation
property</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>{ </p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>  &quot;@type&quot;:&quot;#Northwind.Manager&quot;,</p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>  &quot;ID&quot;: 1,</p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>  &quot;FirstName&quot;: &quot;Pat&quot;,</p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>  &quot;LastName&quot;: &quot;Griswold&quot;,</p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>  &quot;DirectReports&quot;: [</p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>    {&quot;@id&quot;: &quot;Employees(5)&quot;},</p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>    {&quot;@id&quot;: &quot;Employees(6)&quot;}</p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>  ]</p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>}</p>

</div>

<p class=MsoNormal>Upon successful completion of the operation, the service creates
the requested entity and relates it to the requested existing entities.</p>

<p class=MsoNormal>If the target URL for the collection the entity is created
in and binding information provided in the <code>POST</code>
body contradicts the implicit binding information provided by the request URL,
the request MUST fail, and the service responds with <code>400
Bad Request</code>.</p>

<p class=MsoNormal>Upon failure of the operation, the service MUST NOT create
the new entity. In particular, the service MUST never create an entity in a
partially valid state (with the navigation property unset).</p>

<h4>11.4.2.2 Create Related Entities When
Creating an Entity</h4>

<p class=MsoNormal>A request to create an entity that includes related
entities, represented using the appropriate inline representation, is referred
to as a “deep insert”. </p>

<p class=MsoNormal>Media entities MUST contain the base64url-encoded representation
of their media stream as a virtual property <code>$value</code>
when nested within a deep insert.</p>

<p class=MsoNormal>Each included related entity is processed observing the
rules for <a href="#sec_CreateanEntity">creating an entity</a> as if it was
posted against the original target URL extended with the navigation path to
this related entity. </p>

<p class=MsoNormal>On success, the service MUST create all entities and relate
them. If the service responds with <code>201 Created</code>, the
response MUST be expanded to at least the level that was present in the
deep-insert request.</p>

<p class=MsoNormal>Clients MAY associate an id with individual nested entities
in the request by using the <a
href="https://github.com/oasis-tcs/odata-vocabularies/blob/master/vocabularies/Org.OData.Core.V1.md#ContentID"><code>Core.ContentID</code></a> term defined in <a
href="#ODataVocCore">OData-VocCore</a><span class=MsoHyperlink>. </span>Services
that respond with <code>201 Created</code> SHOULD annotate the
entities in the response using the same <a
href="https://github.com/oasis-tcs/odata-vocabularies/blob/master/vocabularies/Org.OData.Core.V1.md#ContentID"><code>Core.ContentID</code></a> value as specified
in the request. Services SHOULD advertise support for deep inserts, including
support for returning the <a
href="https://github.com/oasis-tcs/odata-vocabularies/blob/master/vocabularies/Org.OData.Core.V1.md#ContentID"><code>Core.ContentID</code></a>, through the <a
href="https://github.com/oasis-tcs/odata-vocabularies/blob/master/vocabularies/Org.OData.Capabilities.V1.md#DeepInsertSupport"><code>Capabilities.DeepInsertSupport</code></a>
term, defined in <a href="#ODataVocCap">OData-VocCap</a>; services
that advertise support through <a
href="https://github.com/oasis-tcs/odata-vocabularies/blob/master/vocabularies/Org.OData.Capabilities.V1.md#DeepInsertSupport"><code>Capabilities.DeepInsertSupport</code></a>
MUST return the <a
href="https://github.com/oasis-tcs/odata-vocabularies/blob/master/vocabularies/Org.OData.Core.V1.md#ContentID"><code>Core.ContentID</code></a><span
class=Datatype><span style='font-family:"Arial",sans-serif'> </span></span>for
the inserted or updated entities.</p>

<p class=MsoNormal>The <code>continue-on-error</code>
preference is not supported for deep insert operations.</p>

<p class=MsoNormal>On failure, the service MUST NOT create any of the entities.</p>

<h3>11.4.3 Update an Entity</h3>

<p class=MsoNormal>To update an individual entity, the client makes a <code>PATCH</code> or <code>PUT</code> request to a URL
that identifies the entity. Services MAY restrict updates only to requests
addressing the <a href="#sec_ReadURLsandEditURLs">edit URL</a> of the entity.</p>

<p class=MsoNormal>Services SHOULD support <code>PATCH</code>
as the preferred means of updating an entity. <code>PATCH</code>
provides more resiliency between clients and services by directly modifying
only those values specified by the client.</p>

<p class=MsoNormal>The semantics of <code>PATCH</code>,
as defined in <a href="#RFC5789"><b>[RFC5789]</b></a>, is to merge the content
in the request payload with the [entity’s] current state, applying the update
only to those components specified in the request body. Collection properties
and primitive properties provided in the payload corresponding to updatable
properties MUST replace the value of the corresponding property in the entity
or complex type. Missing properties of the containing entity or complex
property, including dynamic properties, MUST NOT be directly altered unless as
a side effect of changes resulting from the provided properties.</p>

<p class=MsoNormal>Services MAY additionally support <code>PUT</code> but should be aware of the potential for data-loss in
round-tripping properties that the client may not know about in advance, such
as open or added properties, or properties not specified in metadata. Services
that support <code>PUT</code> MUST replace
all values of structural properties with those specified in the request body.
Missing non-key, updatable structural properties not defined as dependent
properties within a referential constraint MUST be set to their default values.
Omitting a non-nullable property with no service-generated or default value
from a <code>PUT</code> request results in a <code>400 Bad Request</code> error. Missing dynamic structural
properties MUST be removed or set to <code>null</code>. </p>

<p class=MsoNormal>For requests with an <code>OData-Version</code>
header with a value of <code>4.01 </code>or
greater, the media stream of a media entity can be updated by specifying the
base64url-encoded representation of the media stream as a virtual property <code>$value</code>.</p>

<p class=MsoNormal>Updating a dependent property that is tied to a key property
of the principal entity through a referential constraint updates the
relationship to point to the entity with the specified key value. If there is
no such entity, the update fails.</p>

<p class=MsoNormal>Updating a principle property that is tied to a dependent
entity through a referential constraint on the dependent entity updates the
dependent property.</p>

<p class=MsoNormal>Key and other properties marked as read-only in metadata
(including computed properties), as well as dependent properties that are not
tied to key properties of the principal entity, can be omitted from the
request. If the request contains a value for one of these properties, the
service MUST ignore that value when applying the update. Services MUST return
an error if an insert or update contains a new value for a property marked as
updatable that cannot currently be changed by the user (i.e., given the state
of the object or permissions of the user). The service MAY return success in
this case if the specified value matches the value of the property. Clients
SHOULD use <code>PATCH</code> and specify
only those properties intended to be changed.</p>

<p class=MsoNormal>Entity id and entity type cannot be changed when updating an
entity. However, format-specific rules might in some cases require providing
entity id and entity type values in the payload when applying the update.</p>

<p class=MsoNormal>For requests with an <code>OData-Version</code>
header with a value of <code>4.01 </code>or
greater, if the entity representation in the request body includes an ETag value,
the update MUST NOT be performed and SHOULD return <a
href="#sec_ResponseCode412PreconditionFailed"><code>412
Precondition Failed</code></a> if the supplied ETag value is not <code>*</code> and does not match the current ETag value for the
entity. ETag values in request bodies MUST be ignored for requests containing
an OData-Version header with a value of <code>4.0</code>.</p>

<p class=MsoNormal>If an update specifies both a binding to a single-valued
navigation property and a dependent property that is tied to a key property of
the principal entity according to the same navigation property, then the
dependent property is ignored, and the relationship is updated according to the
value specified in the binding.</p>

<p class=MsoNormal>If the entity being updated is open, then additional values
for properties beyond those specified in the metadata or returned in a previous
request MAY be sent in the request body. The service MUST treat these as
dynamic properties.</p>

<p class=MsoNormal>If the entity being updated is not open, then additional
values for properties beyond those specified in the metadata or returned in a
previous request SHOULD NOT be sent in the request body. The service MUST fail
if it is unable to persist all updatable property values specified in the
request. </p>

<p class=MsoNormal>Upon successful completion the service responds with either <a
href="#sec_ResponseCode200OK"><code>200 OK</code></a>
and a representation of the updated entity, or <a
href="#sec_ResponseCode204NoContent"><code>204
No Content</code></a>. The client may request that the response SHOULD include
a body by specifying a <a href="#sec_Preferencereturnrepresentationandret"><span
class=Datatype><span style='color:windowtext'>Prefer</span></span> header</a>
with a value of <a href="#sec_Preferencereturnrepresentationandret"><code>return=representation</code></a>, or by
specifying the system query options <a href="#sec_SystemQueryOptionselect"><code>$select</code></a> or <a
href="#sec_SystemQueryOptionexpand"><code>$expand</code></a>.
If the service uses ETags for optimistic concurrency control, the entities in
the response MUST include ETags.</p>

<h4>11.4.3.1
Update Related Entities
When Updating an Entity</h4>

<p class=MsoNormal>Update requests with an OData-Version header with a value of
<code>4.0</code> MUST NOT contain related
entities as inline content. Such requests MAY contain binding information for
navigation properties. For single-valued navigation properties this replaces
the relationship. For collection-valued navigation properties this adds to the
relationship.</p>

<p class=MsoNormal>Payloads with an <span class=Keyword>OData-Version</span>
header with a value of <code>4.01</code> or
greater MAY include nested entities and entity references that specify the full
set of to be related entities, or a nested <a href="#sec_DeltaPayloads">delta
payload</a> representing the related entities that have been added, removed, or
changed. Such a request is referred to as a “deep update”. If the nested
collection is represented identical to an expanded navigation property, then
the set of nested entities and entity references specified in a successful
update request represents the full set of entities to be related according to
that relationship and MUST NOT include added links, deleted links, or deleted
entities.</p>

<p class=MsoCaption>Example 78: using the JSON format, a 4.01 <span
class=Keyword><span style='font-size:10.0pt'>PATCH</span></span> request can
update a manager entity. Following the update, the manager has three direct
reports; two existing employees and one new employee named <code>Suzanne Brown</code>. The <code>LastName</code> of employee <span
class=Keyword><span style='font-size:10.0pt'>6</span></span> is updated to <code>Smith.</code></p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>{ </p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>  &quot;@type&quot;:&quot;#Northwind.Manager&quot;,</p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>  &quot;FirstName&quot; : &quot;Patricia&quot;,</p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>  &quot;DirectReports&quot;: [</p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>    {</p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>      &quot;@id&quot;: &quot;Employees(5}&quot;</p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>    },</p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>    {</p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>      &quot;@id&quot;: &quot;Employees(6}&quot;,</p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>      &quot;LastName&quot;: &quot;Smith&quot;</p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>    },</p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>    {</p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'><span
class=Datatype>      </span>&quot;FirstName&quot;: &quot;Suzanne&quot;,</p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'><span
class=Datatype>      </span>&quot;LastName&quot;: &quot;Brown&quot;</p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>    }</p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>  ]</p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>}</p>

</div>

<p class=MsoNormal>If the nested collection is represented as a delta
annotation on the navigation property, then the collection contains members to
be added or changed and MAY include deleted entities for entities that are no
longer part of the collection, using the <a href="#sec_DeltaPayloads">delta
payload</a> format. If the deleted entity specifies a <code>reason</code>
as <code>deleted</code>, then the entity is both removed from
the collection and deleted, otherwise it is removed from the collection and
only deleted if the relationship is contained. Non-key properties of the
deleted entity are ignored. Nested collections MUST NOT contain added or
deleted links. If the request contains nested delta collections, then the PATCH
verb must be specified.</p>

<p class=MsoNormal>If a nested entity has the same id or key fields as an
existing entity, the existing entity is updated according to the semantics of
the PUT or PATCH request. Nested entities that have no id or key fields, or for
which the id or key fields do not match existing entities, are treated as
inserts. If the nested collection does not represent a containment relationship
and has no navigation property binding, then such entities MUST include a
context URL specifying the entity set in which the new entity is to be created.
If any nested entities contain both id and key fields, they MUST identify the
same entity, or the request is invalid. </p>

<p class=MsoCaption>Example 79:
using the JSON format, a 4.01 <span class=Keyword><span style='font-size:10.0pt'>PATCH</span></span>
request can specify a nested delta representation to:</p>

<p class=MsoCaption style='margin-left:.8in;text-indent:-.25in;page-break-after:
avoid'><span style='font-family:Symbol;font-style:normal'>· </span>delete employee 3 and remove link to it</p>

<p class=MsoCaption style='margin-left:.8in;text-indent:-.25in;page-break-after:
avoid'><span style='font-family:Symbol;font-style:normal'>· </span>remove the link to employee 4 and do not delete it</p>

<p class=MsoCaption style='margin-left:.8in;text-indent:-.25in;page-break-after:
avoid'><span style='font-family:Symbol;font-style:normal'>· </span>add a link to employee 5</p>

<p class=MsoCaption style='margin-left:.8in;text-indent:-.25in;page-break-after:
avoid'><span style='font-family:Symbol;font-style:normal'>· </span>change the last name of employee 6 and link to it if necessary</p>

<p class=MsoCaption style='margin-left:.8in;text-indent:-.25in;page-break-after:
avoid'><span style='font-family:Symbol;font-style:normal'>· </span>add a new employee named “Suzanne Brown” and link to it</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>{ </p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>  &quot;@type&quot;: &quot;#Northwind.Manager&quot;,</p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>  &quot;FirstName&quot;: &quot;Patricia&quot;,</p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>  &quot;DirectReports@delta&quot;: [</p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'><span
class=CODEtemp><span lang=NL style='color:black'>    {</span></span></p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'><span
class=CODEtemp>      &quot;@removed&quot;: {</span></p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'><span
class=CODEtemp>        &quot;reason&quot;: &quot;deleted&quot;</span></p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'><span
class=CODEtemp>      },</span></p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'><span
class=CODEtemp><span lang=NL style='color:black'>      </span></span><span
class=CODEtemp>&quot;@id&quot;: &quot;Employees(3)&quot;</span></p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'><span
class=CODEtemp>    },</span></p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'><span
class=CODEtemp><span lang=NL style='color:black'>    {</span></span></p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'><span
class=CODEtemp>      &quot;@removed&quot;: {</span></p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'><span
class=CODEtemp>        &quot;reason&quot;: &quot;changed&quot;</span></p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'><span
class=CODEtemp>      },</span></p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'><span
class=CODEtemp>      &quot;@id&quot;: &quot;Employees(4)&quot;</span></p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'><span
class=CODEtemp>    },</span></p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'><span
class=CODEtemp><span lang=NL style='color:black'>    {</span></span></p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'><span
class=CODEtemp><span lang=NL style='color:black'>      &quot;@id&quot;:
&quot;Employees(5)&quot;</span></span></p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'><span
class=CODEtemp>    },</span></p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'><span
class=CODEtemp><span lang=NL style='color:black'>    {</span></span></p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'><span
class=CODEtemp><span lang=NL style='color:black'>      &quot;@id&quot;:
&quot;Employees(6)&quot;,</span></span></p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'><span
class=CODEtemp><span lang=NL style='color:black'>      &quot;LastName&quot;:
&quot;Smith&quot;</span></span></p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'><span
class=CODEtemp>    },</span></p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'><span
class=CODEtemp><span lang=NL style='color:black'>    {</span></span></p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>      &quot;FirstName&quot;: &quot;Suzanne&quot;,</p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'><span
class=Datatype>      </span>&quot;LastName&quot;: &quot;Brown&quot;</p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'><span
class=CODEtemp>    }</span></p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>  ]</p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>}</p>

</div>

<p class=MsoNormal>Clients
MAY associate an id with individual nested entities in the request by using the
<a
href="https://github.com/oasis-tcs/odata-vocabularies/blob/master/vocabularies/Org.OData.Core.V1.md#ContentID"><code>Core.ContentID</code></a> term defined in <a
href="#ODataVocCore">OData-VocCore</a><span class=MsoHyperlink>. </span>Services
that respond with <code>200 OK</code> SHOULD annotate the
entities in the response using the same <a
href="https://github.com/oasis-tcs/odata-vocabularies/blob/master/vocabularies/Org.OData.Core.V1.md#ContentID"><code>Core.ContentID</code></a> value as specified
in the request. Services SHOULD advertise support for deep updates, including
support for returning the <a
href="https://github.com/oasis-tcs/odata-vocabularies/blob/master/vocabularies/Org.OData.Core.V1.md#ContentID"><code>Core.ContentID</code></a>, through the <a
href="https://github.com/oasis-tcs/odata-vocabularies/blob/master/vocabularies/Org.OData.Capabilities.V1.md#DeepUpdateSupport"><code>Capabilities.DeepUpdateSupport</code></a>
term, defined in <a href="#ODataVocCap">OData-VocCap</a>.</p>

<p class=MsoNormal>The <code>continue-on-error</code>
preference is not supported for deep update operations.</p>

<p class=MsoNormal>On failure, the service MUST NOT apply any of the changes
specified in the request.</p>

<h3>11.4.4 Upsert an Entity</h3>

<p class=MsoNormal>An upsert occurs when the client sends an <a
href="#sec_UpdateanEntity">update request</a> to a valid URL that identifies a
single entity that does not yet exist. In this case the service MUST handle the
request as a <a href="#sec_CreateanEntity">create entity request</a> or fail
the request altogether.</p>

<p class=MsoNormal>Upserts are not supported against <a
href="#sec_RequestingtheMediaStreamofaMediaEnti">media entities</a>,
single-valued non-containment navigation properties, or entities whose keys
values are generated by the service. Services MUST fail an update request to a
URL that would identify such an entity and the entity does not yet exist.</p>

<p class=MsoNormal>Singleton entities can be upserted if they are nullable. Services
supporting this SHOULD advertise it by annotating the singleton with the term <code>Capabilities.UpdateRestrictions</code> (nested
property <code>Upsertable</code>
with value <code>true</code>) defined
in <a href="#ODataVocCap">OData-VocCap</a>.</p>

<p class=MsoNormal>Key and other non-updatable properties, as well as dependent
properties that are not tied to key properties of the principal entity, MUST be
ignored by the service in processing the Upsert request.</p>

<p class=MsoNormal>To ensure that an update request is not treated as an
insert, the client MAY specify an <a href="#sec_HeaderIfMatch"><code>If-Match</code> header </a>in the update request.
The service MUST NOT treat an update request containing an <code>If-Match</code> header as an insert.</p>

<p class=MsoNormal>A <code>PUT</code> or <code>PATCH</code>
request MUST NOT be treated as an update if an <a href="#sec_HeaderIfNoneMatch"><code>If-None-Match</code> header</a> is specified
with a value of <code>*</code>.</p>

<h3>11.4.5 Delete an Entity</h3>

<p class=MsoNormal>To delete an individual entity, the client makes a <code>DELETE</code> request to a URL that identifies the entity.
Services MAY restrict deletes only to requests addressing the <a
href="#sec_ReadURLsandEditURLs">edit URL</a> of the entity.</p>

<p class=MsoNormal>The request body SHOULD be empty. Singleton entities can be
deleted if they are nullable. Services supporting this SHOULD advertise it by
annotating the singleton with the term <code>Capabilities.DeleteRestrictions</code>
(nested property <code>Deletable</code> with value <code>true</code>) defined in <a href="#ODataVocCap">OData-VocCap</a>.</p>

<p class=MsoNormal>On successful completion of the delete, the response MUST be
<a href="#sec_ResponseCode204NoContent"><code>204
No Content</code></a> and contain an empty body. </p>

<p class=MsoNormal>Services MUST implicitly remove relations to and from an
entity when deleting it; clients need not delete the relations explicitly.</p>

<p class=MsoNormal>Services MAY implicitly delete or modify related entities if
required by <a href="#sec_HandlingofIntegrityConstraints">integrity constraints</a>.
If integrity constraints are declared in <code>$metadata</code><span
style='font-family:"Calibri",sans-serif'> </span>using a <code>ReferentialConstraint</code>
element, services MUST modify affected related entities according to the
declared integrity constraints, e.g. by deleting dependent entities, or setting
dependent properties to <code>null</code> or their default
value.</p>

<p class=MsoNormal>One such integrity constraint results from using a
navigation property in a key definition of an entity type. If the related “key”
entity is deleted, the dependent entity is also deleted.</p>

<h3>11.4.6 Modifying Relationships
between Entities</h3>

<p class=MsoNormal>Relationships between entities are represented by navigation
properties as described in <a href="#sec_DataModel">Data Model</a>. URL
conventions for navigation properties are described in <a href="#ODataURL">OData&#8209;URL</a>.</p>

<h4>11.4.6.1 Add a Reference to a
Collection-Valued Navigation Property</h4>

<p class=MsoNormal>A successful <code>POST</code> request to a
navigation property's references collection adds a relationship to an existing
entity. The request body MUST contain a single entity reference that identifies
the entity to be added. See the appropriate format document for details.</p>

<p class=MsoNormal>On successful completion, the response MUST be <a
href="#sec_ResponseCode204NoContent"><code>204
No Content</code></a> and contain an empty body.</p>

<p class=MsoNormal>Note that if the two entities are already related prior to
the request, the request is completed successfully.</p>

<h4>11.4.6.2 Remove a Reference to an Entity</h4>

<p class=MsoNormal>A successful <code>DELETE</code> request to
the URL that represents a reference to a related entity removes the
relationship to that entity. </p>

<p class=MsoNormal>In OData 4.0, the entity reference to be removed within a
collection-valued navigation property is the URL that represents the collection
of related references, with the reference to be removed identified by the <a
href="#sec_ResolvinganEntityId"><code>$id</code></a>
query option. OData 4.01 services additionally support using the URL that
represents the reference of the collection member to be removed, identified by
key, as described in <a href="#ODataURL">OData&#8209;URL</a>. </p>

<p class=MsoNormal>For single-valued navigation properties, the <a
href="#sec_ResolvinganEntityId"><code>$id</code></a>
query option MUST NOT be specified.</p>

<p class=MsoNormal>The <code>DELETE</code> request MUST NOT violate
any <a href="#sec_HandlingofIntegrityConstraints">integrity constraints</a> in
the data model.</p>

<p class=MsoNormal>On successful completion, the response MUST be <a
href="#sec_ResponseCode204NoContent"><code>204
No Content</code></a> and contain an empty body.</p>

<h4>Change the Reference in a
Single-Valued Navigation Property</h4>

<p class=MsoNormal>A successful <code>PUT</code> request to a
single-valued navigation property’s reference resource changes the related
entity. The request body MUST contain a single entity reference that identifies
the existing entity to be related. See the appropriate format document for
details.</p>

<p class=MsoNormal>On successful completion, the response MUST be <a
href="#sec_ResponseCode204NoContent"><code>204
No Content</code></a> and contain an empty body.</p>

<p class=MsoNormal>Alternatively, a relationship MAY be updated as part of an
update to the source entity by including the required binding information for
the new target entity. This binding information is format-specific, see <a
href="#ODataJSON">OData-JSON</a> for details.</p>

<p class=MsoNormal>If the single-valued navigation property is used in the key
definition of an entity type, it cannot be changed and the request MUST fail
with <a href="#sec_ResponseCode405MethodNotAllowed"><code>405 Method Not Allowed</code></a> or an other appropriate error.</p>

<h4>Replace all References in a
Collection-valued Navigation Property</h4>

<p class=MsoNormal>A successful <code>PUT</code> request to a
collection-valued navigation property’s reference resource replaces the set of
related entities. The request body MUST contain a collection of entity
references in the same format as returned by a <code>GET</code>
request to the navigation property’s reference resource.</p>

<p class=MsoNormal>A successful <code>DELETE</code> request to a
collection-valued navigation property’s reference resource removes all related
references from the collection.</p>

<h3>Managing Media Entities</h3>

<p class=MsoNormal>A <a href="#sec_RequestingtheMediaStreamofaMediaEnti">media
entity</a> MUST have a source URL that can be used to read the media stream,
and MAY have a media edit URL that can be used to write to the media stream.</p>

<p class=MsoNormal>Because a media entity has both a media stream and standard
entity properties special handling is required.</p>

<h4>11.4.7.1 Create a Media Entity</h4>

<p class=MsoNormal>A <code>POST</code> request to a media
entity's entity set creates a new media entity. The request body MUST contain
the media value (for example, the photograph) whose media type MUST be
specified in a <a href="#sec_HeaderContentType"><code>Content-Type</code></a>
header. The request body is always interpreted as the media value, even if it
has the media type of an OData format supported by the service. It is not
possible to set the structural properties of the media entity when creating the
media entity.</p>

<p class=MsoNormal>Upon successful completion, the response MUST contain <a
href="#sec_HeaderLocation"><code>Location</code>
header</a> that contains the edit URL of the created media entity.</p>

<p class=MsoNormal>Upon successful completion the service responds with either <a
href="#sec_ResponseCode201Created"><code>201
Created</code></a>, or <a href="#sec_ResponseCode204NoContent"><code>204 No Content</code></a><span
class=MsoHyperlink><code> </code></span>if
the request included a <a href="#sec_Preferencereturnrepresentationandret">Prefer
header</a> with a value of <a href="#sec_Preferencereturnrepresentationandret"><code>return=minimal</code></a>.</p>

<h4>11.4.7.2 Update
a Media Entity Stream</h4>

<p class=MsoNormal>A successful <code>PUT</code> request to the
media edit URL of a media entity changes the media stream of the entity.</p>

<p class=MsoNormal>If the entity includes an ETag value for the media stream, the
client MUST include an <a href="#sec_HeaderIfMatch"><code>If-Match</code></a> header with the ETag value.</p>

<p class=MsoNormal>The request body MUST contain the new media value for the
entity whose media type MUST be specified in a <a href="#sec_HeaderContentType"><code>Content-Type</code></a> header.</p>

<p class=MsoNormal>On success, the service MUST respond with either <a
href="#sec_ResponseCode204NoContent"><code>204
No Content</code></a> and an empty body, or <a href="#sec_ResponseCode200OK"><code>200 OK</code></a> if the client specified the
preference <a href="#sec_Preferencereturnrepresentationandret"><code>return=representation</code></a>, in which case the response body MUST contain the updated
media entity.</p>

<h4>Delete a
Media Entity</h4>

<p class=MsoNormal>A successful <code>DELETE</code>
request to the entity's edit URL or to the edit URL of its media stream deletes
the media entity as described in <a href="#sec_DeleteanEntity">Delete an Entity</a><span
class=MsoHyperlink>.</span></p>

<p class=MsoNormal>Deleting a media entity also deletes the media associated
with the entity.</p>

<h3>11.4.8 Managing Stream Properties</h3>

<p class=MsoNormal>An entity may have one or more <i>stream properties</i>.
Stream properties are properties of type <code>Edm.Stream</code>.</p>

<p class=MsoNormal>The values for stream properties do not usually appear in
the entity payload. Instead, the values are generally read or written through
URLs.</p>

<h4>Update Stream Values</h4>

<p class=MsoNormal>A successful <code>PUT</code>
request to the edit URL of a stream property changes the media stream
associated with that property.</p>

<p class=MsoNormal>If the stream metadata includes an ETag value, the client
SHOULD include an <a href="#sec_HeaderIfMatch"><code>If-Match</code></a>
header with the ETag value.</p>

<p class=MsoNormal>The request body MUST contain the new media value for the
stream whose media type MUST be specified in a <a href="#sec_HeaderContentType"><code>Content-Type</code></a> header. It may have a
<code>Content-Length</code> of zero to set the stream data to
empty.</p>

<p class=MsoNormal>Stream properties MAY specify a list of acceptable media
types using an annotation with term <a
href="https://github.com/oasis-tcs/odata-vocabularies/blob/master/vocabularies/Org.OData.Core.V1.md#AcceptableMediaTypes"><code>Core.AcceptableMediaTypes</code></a>, see <a
href="#ODataVocCore">OData-VocCore</a>.</p>

<p class=MsoNormal><a name="_Toc477876696">On
success, the service MUST respond with either </a><a
href="#sec_ResponseCode204NoContent"><code>204
No Content</code></a> and an empty body, or <a href="#sec_ResponseCode200OK"><code>200 OK</code></a> if the client specified the
preference <a href="#sec_Preferencereturnrepresentationandret"><code>return=representation</code></a>, in which case the response body MUST contain the updated
media value for the stream.</p>

<p class=MsoNormal>Clients MAY change the association between a stream property
and a media stream by modifying the edit URL or read URL of the stream
property. Services supporting this SHOULD advertise it by annotating the stream
property with the term <code>Capabilities.MediaLocationUpdateSupported</code>
defined in <a href="#ODataVocCap">OData-VocCap</a>.</p>

<h4>Delete Stream Values</h4>

<p class=MsoNormal>A successful <code>DELETE</code>
request to the edit URL of a stream property attempts to set the property to
null and results in an error if the property is non-nullable. </p>

<p class=MsoNormal>Attempting to request a stream property whose value is null
results in <a href="#sec_ResponseCode204NoContent"><code>204 No Content</code></a>.</p>

<h3>Managing Values and Properties
Directly</h3>

<p class=MsoNormal>Values and properties can be explicitly addressed with URLs.
The edit URL of a property is the edit URL of the entity appended with the path
segment(s) specifying the individual property. The edit URL allows properties
to be individually modified. See <a href="#ODataURL">OData&#8209;URL</a>
for details on addressing individual properties.</p>

<h4>11.4.9.1 Update a Primitive Property</h4>

<p class=MsoNormal>A successful <code>PUT</code>
request to the edit URL for a primitive property updates the value of the property.
The message body MUST contain the new value, formatted as a single property
according to the specified format.</p>

<p class=MsoNormal>A successful <code>PUT</code>
request to the edit URL for the <a
href="#sec_RequestingaPropertysRawValueusingval">raw value</a> of a primitive property
updates the property with the raw value specified in the payload. The payload
MUST be formatted as an appropriate content type for the raw value of the
property.</p>

<p class=MsoNormal>The same rules apply whether this is a regular property or a
dynamic property.</p>

<p class=MsoNormal>Upon successful completion the service responds with either <a
href="#sec_ResponseCode200OK"><code>200 OK</code></a>
or <a href="#sec_ResponseCode204NoContent"><code>204
No Content</code></a>. The client may request that the response SHOULD include
a body by specifying a <a href="#sec_Preferencereturnrepresentationandret">Prefer
header</a> with a value of <a href="#sec_Preferencereturnrepresentationandret"><code>return=representation</code></a>.</p>

<p class=MsoNormal>Services MUST return an error if the property is not
updatable.</p>

<h4>11.4.9.2 Set a Value to Null</h4>

<p class=MsoNormal>A successful <code>DELETE</code> request to
the edit URL for a structural property, or to the edit URL of the <a
href="#sec_RequestingaPropertysRawValueusingval">raw value</a> of a primitive
property, sets the property to null. The request body is ignored and should be
empty.</p>

<p class=MsoNormal>A <code>DELETE</code> request to a
non-nullable value MUST fail and the service respond with <code>400
Bad Request</code> or other appropriate error.</p>

<p class=MsoNormal>The same rules apply whether the target is the value of a
regular property or the value of a dynamic property. A missing dynamic property
is defined to be the same as a dynamic property with value <code>null</code>. All dynamic properties are nullable.</p>

<p class=MsoNormal>On success, the service MUST respond with <code>204 No Content</code> and an empty body.</p>

<p class=MsoNormal>Services MUST return an error if the property is not
updatable.</p>

<p class=MsoNormal><a href="#sec_UpdateaPrimitiveProperty">Updating a primitive
property</a> or a <a href="#sec_UpdateaComplexProperty">complex property</a>
with a null value also sets the property to null.</p>

<h4>11.4.9.3 Update a Complex Property</h4>

<p class=MsoNormal>A successful <code>PATCH</code> request to
the edit URL for a complex typed property updates that property. The request
body MUST contain a single valid representation for the target complex type.</p>

<p class=MsoNormal>The service MUST directly modify only those properties of
the complex type specified in the payload of the <code>PATCH</code>
request.</p>

<p class=MsoNormal>The service MAY additionally support clients sending a <code>PUT</code> request to a URL that specifies a
complex type. In this case, the service MUST replace the entire complex
property with the values specified in the request body and set all unspecified
properties to their default value. </p>

<p class=MsoNormal>Upon successful completion the service responds with either <a
href="#sec_ResponseCode200OK"><code>200 OK</code></a>
or <a href="#sec_ResponseCode204NoContent"><code>204
No Content</code></a>. The client may request that the response SHOULD include
a body by specifying a <a href="#sec_Preferencereturnrepresentationandret">Prefer
header</a> with a value of <a href="#sec_Preferencereturnrepresentationandret"><code>return=representation</code></a>.</p>

<p class=MsoNormal>Services MUST return an error if the property is not
updatable.</p>

<h4>Update a Collection Property</h4>

<p class=MsoNormal>A successful <code>PUT</code> request to the
edit URL of a collection property updates that collection. The message body
MUST contain the desired new value, formatted as a collection property
according to the specified format.</p>

<p class=MsoNormal>The service MUST replace the entire value with the value
supplied in the request body.</p>

<p class=MsoNormal>A successful <code>POST</code> request to the
edit URL of a collection property adds an item to the collection. The body of
the request MUST be a single item to be added to the collection. If the
collection is ordered, the item is added to the end of the collection, and <a
href="#sec_RequestinganIndividualMemberofanOrde"><code>$index</code></a>
MAY be used to specify a zero-based ordinal position to insert the new value,
with a negative value indicating an ordinal position from the end of the
collection.</p>

<p class=MsoNormal>A successful <code>DELETE</code> request to
the edit URL of a collection property deletes all items in that collection. </p>

<p class=MsoNormal>Since collection members have no individual identity, <code>PATCH</code> is not supported for collection
properties. </p>

<p class=MsoNormal>Upon successful completion the service responds with either <a
href="#sec_ResponseCode200OK"><code>200 OK</code></a>
or <a href="#sec_ResponseCode204NoContent"><code>204
No Content</code></a>. The client may request that the response SHOULD include
a body by specifying a <a href="#sec_Preferencereturnrepresentationandret">Prefer
header</a> with a value of <a href="#sec_Preferencereturnrepresentationandret"><code>return=representation</code></a>.</p>

<p class=MsoNormal>Services MUST return an error if the property is not
updatable.</p>

<h3>Managing Members of an Ordered
Collection</h3>

<p class=MsoNormal>Collections annotated with the <a
href="https://github.com/oasis-tcs/odata-vocabularies/blob/master/vocabularies/Org.OData.Core.V1.md#Ordered"><code>Core.O</code><code>rdered</code></a>
term (see <a href="#ODataVocCore">OData-VocCore</a>) have a stable order.
Members of an ordered collection of primitive and complex types can be
individually updated or deleted by invoking an update operation against the URL
of the collection appended by a segment containing the zero-based ordinal of
the item within the collection. A negative ordinal number indexes from the end
of the collection, with -1 representing the last item in the collection. </p>

<p class=MsoNormal>Entities can be updated using their edit URL and SHOULD NOT
be addressed using an index.</p>

<h3>Positional
Inserts</h3>

<p class=MsoNormal>Collections of entity, complex, or primitive types annotated
with the <a
href="https://github.com/oasis-tcs/odata-vocabularies/blob/master/vocabularies/Org.OData.Core.V1.md#PositionalInsert"><code>Core.</code><code>PositionalInsert</code></a>
term (see <a href="#ODataVocCore">OData-VocCore</a>) support inserting
items at a specific location via <code>POST</code> requests to
the collection URL using the <code>$index</code>
system query option. The value of the <code>$index</code>
system query option is the zero-based ordinal position where the item is to be
inserted. The ordinal positions of items within the collection greater than or
equal to the inserted position are increased by one. A negative ordinal number
indexes from the end of the collection, with -1 representing an insert as the
last item in the collection.</p>

<p class=MsoCaption><a name="_Ref484616044">Example
</a>80: Insert a new email address at the second position</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'><span
style='color:black;background:#D9D9D9'>POST /service/Customers('ALFKI')/EmailAddresses?$index=1</span></p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'><span
style='color:black;background:#D9D9D9'>Content-Type: application/json</span></p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'><span
style='background:#D9D9D9'>&nbsp;</span></p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'><span
style='color:black;background:#D9D9D9'>{</span></p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'><span
style='color:black;background:#D9D9D9'>  &quot;value&quot;:
&quot;alfred@futterkiste.de&quot;</span></p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'><span
style='color:black;background:#D9D9D9'>}</span></p>

</div>

<h3>Update a Collection of Entities</h3>

<p class=MsoNormal style='text-align:justify'>Collections of entities can be
updated by submitting a <code>PATCH</code> request to the
resource path of the collection. The body of the request MUST be a <a
href="#sec_DeltaPayloads">delta payload</a>, and the resource path of the
collection MUST NOT contain type cast or filter segments, and MUST NOT contain
any system query options that affect the shape of the result.</p>

<p class=MsoNormal>Added/changed entities are applied as <a
href="#sec_UpsertanEntity">upserts,</a> and deleted entities as <a
href="#sec_DeleteanEntity">deletions</a>. Non-key properties of deleted
entities are ignored. The top-level collection may include added and deleted
links, and related entities represented inline are updated according to the
rules for <a href="#sec_UpdateRelatedEntitiesWhenUpdatinganE">treating related
entities when updating an entity</a>. </p>

<p class=MsoNormal>Clients MAY associate an id with individual nested entities
in the request by using the <a
href="https://github.com/oasis-tcs/odata-vocabularies/blob/master/vocabularies/Org.OData.Core.V1.md#ContentID"><code>Core.ContentID</code></a> term defined in <a
href="#ODataVocCore">OData-VocCore</a><span class=MsoHyperlink>. </span>Services
that respond with <code>200 OK</code> SHOULD annotate the
entities in the response using the same <a
href="https://github.com/oasis-tcs/odata-vocabularies/blob/master/vocabularies/Org.OData.Core.V1.md#ContentID"><code>Core.ContentID</code></a> value as specified
in the request. </p>

<p class=MsoNormal>Services SHOULD advertise support for updating a collection
using a delta payload through the <code>DeltaUpdateSupported</code>
property of the <a
href="https://github.com/oasis-tcs/odata-vocabularies/blob/master/vocabularies/Org.OData.Capabilities.V1.md#UpdateRestrictionsType"><code>Capabilities.UpdateRestrictions</code></a>
term, and SHOULD advertise support for returning the <a
href="https://github.com/oasis-tcs/odata-vocabularies/blob/master/vocabularies/Org.OData.Core.V1.md#ContentID"><code>Core.ContentID</code></a> through the <code>ContentIDSupported</code> property of the <a
href="https://github.com/oasis-tcs/odata-vocabularies/blob/master/vocabularies/Org.OData.Capabilities.V1.md#DeepUpdateSupportType"><code>Capabilities.DeepUpdateSupport</code></a>
term, both defined in <a href="#ODataVocCap">OData-VocCap</a>.</p>

<p class=MsoNormal>The response, if requested, is a delta payload, in the same
structure and order as the request payload, representing the applied changes.</p>

<p class=MsoNormal>If the <code>continue-on-error</code>
preference has been specified and any errors occur in processing the changes,
then a delta response MUST be returned regardless of the <a
href="#sec_Preferencereturnrepresentationandret"><code>return</code></a>
preference and MUST contain at least the failed changes. The service represents
failed changes in the delta response as follows:</p>

<p class=MsoListParagraphCxSpFirst style='text-indent:-.25in'><span
style='font-family:Symbol'>· </span>Failed deletes in the request MUST be represented in the response
as either entities or entity references, annotated with term <code>Core.DataModificationException</code>, see <a
href="#ODataVocCore">OData-VocCore</a>. If the deleted entity specified a
reason of <code>deleted</code>, the value of <code>failedOperation</code> MUST be <code>delete</code>, otherwise <code>unlink</code>. </p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-.25in'><span
style='font-family:Symbol'>· </span>Failed inserts within the request MUST be represented in the
response as deleted entities annotated with term <code>Core.DataModificationException</code>
with a <code>failedOperation</code> value of <code>insert</code>. </p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-.25in'><span
style='font-family:Symbol'>· </span>Failed updates within the request SHOULD be annotated in the response
with term <code>Core.DataModificationException</code>
with a <code>failedOperation</code> value of <code>update</code>.</p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-.25in'><span
style='font-family:Symbol'>· </span>Failed added links within the request MUST represented in the
response as deleted links annotated with term <code>Core.DataModificationException</code>
with a <code>failedOperation</code> value of <code>link</code>.</p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-.25in'><span
style='font-family:Symbol'>· </span>Failed deleted links within the request MUST represented in the
response as added links annotated with term <code>Core.DataModificationException</code>
with a <code>failedOperation</code> value of <code>unlink</code>.</p>

<p class=MsoListParagraphCxSpLast style='text-indent:-.25in'><span
style='font-family:Symbol'>· </span>Collections within the request MUST be represented in the
response as a collection with the current values and membership of the
collection as it exists in the service after processing the request. </p>

<p class=MsoNormal>If an individual change fails due to a failed dependency, it
MUST be annotated with term <code>Core.DataModificationException</code>
and SHOULD specify a <code>responseCode</code>
of <code>424</code> (Failed Dependency).</p>

<p class=MsoNormal>Alternatively, the verb <code>PUT</code> can
be used, in which case the request body MUST be the representation of a
collection of entities. In this case all entities provided in the request are
applied as <a href="#sec_UpsertanEntity">upserts,</a> and any entities not
provided in the request are deleted. In this case, if the <code>continue-on-error</code> preference has been
specified, and the request returns a success response code, then a response
MUST be returned regardless of the <a
href="#sec_Preferencereturnrepresentationandret"><code>return</code></a>
preference, and MUST contain the full membership and values of the collection
as it exists in the service.</p>

<p class=MsoNormal>If the <code>continue-on-error</code>
preference has not been specified, and the service is unable to apply all of
the changes in the request, then it MUST return an error response and MUST NOT
apply any of the changes specified in the request payload.</p>

<h3>Update Members of a Collection</h3>

<p class=MsoNormal>Members of a collection can be updated by submitting a <span
class=Keyword>PATCH</span> request to the URL constructed by appending <code>/$each</code> to the resource path of the collection. The
additional path segment expresses that the request body describes an update to
each member of the collection, not an update to the collection itself. </p>

<p class=MsoNormal>The resource path of the collection MAY contain type-cast or
filter segments to subset the collection, see <a href="#ODataURL">OData&#8209;URL</a>.</p>

<p class=MsoNormal>For primitive-typed collections the body of the request MUST
be a primitive value. Each member of the potentially filtered collection is
updated to the specified primitive value.</p>

<p class=MsoNormal>For collections of structured type, the body of the request
MUST be a full or partial representation of an instance of the collection’s
structured type. Each member of the potentially filtered collection is <a
href="#sec_UpdateanEntity">updated</a> using <span class=Keyword>PATCH</span>
semantics. Structured types MAY include nested collections or delta
collections, in which case the semantics described in <a
href="#sec_UpdateaCollectionofEntities">Update a Collection of Entities</a>
applies.</p>

<p class=MsoCaption>Example 81: change the color of all beige-brown products</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'><span
style='color:black;background:#D9D9D9'>PATCH /service/Products/$filter(@bar)/$each?@bar=Color
eq 'beige-brown'</span></p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'><span
style='color:black;background:#D9D9D9'>Content-Type: application/json</span></p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'><span
style='background:#D9D9D9'>&nbsp;</span></p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'><span
style='color:black;background:#D9D9D9'>{</span></p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'><span
style='color:black;background:#D9D9D9'>  &quot;Color&quot;: &quot;taupe&quot;</span></p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'><span
style='color:black;background:#D9D9D9'>}</span></p>

</div>

<p class=MsoNormal>The response, if requested, is a collection payload
containing the updated representation of each member identified by the request.
If the update payload includes nested collections or nested delta collections, then
they MUST be included in the response, as described in <a
href="#sec_UpdateaCollectionofEntities">Update a Collection of Entities</a>.</p>

<p class=MsoNormal>Clients should note that requesting a response may be
expensive for services that could otherwise efficiently apply updates to a
(possibly filtered) collection.</p>

<p class=MsoNormal>If the <code>continue-on-error</code>
preference has been specified, the service MAY continue processing updates
after a failure. In this case, the service MUST return a response containing at
least the members of the collection that failed to update, which MUST be
annotated with term <code>Core.DataModificationException</code>
with a <code>failedOperation</code> value of <code>update</code>.</p>

<p class=MsoNormal>If the <code>continue-on-error</code>
preference has not been specified, and the service is unable to update all of
the members identified by the request, then it MUST return an error response
and MUST NOT apply any updates.</p>

<h3>Delete Members of a Collection</h3>

<p class=MsoNormal>Members of a collection can be deleted by submitting a <span
class=Keyword>DELETE</span> request to the URL constructed by appending <code>/$each</code> to the resource path of the collection. The
additional path segment expresses that the collection itself is not deleted.</p>

<p class=MsoNormal>The request resource path of the collection MAY contain
type-cast or filter segments to subset the collection.</p>

<p class=MsoCaption>Example 82: delete all products older than 3 </p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'><span
style='color:black;background:#D9D9D9'>DELETE /service/Products/$filter(Age gt
3)/$each</span></p>

</div>

<p class=MsoNormal>If the path identifies a collection of entities and if the
service returns a representation, then the response is a delta response
containing a representation of a deleted entity for each deleted member.</p>

<p class=MsoNormal>If the collection is a collection of entities, then the
client MAY specify the <code>continue-on-error</code>
preference, in which case the service MAY continue processing deletes after a
failure. In this case, the service MUST return a response containing at least
an entity or entity reference for each entity identified by the request that
failed to delete, which MUST be annotated with term <code>Core.DataModificationException</code> with a <code>failedOperation</code> value of <code>delete</code>.</p>

<p class=MsoNormal>Clients should note that requesting a response may be
expensive for services that could otherwise efficiently apply deletes to a
(possibly filtered) collection.</p>

<p class=MsoNormal>If the <code>continue-on-error</code>
preference has not been specified, and the service is unable to delete all of
the entities identified by the request, then it MUST return an error response
and MUST NOT apply any changes.</p>

<h2>11.5
Operations</h2>

<p class=MsoNormal>Custom operations (<a href="#sec_Actions">Actions</a><span
class=MsoHyperlink> </span>and <a href="#sec_Functions">Functions</a>) allow
encapsulating logic for modifying or requesting data that goes beyond simple
CRUD described in the preceding sections of this chapter. See <code>Action</code>, <code>ActionImport</code>, <code>Function</code>, and <code>FunctionImport</code>
in <a href="#ODataCSDL">OData-CSDLJSON</a> or<span
style='color:black;background:white'> </span><a href="#ODataCSDL">OData-CSDLXML</a>.</p>

<h3>Binding an Operation to a
Resource</h3>

<p class=MsoNormal><a href="#sec_Actions">Actions</a><span class=MsoHyperlink> </span>and
<a href="#sec_Functions">Functions</a><span class=MsoHyperlink> </span>MAY be
bound to any type or collection, similar to defining a method in a class in
object-oriented programming. The first parameter of a bound operation is the <i>binding
parameter</i>.</p>

<p class=MsoNormal>The namespace- or alias-qualified name of a bound operation
may be appended to any URL that identifies a resource whose type matches, or is
derived from, the type of the binding parameter. The resource identified by
that URL is used as the <i>binding parameter value</i>. Only aliases defined in
the metadata document of the service can be used in URLs.</p>

<p class=MsoCaption>Example 83: the function <code>MostRecentOrder</code>
can be bound to any URL that identifies a <code>SampleModel.Customer</code></p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'><span
style='color:black'>&lt;Function Name=&quot;MostRecentOrder&quot; IsBound=&quot;true&quot;&gt;<br>
    &lt;Parameter Name=&quot;customer&quot;
Type=&quot;SampleModel.Customer&quot; /&gt;<br>
    &lt;ReturnType Type=&quot;SampleModel.Order&quot; /&gt; <br>
&lt;/Function&gt;</span></p>

</div>

<p class=MsoCaption>Example 84: invoke the <code>MostRecentOrder</code>
function with the value of the binding parameter <code>customer</code>
being the entity identified by <code>http://host/service/Customers(6)</code></p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>GET http://host/service/Customers(6)/SampleModel.MostRecentOrder()</p>

</div>

<p class=MsoCaption>Example 85: the function <code>Comparison</code> can be bound to any URL that identifies a
collection of entities</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'><span
style='color:black'>&lt;Function Name=&quot;Comparison&quot; IsBound=&quot;true&quot;&gt;<br>
    &lt;Parameter Name=&quot;in&quot; Type=&quot;Collection(Edm.EntityType)&quot;
/&gt;<br>
    &lt;ReturnType Type=&quot;Diff.Overview&quot; /&gt; <br>
&lt;/Function&gt;</span></p>

</div>

<p class=MsoCaption>Example 86: invoke the <code>Comparison</code>
function on the set of red products</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>GET http://host/service/Products/$filter(Color eq 'Red')/Diff.Comparison()</p>

</div>

<h3><a name="_Toc12019608">11.5.2 Applying an Action to
Members of a Collection</a></h3>

<p class=MsoNormal>A bound operation with a single-valued binding parameter can
be applied to each member of a collection by appending the path segment <code>/$each</code> to the resource path of the collection, followed
by a forward slash and the namespace- or alias-qualified name of the bound
operation. In this case the type of the collection members MUST match or be
derived from the type of the binding parameter.</p>

<p class=MsoNormal>The resource path of the collection MAY contain type-cast or
filter segments to subset the collection.</p>

<p class=MsoNormal>The response is a collection with members that are instances
of the result type of the bound operation. If the bound operation returns a
collection, the response is a collection of collections. </p>

<p class=MsoCaption>Example 87: invoke the <code>MostRecentOrder</code>
function on each entity in the entity set <code>Customers</code></p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>GET http://host/service/Customers/$each/SampleModel.MostRecentOrder()</p>

</div>

<p class=MsoNormal><a name="sec_AdvertisingAvailableOperationswithin">The
client MAY specify the </a><code>continue-on-error</code>
preference, in which case the service MAY continue processing actions after a
failure. In this case, the service MUST, regardless of the <code>return</code> preference, return a response
containing at least the members identified by the request for which the action
failed. Such members MUST be annotated with term <code>Core.DataModificationException</code>
with a <code>failedOperation</code> value of <code>invoke</code>.</p>

<p class=MsoNormal>If the <code>continue-on-error</code>
preference has not been specified, and the service is unable to invoke the
action against all of the entities identified by the request, then it MUST
return an error response and MUST NOT apply the action to any of the members of
the collection.</p>

<h3>11.5.3 Advertising
Available Operations within a Payload</h3>

<p class=MsoNormal>Services MAY return actions and/or functions bound to a
particular entity or entity collection as part of the representation of the
entity or entity collection within the payload. The representation of an action
or function depends on the <a href="#sec_Formats">format</a>. </p>

<p class=MsoCaption>Example 88: given a <code>GET</code> request
to <code>http://host/service/</code><span class=VerbatimChar>Customers('ALFKI')</span>,
the service might respond with a Customer that includes the <code>SampleEntities.MostRecentOrder</code> function bound to the
entity</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'><span
style='color:black'>{<br>
  &quot;@context&quot;: ...,<br>
  &quot;CustomerID&quot;: &quot;ALFKI&quot;, <br>
  &quot;CompanyName&quot;: &quot;Alfreds Futterkiste&quot;, <br>
  &quot;#SampleEntities.MostRecentOrder&quot;: {<br>
    &quot;title&quot;: &quot;Most Recent Order&quot;,<br>
    &quot;target&quot;: &quot;</span><span class=VerbatimChar>Customers('ALFKI')</span><span style='color:black'>/SampleEntities.MostRecentOrder()&quot;<br>
  },<br>
  ...<br>
}</span></p>

</div>

<p class=MsoNormal>An
efficient format that assumes client knowledge of metadata may omit actions and
functions from the payload  whose target URL can be computed via metadata
following standard conventions defined in <a href="#ODataURL">OData&#8209;URL</a>.
</p>

<p class=MsoNormal>Services can advertise that a function or action is not
available for a particular instance by setting its value to null.</p>

<p class=MsoCaption>Example 89: the <code>SampleEntities.MostRecentOrder</code>
function is not available for customer 'ALFKI'</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'><span
style='color:black'>{<br>
  &quot;@context&quot;: ...,<br>
  &quot;CustomerID&quot;: &quot;ALFKI&quot;, <br>
  &quot;CompanyName&quot;: &quot;Alfreds Futterkiste&quot;, <br>
  &quot;#SampleEntities.MostRecentOrder&quot;: null,<br>
  ...<br>
}</span></p>

</div>

<h3>Functions</h3>

<p class=MsoNormal>Functions are operations exposed by an OData service that
MUST return data and MUST have no observable side effects.</p>

<h4>11.5.4.1 Invoking
a Function</h4>

<p class=MsoNormal>To invoke a function bound to a resource, the client issues
a <code>GET</code> request to a function URL.
A function URL may be <a href="#sec_AdvertisingAvailableOperationswithin">obtained</a>
from a previously returned entity representation or constructed by appending
the namespace- or alias-qualified function name to a URL that identifies a
resource whose type is the same as, or derived from, the type of the binding
parameter of the function. The value for the binding parameter is the value of
the resource identified by the URL prior to appending the function name, and
additional parameter values are specified using <a
href="#sec_InlineParameterSyntax">inline parameter syntax</a>. If the function
URL is <a href="#sec_AdvertisingAvailableOperationswithin">obtained</a> from a
previously returned entity representation, <a href="#sec_ParameterAliases">parameter
aliases</a><span class=MsoHyperlink> </span>that are identical to the parameter
name preceded by an at (<code>@</code>) sign MUST be used.
Clients MUST check if the obtained URL already contains a query part and appropriately
precede the parameters either with an ampersand (<code>&amp;</code>)
or a question mark (<code>?</code>).</p>

<p class=MsoNormal>Services MAY additionally support invoking functions using
the unqualified function name by defining one or more <a
href="#sec_DefaultNamespaces">default namespaces</a> through the <a
href="https://github.com/oasis-tcs/odata-vocabularies/blob/master/vocabularies/Org.OData.Core.V1.md#DefaultNamespace"><code>Core.DefaultNamespace</code></a><span
class=Datatype><span style='font-family:"Arial",sans-serif'> </span></span>term
defined in  <a href="#ODataVocCore">OData-VocCore</a>.</p>

<p class=MsoNormal>Functions can be used within <a
href="#sec_SystemQueryOptionfilter"><code>$filter</code></a>
or <a href="#sec_SystemQueryOptionorderby"><code>$orderby</code></a>
system query options. Such functions can be bound to a resource, as described
above, or called directly by specifying the namespace- (or alias-) qualified
function name. Parameter values for functions within <a
href="#sec_SystemQueryOptionfilter"><code>$filter</code></a>
or <a href="#sec_SystemQueryOptionorderby"><code>$orderby</code></a>
are specified according to the <a href="#sec_InlineParameterSyntax">inline parameter
syntax</a>.</p>

<p class=MsoNormal>To invoke a function through a function import the client
issues a <code>GET</code> request to a URL
identifying the function import and passing parameter values using <a
href="#sec_InlineParameterSyntax">inline parameter syntax</a>. The canonical
URL for a function import is the service root, followed by the name of the
function import. Services MAY support omitting the parentheses when invoking a
function import with no parameters, but for maximum interoperability MUST also
support invoking the function import with empty parentheses.</p>

<p class=MsoNormal>If the function is composable, additional path segments may
be appended to the URL that identifies the composable function (or function import)
as appropriate for the type returned by the function (or function import). The
last path segment determines the system query options and HTTP verbs that can
be used with this this URL, e.g. if the last path segment is a multi-valued
navigation property, a <code>POST</code> request may be used to
create a new entity in the identified collection.</p>

<p class=MsoCaption>Example 90: add a new item to the list of items of the
shopping cart returned by the composable <code>MyShoppingCart</code>
function import </p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'><span
class=VerbatimChar>POST </span>http://host/service/MyShoppingCart()<span
class=VerbatimChar>/Items</span></p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'><span
class=VerbatimChar>&nbsp;</span></p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'><span
class=VerbatimChar>...</span></p>

</div>

<p class=MsoNormal>Parameter values passed to functions MUST be specified
either as a URL literal (for primitive values) or as a JSON formatted OData
object (for complex values, or collections of primitive or complex values).
Entity typed values are passed as JSON formatted entities that MAY include a
subset of the properties, or just the entity reference, as appropriate to the
function.   </p>

<p class=MsoNormal>If a collection-valued function has no result for a given
parameter value combination, the response is the format-specific representation
of an empty collection. If a single-valued function with a nullable return-type
has no result, the service returns <a href="#sec_ResponseCode204NoContent"><code>204 No Content</code></a>.</p>

<p class=MsoNormal>If a single-valued function with a non-nullable return type
has no result, the service returns <code>4xx</code>. For
functions that return a single entity <a href="#sec_ResponseCode404NotFound"><code>404 Not Found</code></a> is the appropriate response
code.</p>

<p class=MsoNormal>For a composable function the processing is stopped when the
function result requires a <code>4xx</code> response, and
continues otherwise.</p>

<p class=MsoNormal>Function imports preceded by the <code>$root</code>
literal MAY be used in the <a href="#sec_SystemQueryOptionfilter"><code>$filter</code></a> or <a
href="#sec_SystemQueryOptionorderby"><code>$orderby</code></a>
system query options, see <a href="#ODataURL">OData&#8209;URL</a>.</p>

<h5>11.5.4.1.1 Inline Parameter Syntax</h5>

<p class=MsoNormal>Parameter values are specified inline by appending a
comma-separated list of parameter values, enclosed by parenthesis to the
function name.</p>

<p class=MsoNormal>Each parameter value is represented as a name/value pair in
the format <code>Name=Value</code>, where <code>Name</code>
is the name of the parameter to the function and <code>Value</code>
is the parameter value.</p>

<p class=MsoCaption>Example 91: invoke a <code>Sales.EmployeesByManager</code>
function which takes a single <code>ManagerID</code> parameter
via the function import <code>EmployeesByManager</code> </p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'><span
class=VerbatimChar>GET http://host/service/EmployeesByManager(ManagerID=3)</span></p>

</div>

<p class=MsoCaption>Example 92: return all <code>Customers</code>
whose City property returns &quot;Western&quot; when passed to the <code>Sales.SalesRegion</code> function</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'><span
class=VerbatimChar><span style='color:black'>GET http://host/service/Customers?<br>
                         $filter=Sales.SalesRegion(City=$it/City) eq 'Western'</span></span></p>

</div>

<p class=MsoNormal>A <a
href="#sec_ParameterAliases">parameter alias</a><span class=MsoHyperlink> </span>can
be used in place of an inline parameter value. The value for the alias is
specified as a separate query option using the name of the parameter alias.</p>

<p class=MsoCaption>Example 93: invoke a <code>Sales.EmployeesByManager</code>
function via the function import <code>EmployeesByManager</code>,
passing 3 for the <code>ManagerID</code> parameter</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'><span
class=VerbatimChar>GET http://host/service/EmployeesByManager(ManagerID=@p1)?@p1=3</span></p>

</div>

<p class=MsoNormal>Services MAY in addition allow implicit <a
href="#sec_ParameterAliases">parameter aliases</a><span class=MsoHyperlink> </span><span
class=MsoHyperlink><span style='color:windowtext'>for function imports and for functions
that are the last path segment of the URL. An implicit parameter alias is the
parameter name, optionally preceded by an at (</span></span><span
class=Keyword>@</span><span class=MsoHyperlink><span style='color:windowtext'>)
sign. When using implicit parameter aliases, parentheses MUST NOT be appended
to the function (import) name. The </span></span>value for each parameter MUST
be specified as a separate query option with the name of the parameter alias.
If a parameter name is identical to a system query option name (without the
optional <code>$</code> prefix), the parameter name MUST be
prefixed with an at (<span class=Keyword>@</span><span class=MsoHyperlink><span
style='color:windowtext'>) sign.</span></span></p>

<p class=MsoCaption>Example 94: invoke a <code>Sales.EmployeesByManager</code>
function via the function import <code>EmployeesByManager</code>,
passing 3 for the <code>ManagerID</code> parameter using the
implicit parameter alias</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'><span
class=VerbatimChar>GET http://host/service/EmployeesByManager?ManagerID=3</span></p>

</div>

<p class=MsoNormal style='text-align:justify'><a name="_Toc477876712">Non-binding
parameters annotated with the term </a><a
href="https://github.com/oasis-tcs/odata-vocabularies/blob/master/vocabularies/Org.OData.Core.V1.md#OptionalParameter"><code>Core.OptionalParameter</code></a><span
class=Datatype><span style='font-family:"Arial",sans-serif'> </span></span>defined
in <a href="#ODataVocCore">OData-VocCore</a> MAY be omitted. If it is
annotated and the annotation specifies a <code>DefaultValue</code>,
the omitted parameter is interpreted as having that default value. If omitted
and the annotation does not specify a default value, the service is free on how
to interpret the omitted parameter. </p>

<h4>Function overload resolution</h4>

<p class=MsoNormal>The same function name may be used multiple times within a
schema, each with a different set of parameters. For unbound overloads the
combination of the function name and the unordered set of parameter names MUST
identify a particular function overload. For bound overloads the combination of
the function name, the binding parameter type, and the unordered set of names
of the non-binding parameters MUST identify a particular function overload.</p>

<p class=MsoNormal>All unbound overloads MUST have the same return type. Also,
all bound overloads with a given binding parameter type MUST have the same
return type.</p>

<p class=MsoNormal>If the function is bound and the binding parameter type is
part of an inheritance hierarchy, the function overload is selected based on
the type of the URL segment preceding the function name. A type-cast segment
can be used to select a function defined on a particular type in the hierarchy,
see <a href="#ODataURL">OData&#8209;URL</a>.</p>

<p class=MsoNormal style='text-align:justify'>Non-binding parameters MAY be
marked as optional by annotating them with the term <a
href="https://github.com/oasis-tcs/odata-vocabularies/blob/master/vocabularies/Org.OData.Core.V1.md#OptionalParameter"><code>Core.OptionalParameter</code></a><span
class=Datatype><span style='font-family:"Arial",sans-serif'> </span></span>defined
in <a href="#ODataVocCore">OData-VocCore</a>. All parameters marked as optional
MUST come after any parameters not marked as optional. </p>

<p class=MsoNormal>A function overload is selected if</p>

<p class=MsoListParagraphCxSpFirst style='text-indent:-.25in'><span
style='font-family:Symbol'>· </span>The set of specified parameters exactly matches a function
overload, or else</p>

<p class=MsoListParagraphCxSpLast style='text-indent:-.25in'><span
style='font-family:Symbol'>· </span>The set of specified parameters matches a subset of parameters
that includes all non-optional parameters of exactly one function overload.</p>

<p class=MsoNormal>Services SHOULD avoid ambiguity, i.e. the combination of the
function name, the unordered set of <i>non-optional</i> non-binding parameter
names, plus the binding parameter type for bound overloads SHOULD identify a
particular function overload. If there is ambiguity, then services MAY return <code>400 Bad Request</code> with an error response body stating that
the request was ambiguous.</p>

<h3>11.5.5 Actions</h3>

<p class=MsoNormal>Actions are operations exposed by an OData service that MAY
have side effects when invoked. Actions MAY return data but<code> </code>MUST NOT be further composed with
additional path segments.</p>

<h4>11.5.5.1 Invoking
an Action</h4>

<p class=MsoNormal>To invoke an action bound to a resource, the client issues a
<code>POST</code> request to an action URL.
An action URL may be <a href="#sec_AdvertisingAvailableOperationswithin">obtained</a>
from a previously returned entity representation or constructed by appending
the namespace- or alias-qualified action name to a URL that identifies a
resource whose type is the same as, or derives from, the type of the binding
parameter of the action. The value for the binding parameter is the resource
identified by the URL preceding the action name, and only the non-binding
parameter values are passed in the request body according to the particular
format. </p>

<p class=MsoNormal>Services MAY additionally support invoking actions using the
unqualified action name by defining one or more <a href="#sec_DefaultNamespaces">default
namespaces</a> through the <a
href="https://github.com/oasis-tcs/odata-vocabularies/blob/master/vocabularies/Org.OData.Core.V1.md#DefaultNamespace"><code>Core.DefaultNamespace</code></a><span
class=Datatype><span style='font-family:"Arial",sans-serif'> </span></span>term
defined in  <a href="#ODataVocCore">OData-VocCore</a>.</p>

<p class=MsoNormal>To invoke an action through an action import, the client
issues a <code>POST</code> request to a URL
identifying the action import. The canonical URL for an action import is the
service root, followed by the name of the action import. When invoking an
action through an action import all parameter values MUST be passed in the
request body according to the particular format.</p>

<p class=MsoNormal style='text-align:justify'>Non-binding parameters that are
nullable or annotated with the term <a
href="https://github.com/oasis-tcs/odata-vocabularies/blob/master/vocabularies/Org.OData.Core.V1.md#OptionalParameter"><code>Core.OptionalParameter</code></a><span
class=Datatype><span style='font-family:"Arial",sans-serif'> </span></span>defined
in <a href="#ODataVocCore">OData-VocCore</a> MAY be omitted from the
request body. If an omitted parameter is not annotated (and thus nullable), it
MUST be interpreted as having the <code>null</code> value. If it
is annotated and the annotation specifies a <code>DefaultValue</code>,
the omitted parameter is interpreted as having that default value. If omitted
and the annotation does not specify a default value, the service is free on how
to interpret the omitted parameter. Note: a nullable non-binding parameter is
equivalent to being annotated as optional with a default value of <code>null</code>.</p>

<p class=MsoNormal>4.01 services MUST support invoking actions with no
non-binding parameters and parameterless action imports both without a request
body and with a request body representing no parameters, according to the
particular format. Interoperable clients SHOULD always include a request body,
even when invoking actions with no non-binding parameters and parameterless
action imports.</p>

<p class=MsoNormal>If the action returns results, the client SHOULD use content
type negotiation to request the results in the desired format, otherwise the
default content type will be used.</p>

<p class=MsoNormal>The client can request whether any results from the action
be returned using the <a href="#sec_Preferencereturnrepresentationandret"><code>return Prefer</code> header</a>.</p>

<p class=MsoNormal>Actions that create and return a single entity follow the
rules for <a href="#sec_CreateanEntity">entity creation</a> and return a <a
href="#sec_HeaderLocation"><code>Location</code>
header</a> that contains the edit URL or read URL of the created entity. </p>

<p class=MsoNormal>Actions without a return type respond with <a
href="#sec_ResponseCode204NoContent"><code>204
No Content</code></a> on success. </p>

<p class=MsoNormal>To request processing of the action only if the binding
parameter value, an entity or collection of entities, is unmodified, the client
includes the <a href="#sec_HeaderIfMatch"><code>If-Match</code></a>
header with the latest known ETag value for the entity or collection of
entities. The ETag value for a collection as a whole is transported in the <code>ETag</code> header of a collection response.</p>

<p class=MsoCaption>Example 95: invoke the <code>SampleEntities.CreateOrder</code>
action using <code>/Customers('ALFKI'</code><span
class=VerbatimChar><span style='font-family:"Calibri",sans-serif'>) </span></span>as
the customer (or binding parameter). The values <code>2</code>
for the <code>quantity</code> parameter and <code>BLACKFRIDAY</code> for the <code>discountCode</code>
parameter are passed in the body of the request. Invoke the action only if the
customer’s ETag still matches.</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'><span
class=VerbatimChar>POST http://host/service/Customers('ALFKI')/SampleEntities.CreateOrder</span></p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'><span
class=VerbatimChar>If-Match: W/&quot;MjAxOS0wMy0yMVQxMzowNVo=&quot;</span></p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'><span
class=VerbatimChar><span style='color:black'><br>
{<br>
   &quot;items&quot;: [</span></span></p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'><span
class=VerbatimChar><span style='color:black'>     { &quot;product&quot;: 4001, &quot;quantity&quot;:
2 },<br>
     { &quot;product&quot;: 7062, &quot;quantity&quot;: 1 }</span></span></p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'><span
class=VerbatimChar><span style='color:black'>   ],<br>
   &quot;discountCode&quot;: &quot;BLACKFRIDAY&quot;<br>
}</span></span></p>

</div>

<h4>Action Overload Resolution</h4>

<p class=MsoNormal>The same action name may be used multiple times within a
schema provided there is at most one unbound overload, and each bound overload
specifies a different binding parameter type. </p>

<p class=MsoNormal>If the action is bound and the binding parameter type is
part of an inheritance hierarchy, the action overload is selected based on the
type of the URL segment preceding the action name. A type-cast segment can be
used to select an action defined on a particular type in the hierarchy, see <a
href="#ODataURL">OData&#8209;URL</a>.</p>

<h2>11.6 Asynchronous
Requests</h2>

<p class=MsoNormal>A <a href="#sec_HeaderPrefer">Prefer</a> header with a <a
href="#sec_Preferencerespondasync"><code>respond-async</code></a><code> </code>preference allows clients to request that the service
process a <a href="#sec_DataServiceRequests">Data Service Request</a>
asynchronously. </p>

<p class=MsoNormal>If the client has specified<code> respond-async</code>
in the request, the service MAY process the request asynchronously and return a
<a href="#sec_ResponseCode202Accepted"><code>202
Accepted</code></a><code> </code>response. A service MUST NOT
reply to a <a href="#sec_DataServiceRequests">Data Service Request</a> with <code>202 Accepted</code><span class=Datatype><span style='font-family:
"Arial",sans-serif'> </span></span>if the request has not included the <code>respond-async</code> preference.</p>

<p class=MsoNormal>Responses that return <code>202 Accepted</code>
MUST include a <a href="#sec_HeaderLocation"><code>Location</code>
header</a> pointing to a <i>status monitor resource</i> that represents the
current state of the asynchronous processing in addition to an optional <a
href="#sec_HeaderRetryAfter"><code>Retry-After</code>
header</a><span class=MsoHyperlink> </span>indicating the time, in seconds, the
client should wait before querying the service for status. Services MAY include
a response body, for example, to provide additional status information.</p>

<p class=MsoNormal>A <code>GET</code> request to the status
monitor resource again returns <code>202 Accepted </code>response
if the asynchronous processing has not finished. This response MUST again<span
class=Datatype><span style='font-family:"Arial",sans-serif'> </span></span>include
a <a href="#sec_HeaderLocation"><code>Location</code>
header</a><span class=MsoHyperlink> </span>and MAY include a <a
href="#sec_HeaderRetryAfter"><code>Retry-After</code>
header</a> to be used for a subsequent request. The <code>Location</code> header and optional <code>Retry-After</code>
header may or may not contain the same values as returned by the previous
request.</p>

<p class=MsoNormal>A <code>GET</code> request to the status
monitor resource returns <code>200 OK</code> once the
asynchronous processing has completed. For OData 4.01 and greater responses, or
OData 4.0 requests that include an <code>Accept </code>header
that does not specify <code>application/http</code><span
class=Datatype><span style='font-family:"Arial",sans-serif'>,</span></span> the
response MUST include the <a href="#sec_HeaderAsyncResult"><code>AsyncResult</code></a> <span
class=MsoHyperlink><span style='color:windowtext'>response header. Any other
headers, along with the response body, represent the result of the completed
asynchronous operation. </span></span>If the <code>GET</code>
request to the status monitor includes an <code>OData-MaxVersion
</code>header with a value of <code>4.0</code> and no <code>Accept</code><span class=Datatype><span style='font-family:"Arial",sans-serif'>
</span></span>header, or an <code>Accept</code><span
class=Datatype><span style='font-family:"Arial",sans-serif'> </span></span>header
that includes <code>application/http</code>, then the body of
the final <code>200 OK</code> response MUST be represented as an
HTTP message, as described in <a href="#HTTPMessage"><b>[RFC7230]</b></a><span
class=MsoHyperlink><b>, </b></span>which is the full HTTP response to the completed
asynchronous operation.</p>

<p class=MsoNormal>A <code>DELETE</code> request sent to the status
monitor resource requests that the asynchronous processing be canceled. A <code>200 OK</code> or a <code>204 No Content </code>response
indicates that the asynchronous processing has been successfully canceled. A
client can request that the <code>DELETE</code> should be
executed asynchronously. A <code>202 Accepted</code> response
indicates that the cancellation is being processed asynchronously; the client
can use the returned <a href="#sec_HeaderLocation"><code>Location</code> header</a> (which MUST be different from the
status monitor resource of the initial request) to query for the status of the
cancellation. If a delete request is not supported by the service, the service
returns <a href="#sec_ResponseCode405MethodNotAllowed"><code>405 Method Not Allowed</code></a><code>.</code></p>

<p class=MsoNormal>After a successful <code>DELETE</code>
request against the status monitor resource, any subsequent <code>GET</code> requests for the same status
monitor resource returns <a href="#sec_ResponseCode404NotFound"><code>404 Not Found</code></a>.</p>

<p class=MsoNormal>If an asynchronous request is cancelled for reasons other
than the consumers issuing a <code>DELETE</code>
request against the status monitor resource, a <code>GET</code>
request to the status monitor resource returns <code>200
OK</code> with a response body containing a single HTTP response with a status
code in the <code>5xx Server Error</code>
range indicating that the operation was cancelled.</p>

<p class=MsoNormal>The service MUST ensure that no observable change has
occurred as a result of a canceled request.</p>

<p class=MsoNormal>If the client waits too long to request the result of the
asynchronous processing, the service responds with a <a
href="#sec_ResponseCode410Gone"><code>410</code>
<code>Gone</code></a> or <a
href="#sec_ResponseCode404NotFound"><code>404
Not Found</code></a>.</p>

<p class=MsoNormal>The status monitor resource URL MUST differ from any other
resource URL.</p>

<h2>11.7 Batch Requests</h2>

<p class=MsoNormal>Batch requests allow grouping multiple individual requests
into a single HTTP request payload. An individual request in the context of a
batch request is a <a href="#sec_MetadataRequests">Metadata Request</a>, <a
href="#sec_RequestingData">Data Request</a><span class=MsoHyperlink>,</span> <a
href="#sec_DataModification">Data Modification Request</a>, <a
href="#sec_InvokinganAction">Action invocation</a><span class=MsoHyperlink> </span>request,<span
class=MsoHyperlink> </span>or <a href="#sec_InvokingaFunction">Function
invocation</a> request. </p>

<p class=MsoNormal>Batch requests are submitted as a single HTTP <code>POST</code> request to the batch endpoint of a service, located
at the URL <code>$batch</code> relative to the service root.</p>

<p class=MsoNormal>Individual requests within a batch request are evaluated
according to the same semantics used when the request appears outside the
context of a batch request.</p>

<p class=MsoNormal>A batch request is represented using either the <a
href="#sec_MultipartBatchFormat">multipart batch format</a> defined in this
document or the JSON batch format defined in <a href="#ODataJSON">OData-JSON</a><span
class=MsoHyperlink><b>.</b></span></p>

<h3>11.7.1 Batch
Request Headers</h3>

<p class=MsoNormal>A batch request using the <a href="#sec_MultipartBatchFormat">multipart
batch format</a> MUST contain a <a href="#sec_HeaderContentType"><code>Content-Type</code></a> header specifying a
content type of <code>multipart/mixed</code> and a <code>boundary</code> parameter as defined in <a href="#RFC2046"><b>[RFC2046]</b></a>.
</p>

<p class=MsoCaption>Example 96: multipart batch request</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'><span
class=VerbatimChar>POST /service/$batch HTTP/1.1</span><span
style='font-size:6.0pt;color:black'><br>
</span><span class=VerbatimChar>Host: odata.org</span><span
style='font-size:6.0pt;color:black'><br>
</span><span class=VerbatimChar>OData-Version: 4.0 </span><span
style='font-size:6.0pt;color:black'><br>
</span><span class=VerbatimChar>Content-Type:
multipart/mixed; boundary=batch_36522ad7-fc75-4b56-8c71-56071383e77b</span><span
style='font-size:6.0pt;color:black'><br>
<br>
</span><span class=VerbatimChar>&lt;Multipart Batch request
body&gt;</span></p>

</div>

<p class=MsoNormal>A batch request using the JSON batch format MUST contain a <code>Content-Type</code> header specifying a content type of <code>application/json</code>.</p>

<p class=MsoCaption> Example 97: JSON batch request</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'><span
class=VerbatimChar>POST /service/$batch HTTP/1.1</span><span
style='font-size:6.0pt;color:black'><br>
</span><span class=VerbatimChar>Host: odata.org</span><span
style='font-size:6.0pt;color:black'><br>
</span><span class=VerbatimChar>OData-Version: 4.01 </span><span
style='font-size:6.0pt;color:black'><br>
</span><span class=VerbatimChar>Content-Type: application/json</span><span
style='font-size:6.0pt;color:black'><br>
<br>
</span><span class=VerbatimChar>&lt;JSON Batch
request body&gt;</span></p>

</div>

<p class=MsoNormal>Batch requests SHOULD contain the applicable <code>OData-Version</code> header. </p>

<p class=MsoNormal>Batch requests SHOULD contain an <a href="#sec_HeaderAccept"><code>Accept</code></a> header specifying the
desired batch response format, either <code>multipart/mixed</code>
or <code>application/json</code>. If no <code>Accept</code>
header is provided, services SHOULD respond with the content type of the request.</p>

<p class=MsoNormal><a name="_Toc370126141">If the set of request headers
of a batch request are valid the service MUST return a </a><a
href="#sec_ResponseCode200OK"><code>200 OK</code></a>
HTTP response code to indicate that the batch request was accepted for
processing, but the processing is yet to be completed. The individual requests
within the body of the batch request may subsequently fail or be malformed;
however, this enables batch implementations to stream the results.</p>

<p class=MsoNormal>If the service receives a batch request with an invalid set
of headers it MUST return a <a href="#sec_ClientErrorResponses"><code>4xx response code</code></a> and perform no
further processing of the batch request.</p>

<h3>Request Dependencies</h3>

<p class=MsoNormal>Requests within a batch may have dependencies on other
requests according to the particular batch format.</p>

<p class=MsoNormal>In the JSON format, requests may explicitly declare a
dependency on other requests that must be successfully processed before the
current request. In addition, requests may be specified as part of an <i>atomicity
group</i> whose members MUST either all succeed, or all fail. If a request
fails, then any dependent requests within the JSON format return <a
href="#sec_ResponseCode424FailedDependency"><code>424
Failed Dependency</code></a>.</p>

<p class=MsoNormal>In the Multipart format, <a href="#sec_DataModification">data
modification</a> requests or <a href="#sec_InvokinganAction">action invocation</a>
requests may be grouped as part of an atomic change set. Operations outside the
change set are executed sequentially, while operations within the change set
may be executed in any order.</p>

<h3>Identifying Individual
Requests</h3>

<p class=MsoNormal>Each individual request within a batch request MAY have a
request identifier assigned. The request identifier is case-sensitive, MUST be
unique within the batch request, and MUST satisfy the rule <code>request-id</code> in <a href="#ODataABNF">OData-ABNF</a>.</p>

<p class=MsoNormal>The representation of the request identifier is
format-specific, as are the rules for which individual requests require an
identifier.</p>

<h3>Referencing Returned Entities</h3>

<p class=MsoNormal>Entities created by an <a href="#sec_CreateanEntity">insert</a>
request can be referenced in the request URL of subsequent requests by using
the request identifier prefixed with a <code>$</code> character
as the first segment of the request URL.</p>

<p class=MsoNormal>If the <code>$</code>-prefixed request
identifier is identical to the name of a top-level system resource (<code>$batch</code>, <code>$crossjoin,</code> <code>$all,</code> <code>$entity</code>, <code>$root</code>, <code>$id</code>, <code>$metadata</code>, or other system resources defined according to
the <a href="#sec_HeaderODataVersion"><code>OData-Version</code></a>
of the protocol specified in the request), then the reference to the top-level
system resource is used. This collision can be avoided by e.g. using only
numeric request identifiers.</p>

<p class=MsoNormal>Services MAY also support referencing within request bodies,
in which case they SHOULD advertise this support by specifying the <code>ReferencesInRequestBodiesSupported</code> property in the <a
href="https://github.com/oasis-tcs/odata-vocabularies/blob/master/vocabularies/Org.OData.Capabilities.V1.md#BatchSupport"><code>Capabilities.BatchSupport</code></a> term
applied to the entity container, see <a href="#ODataVocCap">OData-VocCap</a>.</p>

<h3>Referencing the ETag of an
Entity</h3>

<p class=MsoNormal>Services MAY support the use of an ETag returned from a
previous operation in an <a href="#sec_HeaderIfMatch"><code>If-Match</code></a> or <a href="#sec_HeaderIfNoneMatch"><code>If-None-Match</code></a> header of a
subsequent statement. Services SHOULD advertise this support by specifying the <code>EtagReferencesSupported </code>property in the <a
href="https://github.com/oasis-tcs/odata-vocabularies/blob/master/vocabularies/Org.OData.Capabilities.V1.md#BatchSupport"><code>Capabilities.BatchSupport</code></a> annotation
term applied to the entity container, see <a href="#ODataVocCap">OData-VocCap</a>.</p>

<p class=MsoNormal>The ETag for a previous operation can be referenced by using
the request identifier prefixed with a <code>$</code> character
as the unquoted value of the <code>If-Match</code> or <code>If-None-Match</code> header.</p>

<h3>Referencing Values from
Response Bodies</h3>

<p class=MsoNormal>Services MAY support using values from a response body in
the query part of the URL or in the request body of subsequent requests. Value
references consist of a <code>$</code> character, followed by
the request identifier of the preceding request, and optionally followed by a
valid OData path.</p>

<p class=MsoNormal>If the <code>$</code>-prefixed request
identifier is identical to the name of a predefined literal for query
expressions (<code>$it</code>, <code>$root</code>,
or other literals defined according to the <a href="#sec_HeaderODataVersion"><code>OData-Version</code></a> of the protocol
specified in the request), then the predefined literal is used. This collision
can be avoided by e.g. using only numeric request identifiers.</p>

<h3>Multipart Batch Format</h3>

<p class=MsoNormal>The multipart batch format is represented as a Multipart
Media Type message <a href="#RFC2046"><b>[RFC2046]</b></a>, a standard format
allowing the representation of multiple parts, each of which may have a different
content type.</p>

<h4>Multipart Batch Request Body</h4>

<p class=MsoNormal>The body of a multipart batch request is made up of a series
of individual requests and <i>change sets</i>, each represented as a distinct
body part (i.e. preceded by a boundary delimiter line consisting of two dashes
and the value of the <code>boundary</code> parameter specified
in the <code>Content-Type</code> header, and the last body part
followed by a closing boundary delimiter line consisting of two dashes, the
boundary, and another two dashes).</p>

<p class=MsoNormal>A body part representing an individual request MUST include
a <code>Content-Type</code> header with value <code>application/http</code>. </p>

<p class=MsoNormal>The contents of a body part representing a change set MUST
itself be a multipart document (see <a href="#RFC2046"><b>[RFC2046]</b></a>) with
one body part for each operation in the change set. <span
class=MsoCommentReference><span style='font-size:8.0pt'>E</span></span>ach body
part representing an operation in the change set MUST specify a <code>Content-ID</code> header with a <a
href="#sec_IdentifyingIndividualRequests">request identifier</a> that is unique
within the batch request. </p>

<p class=MsoNormal>A <code>Content-Transfer-Encoding</code>
header with value <code>binary</code> may be included for
historic reasons although this header is not used by HTTP and only needed for
transmission via E-Mail. Neither clients nor services should rely on this
header being present. </p>

<p class=MsoNormal>Preambles and epilogues in the multipart batch request body,
as defined in <a href="#RFC2046"><b>[RFC2046]</b></a>, are valid but are
assigned no meaning and thus MUST be ignored by processors of multipart batch
requests.</p>

<p class=MsoNormal style='page-break-after:avoid'>The request URL of individual
requests within a batch request or change set can use one of the following
three formats:</p>

<ul style='margin-top:0in' type=disc>
 <li class=MsoNormal style='page-break-after:avoid'>Absolute URI with schema,
     host, port, and absolute resource path.</li>
</ul>

<p class=MsoCaption>Example 98:</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>GET&nbsp;https://host:1234/path/service/People(1)&nbsp;HTTP/1.1&nbsp;</p>

</div>

<ul style='margin-top:0in' type=disc>
 <li class=MsoNormal style='page-break-after:avoid'>Absolute resource path and
     separate <span class=Keyword>Host</span> header</li>
</ul>

<p class=MsoCaption>Example 99:</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>GET&nbsp;/path/service/People(1)&nbsp;HTTP/1.1</p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>Host: myserver.mydomain.org:1234</p>

</div>

<ul style='margin-top:0in' type=disc>
 <li class=MsoNormal style='page-break-after:avoid'>Resource path relative to
     the batch request URI.</li>
</ul>

<p class=MsoCaption>Example 100:</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>GET&nbsp;People(1)&nbsp;HTTP/1.1</p>

</div>

<p class=MsoNormal>Services MUST support all three formats for URLs of
individual requests.</p>

<p class=MsoNormal>URLs must be correctly percent-encoded. For relative URLs
this means that colons in the path part, especially within key values, MUST be
percent-encoded to avoid confusion with the scheme separator. Colons within the
query part, i.e. after the question mark character (<code>?</code>),
need not be percent-encoded. </p>

<p class=MsoNormal style='page-break-after:avoid'>Each body part that
represents a single request MUST NOT include:</p>

<ul style='margin-top:0in' type=disc>
 <li class=MsoNormal><code>authentication</code> or <code>authorization</code> related HTTP headers </li>
 <li class=MsoNormal><code>Expect</code>, <code>From</code>,
     <code>Max-Forwards</code>, <code>Range</code>,
     or <code>TE</code> headers</li>
</ul>

<p class=MsoNormal>Processors of batch requests MAY choose to disallow
additional HTTP constructs in HTTP requests serialized within body parts. For
example, a processor may choose to disallow chunked encoding to be used by such
HTTP requests.</p>

<p class=MsoCaption>Example <a name=BatchRequestExampleNumber></a>101:
a batch request that contains the following individual requests in the order
listed</p>

<p class=MsoCaption style='margin-left:55.85pt;text-indent:-.25in;page-break-after:
avoid'>1. A
query request</p>

<p class=MsoCaption style='margin-left:55.85pt;text-indent:-.25in;page-break-after:
avoid'>2. A
change set that contains the following requests:</p>

<p class=MsoCaption style='margin-left:74.75pt;text-indent:-.25in;page-break-after:
avoid'><span style='font-family:Symbol;font-style:normal'>· </span>Insert entity (with <code>Content-ID = 1</code>)</p>

<p class=MsoCaption style='margin-left:74.75pt;text-indent:-.25in;page-break-after:
avoid'><span style='font-family:Symbol;font-style:normal'>· </span>Update entity (with <code>Content-ID = 2</code>)</p>

<p class=MsoCaption style='margin-left:55.85pt;text-indent:-.25in;page-break-after:
avoid'>3. A
second query request </p>

<p class=MsoCaption>Note: For brevity, in the example, request bodies are
excluded in favor of English descriptions inside <code>&lt;&gt;</code>
brackets and <code>OData-Version</code> headers are omitted. </p>

<p class=MsoCaption>Note also that the two empty lines after the <code>Host</code> header of the <code>GET</code> request
are necessary: the first is part of the <code>GET</code> request
header; the second is the empty body of the <code>GET</code>
request, followed by a <code>CRLF</code> according to <a
href="#RFC2046"><b>[RFC2046]</b></a><span class=MsoHyperlink>.</span></p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'><span
style='color:black'>POST /service/$batch HTTP/1.1 <br>
Host: host <br>
OData-Version: 4.0<br>
Content-Type: multipart/mixed; boundary=batch_36522ad7-fc75-4b56-8c71-56071383e77b</span></p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>Content-Length: ###</p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>&nbsp;</p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'><span
style='color:black'>--batch_36522ad7-fc75-4b56-8c71-56071383e77b<br>
Content-Type: application/http <br>
<br>
GET /service/Customers('ALFKI') <br>
Host: host<br>
<br>
<br>
--batch_36522ad7-fc75-4b56-8c71-56071383e77b<br>
Content-Type: multipart/mixed; boundary=changeset_77162fcd-b8da-41ac-a9f8-9357efbbd<br>
<br>
</span></p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'><span
style='color:black'>--changeset_77162fcd-b8da-41ac-a9f8-9357efbbd <br>
Content-Type: application/http <br>
Content-ID: 1<br>
<br>
POST /service/Customers HTTP/1.1 <br>
Host: host<br>
Content-Type: application/json <br>
Content-Length: ### <br>
<br>
&lt;JSON representation of a new Customer&gt;</span></p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'><span
style='color:black'>--changeset_77162fcd-b8da-41ac-a9f8-9357efbbd <br>
Content-Type: application/http <br>
Content-ID: 2<br>
<br>
PATCH /service/Customers('ALFKI') HTTP/1.1 <br>
Host: host <br>
Content-Type: application/json <br>
If-Match: xxxxx </span></p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'><span
style='color:black'>Prefer: return=minimal<br>
Content-Length: ### <br>
<br>
&lt;JSON representation of changes to Customer ALFKI&gt;</span></p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'><span
style='color:black'>--changeset_77162fcd-b8da-41ac-a9f8-9357efbbd--<br>
--batch_36522ad7-fc75-4b56-8c71-56071383e77b <br>
Content-Type: application/http <br>
<br>
GET /service/Products HTTP/1.1 <br>
Host: host <br>
<br>
<br>
--batch_36522ad7-fc75-4b56-8c71-56071383e77b--</span></p>

</div>

<h4>11.7.7.2 Referencing
New Entities</h4>

<p class=MsoNormal>Entities created by an <a href="#sec_CreateanEntity">Insert</a>
request can be referenced in the request URL of subsequent requests within the
same change set. Services MAY also support referencing across change sets, in
which case they SHOULD advertise this support by specifying the <code>ReferencesAcrossChangeSetsSupported</code> property in the <a
href="https://github.com/oasis-tcs/odata-vocabularies/blob/master/vocabularies/Org.OData.Capabilities.V1.md#BatchSupport"><code>Capabilities.BatchSupport</code></a> term
applied to the entity container, see <a href="#ODataVocCap">OData-VocCap</a>.</p>

<p class=MsoCaption>Example 102: a batch request that contains the following
operations in the order listed:</p>

<p class=MsoCaption>A change set that contains the following requests:</p>

<p class=MsoCaption style='margin-left:55.85pt;text-indent:-.25in;page-break-after:
avoid'><span style='font-family:Symbol;font-style:normal'>· </span>Insert a new entity (with <code>Content-ID = 1</code>)</p>

<p class=MsoCaption style='margin-left:55.85pt;text-indent:-.25in;page-break-after:
avoid'><span style='font-family:Symbol;font-style:normal'>· </span>Insert a second new entity (references request with <code>Content-ID = 1</code>)</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'><span
style='color:black'>POST /service/$batch HTTP/1.1 <br>
Host: host <br>
OData-Version: 4.0<br>
Content-Type: multipart/mixed; boundary=batch_36522ad7-fc75-4b56-8c71-56071383e77b<br>
Content-Length: ### <br>
<br>
--batch_36522ad7-fc75-4b56-8c71-56071383e77b<br>
Content-Type: multipart/mixed; boundary=changeset_77162fcd-b8da-41ac-a9f8-9357efbbd<br>
<br>
--changeset_77162fcd-b8da-41ac-a9f8-9357efbbd<br>
Content-Type: application/http <br>
Content-ID: 1 <br>
<br>
POST /service/Customers HTTP/1.1 <br>
Host: host  <br>
Content-Type: application/json <br>
Content-Length: ### <br>
<br>
&lt;JSON representation of a new Customer entity&gt;<br>
--changeset_77162fcd-b8da-41ac-a9f8-9357efbbd<br>
Content-Type: application/http <br>
Content-ID: 2</span></p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'><span
style='color:black'><br>
POST $1/Orders HTTP/1.1 <br>
Host: host <br>
Content-Type: application/json <br>
Content-Length: ### <br>
<br>
&lt;JSON representation of a new Order&gt;<br>
--changeset_77162fcd-b8da-41ac-a9f8-9357efbbd--<br>
--batch_36522ad7-fc75-4b56-8c71-56071383e77b--</span></p>

</div>

<h4>Referencing an ETag</h4>

<p class=MsoCaption>Example 103: a batch request that contains the following
operations in the order listed:</p>

<p class=MsoCaption style='margin-left:55.85pt;text-indent:-.25in;page-break-after:
avoid'><span style='font-family:Symbol;font-style:normal'>· </span>Get an Employee (with <code>Content-ID = 1</code>)</p>

<p class=MsoCaption style='margin-left:55.85pt;text-indent:-.25in;page-break-after:
avoid'><span style='font-family:Symbol;font-style:normal'>· </span>Update the salary only if the employee has not changed</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'><span
style='color:black'>POST /service/$batch HTTP/1.1 <br>
Host: host <br>
OData-Version: 4.0<br>
Content-Type: multipart/mixed; boundary=batch_36522ad7-fc75-4b56-8c71-56071383e77b<br>
Content-Length: ### <br>
<br>
--batch_36522ad7-fc75-4b56-8c71-56071383e77b<br>
Content-Type: application/http <br>
Content-ID: 1 <br>
<br>
GET /service/Employees(0) HTTP/1.1 <br>
Host: host  <br>
Accept: application/json</span></p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'><span
style='color:black'><br>
<br>
</span></p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'><span
style='color:black'>--batch_36522ad7-fc75-4b56-8c71-56071383e77b<br>
Content-Type: application/http <br>
Content-ID: 2</span></p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'><span
style='color:black'><br>
PATCH /service/Employees(0) HTTP/1.1 <br>
Host: host <br>
Content-Type: application/json <br>
Content-Length: ### <br>
If-Match: $1<br>
<br>
</span></p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>{</p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>   &quot;Salary&quot;: 75000</p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>}</p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>--batch_36522ad7-fc75-4b56-8c71-56071383e77b--</p>

</div>

<h4>Processing a Multipart
Batch Request</h4>

<p class=MsoNormal>The service MUST process the individual requests and change
sets within a multipart batch request in the order received. Processing stops
on the first error unless the <a
href="#sec_Preferencecontinueonerrorodatacontin"><code>continue-on-error</code></a>
preference is specified with an explicit or implicit value of <code>true</code>.</p>

<p class=MsoNormal>All requests in a change set represent a single change unit
so a service MUST successfully process and apply all the requests in the change
set or else apply none of them. It is up to the service implementation to
define rollback semantics to undo any requests within a change set that may
have been applied before another request in that same change set failed and
thereby apply this all-or-nothing requirement. The service MAY execute the
requests within a change set in any order and MAY return the responses to the
individual requests in any order. If a request specifies a request identifier,
the service MUST include the <code>Content-ID</code> header with
the request identifier in the corresponding response so clients can correlate
requests and responses.</p>

<h4>Multipart Batch Response</h4>

<p class=MsoNormal>A multipart response to a batch request MUST contain a <code>Content-Type</code> header with value <code>multipart/mixed.</code></p>

<p class=MsoNormal>The body of a multipart response to a multipart batch
request MUST structurally match one-to-one with the multipart batch request
body, such that the same multipart message structure defined for requests is
used for responses. There are three exceptions to this rule:</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:4.0pt;
margin-left:35.7pt;text-indent:-17.85pt'><span style='font-family:Symbol'>· </span>When a request within a change set fails, the change set response
is not represented using the <code>multipart/mixed</code> media
type. Instead, a single response, using the <code>application/http</code>
media type, is returned that applies to all requests in the change set and MUST
be a valid OData error response.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:4.0pt;
margin-left:35.7pt;text-indent:-17.85pt'><span style='font-family:Symbol'>· </span>When an error occurs processing a request and the <a
href="#sec_Preferencecontinueonerrorodatacontin"><code>continue-on-error</code></a>
preference is not specified, or specified with an explicit value of <code>false</code>, processing of the batch is terminated and the
error response is the last part of the multipart response.</p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:4.0pt;
margin-left:35.7pt;text-indent:-17.85pt'><span style='font-family:Symbol'>· </span><a href="#sec_AsynchronousBatchRequests">Asynchronously processed
batch requests</a> can return interim results and end with a <code>202 Accepted</code> as the last part of the multipart response. Therefore,
the <a href="#sec_Preferencerespondasync"><code>respond-async</code></a>
preference MUST NOT be applied to individual requests within a batch if the
batch response is a multipart response.</p>

<p class=MsoNormal>The body of a multipart response to a JSON batch request
contains one body part for each processed or accepted request. The order of the
body parts is insignificant as each body part MUST contain the <code>Content-ID</code> header with the value of the <code>id</code> name/value pair of the corresponding request object.</p>

<p class=MsoNormal>A response to an operation in a batch MUST be formatted
exactly as it would have appeared outside of a batch as described in the
corresponding subsections of chapter <a href="#sec_DataServiceRequests">Data Service
Requests</a>. Relative URLs in each individual response are relative to the
request URL of the corresponding individual request. URLs in responses MUST NOT
contain <code>$</code>-prefixed request identifiers.</p>

<p class=MsoCaption>Example 104: referencing the batch request example 101 above, assume all the requests except the final query request succeed. In this
case the response would be</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'><span
style='color:black'>HTTP/1.1 200 Ok<br>
OData-Version: 4.0<br>
Content-Length: ####<br>
Content-Type: multipart/mixed; boundary=b_243234_25424_ef_892u748<br>
<br>
</span></p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'><span
style='color:black'>--b_243234_25424_ef_892u748<br>
Content-Type: application/http<br>
<br>
HTTP/1.1 200 Ok<br>
Content-Type: application/json<br>
Content-Length: ###<br>
<br>
&lt;JSON representation of the Customer entity with key ALFKI&gt;</span></p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'><span
style='color:black'>--b_243234_25424_ef_892u748<br>
Content-Type: multipart/mixed; boundary=cs_12u7hdkin252452345eknd_383673037<br>
<br>
</span></p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'><span
style='color:black'>--cs_12u7hdkin252452345eknd_383673037<br>
Content-Type: application/http<br>
Content-ID: 1<br>
<br>
</span></p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'><span
style='color:black'>HTTP/1.1 201 Created<br>
Content-Type: application/json<br>
Location: http://host/service.svc/Customer('POIUY')<br>
Content-Length: ###<br>
<br>
</span></p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'><span
style='color:black'>&lt;JSON representation of the new Customer entity&gt;<br>
<br>
</span></p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'><span
style='color:black'>--cs_12u7hdkin252452345eknd_383673037<br>
Content-Type: application/http<br>
Content-ID: 2<br>
<br>
HTTP/1.1 204 No Content<br>
Host: host<br>
<br>
<br>
</span></p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>--cs_12u7hdkin252452345eknd_383673037--</p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'><span
style='color:black'>--b_243234_25424_ef_892u748<br>
Content-Type: application/http<br>
<br>
HTTP/1.1 404 Not Found<br>
Content-Type: application/xml<br>
Content-Length: ###<br>
<br>
&lt;Error message&gt;<br>
--b_243234_25424_ef_892u748—</span></p>

</div>

<h4>11.7.7.6 Asynchronous Batch Requests</h4>

<p class=MsoNormal>Batch requests MAY be executed asynchronously by including
the <a href="#sec_Preferencerespondasync"><code>respond-async</code></a>
preference in the <a href="#sec_HeaderPrefer"><code>Prefer</code></a>
header. If the service responds with a multipart batch response, it MUST ignore
the <code>respond-async</code> preference for individual requests
within a batch.</p>

<p class=MsoNormal>After successful execution of the batch request the response
to the batch request is returned in the body of a response to an interrogation
request against the <i>status monitor resource</i> URL (see <a
href="#sec_AsynchronousRequests">Asynchronous Requests</a>).</p>

<p class=MsoNormal>A service MAY return interim results to an asynchronously
executing batch. It does this by responding with <code>200 OK</code>
to a <code>GET</code> request to the monitor resource and
including a <a href="#sec_ResponseCode202Accepted"><code>202 Accepted</code></a> response as the last part of the
multipart response. The client can use the monitor URL returned in this <a
href="#sec_ResponseCode202Accepted"><code>202
Accepted</code></a> response to continue processing the batch response.</p>

<p class=MsoNormal>Since a change set is executed atomically, <a
href="#sec_ResponseCode202Accepted"><code>202
Accepted</code></a><code> </code>MUST NOT be
returned within a change set.</p>

<p class=MsoCaption>Example 105: referencing the example 101 above again, assume that </p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'><span
style='color:black'>HTTP/1.1 202 Accepted<br>
Location: http://service-root/async-monitor-0<br>
Retry-After: ###<br>
<br>
</span></p>

</div>

<p class=MsoCaption>When interrogating the monitor URL only the first request
in the batch has finished processing and all the remaining requests are still
being processed. Note that the actual multipart batch response itself is
contained in an <code>application/http</code> wrapper as it is a
response to a status monitor resource:</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>HTTP/1.1 200 Ok</p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'><span
style='color:black'>Content-Type: application/http<br>
<br>
HTTP/1.1 200 Ok<br>
OData-Version: 4.0<br>
Content-Length: ####<br>
Content-Type: multipart/mixed; boundary=b_243234_25424_ef_892u748<br>
<br>
</span></p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'><span
style='color:black'>--b_243234_25424_ef_892u748<br>
Content-Type: application/http<br>
<br>
HTTP/1.1 200 Ok<br>
Content-Type: application/json<br>
Content-Length: ###<br>
<br>
&lt;JSON representation of the Customer entity with key ALFKI&gt;</span></p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'><span
style='color:black'>--b_243234_25424_ef_892u748<br>
Content-Type: application/http<br>
<br>
HTTP/1.1 202 Accepted <br>
Location: http://service-root/async-monitor<br>
Retry-After: ###<br>
<br>
</span></p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>&nbsp;</p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>--b_243234_25424_ef_892u748--</p>

</div>

<p class=MsoCaption>After some time the client makes a second request using the
returned monitor URL, not explicitly accepting <code>application/http</code><span
class=Datatype><span style='font-family:"Arial",sans-serif'>. The batch is
completely processed and the response is the final result. </span></span></p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'><span
style='color:black'>HTTP/1.1 200 Ok<br>
AsyncResult: 200<br>
OData-Version: 4.0</span></p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'><span
style='color:black'>Content-Length: ####<br>
Content-Type: multipart/mixed; boundary=b_243234_25424_ef_892u748<br>
<br>
</span></p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'><span
style='color:black'>--b_243234_25424_ef_892u748<br>
Content-Type: multipart/mixed; boundary=cs_12u7hdkin252452345eknd_383673037<br>
<br>
</span></p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'><span
style='color:black'>--cs_12u7hdkin252452345eknd_383673037<br>
Content-Type: application/http<br>
Content-ID: 1<br>
<br>
HTTP/1.1 201 Created<br>
Content-Type: application/json<br>
Location: http://host/service.svc/Customer('POIUY')<br>
Content-Length: ###<br>
<br>
&lt;JSON representation of a new Customer entity&gt;<br>
--cs_12u7hdkin252452345eknd_383673037<br>
Content-Type: application/http<br>
Content-ID: 2<br>
<br>
HTTP/1.1 204 No Content<br>
Host: host<br>
<br>
</span></p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>&nbsp;</p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>--cs_12u7hdkin252452345eknd_383673037--</p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'><span
style='color:black'>--b_243234_25424_ef_892u748<br>
Content-Type: application/http<br>
<br>
HTTP/1.1 404 Not Found<br>
Content-Type: application/xml<br>
Content-Length: ###<br>
<br>
&lt;Error message&gt;<br>
--b_243234_25424_ef_892u748—</span></p>

</div>

<div style='border:none;border-top:solid gray 1.0pt;padding:6.0pt 0in 0in 0in'>

<h1>Security Considerations</h1>

</div>

<p class=MsoNormal>This section is provided as a service to the application
developers, information providers, and users of OData version 4.0 giving some
references to starting points for securing OData services as specified. OData
is a REST-full multi-format service that depends on other services and thus inherits
both sides of the coin, security enhancements and concerns alike from the
latter.</p>

<p class=MsoNormal>For HTTP relevant security implications please cf. the
relevant sections of <a href="#HTTPSemantic"><b>[RFC7231]</b></a> (9. Security
Considerations) and for the HTTP <code>PATCH</code> method <a
href="#RFC5789"><b>[RFC5789]</b></a> (5. Security Considerations) as starting
points.</p>

<h2>Authentication</h2>

<p class=MsoNormal>OData Services requiring authentication SHOULD consider supporting
basic authentication as defined in <a href="#RFC7617"><b>[RFC7617]</b></a> over
HTTPS for the highest level of interoperability with generic clients. They MAY
support other authentication methods.</p>

<div style='border:none;border-top:solid gray 1.0pt;padding:6.0pt 0in 0in 0in'>

<h1>Conformance</h1>

</div>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt'>OData is
designed as a set of conventions that can be layered on top of existing
standards to provide common representations for common functionality. Not all
services will support all of the conventions defined in the protocol; services
choose those conventions defined in OData as the representation to expose that
functionality appropriate for their scenarios.</p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt'>To aid in
client/server interoperability, this specification defines multiple levels of
conformance for an OData Service, as well as the <a
href="#sec_InteroperableODataClients">minimal requirements </a>for an OData
Client to be interoperable across OData services.</p>

<h2>13.1
OData 4.0 Service Conformance
Levels</h2>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt'>OData 4.0
defines three levels of conformance for an OData Service.</p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt'>Note: The
conformance levels are design to correspond to different service scenarios. For
example, a service that publishes data compliant with one or more of the OData
defined formats may comply with the <a
href="#sec_OData40MinimalConformanceLevel">OData 4.0 Minimal Conformance Level</a>
without supporting any additional functionality. A service that offers more
control over the data that the client retrieves may comply with the <a
href="#sec_OData40IntermediateConformanceLevel">OData 4.0 Intermediate
Conformance Level</a>. Services that conform to the <a
href="#sec_OData40AdvancedConformanceLevel">OData 4.0 Advanced Conformance
Level</a> can expect to interoperate with the most functionality against the
broadest range of generic clients. </p>

<p class=MsoNormal>Services can advertise their level of conformance by
annotating their entity container with the term <a
href="https://github.com/oasis-tcs/odata-vocabularies/blob/master/vocabularies/Org.OData.Capabilities.V1.md#ConformanceLevel"><code>Capabilities</code>.<code>ConformanceLevel</code></a> defined in <a href="#ODataVocCap">OData-VocCap</a>.</p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt'>Note:
Services are encouraged to support as much additional functionality beyond
their level of conformance as is appropriate for their intended scenario.</p>

<h3>13.1.1 OData 4.0 Minimal Conformance Level</h3>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt'>In order to
conform to the OData 4.0 Minimal conformance level, a service:</p>

<p class=MsoListParagraph style='margin-top:1.0pt;margin-right:0in;margin-bottom:
0in;margin-left:17.85pt;margin-bottom:.0001pt;text-indent:-17.85pt'>1. MUST
publish a <a href="#sec_ServiceDocumentRequest">service document</a> at the
service root (section 11.1.1)</p>

<p class=MsoListParagraph style='margin-top:1.0pt;margin-right:0in;margin-bottom:
0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'>2. MUST
return data according to the<a href="#ODataJSON">OData-JSON</a><span
class=MsoHyperlink><b> format</b></span></p>

<p class=MsoListParagraph style='margin-top:1.0pt;margin-right:0in;margin-bottom:
0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'>3. MUST use <a
href="#sec_ServerDrivenPaging">server-driven paging</a> when returning partial
results (section 11.2.6.7) and not use any other mechanism</p>

<p class=MsoListParagraph style='margin-top:1.0pt;margin-right:0in;margin-bottom:
0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'>4. MUST
return the appropriate <a href="#sec_HeaderODataVersion"><code>OData-Version</code></a> header (section 8.1.5)</p>

<p class=MsoListParagraph style='margin-top:1.0pt;margin-right:0in;margin-bottom:
0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'>5. MUST
conform to the semantics the following headers, or fail the request</p>

<p class=MsoListParagraph style='margin-top:0in;margin-right:0in;margin-bottom:
0in;margin-left:.55in;margin-bottom:.0001pt;text-indent:-.3in'>5.1. <a
href="#sec_HeaderAccept"><code>Accept</code></a><span
class=MsoHyperlink> </span><span class=MsoHyperlink><span style='color:windowtext'>(</span></span>section
8.2.1)</p>

<p class=MsoListParagraph style='margin-top:0in;margin-right:0in;margin-bottom:
0in;margin-left:.55in;margin-bottom:.0001pt;text-indent:-.3in'>5.2. <a
href="#sec_HeaderODataMaxVersion"><code>OData-MaxVersion</code></a><span
class=MsoHyperlink> </span><span class=MsoHyperlink><span style='color:windowtext'>(section
</span></span>8.2.7<span class=MsoHyperlink><span style='color:windowtext'>)</span></span>
</p>

<p class=MsoListParagraph style='margin-top:1.0pt;margin-right:0in;margin-bottom:
0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'>6. MUST
follow OData guidelines for <a href="#sec_Extensibility">extensibility</a><span
class=MsoHyperlink> </span><span class=MsoHyperlink><span style='color:windowtext'>(section
</span></span><span
class=MsoHyperlink><span style='color:windowtext'>6</span></span><span
class=MsoHyperlink><span style='color:windowtext'> and all subsections)</span></span></p>

<p class=MsoListParagraph style='margin-top:1.0pt;margin-right:0in;margin-bottom:
0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'>7. MUST
successfully parse the request according to <a href="#ODataABNF">OData-ABNF</a>
for any supported system query options and either follow the specification or
return <a href="#sec_ResponseCode501NotImplemented"><code>501</code><code> </code><code>Not Implemented</code></a> for any
unsupported functionality (section 9.3.1)</p>

<p class=MsoListParagraph style='margin-top:1.0pt;margin-right:0in;margin-bottom:
0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'>8. MUST
expose only data types defined in <a href="#ODataCSDL">OData-CSDLXML</a>
</p>

<p class=MsoListParagraph style='margin-top:1.0pt;margin-right:0in;margin-bottom:
0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'>9. MUST NOT
require clients to understand any metadata or instance annotations (section 6.4), custom headers (section 6.5), or custom content (section 6.2) in the payload in order to correctly consume the service</p>

<p class=MsoListParagraph style='margin-top:1.0pt;margin-right:0in;margin-bottom:
0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'>10. MUST NOT violate any OData <a
href="#sec_DataModification">update semantics</a> (section 11.4 and all subsections)</p>

<p class=MsoListParagraph style='margin-top:1.0pt;margin-right:0in;margin-bottom:
0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'>11. MUST NOT violate any other
OData-defined semantics </p>

<p class=MsoListParagraph style='margin-top:1.0pt;margin-right:0in;margin-bottom:
0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'>12. SHOULD support <a
href="#sec_SystemQueryOptionexpand"><code>$expand</code></a>
(section 11.2.5.2)</p>

<p class=MsoListParagraph style='margin-top:1.0pt;margin-right:0in;margin-bottom:
0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'>13. SHOULD publish metadata at <code>$metadata</code> according to <a href="#ODataCSDL">OData-CSDLXML</a>
and MAY publish metadata according to <a href="#ODataCSDL">OData-CSDLJSON</a>
(section 11.1.2)</p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:.25in;text-indent:-.25in'>14. MUST support prefixed
variants of supported headers and preference values</p>

<p class=MsoListParagraphCxSpLast style='margin-left:.25in;text-indent:-.25in'>15. MUST support enumeration and
duration literals in URLs with the type prefix</p>

<p class=MsoNormal style='margin-top:1.0pt;margin-right:0in;margin-bottom:0in;
margin-left:0in;margin-bottom:.0001pt'>Additionally, if async operations are
supported: </p>

<p class=MsoListParagraph style='margin-top:1.0pt;margin-right:0in;margin-bottom:
0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'>16. MUST return an HTTP message
as the final response to an asynchronous request with an <code>OData-MaxVersion</code> value of <code>4.0</code> and an <code>Accept</code> header including <code>application/http</code>.</p>

<p class=MsoListParagraph style='margin-top:1.0pt;margin-right:0in;margin-bottom:
0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'>17. MAY return the <a
href="#sec_HeaderAsyncResult"><code>AsyncResult</code></a>
header in the final response to an asynchronous request</p>

<p class=MsoNormal style='margin:0in;margin-bottom:.0001pt'>&nbsp;</p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt'>To be
considered an <i>Updatable OData Service</i>, the service additionally:</p>

<p class=MsoListParagraph style='margin-top:1.0pt;margin-right:0in;margin-bottom:
0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'>18. MUST include edit links
(explicitly or implicitly) for all updatable or deletable resources according
to <a href="#ODataJSON">OData-JSON</a> </p>

<p class=MsoListParagraph style='margin-top:1.0pt;margin-right:0in;margin-bottom:
0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'>19. MUST support <code>POST</code> of new entities to insertable entity sets (section 11.4.1.5 and 11.4.2.1)</p>

<p class=MsoListParagraph style='margin-top:1.0pt;margin-right:0in;margin-bottom:
0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'>20. MUST support <code>POST</code> of new related entities to updatable navigation
properties (section 11.4.2)</p>

<p class=MsoListParagraph style='margin-top:1.0pt;margin-right:0in;margin-bottom:
0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'>21. MUST support <code>POST</code> to <code>$ref</code>
to add an existing entity to an updatable related collection (section 11.4.6.1)</p>

<p class=MsoListParagraph style='margin-top:1.0pt;margin-right:0in;margin-bottom:
0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'>22. MUST support <code>PUT</code> to <code>$ref</code>
to set an existing single updatable related entity (section 11.4.6.3)</p>

<p class=MsoListParagraph style='margin-top:1.0pt;margin-right:0in;margin-bottom:
0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'>23. MUST support <code>PATCH</code> to all edit URLs for updatable resources (section 11.4.3)</p>

<p class=MsoListParagraph style='margin-top:1.0pt;margin-right:0in;margin-bottom:
0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'>24. MUST support <code>DELETE</code> to all edit URLs for deletable resources (section 11.4.5)</p>

<p class=MsoListParagraph style='margin-top:1.0pt;margin-right:0in;margin-bottom:
0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'>25. MUST support <code>DELETE</code> to <code>$ref</code>
to remove a reference to an entity from an updatable navigation property
(section 11.4.6.2)</p>

<p class=MsoListParagraph style='margin-top:1.0pt;margin-right:0in;margin-bottom:
0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'>26. MUST support <code>If-Match</code> header in update/delete of any resources
returned with an ETag (section 11.4.1.1)</p>

<p class=MsoListParagraph style='margin-top:1.0pt;margin-right:0in;margin-bottom:
0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'>27. MUST return a <code>Location</code> header with the edit URL or
read URL of a created resource (section 11.4.2)</p>

<p class=MsoListParagraph style='margin-top:1.0pt;margin-right:0in;margin-bottom:
0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'>28. MUST include the <code>OData-EntityId</code> header in response to
any create or upsert operation that returns <code>204
</code><code>No Content</code><span
class=MsoHyperlink><code> </code></span>(section
8.3.4)</p>

<p class=MsoListParagraph style='margin-top:1.0pt;margin-right:0in;margin-bottom:
0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'>29. MUST support Upserts (section 11.4.4)</p>

<p class=MsoListParagraph style='margin-top:1.0pt;margin-right:0in;margin-bottom:
0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'>30. SHOULD support <code>PUT</code> and <code>PATCH</code> to an individual
primitive (section 11.4.9.1) or complex (section 11.4.9.3) property (respectively)</p>

<p class=MsoListParagraph style='margin-top:1.0pt;margin-right:0in;margin-bottom:
0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'>31. SHOULD support <code>DELETE</code> to set an individual property to null (section 11.4.9.2)</p>

<p class=MsoListParagraph style='margin-top:1.0pt;margin-right:0in;margin-bottom:
0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'>32. SHOULD support deep inserts (section
11.4.2.2) </p>

<p class=MsoListParagraph style='margin-top:1.0pt;margin-right:0in;margin-bottom:
0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'>33. MAY support set-based
updates (section 11.4.13) or deletes (section 11.4.14) to members of a collection </p>

<h3>13.1.2 OData 4.0 Intermediate
Conformance Level</h3>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt'>In order to
conform to the OData Intermediate Conformance Level, a service:</p>

<p class=MsoListParagraph style='margin-top:1.0pt;margin-right:0in;margin-bottom:
0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'>1. MUST
conform to the <a href="#sec_OData40MinimalConformanceLevel">OData 4.0 Minimal
Conformance Level</a></p>

<p class=MsoListParagraph style='margin-top:1.0pt;margin-right:0in;margin-bottom:
0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'>2. MUST
successfully parse the <a href="#ODataABNF">OData-ABNF</a> and either
follow the specification or return <code>501 Not Implemented</code>
for any unsupported functionality (section 9.3.1)</p>

<p class=MsoListParagraph style='margin-top:1.0pt;margin-right:0in;margin-bottom:
0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'>3. MUST
support <code>$select </code><span class=Datatype><span
style='font-family:"Arial",sans-serif'>(section </span></span><span
class=Datatype><span style='font-family:"Arial",sans-serif'>11.2.5.1</span></span><span
class=Datatype><span style='font-family:"Arial",sans-serif'>)</span></span></p>

<p class=MsoListParagraph style='margin-top:1.0pt;margin-right:0in;margin-bottom:
0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'>4. MUST
support casting to a derived type according to <a href="#ODataURL">OData&#8209;URL</a>
if derived types are present in the model</p>

<p class=MsoListParagraph style='margin-top:1.0pt;margin-right:0in;margin-bottom:
0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'>5. MUST
support <code>$top </code><span class=Datatype><span
style='font-family:"Arial",sans-serif'>(section </span></span><span
class=Datatype><span style='font-family:"Arial",sans-serif'>11.2.6.3</span></span><span
class=Datatype><span style='font-family:"Arial",sans-serif'>)</span></span></p>

<p class=MsoListParagraph style='margin-top:1.0pt;margin-right:0in;margin-bottom:
0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'>6. MUST
support <code>/$value</code> on media entities (section 4.12 in <a
href="#ODataURL">OData&#8209;URL</a>) and individual properties
(section 11.2.4.1)</p>

<p class=MsoListParagraph style='margin-top:1.0pt;margin-right:0in;margin-bottom:
0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'>7. MUST
support <code>$filter </code><span class=Datatype><span
style='font-family:"Arial",sans-serif'>(section </span></span><span
class=Datatype><span style='font-family:"Arial",sans-serif'>11.2.6.1</span></span><span
class=Datatype><span style='font-family:"Arial",sans-serif'>)</span></span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-top:0in;margin-right:0in;
margin-bottom:0in;margin-left:.55in;margin-bottom:.0001pt;text-indent:-.3in'>7.1. MUST support <code>eq</code>, <code>ne</code> filter operations on
properties of entities in the requested entity set (section 11.2.6.1.1)</p>

<p class=MsoListParagraphCxSpMiddle style='margin-top:0in;margin-right:0in;
margin-bottom:0in;margin-left:.55in;margin-bottom:.0001pt;text-indent:-.3in'>7.2. MUST support aliases
in <code>$filter</code> expressions (section 11.2.6.1.3)</p>

<p class=MsoListParagraphCxSpMiddle style='margin-top:0in;margin-right:0in;
margin-bottom:0in;margin-left:.55in;margin-bottom:.0001pt;text-indent:-.3in'>7.3. SHOULD support
additional filter operations (section 11.2.6.1.1) and MUST return <code>501</code><code>
</code><code>Not Implemented</code> for any
unsupported filter operations (section 9.3.1)</p>

<p class=MsoListParagraphCxSpMiddle style='margin-top:0in;margin-right:0in;
margin-bottom:0in;margin-left:.55in;margin-bottom:.0001pt;text-indent:-.3in'>7.4. SHOULD support the
canonical functions (section 11.2.6.1.2) and MUST return <code>501</code><code>
</code><code>Not Implemented</code> for any
unsupported canonical functions (section 9.3.1)</p>

<p class=MsoListParagraphCxSpMiddle style='margin-top:0in;margin-right:0in;
margin-bottom:0in;margin-left:.55in;margin-bottom:.0001pt;text-indent:-.3in'>7.5. SHOULD support <code>$filter</code> on expanded entities (section 11.2.5.2.1)</p>

<p class=MsoListParagraph style='margin-top:1.0pt;margin-right:0in;margin-bottom:
0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'>8. SHOULD publish
metadata at <code>$metadata</code> according to <a
href="#ODataCSDL">OData-CSDLXML</a> (section 11.1.2)</p>

<p class=MsoListParagraph style='margin-top:1.0pt;margin-right:0in;margin-bottom:
0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'>9. SHOULD
support the <a href="#ODataJSON">OData-JSON</a> format </p>

<p class=MsoListParagraph style='margin-top:1.0pt;margin-right:0in;margin-bottom:
0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'>10. SHOULD consider supporting basic authentication as defined in <a
href="#RFC7617"><b>[RFC7617]</b></a> over HTTPS for
the highest level of interoperability with generic clients</p>

<p class=MsoListParagraph style='margin-top:1.0pt;margin-right:0in;margin-bottom:
0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'>11. SHOULD support the <code>$search </code><span class=Datatype><span style='font-family:
"Arial",sans-serif'>system query option (section </span></span><span
class=Datatype><span style='font-family:"Arial",sans-serif'>11.2.6.6</span></span><span
class=Datatype><span style='font-family:"Arial",sans-serif'>)</span></span></p>

<p class=MsoListParagraph style='margin-top:1.0pt;margin-right:0in;margin-bottom:
0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'>12. SHOULD support the <code>$skip</code><span class=Datatype><span style='font-family:"Arial",sans-serif'>
system query option (section </span></span><span
class=Datatype><span style='font-family:"Arial",sans-serif'>11.2.6.4</span></span><span
class=Datatype><span style='font-family:"Arial",sans-serif'>)</span></span></p>

<p class=MsoListParagraph style='margin-top:1.0pt;margin-right:0in;margin-bottom:
0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'>13. SHOULD support the <code>$count</code><span class=Datatype><span style='font-family:"Arial",sans-serif'>
system query option (section </span></span><span
class=Datatype><span style='font-family:"Arial",sans-serif'>11.2.6.5</span></span><span
class=Datatype><span style='font-family:"Arial",sans-serif'>)</span></span></p>

<p class=MsoListParagraph style='margin-top:1.0pt;margin-right:0in;margin-bottom:
0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'>14. SHOULD support <code>$expand</code> (section 11.2.5.2)</p>

<p class=MsoListParagraph style='margin-top:1.0pt;margin-right:0in;margin-bottom:
0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'>15. SHOULD support the lambda
operators <code>any</code> and <code>all</code> on navigation- and
collection-valued properties (section 5.1.1.10 in <a href="#ODataURL">OData&#8209;URL</a>)</p>

<p class=MsoListParagraph style='margin-top:1.0pt;margin-right:0in;margin-bottom:
0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'>16. SHOULD support the <code>/$count</code> segment on navigation and collection properties
(section 11.2.10)</p>

<p class=MsoListParagraph style='margin-top:1.0pt;margin-right:0in;margin-bottom:
0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'>17. SHOULD support <code>$orderby asc</code> and <code>desc</code> on
individual properties (section 11.2.6.2)</p>

<h3>13.1.3 OData 4.0 Advanced Conformance
Level</h3>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt;page-break-after:
avoid'>In order to conform to the OData Advanced Conformance Level, a service:</p>

<p class=MsoListParagraph style='margin-top:1.0pt;margin-right:0in;margin-bottom:
0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in;page-break-after:
avoid'>1. MUST
conform to at least the <a href="#sec_OData40IntermediateConformanceLevel">OData
4.0 Intermediate Conformance Level</a><span class=MsoHyperlink> </span></p>

<p class=MsoListParagraph style='margin-top:1.0pt;margin-right:0in;margin-bottom:
0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in;page-break-after:
avoid'>2. MUST
publish metadata at <code>$metadata</code>
according to <a href="#ODataCSDL">OData-CSDLXML</a> (section 11.1.2)</p>

<p class=MsoListParagraph style='margin-top:1.0pt;margin-right:0in;margin-bottom:
0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in;page-break-after:
avoid'>3. MUST
support the <a href="#ODataJSON">OData-JSON</a> format</p>

<p class=MsoListParagraph style='margin-top:1.0pt;margin-right:0in;margin-bottom:
0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'>4. MUST
support the <code>/$count</code> segment on navigation and
collection properties (section 11.2.10)</p>

<p class=MsoListParagraph style='margin-top:1.0pt;margin-right:0in;margin-bottom:
0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'>5. MUST
support the lambda operators <code>any</code>
and <code>all</code> on navigation- and collection-valued
properties (section 5.1.1.10 in <a href="#ODataURL">OData&#8209;URL</a>)</p>

<p class=MsoListParagraph style='margin-top:1.0pt;margin-right:0in;margin-bottom:
0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'>6. MUST
support the <code>$skip</code> system query option (section <span
class=Datatype><span style='font-family:"Arial",sans-serif'>11.2.6.4</span></span>)</p>

<p class=MsoListParagraph style='margin-top:1.0pt;margin-right:0in;margin-bottom:
0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'>7. MUST
support the <code>$count</code> system query
option (section <span
class=Datatype><span style='font-family:"Arial",sans-serif'>11.2.6.5</span></span>)</p>

<p class=MsoListParagraph style='margin-top:1.0pt;margin-right:0in;margin-bottom:
0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'>8. MUST
support <code>$orderby</code> <code>asc</code> and <code>desc</code> on individual
properties (section 11.2.6.2)</p>

<p class=MsoListParagraph style='margin-top:1.0pt;margin-right:0in;margin-bottom:
0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'>9. MUST
support <code>$expand</code> (section 11.2.5.2)</p>

<p class=MsoListParagraphCxSpMiddle style='margin-top:0in;margin-right:0in;
margin-bottom:0in;margin-left:.55in;margin-bottom:.0001pt;text-indent:-.3in'>9.1. MUST support returning
references for expanded properties</p>

<p class=MsoListParagraphCxSpMiddle style='margin-top:0in;margin-right:0in;
margin-bottom:0in;margin-left:.55in;margin-bottom:.0001pt;text-indent:-.3in'>9.2. MUST support <code>$filter</code> on expanded collection-valued
properties </p>

<p class=MsoListParagraphCxSpMiddle style='margin-top:0in;margin-right:0in;
margin-bottom:0in;margin-left:.55in;margin-bottom:.0001pt;text-indent:-.3in'>9.3. MUST support cast
segment in expand with derived types</p>

<p class=MsoListParagraphCxSpMiddle style='margin-top:0in;margin-right:0in;
margin-bottom:0in;margin-left:.55in;margin-bottom:.0001pt;text-indent:-.3in'>9.4. SHOULD support <code>$orderby</code> <code>asc</code>
and <code>desc</code> on expanded collection-valued properties </p>

<p class=MsoListParagraphCxSpMiddle style='margin-top:0in;margin-right:0in;
margin-bottom:0in;margin-left:.55in;margin-bottom:.0001pt;text-indent:-.3in'>9.5. SHOULD support <code>$count</code> on expanded collection-valued
properties </p>

<p class=MsoListParagraphCxSpMiddle style='margin-top:0in;margin-right:0in;
margin-bottom:0in;margin-left:.55in;margin-bottom:.0001pt;text-indent:-.3in'>9.6. SHOULD support <code>$top</code> and <code>$skip</code> on expanded collection-valued properties </p>

<p class=MsoListParagraphCxSpMiddle style='margin-top:0in;margin-right:0in;
margin-bottom:0in;margin-left:.55in;margin-bottom:.0001pt;text-indent:-.3in'>9.7. SHOULD support <code>$search</code> on expanded collection-valued
properties</p>

<p class=MsoListParagraphCxSpMiddle style='margin-top:0in;margin-right:0in;
margin-bottom:0in;margin-left:.55in;margin-bottom:.0001pt;text-indent:-.3in'>9.8. SHOULD support <code>$levels</code> for recursive expand (section 11.2.5.2.1.1)</p>

<p class=MsoListParagraphCxSpMiddle style='margin-top:0in;margin-right:0in;
margin-bottom:0in;margin-left:.55in;margin-bottom:.0001pt;text-indent:-.3in'>9.9. MAY support <code>$compute</code> on expanded properties </p>

<p class=MsoListParagraph style='margin-top:1.0pt;margin-right:0in;margin-bottom:
0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'>10. MUST support the <code>$search</code> system query option (section 11.2.6.6)</p>

<p class=MsoListParagraph style='margin-top:1.0pt;margin-right:0in;margin-bottom:
0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'>11. MUST support batch requests
according to the multipart format (section 11.7 and all subsections) and MAY
support batch requests according to the JSON Batch format defined in <a
href="#ODataJSON">OData-JSON</a></p>

<p class=MsoListParagraph style='margin-top:1.0pt;margin-right:0in;margin-bottom:
0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'>12. MUST support the resource
path conventions defined in <a href="#ODataURL">OData&#8209;URL</a>
</p>

<p class=MsoListParagraph style='margin-top:1.0pt;margin-right:0in;margin-bottom:
0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'>13. SHOULD support <a
href="#sec_AsynchronousRequests">asynchronous requests</a> (section 11.6)</p>

<p class=MsoListParagraph style='margin-top:1.0pt;margin-right:0in;margin-bottom:
0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'>14. SHOULD support <a
href="#sec_RequestingChanges">Delta change tracking</a> (section 11.3)</p>

<p class=MsoListParagraph style='margin-top:1.0pt;margin-right:0in;margin-bottom:
0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'>15. SHOULD support cross-join
queries defined in <a href="#ODataURL">OData&#8209;URL</a> </p>

<p class=MsoListParagraph style='margin-top:1.0pt;margin-right:0in;margin-bottom:
0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'>16. MAY support the <code>$compute</code> system query option (section 11.2.5.3)</p>

<h2>OData 4.01 Service
Conformance Levels</h2>

<p class=MsoNormal>OData services can report conformance to the OData 4.01
specification by including <code>4.01</code> in the list of
supported protocol versions in the <a
href="https://github.com/oasis-tcs/odata-vocabularies/blob/master/vocabularies/Org.OData.Core.V1.md#ODataVersions"><code>Core.ODataVersions</code></a> annotation, as
defined in <a href="#ODataVocCore">OData-VocCore</a>. As all OData 4.01
compliant services must also be fully OData 4.0 compliant, OData 4.01 services
do not need to separately list <code>4.0</code> as a supported
version.</p>

<h3>13.2.1 OData 4.01 Minimal Conformance
Level</h3>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt'>In order to
conform to the OData 4.01 Minimal Conformance Level, a service:</p>

<p class=MsoListParagraph style='margin-top:1.0pt;margin-right:0in;margin-bottom:
0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'><span
class=MsoHyperlink><span style='color:windowtext'>1. </span></span>MUST conform to the <a
href="#sec_OData40MinimalConformanceLevel">OData 4.0 Minimal Conformance Level</a></p>

<p class=MsoListParagraph style='margin-top:1.0pt;margin-right:0in;margin-bottom:
0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'>2. MUST be
compliant with version 4.01 of the <a href="#ODataJSON">OData-JSON</a> 
format</p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:.25in;text-indent:-.25in'>3. MUST return the <a href="#sec_HeaderAsyncResult"><code>AsyncResult</code></a> result header in the final response to an
asynchronous request if asynchronous operations are supported.</p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:.25in;text-indent:-.25in'>4. MUST
support both prefixed and non-prefixed variants of supported headers and
preference values</p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:.25in;text-indent:-.25in'>5. MUST
reject a request with an incompatible <a
href="#sec_SystemQueryOptionschemaversion"><code>$schemaversion</code></a>
system query option if a <a
href="https://github.com/oasis-tcs/odata-vocabularies/blob/master/vocabularies/Org.OData.Core.V1.md#SchemaVersion"><code>Core.SchemaVersion</code></a> annotation is
returned in <span class=Keyword>$metadata</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:.25in;text-indent:-.25in'>6. MUST
support specifying supported system query options with or without the <code>$</code> prefix </p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:.25in;text-indent:-.25in'>7. MUST
support case-insensitive query option, operator, and canonical function names</p>

<p class=MsoListParagraph style='margin-top:0in;margin-right:0in;margin-bottom:
0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'>8. MUST
return identifiers in the case they are specified in <code>$metadata</code></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:.25in;text-indent:-.25in'>9. MUST
support both 4.0 and 4.01 syntax in URLs for supported functionality regardless
of requested <a href="#sec_HeaderODataMaxVersion"><code>OData-MaxVersion</code></a></p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-.25in'>a. MUST
support casting strings to primitive types in URLs</p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-.25in'>b. MUST
support enumeration and duration literals in URLs with or without the type
prefix</p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-.25in'>c. MUST
support invoking parameter-less function imports with or without parentheses </p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-.25in'>d. MUST
support an empty object or no-content for the request body when invoking an
action with no non-binding parameters </p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-.25in'>e. MUST support
invoking functions and actions in a <a href="#sec_DefaultNamespaces">default
namespace</a> with or without namespace qualification </p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-.25in'>f. MUST
support parameter aliases for key values and function parameter values if they
allow the octets <code>00</code> (NUL), <code>2F</code>
(forward slash), or <code>5C</code> (backslash) in string
literals</p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-.25in'>g. SHOULD
support implicit aliasing of parameters</p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-.25in'>h. SHOULD
support <span class=Keyword>eq/ne null</span> comparison for navigation
properties with a maximum cardinality of one </p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-.25in'>i. SHOULD
support the <a href="#sec_BuiltinFilterOperations"><code>in</code></a><span class=Datatype><span style='font-family:"Arial",sans-serif'>
</span></span>operator </p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-.25in'>j. SHOULD
support <span class=Keyword>divby</span></p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-.25in'>k. SHOULD
support negative indexes for the substring function </p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-.25in'>l. MAY
support Key-As-Segment URL convention</p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:1.0in;text-indent:-.25in'>a. MUST also
support canonical URL conventions (described in <a href="#ODataURL">OData&#8209;URL</a>)
or include URLs in payload</p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-.25in'>m. MAY support the count
of a filtered collection in a common expression </p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-.25in'>n. MAY
support equal and non-equal structural comparison</p>

<p class=MsoListParagraph style='margin-top:1.0pt;margin-right:0in;margin-bottom:
0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'>10. SHOULD publish metadata at <code>$metadata</code> according to both <a href="#ODataCSDL">OData-CSDLXML</a>
and <a href="#ODataCSDL">OData-CSDLJSON</a> (section 11.1.2)</p>

<p class=MsoListParagraph style='margin-top:0in;margin-right:0in;margin-bottom:
0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'>11. SHOULD NOT have identifiers
within a uniqueness scope (e.g. a schema, a structural type, or an entity
container) that differ only by case</p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:.25in;text-indent:-.25in'>12. SHOULD return the <a
href="https://github.com/oasis-tcs/odata-vocabularies/blob/master/vocabularies/Org.OData.Core.V1.md#ODataVersions"><code>Core.ODataVersions</code></a> annotation</p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:.25in;text-indent:-.25in'>13. SHOULD report capabilities
through the Capabilities vocabulary</p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:.25in;text-indent:-.25in'>14. MAY support filtering on
annotation values</p>

<p class=MsoListParagraphCxSpMiddle style='margin-top:1.0pt;margin-right:0in;
margin-bottom:0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'>15. MAY support <code>$compute</code> system query option</p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:.25in;text-indent:-.25in'>16. MAY support <span
class=Keyword>$search</span> for all collections </p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:.25in;text-indent:-.25in'>17. MAY support 4.01 behavior,
including returning 4.01 content and payloads, if the client does not specify
the <span class=Keyword>OData-MaxVersion:4.0</span> request header</p>

<p class=MsoListParagraphCxSpLast>&nbsp;</p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt'>In addition,
to be considered an <i>Updatable OData 4.01 Service</i>, the service: </p>

<p class=MsoListParagraph style='margin-top:1.0pt;margin-right:0in;margin-bottom:
0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'>18. MUST conform to the <a
href="#sec_OData40MinimalConformanceLevel">OData 4.0 Minimal Conformance Level</a><span
class=MsoHyperlink> </span>for an Updateable service.</p>

<p class=MsoListParagraph style='margin-top:1.0pt;margin-right:0in;margin-bottom:
0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'>19. MUST support <code>DELETE</code> to the reference of a collection member to be
removed, identified by key (section 11.4.6.2)</p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:.25in;text-indent:-.25in'>20. SHOULD support <span
class=Keyword>PUT</span> against single entity with nested content</p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:.25in;text-indent:-.25in'>21. SHOULD support deep updates
(section 11.4.3.1) and deep inserts (section 11.4.2.2) </p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:.25in;text-indent:-.25in'>22. SHOULD support <span
class=Keyword>PUT</span> or <span class=Keyword>DELETE</span> to <span
class=Keyword>$ref</span> of a collection-valued nav prop</p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:.25in;text-indent:-.25in'>23. MAY support <span
class=Keyword>POST</span> to collections of complex/primitive types</p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:.25in;text-indent:-.25in'>24. MAY support <span
class=Keyword>PATCH</span> and <span class=Keyword>DELETE</span> to a
collection </p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:.25in;text-indent:-.25in'>25. MAY support <span
class=Keyword>POST</span>, <span class=Keyword>PATCH</span> and <span
class=Keyword>DELETE</span> to a collection URL terminating in a type cast
segment</p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:.25in;text-indent:-.25in'>26. MAY support <span
class=Keyword>PATCH</span> to entity sets using the 4.01 delta payload format</p>

<p class=MsoListParagraphCxSpLast style='margin-left:.25in;text-indent:-.25in'>27. MAY support <span
class=Keyword>$select</span> and <span class=Keyword>$expand</span> on data
modification requests</p>

<h3>OData 4.01 Intermediate
Conformance Level</h3>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt'>In order to
conform to the OData 4.01 Intermediate Conformance Level, a service:</p>

<p class=MsoListParagraph style='margin-top:1.0pt;margin-right:0in;margin-bottom:
0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'><span
class=MsoHyperlink><span style='color:windowtext'>1. </span></span>MUST conform to the <a
href="#sec_OData401MinimalConformanceLevel">OData 4.01 Minimal Conformance
Level</a></p>

<p class=MsoListParagraph style='margin-top:1.0pt;margin-right:0in;margin-bottom:
0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'><span
class=MsoHyperlink><span style='color:windowtext'>2. </span></span><span class=MsoHyperlink><span style='color:windowtext'>MUST
conform to the </span></span><a href="#sec_OData40IntermediateConformanceLevel">OData
4.0 Intermediate Conformance Level</a></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:.25in;text-indent:-.25in'>3. MUST
support <span class=Keyword>eq/ne null</span> comparison for navigation
properties with a maximum cardinality of one </p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:.25in;text-indent:-.25in'>4. MUST support
the <a href="#sec_BuiltinFilterOperations"><code>in</code></a><span
class=Datatype><span style='font-family:"Arial",sans-serif'> </span></span>operator
</p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:.25in;text-indent:-.25in'><span
class=Datatype><span style='font-family:"Arial",sans-serif'>5. </span></span>MUST
support the <code>$select</code> option nested within <code>$select</code></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:.25in;text-indent:-.25in'>6. SHOULD
support the count of a filtered collection in a common expression </p>

<p class=MsoListParagraphCxSpMiddle style='margin-top:1.0pt;margin-right:0in;
margin-bottom:0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'>7. SHOULD
support equal and non-equal structural comparison</p>

<p class=MsoListParagraphCxSpMiddle style='margin-top:1.0pt;margin-right:0in;
margin-bottom:0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'>8. SHOULD
support <code>$compute</code> system query
option</p>

<p class=MsoListParagraphCxSpMiddle style='margin-top:1.0pt;margin-right:0in;
margin-bottom:0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'>9. SHOULD
support nested query options in <code>$select</code></p>

<p class=MsoListParagraphCxSpMiddle style='margin-top:1.0pt;margin-right:0in;
margin-bottom:0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'><a
name="_Toc477876741">10. MAY
support nested parameter alias assignments in </a><code>$select</code><span
class=Datatype><span style='font-family:"Arial",sans-serif'> and </span></span><code>$expand</code></p>

<p class=MsoListParagraphCxSpLast style='margin-top:1.0pt;margin-right:0in;
margin-bottom:0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'>11. MAY support filtering a
collection using a <code>/</code><span class=Keyword>$filter</span>
path segment</p>

<h3>OData 4.01 Advanced Conformance
Level</h3>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt'>In order to
conform to the OData 4.01 Advanced Conformance Level, a service:</p>

<p class=MsoListParagraph style='margin-top:1.0pt;margin-right:0in;margin-bottom:
0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'><span
class=MsoHyperlink><span style='color:windowtext'>1. </span></span>MUST conform to the <a
href="#sec_OData401IntermediateConformanceLevel">OData 4.01 Intermediate
Conformance Level</a></p>

<p class=MsoListParagraph style='margin-top:1.0pt;margin-right:0in;margin-bottom:
0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'><span
class=MsoHyperlink><span style='color:windowtext'>2. </span></span><span class=MsoHyperlink><span style='color:windowtext'>MUST
conform to the </span></span><a href="#sec_OData40AdvancedConformanceLevel">OData
4.0 Advanced Conformance Level</a></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:.25in;text-indent:-.25in'>3. MUST
support the count of a filtered/searched collection in a common expression </p>

<p class=MsoListParagraphCxSpMiddle style='margin-top:1.0pt;margin-right:0in;
margin-bottom:0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'>4. MUST
support <code>$compute</code> system query
option</p>

<p class=MsoListParagraphCxSpMiddle style='margin-top:1.0pt;margin-right:0in;
margin-bottom:0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'>5. MUST
support nested options in <code>$select</code></p>

<p class=MsoListParagraphCxSpMiddle style='margin-top:0in;margin-right:0in;
margin-bottom:0in;margin-left:.55in;margin-bottom:.0001pt;text-indent:-.3in'>5.1. MUST support <code>$filter</code> on selected collection-valued
properties </p>

<p class=MsoListParagraphCxSpMiddle style='margin-top:0in;margin-right:0in;
margin-bottom:0in;margin-left:.55in;margin-bottom:.0001pt;text-indent:-.3in'>5.2. SHOULD support <code>$orderby</code> <code>asc</code>
and <code>desc</code> on selected collection-valued properties </p>

<p class=MsoListParagraphCxSpMiddle style='margin-top:0in;margin-right:0in;
margin-bottom:0in;margin-left:.55in;margin-bottom:.0001pt;text-indent:-.3in'>5.3. SHOULD support the <code>$count</code> on selected collection-valued
properties </p>

<p class=MsoListParagraphCxSpMiddle style='margin-top:0in;margin-right:0in;
margin-bottom:0in;margin-left:.55in;margin-bottom:.0001pt;text-indent:-.3in'>5.4. SHOULD support <code>$top</code> and <code>$skip</code> on selected collection-valued properties </p>

<p class=MsoListParagraphCxSpMiddle style='margin-top:0in;margin-right:0in;
margin-bottom:0in;margin-left:.55in;margin-bottom:.0001pt;text-indent:-.3in'>5.5. SHOULD support <code>$search</code> on selected collection-valued
properties</p>

<p class=MsoListParagraph style='margin-top:1.0pt;margin-right:0in;margin-bottom:
0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in;page-break-after:
avoid'>6. MUST
publish metadata at <code>$metadata</code>
according to <a href="#ODataCSDL">OData-CSDLJSON</a> (section 11.1.2)</p>

<p class=MsoListParagraph style='margin-top:1.0pt;margin-right:0in;margin-bottom:
0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'><span
class=MsoHyperlink><span style='color:windowtext'>7. </span></span>MUST support batch requests according both to the
multipart format (section 11.7 and all subsections) and the JSON Batch format
defined in <a href="#ODataJSON">OData-JSON</a></p>

<p class=MsoListParagraphCxSpMiddle style='margin-top:1.0pt;margin-right:0in;
margin-bottom:0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'><a
name="_Toc477876742">8. SHOULD support filtering a collection using a </a><code>/</code><span
class=Keyword>$filter</span> path segment</p>

<p class=MsoListParagraphCxSpMiddle style='margin-top:1.0pt;margin-right:0in;
margin-bottom:0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'><span
class=Datatype><span style='font-family:"Arial",sans-serif'>9. </span></span>SHOULD
support nested parameter alias assignments in <code>$select</code><span
class=Datatype><span style='font-family:"Arial",sans-serif'> and </span></span><code>$expand</code></p>

<p class=MsoListParagraphCxSpLast style='margin-top:1.0pt;margin-right:0in;
margin-bottom:0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'>10. MAY support case-insensitive
comparison of identifiers in URLs and request payloads if no exact match is
found, using the same lookup sequence as for <a href="#sec_DefaultNamespaces">default
namespaces</a> with a case-insensitive comparison  </p>

<h2>13.3 Interoperable OData Clients</h2>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt'>Interoperable
OData clients can expect to work with OData Services that comply with at least
the <a href="#sec_OData40MinimalConformanceLevel">OData 4.0 Minimal Conformance
Level</a> and implement the <a href="#ODataJSON">OData-JSON</a><span
class=MsoHyperlink><b> </b></span>format.</p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt'>To be
generally interoperable, OData clients       </p>

<p class=MsoListParagraph style='margin-top:1.0pt;margin-right:0in;margin-bottom:
0in;margin-left:17.85pt;margin-bottom:.0001pt;text-indent:-17.85pt'>1. MUST
specify the <code>OData-MaxVersion</code> header in requests
(section 8.2.7)</p>

<p class=MsoListParagraph style='margin-top:1.0pt;margin-right:0in;margin-bottom:
0in;margin-left:17.85pt;margin-bottom:.0001pt;text-indent:-17.85pt'>2. MUST
specify <code>OData-Version</code> (section 8.1.5) and <code>Content-Type</code> (section 8.1.1) in any request with a payload</p>

<p class=MsoListParagraph style='margin-top:1.0pt;margin-right:0in;margin-bottom:
0in;margin-left:17.85pt;margin-bottom:.0001pt;text-indent:-17.85pt'>3. MUST be a
conforming consumer of OData as defined in <a href="#ODataJSON">OData-JSON</a>
</p>

<p class=MsoListParagraph style='margin-top:1.0pt;margin-right:0in;margin-bottom:
0in;margin-left:17.85pt;margin-bottom:.0001pt;text-indent:-17.85pt'>4. MUST
follow redirects (section 9.1.5)</p>

<p class=MsoListParagraph style='margin-top:1.0pt;margin-right:0in;margin-bottom:
0in;margin-left:17.85pt;margin-bottom:.0001pt;text-indent:-17.85pt'>5. MUST
correctly handle next links (section 11.2.6.7)</p>

<p class=MsoListParagraph style='margin-top:1.0pt;margin-right:0in;margin-bottom:
0in;margin-left:17.85pt;margin-bottom:.0001pt;text-indent:-17.85pt'>6. MUST
support instances returning properties and navigation properties not specified
in metadata (section 11.2)</p>

<p class=MsoListParagraph style='margin-top:1.0pt;margin-right:0in;margin-bottom:
0in;margin-left:17.85pt;margin-bottom:.0001pt;text-indent:-17.85pt'>7. MUST
generate <code>PATCH</code> requests for updates, if the client
supports updates (section 11.4.3)</p>

<p class=MsoListParagraph style='margin-top:1.0pt;margin-right:0in;margin-bottom:
0in;margin-left:17.85pt;margin-bottom:.0001pt;text-indent:-17.85pt'>8. MUST
include the <code>$</code> prefix when specifying OData-defined
system query options</p>

<p class=MsoListParagraph style='margin-top:1.0pt;margin-right:0in;margin-bottom:
0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'>9. MUST use
case-sensitive query options, operators, and canonical functions</p>

<p class=MsoListParagraph style='margin-top:1.0pt;margin-right:0in;margin-bottom:
4.0pt;margin-left:17.85pt;text-indent:-17.85pt'>10. SHOULD support basic authentication as defined in <a href="#RFC7617"><b>[RFC7617]</b></a> over HTTPS</p>

<p class=MsoListParagraph style='margin-top:1.0pt;margin-right:0in;margin-bottom:
0in;margin-left:17.85pt;margin-bottom:.0001pt;text-indent:-17.85pt'>11. MAY request entity
references in place of entities previously returned in the response (section 11.2.8)</p>

<p class=MsoListParagraph style='margin-top:1.0pt;margin-right:0in;margin-bottom:
0in;margin-left:17.85pt;margin-bottom:.0001pt;text-indent:-17.85pt'>12. MAY support deleted entities,
link entities, deleted link entities in a delta response (section 11.3)</p>

<p class=MsoListParagraph style='margin-top:1.0pt;margin-right:0in;margin-bottom:
0in;margin-left:17.85pt;margin-bottom:.0001pt;text-indent:-17.85pt'>13. MAY support asynchronous
responses (section 11.6)</p>

<p class=MsoListParagraph style='margin-top:1.0pt;margin-right:0in;margin-bottom:
0in;margin-left:17.85pt;margin-bottom:.0001pt;text-indent:-17.85pt'>14. MAY support <code>metadata=minimal</code> in a JSON response (see <a
href="#ODataJSON">OData-JSON</a>)</p>

<p class=MsoListParagraph style='margin-top:1.0pt;margin-right:0in;margin-bottom:
4.0pt;margin-left:17.85pt;text-indent:-17.85pt'>15. MAY support <code>streaming </code>in a JSON response
(see <a href="#ODataJSON">OData-JSON</a>)</p>

<p class=MsoNormal style='margin-bottom:0in;margin-bottom:.0001pt'>In addition,
interoperable OData 4.01 clients</p>

<p class=MsoListParagraphCxSpFirst style='margin-left:.25in;text-indent:-.25in'>16. MUST send OData
4.0-compliant payloads to services that don't advertise support for 4.01 or
greater through the <a
href="https://github.com/oasis-tcs/odata-vocabularies/blob/master/vocabularies/Org.OData.Core.V1.md#ODataVersions"><code>Core.ODataVersions</code></a> metadata
annotation (see <a href="#ODataVocCore">OData-VocCore</a><span
class=MsoHyperlink>)</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:.25in;text-indent:-.25in'>17. MUST specify identifiers in
payloads and URLs in the case they are specified in <code>$metadata</code></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:.25in;text-indent:-.25in'>18. MUST be prepared to receive
any valid 4.01 CSDL</p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:.25in;text-indent:-.25in'>19. MUST be prepared to receive
any valid 4.01 response according to the requested format</p>

<p class=MsoListParagraphCxSpLast style='margin-left:.25in;text-indent:-.25in'>20. SHOULD use capabilities (see
<a href="#ODataVocCap">OData-VocCap</a>) to determine if a 4.01
feature is supported but MAY attempt syntax and be prepared to handle either <a
href="#sec_ResponseCode501NotImplemented"><span class=Keyword><span
style='color:windowtext'>501 Not Implemented</span></span></a> or <span
class=Keyword>400 Bad Request</span></p>

<p class=MsoNormal style='margin-top:1.0pt'>&nbsp;</p>

<div style='border:none;border-top:solid gray 1.0pt;padding:6.0pt 0in 0in 0in'>

<p class=AppendixHeading1><a
name="_Toc477876743">Appendix A. </a><a href="#sec_Acknowledgments">Acknowledgments</a></p>

</div>

<p class=MsoNormal>The following individuals were members of the OASIS OData
Technical Committee during the creation of this specification and their
contributions are gratefully acknowledged:</p>

<table class=MsoNormalTable border=0 cellspacing=0 cellpadding=0
 style='margin-left:.25in;border-collapse:collapse'>
 <tr>
  <td width=295 valign=top style='width:221.55pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoListParagraph style='margin-top:0in;margin-right:0in;margin-bottom:
  0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'><span
  lang=EN style='font-family:Symbol'>· </span><span lang=EN>Howard Abrams (CA Technologies)</span></p>
  <p class=MsoListParagraph style='margin-top:0in;margin-right:0in;margin-bottom:
  0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'><span
  lang=EN style='font-family:Symbol'>· </span><span lang=EN>Ken Baclawski (Northeastern University)</span></p>
  <p class=MsoListParagraph style='margin-top:0in;margin-right:0in;margin-bottom:
  0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'><span
  lang=EN style='font-family:Symbol'>· </span><span lang=EN>Jay Balunas (Red Hat)</span></p>
  <p class=MsoListParagraph style='margin-top:0in;margin-right:0in;margin-bottom:
  0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'><span
  lang=EN style='font-family:Symbol'>· </span><span lang=EN>Stephen Berard (Schneider Electric Industries
  SAS)</span></p>
  <p class=MsoListParagraph style='margin-top:0in;margin-right:0in;margin-bottom:
  0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'><span
  lang=EN style='font-family:Symbol'>· </span><span lang=EN>Mark Biamonte (Progress Software)</span></p>
  <p class=MsoListParagraph style='margin-top:0in;margin-right:0in;margin-bottom:
  0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'><span
  lang=EN style='font-family:Symbol'>· </span><span lang=EN>Matthew Borges (SAP SE)</span></p>
  <p class=MsoListParagraph style='margin-top:0in;margin-right:0in;margin-bottom:
  0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'><span
  lang=EN style='font-family:Symbol'>· </span><span lang=EN>Edmond Bourne (BlackBerry)</span></p>
  <p class=MsoListParagraph style='margin-top:0in;margin-right:0in;margin-bottom:
  0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'><span
  lang=EN style='font-family:Symbol'>· </span><span lang=EN>Joseph Boyle (Planetwork, Inc.)</span></p>
  <p class=MsoListParagraph style='margin-top:0in;margin-right:0in;margin-bottom:
  0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'><span
  lang=EN style='font-family:Symbol'>· </span><span lang=EN>Peter Brown (Individual)</span></p>
  <p class=MsoListParagraph style='margin-top:0in;margin-right:0in;margin-bottom:
  0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'><span
  lang=EN style='font-family:Symbol'>· </span><span lang=EN>Antonio Campanile (Bank of America)</span></p>
  <p class=MsoListParagraph style='margin-top:0in;margin-right:0in;margin-bottom:
  0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'><span
  lang=EN style='font-family:Symbol'>· </span><span lang=EN>Pablo Castro (Microsoft)</span></p>
  <p class=MsoListParagraph style='margin-top:0in;margin-right:0in;margin-bottom:
  0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'><span
  lang=EN style='font-family:Symbol'>· </span><span lang=EN>Axel Conrad (BlackBerry)</span></p>
  <p class=MsoListParagraph style='margin-top:0in;margin-right:0in;margin-bottom:
  0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'><span
  lang=EN style='font-family:Symbol'>· </span><span lang=EN>Robin Cover (OASIS)</span></p>
  <p class=MsoListParagraph style='margin-top:0in;margin-right:0in;margin-bottom:
  0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'><span
  lang=EN style='font-family:Symbol'>· </span><span lang=EN>Erik de Voogd (SDL)</span></p>
  <p class=MsoListParagraph style='margin-top:0in;margin-right:0in;margin-bottom:
  0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'><span
  lang=EN style='font-family:Symbol'>· </span><span lang=EN>Yi Ding (Microsoft)</span></p>
  <p class=MsoListParagraph style='margin-top:0in;margin-right:0in;margin-bottom:
  0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'><span
  lang=EN style='font-family:Symbol'>· </span><span lang=EN>Diane Downie (Citrix Systems)</span></p>
  <p class=MsoListParagraph style='margin-top:0in;margin-right:0in;margin-bottom:
  0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'><span
  lang=EN style='font-family:Symbol'>· </span><span lang=EN>Patrick Durusau (Individual)</span></p>
  <p class=MsoListParagraph style='margin-top:0in;margin-right:0in;margin-bottom:
  0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'><span
  lang=EN style='font-family:Symbol'>· </span><span lang=EN>Andrew Eisenberg (IBM)</span></p>
  <p class=MsoListParagraph style='margin-top:0in;margin-right:0in;margin-bottom:
  0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'><span
  lang=EN style='font-family:Symbol'>· </span><span lang=EN>Chet Ensign (OASIS)</span></p>
  <p class=MsoListParagraph style='margin-top:0in;margin-right:0in;margin-bottom:
  0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'><span
  lang=EN style='font-family:Symbol'>· </span><span lang=EN>Davina Erasmus (SDL)</span></p>
  <p class=MsoListParagraph style='margin-top:0in;margin-right:0in;margin-bottom:
  0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'><span
  lang=EN style='font-family:Symbol'>· </span><span lang=EN>George Ericson (Dell)</span></p>
  <p class=MsoListParagraph style='margin-top:0in;margin-right:0in;margin-bottom:
  0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'><span
  lang=EN style='font-family:Symbol'>· </span><span lang=EN>Colleen Evans (Microsoft)</span></p>
  <p class=MsoListParagraph style='margin-top:0in;margin-right:0in;margin-bottom:
  0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'><span
  lang=EN style='font-family:Symbol'>· </span><span lang=EN>Jason Fam (IBM)</span></p>
  <p class=MsoListParagraph style='margin-top:0in;margin-right:0in;margin-bottom:
  0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'><span
  lang=EN style='font-family:Symbol'>· </span><span lang=EN>Senaka Fernando (WSO2)</span></p>
  <p class=MsoListParagraph style='margin-top:0in;margin-right:0in;margin-bottom:
  0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'><span
  lang=EN style='font-family:Symbol'>· </span><span lang=EN>Josh Gavant (Microsoft)</span></p>
  <p class=MsoListParagraph style='margin-top:0in;margin-right:0in;margin-bottom:
  0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'><span
  lang=EN style='font-family:Symbol'>· </span><span lang=EN>Brent Gross (IBM)</span></p>
  <p class=MsoListParagraph style='margin-top:0in;margin-right:0in;margin-bottom:
  0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'><span
  lang=EN style='font-family:Symbol'>· </span><span lang=EN>Zhun Guo (Individual)</span></p>
  <p class=MsoListParagraph style='margin-top:0in;margin-right:0in;margin-bottom:
  0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'><span
  lang=EN style='font-family:Symbol'>· </span><span lang=EN>Anila Kumar GVN (CA Technologies)</span></p>
  <p class=MsoListParagraph style='margin-top:0in;margin-right:0in;margin-bottom:
  0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'><span
  lang=EN style='font-family:Symbol'>· </span><span lang=EN>Stefan Hagen (Individual)</span></p>
  <p class=MsoListParagraph style='margin-top:0in;margin-right:0in;margin-bottom:
  0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'><span
  lang=EN style='font-family:Symbol'>· </span><span lang=EN>Ralf Handl (SAP SE)</span></p>
  <p class=MsoListParagraph style='margin-top:0in;margin-right:0in;margin-bottom:
  0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'><span
  lang=EN style='font-family:Symbol'>· </span><span lang=EN>Barbara Hartel (SAP SE)</span></p>
  <p class=MsoListParagraph style='margin-top:0in;margin-right:0in;margin-bottom:
  0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'><span
  lang=EN style='font-family:Symbol'>· </span><span lang=EN>Hubert Heijkers (IBM)</span></p>
  </td>
  <td width=312 valign=top style='width:233.65pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoListParagraph style='margin-top:0in;margin-right:0in;margin-bottom:
  0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'><span
  lang=EN style='font-family:Symbol'>· </span><span lang=EN>Jens Hüsken (SAP SE)</span></p>
  <p class=MsoListParagraph style='margin-top:0in;margin-right:0in;margin-bottom:
  0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'><span
  lang=EN style='font-family:Symbol'>· </span><span lang=EN>Evan Ireland (SAP SE)</span></p>
  <p class=MsoListParagraph style='margin-top:0in;margin-right:0in;margin-bottom:
  0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'><span
  lang=EN style='font-family:Symbol'>· </span><span lang=EN>Gershon Janssen (Individual)</span></p>
  <p class=MsoListParagraph style='margin-top:0in;margin-right:0in;margin-bottom:
  0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'><span
  lang=EN style='font-family:Symbol'>· </span><span lang=EN>Ram Jeyaraman (Microsoft)</span></p>
  <p class=MsoListParagraph style='margin-top:0in;margin-right:0in;margin-bottom:
  0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'><span
  lang=EN style='font-family:Symbol'>· </span><span lang=EN>Ted Jones (Red Hat)</span></p>
  <p class=MsoListParagraph style='margin-top:0in;margin-right:0in;margin-bottom:
  0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'><span
  lang=EN style='font-family:Symbol'>· </span><span lang=EN>Diane Jordan (IBM)</span></p>
  <p class=MsoListParagraph style='margin-top:0in;margin-right:0in;margin-bottom:
  0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'><span
  lang=EN style='font-family:Symbol'>· </span><span lang=EN>Stephan Klevenz (SAP SE)</span></p>
  <p class=MsoListParagraph style='margin-top:0in;margin-right:0in;margin-bottom:
  0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'><span
  lang=EN style='font-family:Symbol'>· </span><span lang=EN>Gerald Krause (SAP SE)</span></p>
  <p class=MsoListParagraph style='margin-top:0in;margin-right:0in;margin-bottom:
  0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'><span
  lang=EN style='font-family:Symbol'>· </span><span lang=EN>Nuno Linhares (SDL)</span></p>
  <p class=MsoListParagraph style='margin-top:0in;margin-right:0in;margin-bottom:
  0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'><span
  lang=EN style='font-family:Symbol'>· </span><span lang=EN>Paul Lipton (CA Technologies)</span></p>
  <p class=MsoListParagraph style='margin-top:0in;margin-right:0in;margin-bottom:
  0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'><span
  lang=EN style='font-family:Symbol'>· </span><span lang=EN>Susan Malaika (IBM)</span></p>
  <p class=MsoListParagraph style='margin-top:0in;margin-right:0in;margin-bottom:
  0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'><span
  lang=EN style='font-family:Symbol'>· </span><span lang=EN>Ramanjaneyulu Malisetti (CA Technologies)</span></p>
  <p class=MsoListParagraph style='margin-top:0in;margin-right:0in;margin-bottom:
  0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'><span
  lang=EN style='font-family:Symbol'>· </span><span lang=EN>Neil McEvoy (iFOSSF – International Free and Open
  Source Solutions Foundation)</span></p>
  <p class=MsoListParagraph style='margin-top:0in;margin-right:0in;margin-bottom:
  0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'><span
  lang=EN style='font-family:Symbol'>· </span><span lang=EN>Stan Mitranic (CA Technologies)</span></p>
  <p class=MsoListParagraph style='margin-top:0in;margin-right:0in;margin-bottom:
  0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'><span
  lang=EN style='font-family:Symbol'>· </span><span lang=EN>Dale Moberg (Axway Software)</span></p>
  <p class=MsoListParagraph style='margin-top:0in;margin-right:0in;margin-bottom:
  0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'><span
  lang=EN style='font-family:Symbol'>· </span><span lang=EN>Graham Moore (BrightstarDB Ltd.)</span></p>
  <p class=MsoListParagraph style='margin-top:0in;margin-right:0in;margin-bottom:
  0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'><span
  lang=EN style='font-family:Symbol'>· </span><span lang=EN>Farrukh Najmi (Individual)</span></p>
  <p class=MsoListParagraph style='margin-top:0in;margin-right:0in;margin-bottom:
  0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'><span
  lang=EN style='font-family:Symbol'>· </span><span lang=EN>Shishir Pardikar (Citrix Systems)</span></p>
  <p class=MsoListParagraph style='margin-top:0in;margin-right:0in;margin-bottom:
  0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'><span
  lang=EN style='font-family:Symbol'>· </span><span lang=EN>Sanjay Patil (SAP SE)</span></p>
  <p class=MsoListParagraph style='margin-top:0in;margin-right:0in;margin-bottom:
  0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'><span
  lang=EN style='font-family:Symbol'>· </span><span lang=EN>Nuccio Piscopo (iFOSSF – International Free and
  Open Source Solutions Foundation)</span></p>
  <p class=MsoListParagraph style='margin-top:0in;margin-right:0in;margin-bottom:
  0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'><span
  lang=EN style='font-family:Symbol'>· </span><span lang=EN>Michael Pizzo (Microsoft)</span></p>
  <p class=MsoListParagraph style='margin-top:0in;margin-right:0in;margin-bottom:
  0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'><span
  lang=EN style='font-family:Symbol'>· </span><span lang=EN>Ramesh Reddy (Red Hat)</span></p>
  <p class=MsoListParagraph style='margin-top:0in;margin-right:0in;margin-bottom:
  0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'><span
  lang=EN style='font-family:Symbol'>· </span><span lang=EN>Robert Richards (Mashery)</span></p>
  <p class=MsoListParagraph style='margin-top:0in;margin-right:0in;margin-bottom:
  0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'><span
  lang=EN style='font-family:Symbol'>· </span><span lang=EN>Sumedha Rubasinghe (WSO2)</span></p>
  <p class=MsoListParagraph style='margin-top:0in;margin-right:0in;margin-bottom:
  0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'><span
  lang=EN style='font-family:Symbol'>· </span><span lang=EN>James Snell (IBM)</span></p>
  <p class=MsoListParagraph style='margin-top:0in;margin-right:0in;margin-bottom:
  0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'><span
  lang=EN style='font-family:Symbol'>· </span><span lang=EN>Jeffrey Turpin (Axway Software)</span></p>
  <p class=MsoListParagraph style='margin-top:0in;margin-right:0in;margin-bottom:
  0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'><span
  lang=EN style='font-family:Symbol'>· </span><span lang=EN>John Willson (Individual)</span></p>
  <p class=MsoListParagraph style='margin-top:0in;margin-right:0in;margin-bottom:
  0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'><span
  lang=EN style='font-family:Symbol'>· </span><span lang=EN>John Wilmes (Individual)</span></p>
  <p class=MsoListParagraph style='margin-top:0in;margin-right:0in;margin-bottom:
  0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'><span
  lang=EN style='font-family:Symbol'>· </span><span lang=EN>Christopher Woodruff (Perficient, Inc.)</span></p>
  <p class=MsoListParagraph style='margin-top:0in;margin-right:0in;margin-bottom:
  0in;margin-left:.25in;margin-bottom:.0001pt;text-indent:-.25in'><span
  lang=EN style='font-family:Symbol'>· </span><span lang=EN>Martin Zurmuehl (SAP SE)</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal>&nbsp;</p>

<div style='border:none;border-top:solid gray 1.0pt;padding:6.0pt 0in 0in 0in'>

<p class=AppendixHeading1><a
name="_Toc477876744">Appendix B. </a><a href="#sec_RevisionHistory">Revision History</a></p>

</div>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <thead>
  <tr>
   <td width=123 valign=top style='width:91.9pt;border:solid windowtext 1.0pt;
   padding:0in 5.4pt 0in 5.4pt'>
   <p class=MsoNormal><b>Revision</b></p>
   </td>
   <td width=85 valign=top style='width:63.8pt;border:solid windowtext 1.0pt;
   border-left:none;padding:0in 5.4pt 0in 5.4pt'>
   <p class=MsoNormal><b>Date</b></p>
   </td>
   <td width=129 valign=top style='width:97.1pt;border:solid windowtext 1.0pt;
   border-left:none;padding:0in 5.4pt 0in 5.4pt'>
   <p class=MsoNormal><b>Editor</b></p>
   </td>
   <td width=286 valign=top style='width:214.7pt;border:solid windowtext 1.0pt;
   border-left:none;padding:0in 5.4pt 0in 5.4pt'>
   <p class=MsoNormal><b>Changes Made</b></p>
   </td>
  </tr>
 </thead>
 <tr>
  <td width=123 valign=top style='width:91.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Working Draft 01</p>
  </td>
  <td width=85 valign=top style='width:63.8pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>2016-06-22</p>
  </td>
  <td width=129 valign=top style='width:97.1pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Michael Pizzo</p>
  <p class=MsoNormal>&nbsp;</p>
  </td>
  <td width=286 valign=top style='width:214.7pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Transferred content from OData 4.0 Part I - Protocol
  Errata 3</p>
  </td>
 </tr>
 <tr>
  <td width=123 valign=top style='width:91.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Committee Specification Draft 01</p>
  </td>
  <td width=85 valign=top style='width:63.8pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>2016-12-08</p>
  </td>
  <td width=129 valign=top style='width:97.1pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Michael Pizzo </p>
  <p class=MsoNormal>Ralf Handl</p>
  </td>
  <td width=286 valign=top style='width:214.7pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Integrated 4.01 features</p>
  <p class=MsoListParagraphCxSpFirst style='margin-left:.25in;text-indent:-.25in'><span
  style='font-family:Symbol'>· </span>Schema Versioning</p>
  <p class=MsoListParagraphCxSpMiddle style='margin-left:.25in;text-indent:
  -.25in'><span style='font-family:Symbol'>· </span>Preference omit-values</p>
  <p class=MsoListParagraphCxSpMiddle style='margin-left:.25in;text-indent:
  -.25in'><span style='font-family:Symbol'>· </span>$compute system query option </p>
  <p class=MsoListParagraphCxSpMiddle style='margin-left:.25in;text-indent:
  -.25in'><span style='font-family:Symbol'>· </span>Indexing into Ordered Collections</p>
  <p class=MsoListParagraphCxSpMiddle style='margin-left:.25in;text-indent:
  -.25in'><span style='font-family:Symbol'>· </span>Deep Update</p>
  <p class=MsoListParagraphCxSpLast style='margin-left:.25in;text-indent:-.25in'><span
  style='font-family:Symbol'>· </span>Improved referencing in batch requests</p>
  </td>
 </tr>
 <tr>
  <td width=123 valign=top style='width:91.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Committee Specification Draft 02</p>
  </td>
  <td width=85 valign=top style='width:63.8pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>2017-06-20</p>
  </td>
  <td width=129 valign=top style='width:97.1pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Michael Pizzo </p>
  <p class=MsoNormal>Ralf Handl</p>
  </td>
  <td width=286 valign=top style='width:214.7pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>More 4.01 features</p>
  <p class=MsoListParagraphCxSpFirst style='margin-left:.25in;text-indent:-.25in'><span
  style='font-family:Symbol'>· </span>Set-based operations</p>
  <p class=MsoListParagraphCxSpMiddle style='margin-left:.25in;text-indent:
  -.25in'><span style='font-family:Symbol'>· </span>JSON Batch format</p>
  <p class=MsoListParagraphCxSpLast style='margin-left:.25in;text-indent:-.25in'><span
  style='font-family:Symbol'>· </span>CSDL JSON format</p>
  </td>
 </tr>
 <tr>
  <td width=123 valign=top style='width:91.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Committee Specification Draft 03</p>
  </td>
  <td width=85 valign=top style='width:63.8pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>2017-09-28</p>
  </td>
  <td width=129 valign=top style='width:97.1pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Michael Pizzo </p>
  <p class=MsoNormal>Ralf Handl</p>
  </td>
  <td width=286 valign=top style='width:214.7pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Incorporated review feedback</p>
  <p class=MsoNormal>Added nested query options for <code>$select</code></p>
  <p class=MsoNormal>Added nested parameter alias value assignments within <code>$expand</code> and <code>$select</code></p>
  <p class=MsoNormal>Simplified implicit parameter aliases for function
  (import) calls</p>
  </td>
 </tr>
 <tr>
  <td width=123 valign=top style='width:91.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Committee Specification Draft 04</p>
  </td>
  <td width=85 valign=top style='width:63.8pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>2017-11-13</p>
  </td>
  <td width=129 valign=top style='width:97.1pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Michael Pizzo </p>
  <p class=MsoNormal>Ralf Handl</p>
  </td>
  <td width=286 valign=top style='width:214.7pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Incorporated review feedback</p>
  <p class=MsoNormal>Added deep insert of media entities</p>
  <p class=MsoNormal>Simplified unrelating entities</p>
  <p class=MsoNormal>Function imports in <code>$filter</code>
  and <code>$orderby</code></p>
  <p class=MsoNormal>Stable order of action and function parameters</p>
  </td>
 </tr>
 <tr>
  <td width=123 valign=top style='width:91.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Committee Specification 01</p>
  </td>
  <td width=85 valign=top style='width:63.8pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>2017-12-19</p>
  </td>
  <td width=129 valign=top style='width:97.1pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Michael Pizzo </p>
  <p class=MsoNormal>Ralf Handl</p>
  </td>
  <td width=286 valign=top style='width:214.7pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Non-Material Changes</p>
  </td>
 </tr>
 <tr>
  <td width=123 valign=top style='width:91.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Committee Specification Draft 05</p>
  </td>
  <td width=85 valign=top style='width:63.8pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>2019-06-21</p>
  </td>
  <td width=129 valign=top style='width:97.1pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Michael Pizzo</p>
  <p class=MsoNormal>Ralf Handl</p>
  </td>
  <td width=286 valign=top style='width:214.7pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>In-stream errors</p>
  <p class=MsoNormal>URL function <code>matchesPattern</code></p>
  <p class=MsoNormal>Delta response for singletons</p>
  <p class=MsoNormal>Content-IDs in deep update</p>
  <p class=MsoNormal>Optional action and function parameters</p>
  <p class=MsoNormal><code>continue-on-error</code> for
  operations on collections</p>
  </td>
 </tr>
 <tr>
  <td width=123 valign=top style='width:91.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Committee Specification Draft 06</p>
  </td>
  <td width=85 valign=top style='width:63.8pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>2019-09-20</p>
  </td>
  <td width=129 valign=top style='width:97.1pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Michael Pizzo</p>
  <p class=MsoNormal>Ralf Handl</p>
  </td>
  <td width=286 valign=top style='width:214.7pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>No dependencies to async requests within a batch request</p>
  <p class=MsoNormal>ETags in update responses</p>
  <p class=MsoNormal>Removed nested <code>$expand</code> within <code>$select</code></p>
  </td>
 </tr>
 <tr>
  <td width=123 valign=top style='width:91.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Committee Specification 02</p>
  </td>
  <td width=85 valign=top style='width:63.8pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>2019-11-05</p>
  </td>
  <td width=129 valign=top style='width:97.1pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Michael Pizzo</p>
  <p class=MsoNormal>Ralf Handl</p>
  </td>
  <td width=286 valign=top style='width:214.7pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Non-material changes</p>
  </td>
 </tr>
 <tr>
  <td width=123 valign=top style='width:91.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Candidate OASIS Specification 01</p>
  </td>
  <td width=85 valign=top style='width:63.8pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>2020-01-16</p>
  </td>
  <td width=129 valign=top style='width:97.1pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Michael Pizzo</p>
  <p class=MsoNormal>Ralf Handl</p>
  </td>
  <td width=286 valign=top style='width:214.7pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Non-material changes</p>
  </td>
 </tr>
</table>

<p class=MsoNormal>&nbsp;</p>

</div>

</body>

</html>
