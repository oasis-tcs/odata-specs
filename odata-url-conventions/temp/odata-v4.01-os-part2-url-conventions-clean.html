<html>

<head>
<meta name="description" content="This document defines rules for URLs for data and metadata exposed by an OData service">
<meta http-equiv=Content-Type content="text/html; charset=windows-1252">
<meta name=Generator content="Microsoft Word 15 (filtered)">
<title>OData Version 4.01. Part 2: URL Conventions</title>


</head>

<body>
<h1>##sec Introduction</h1>

</div>

<p class=MsoNormal>The Open Data Protocol (OData) enables the creation of
REST-based data services, which allow resources, identified using Uniform
Resource Locators (URLs) and defined in a data model, to be published and
edited by Web clients using simple HTTP messages. This specification defines a
set of recommended (but not required) rules for constructing URLs to identify the
data and metadata exposed by an OData service as well as a set of reserved URL
query string operators, which if accepted by an OData service, MUST be
implemented as required by this document.</p>

<p class=MsoNormal>The <a href="#ODataJSON">OData-JSON</a> document
specifies the format of the resource representations that are exchanged using
OData and the <a href="#odata">OData-Protocol</a> document describes
the actions that can be performed on the URLs (optionally constructed following
the conventions defined in this document) embedded in those representations.</p>

<p class=MsoNormal>Services are encouraged to follow the URL construction
conventions defined in this specification when possible as consistency promotes
an ecosystem of reusable client components and libraries.</p>

<h2>##subsec IPR Policy</h2>

<p class=MsoNormal>This specification is provided under the <a
href="https://www.oasis-open.org/policies-guidelines/ipr#RF-on-RAND-Mode">RF on
RAND Terms</a> Mode of the <a
href="https://www.oasis-open.org/policies-guidelines/ipr">OASIS IPR Policy</a>,
the mode chosen when the Technical Committee was established. For information
on whether any patents have been disclosed that may be essential to
implementing this specification, and any offers of patent licensing terms,
please refer to the Intellectual Property Rights section of the TC’s web page (<a
href="https://www.oasis-open.org/committees/odata/ipr.php">https://www.oasis-open.org/committees/odata/ipr.php</a>).</p>

<h2>##subsec Terminology</h2>

<p class=MsoNormal>The key words “MUST”, “MUST NOT”, “REQUIRED”, “SHALL”, “SHALL
NOT”, “SHOULD”, “SHOULD NOT”, “RECOMMENDED”, “MAY”, and “OPTIONAL” in this
document are to be interpreted as described in <a href="#rfc2119">RFC2119</a>.</p>

<h2>##subsec Normative
References</h2>

<p class=Ref style='margin-left:127.6pt;text-indent:-113.4pt'><span
class=Refterm>[<a name=ECMAScript>ECMAScript</a>]</span><span class=Refterm><span
style='font-weight:normal'>                 </span></span><i>ECMAScript 2016 Language
Specification, 7<sup>th</sup> Edition,</i> June 2016. Standard ECMA-262. <a
href="http://www.ecma-international.org/publications/standards/Ecma-262.htm">http://www.ecma-international.org/publications/standards/Ecma-262.htm</a>.
</p>

<p class=MsoNormal style='margin-left:127.6pt;text-indent:-113.4pt'><span
class=Refterm>[<a name=ABNF>OData-ABNF</a>]</span>                 <i>OData ABNF
Construction Rules Version 4.01</i>. <br>
See the link in &quot;Additional artifacts&quot; section on cover page.</p>

<p class=MsoNormal style='margin-left:127.6pt;text-indent:-113.4pt'><span
class=Refterm>[<a name=CSDL>OData-CSDL</a>JSON]</span>        <i>OData
Common Schema Definition Language (CSDL) JSON Representation Version 4.01)</i>.
See link in &quot;Related work&quot; section on cover page.<span class=Refterm>
</span></p>

<p class=MsoNormal style='margin-left:127.6pt;text-indent:-113.4pt'><a
name=ODataCSDLXMLRef>OData-CSDLXML</a><b>          </b><i>OData Common
Schema Definition Language (CSDL) XML Representation Version 4.01.</i> See link
in &quot;Related work&quot; section on cover page</p>

<p class=MsoNormal style='margin-left:127.6pt;text-indent:-113.4pt'><b>[<a
name=ODataJSONRef>OData-JSON</a>]</b>                 <i>OData JSON Format
Version 4.01.</i> <br>
See link in &quot;Related work&quot; section on cover page.</p>

<p class=MsoNormal style='margin-left:127.6pt;text-indent:-113.4pt'><span
class=Refterm>[<a name=odata>OData-Protocol</a>]</span>            <i>OData Version
4.01 Part 1: Protocol</i>. <br>
See link in &quot;Additional artifacts&quot; section on cover page.<span
class=Refterm> </span></p>

<p class=MsoNormal style='margin-left:127.6pt;text-indent:-113.4pt'><b>[<a
name=VocCapabilities>OData-VocCap</a>]</b>              <i>OData Vocabularies
Version 4.0: Capabilities Vocabulary. </i><br>
See link in &quot;Related work&quot; section on cover page.</p>

<p class=MsoNormal style='margin-left:127.6pt;text-indent:-113.4pt'><b>[<a
name=VocCore>OData-VocCore</a>]</b>            <i>OData Vocabularies Version
4.0: Core Vocabulary. </i><br>
See link in &quot;Related work&quot; section on cover page.</p>

<p class=MsoNormal style='margin-left:127.6pt;text-indent:-113.4pt'><span
class=Refterm>[<a name=rfc2119>RFC2119</a>]</span>                      Bradner,
S., “Key words for use in RFCs to Indicate Requirement Levels”, BCP 14, RFC
2119, March 1997. <a href="https://tools.ietf.org/html/rfc2119">https://tools.ietf.org/html/rfc2119</a>.</p>

<p class=MsoNormal style='margin-left:127.6pt;text-indent:-113.4pt'><span
class=Refterm>[<a name=RFC3986>RFC3986</a>]</span>                      Berners-Lee,
T., Fielding, R., and L. Masinter, “Uniform Resource Identifier (URI): Generic
Syntax”, STD 66, RFC 3986, January 2005. <a
href="https://tools.ietf.org/html/rfc3986">https://tools.ietf.org/html/rfc3986</a>.</p>

<p class=Ref style='margin-left:127.6pt;text-indent:-113.4pt'><a name="_Toc371341726"><span class=Refterm>[</span></a><a
name=BMXMLSchema2><span class=Refterm>XML-Schema-2</span></a><span
class=Refterm>]</span>             W3C XML Schema Definition Language (XSD) 1.1
Part 2: DatatypesW3C XML Schema Definition Language (XSD) 1.1 Part 2: Datatypes,
D. Peterson, S. Gao, C. M. Sperberg-McQueen, H. S. Thompson, P. V. Biron, A.
Malhotra, Editors, W3C Recommendation, 5 April 2012, <a
href="http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/">http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/</a>.<br>
Latest version available at <a href="http://www.w3.org/TR/xmlschema11-2/">http://www.w3.org/TR/xmlschema11-2/</a>.</p>

<h2>##subsec Typographical Conventions</h2>

<p class=MsoNormal>Keywords defined by this specification use this <code>monospaced</code> font.</p>

<p class=SourceCode><code>Normative source code uses this paragraph style.</code></p>

<p class=MsoNormal>Some sections of this specification are illustrated with
non-normative examples.</p>

<p class=MsoCaption>Example 1: text describing an example uses this paragraph
style</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:21.55pt;margin-right:21.55pt'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>Non-normative examples use this paragraph style.</p>

</div>

<p class=MsoNormal>All examples in this document are non-normative and
informative only.</p>

<p class=MsoNormal>All other text is normative unless otherwise labeled.</p>



<h1>##sec URL Components</h1>



<p class=MsoNormal>A URL used by an OData service has at most three significant
parts: the <i>service root URL</i>, the <i>resource path</i>, and <i>query
options</i>. Additional URL constructs (such as a fragment) can be present in a
URL used by an OData service; however, this specification applies no further
meaning to such additional constructs.</p>

<p class=MsoCaption>Example 2: OData URL broken down into its component parts:</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>http://host:port/path/SampleService.svc/Categories(1)/Products?$top=2&amp;$orderby=Name<span
style='font-size:6.0pt;color:black'><br>
</span><code>\______________________________________/\____________________/
\__________________/</code><span style='font-size:6.0pt;color:black'><br>
</span><code>       
          |                               |                       |</code><span
style='font-size:6.0pt;color:black'><br>
</span><code>          service
root URL                  resource path           query options</code></p>

</div>

<p class=MsoNormal>Mandated and suggested content of these three significant
URL components used by an OData service are covered in sequence in the three
following chapters.</p>

<h2>##subsec URL Parsing</h2>

<p class=MsoNormal>OData follows the URI syntax rules defined in <a
href="#RFC3986">RFC3986</a> and in addition assigns special meaning to
several of the sub-delimiters defined by <a href="#RFC3986">RFC3986</a>,
so special care has to be taken regarding parsing and percent-decoding.</p>

<p class=MsoNormal><a href="#RFC3986">RFC3986</a><b> </b>defines three
steps for URL processing that MUST be performed before percent-decoding: </p>

<p class=MsoListParagraphCxSpFirst style='text-indent:-.25in'><span
style='font-family:Symbol'>· </span>Split undecoded URL into components scheme, hier-part, query, and
fragment </p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-.25in'><span
style='font-family:Symbol'>· </span>Split undecoded hier-part into authority and path</p>

<p class=MsoListParagraphCxSpLast style='text-indent:-.25in'><span
style='font-family:Symbol'>· </span>Split undecoded path into path segments</p>

<p class=MsoNormal>After applying these steps defined by RFC3986 the following
steps MUST be performed:</p>

<p class=MsoListParagraphCxSpFirst style='text-indent:-.25in'><span
style='font-family:Symbol'>· </span>Split undecoded query at &quot;<code>&amp;</code>&quot;
into query options, and each query option at the first &quot;<code>=</code>&quot; into query option name and query option value</p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-.25in'><span
style='font-family:Symbol'>· </span>Percent-decode path segments, query option names, and query
option values exactly once</p>

<p class=MsoListParagraphCxSpLast style='text-indent:-.25in'><span
style='font-family:Symbol'>· </span>Interpret path segments, query option names, and query option
values according to OData rules</p>

<h2>##subsec URL Syntax</h2>

<p class=MsoNormal>The OData syntax rules for URLs are defined in this document
and the <a href="#ODataABNF">OData-ABNF</a>. Note that the ABNF is not expressive enough to define what a correct OData URL is
in every imaginable use case. This specification document defines additional
rules that a correct OData URL MUST fulfill. In case of doubt on what makes an
OData URL correct the rules defined in this specification document take
precedence. Note also that the rules in <a href="#ODataABNF">OData-ABNF</a>
assume that URLs and URL parts have been percent-encoding normalized as
described in section 6.2.2.2 of <a href="#RFC3986">RFC3986</a> before
applying the grammar to them, i.e. all characters in the unreserved set (see
rule <code>unreserved</code> in  <a href="#ODataABNF">OData-ABNF</a>)
are plain literals and not percent-encoded. For characters outside of the
unreserved set that are significant to OData the ABNF rules explicitly state
whether the percent-encoded representation is treated identical to the plain
literal representation. This is done to make the input strings in the ABNF test
cases more readable.</p>

<p class=MsoNormal>For example, one of these rules is that single quotes within
string literals are represented as two consecutive single quotes.</p>

<p class=MsoCaption>Example 3: valid OData URLs:</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;page-break-after:avoid;
background:#D9D9D9'>http://host/service/People('O''Neil')</p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;page-break-after:avoid;
background:#D9D9D9'>http://host/service/People(%27O%27%27Neil%27)&nbsp;</p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;page-break-after:avoid;
background:#D9D9D9'>http://host/service/People%28%27O%27%27Neil%27%29</p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'><span
style='color:black'>http://host/service/<code>Categories</code>('Smartphone%2FTablet')</span></p>

</div>

<p class=MsoCaption>Example 4: invalid OData URLs:</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;page-break-after:avoid;
background:#D9D9D9'><span style='color:black'>http://host/service<code>/People('O'Neil')&nbsp;</code></span></p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;page-break-after:avoid;
background:#D9D9D9'><span style='color:black'>http://host/service<code>/People('O%27Neil')&nbsp;</code></span></p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'><span
style='color:black'>http://host/service<code>/Categories('Smartphone/Tablet')&nbsp;</code></span></p>

</div>

<p class=MsoNormal>The first and second examples are invalid because a single
quote in a string literal must be represented as two consecutive single quotes.
The third example is invalid because forward slashes are interpreted as path
segment separators and <code>Categories('Smartphone</code> is
not a valid OData path segment, nor is <code>Tablet')</code>.</p>



<h1>##sec Service Root URL</h1>



<p class=MsoNormal>The service root URL identifies the root of an OData service.
A <code>GET</code> request to this URL returns the
format-specific service document, see <a href="#ODataJSON">OData-JSON</a>.</p>

<p class=MsoNormal>The service root URL MUST terminate in a forward slash.</p>

<p class=MsoNormal>The service document enables simple hypermedia-driven
clients to enumerate and explore the resources published by the OData service.</p>



<h1>##sec Resource Path</h1>



<p class=MsoNormal>The rules for resource path construction as defined in this
section are optional. OData services SHOULD follow the subsequently described
URL path construction rules and are indeed encouraged to do so; as such
consistency promotes a rich ecosystem of reusable client components and
libraries.</p>

<p class=MsoNormal>Services that do not follow the resource path conventions
for entity container children are strongly encouraged to document their
resource paths by annotating entity container children with the term <a
href="https://github.com/oasis-tcs/odata-vocabularies/blob/master/vocabularies/Org.OData.Core.V1.md#ResourcePath"><code>Core.ResourcePath</code></a> defined in <a
href="#ODataVocCore">OData-VocCore</a>. The annotation value is the URL of
the annotated resource and may be relative to <code>xml:base</code>
(if present), otherwise the request URL.</p>

<p class=MsoNormal>Resources exposed by an OData service are addressable by
corresponding resource path URL components to enable interaction of the client
with that resource aspect.</p>

<p class=MsoNormal>To illustrate the concept, some examples for resources might
be: customers, a single customer, orders related to a single customer, and so
forth. Examples of addressable aspects of these resources as exposed by the
data model might be: collections of entities, a single entity, properties,
links, operations, and so on.</p>

<p class=MsoNormal>An OData service MAY respond with <code>301
Moved Permanently</code> or <code>307 Temporary Redirect</code> from the canonical URL to the actual URL.</p>

<h2>##subsec Addressing the Model for a
Service</h2>

<p class=MsoNormal>OData services
expose their entity model according to <a href="#ODataCSDL">OData-CSDLJSON</a>
or <a href="#ODataCSDL">OData-CSDLXML</a> at the metadata URL, formed by appending <code>$metadata</code> to
the <a href="#sec_ServiceRootURL">service
root URL</a>.</p>

<p class=MsoCaption>Example 5: Metadata document URL</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;page-break-after:avoid;
background:#D9D9D9'>http://host/service/$metadata</p>

</div>

<p class=MsoNormal>OData clients may
request a particular format for metadata either through the Accept header or by
using the <a href="#sec_SystemQueryOptionformat"><code>$format</code></a> system
query option.</p>

<p class=MsoCaption>Example 6: Metadata document URL with specified format</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;page-break-after:avoid;
background:#D9D9D9'>http://host/service/$metadata?$format=json</p>

</div>

<h2>##subsec Addressing
the Batch Endpoint for a Service</h2>

<p class=MsoNormal style='page-break-after:avoid'>OData services that support batch requests expose a batch URL
formed by appending <code>$batch</code> to the <a
href="#sec_ServiceRootURL">service root URL</a>.</p>

<p class=MsoCaption>Example 7: batch
URL</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;page-break-after:avoid;
background:#D9D9D9'>http://host/service/$batch</p>

</div>

<h2>##subsec Addressing Entities</h2>

<p class=MsoNormal>The basic rules for addressing a collection (of entities), a
single entity within a collection, a singleton, as well as a property of an
entity are covered in the <code>resourcePath</code> syntax rule
in <a href="#ODataABNF">OData-ABNF</a>.</p>

<p class=MsoNormal style='page-break-after:avoid'>Below is a (non-normative) snippet
from <a href="#ODataABNF">OData-ABNF</a>:</p>

<p class=SourceCode>resourcePath = entitySetName                  [collectionNavigation]<br>
             / singleton                      [singleNavigation] <br>
             / actionImportCall <br>
             / entityColFunctionImportCall    [ collectionNavigation ]<br>
             / entityFunctionImportCall       [ singleNavigation ]<br>
             / complexColFunctionImportCall   [ collectionPath ]<br>
             / complexFunctionImportCall      [ complexPath ]<br>
             / primitiveColFunctionImportCall [ collectionPath ] <br>
             / primitiveFunctionImportCall    [ singlePath ] <br>
             / functionImportCallNoParens <br>
             / crossjoin<br>
             / '$all'                  [ &quot;/&quot; qualifiedEntityTypeName
]</p>

<p class=MsoNormal>Since OData has a uniform composable URL syntax and
associated rules there are many ways to address a collection of entities,
including, but not limited to:</p>

<p class=MsoNormal style='margin-left:21.3pt;text-indent:-14.2pt;page-break-after:
avoid'><span style='font-family:Symbol'>· </span>Via an entity set (see rule <code>entitySetName </code>in
<a href="#ODataABNF">OData-ABNF</a>)</p>

<p class=MsoCaption>Example 8: </p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:21.3pt;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>http://host/service/Products<code> </code></p>

</div>

<p class=MsoNormal style='margin-left:21.3pt;text-indent:-14.2pt;page-break-after:
avoid'><span style='font-family:Symbol'>· </span>By navigating a collection-valued navigation property (see rule: <code>entityColNavigationProperty</code>)</p>

<p class=MsoNormal style='margin-left:21.3pt;text-indent:-14.2pt;page-break-after:
avoid'><span style='font-family:Symbol'>· </span>By invoking a function that returns a collection of entities (see
rule: <code>entityColFunctionCall</code>)</p>

<p class=MsoCaption>Example 9: function with parameters in resource path</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:21.3pt;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;page-break-after:avoid;
background:#D9D9D9'><code>http://host/service/ProductsByCategoryId(categoryId=2)
</code></p>

</div>

<p class=MsoCaption>Example 10: function with parameters as query options</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:21.3pt;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;page-break-after:avoid;
background:#D9D9D9'><code>http://host/service/ProductsByColor(color=@color)?@color='red'
</code></p>

</div>

<p class=MsoNormal style='margin-left:21.3pt;text-indent:-14.2pt;page-break-after:
avoid'><span style='font-family:Symbol'>· </span>By invoking an action that returns a collection of entities (see
rule: <code>actionCall</code>)</p>

<p class=MsoNormal style='page-break-after:avoid'>Likewise there are many ways
to address a single entity.</p>

<p class=MsoNormal style='page-break-after:avoid'>Sometimes a single entity can
be accessed directly, for example by:</p>

<p class=MsoNormal style='margin-left:21.3pt;text-indent:-14.2pt;page-break-after:
avoid'><span style='font-family:Symbol'>· </span>Invoking a function that returns a single entity (see rule: <code>entityFunctionCall</code>)</p>

<p class=MsoNormal style='margin-left:21.3pt;text-indent:-14.2pt;page-break-after:
avoid'><span style='font-family:Symbol'>· </span>Invoking an action that returns a single entity (see rule: <code>actionCall</code>)</p>

<p class=MsoNormal style='margin-left:21.3pt;text-indent:-14.2pt;page-break-after:
avoid'><span style='font-family:Symbol'>· </span>Addressing a singleton</p>

<p class=MsoCaption>Example 11: </p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:21.3pt;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'><code>http://host/service/BestProductEverCreated
</code></p>

</div>

<p class=MsoNormal style='page-break-after:avoid'>Often however a single entity
is accessed by composing more path segments to a <code>resourcePath</code>
that identifies a collection of entities, for example by:</p>

<p class=MsoNormal style='margin-left:21.3pt;text-indent:-14.2pt;page-break-after:
avoid'><span style='font-family:Symbol'>· </span>Using an entity key to select a single entity (see rules: <code>collectionNavigation</code> and <code>keyPredicate</code>)</p>

<p class=MsoCaption>Example 12: </p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:21.3pt;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>http://host/service/Categories(1)<code> </code></p>

</div>

<p class=MsoNormal style='margin-left:21.3pt;text-indent:-14.2pt;page-break-after:
avoid'><span style='font-family:Symbol'>· </span>Invoking an action bound to a collection of entities that returns
a single entity (see rule: <code>boundOperation</code>)</p>

<p class=MsoNormal style='margin-left:21.3pt;text-indent:-14.2pt;page-break-after:
avoid'><span style='font-family:Symbol'>· </span>Invoking an function bound to a collection of entities that
returns a single entity (see rule: <code>boundOperation</code>)</p>

<p class=MsoCaption>Example 13: </p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:21.3pt;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'><code>http://host/service/Products/Model.MostExpensive()
</code></p>

</div>

<p class=MsoNormal style='page-break-after:avoid'>These rules are recursive, so
it is possible to address a single entity via another single entity, a
collection via a single entity and even a collection via a collection; examples
include, but are not limited to:</p>

<p class=MsoNormal style='margin-left:21.3pt;text-indent:-14.2pt;page-break-after:
avoid'><span style='font-family:Symbol'>· </span>By following a navigation from a single entity to another related
entity (see rule: <code>entityNavigationProperty</code>)</p>

<p class=MsoCaption>Example 14: </p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:21.3pt;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>http://host/service/Products(1)/Supplier<code> </code></p>

</div>

<p class=MsoNormal style='margin-left:21.3pt;text-indent:-14.2pt;page-break-after:
avoid'><span style='font-family:Symbol'>· </span>By invoking a function bound to a single entity that returns a single
entity (see rule: <code>boundOperation</code>)</p>

<p class=MsoCaption>Example 15: </p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:21.3pt;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'><code>http://host/service/Products(1)/Model.MostRecentOrder()
</code></p>

</div>

<p class=MsoNormal style='margin-left:21.3pt;text-indent:-14.2pt;page-break-after:
avoid'><span style='font-family:Symbol'>· </span>By invoking an action bound to a single entity that returns a
single entity (see rule: <code>boundOperation</code>)</p>

<p class=MsoNormal style='margin-left:21.3pt;text-indent:-14.2pt;page-break-after:
avoid'><span style='font-family:Symbol'>· </span>By following a navigation from a single entity to a related
collection of entities (see rule: <code>entityColNavigationProperty</code>)</p>

<p class=MsoCaption>Example 16: </p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:21.3pt;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>http://host/service/Categories(1)/Products<code> </code></p>

</div>

<p class=MsoNormal style='margin-left:21.3pt;text-indent:-14.2pt;page-break-after:
avoid'><span style='font-family:Symbol'>· </span>By invoking a function bound to a single entity that returns a
collection of entities (see rule: <code>boundOperation</code>)</p>

<p class=MsoCaption>Example 17: </p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:21.3pt;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'><code>http://host/service/Categories(1)/Model.TopTenProducts()</code></p>

</div>

<p class=MsoNormal style='margin-left:21.3pt;text-indent:-14.2pt;page-break-after:
avoid'><span style='font-family:Symbol'>· </span>By invoking an action bound to a single entity that returns a
collection of entities (see rule: <code>boundOperation</code>)</p>

<p class=MsoNormal style='margin-left:21.3pt;text-indent:-14.2pt;page-break-after:
avoid'><span style='font-family:Symbol'>· </span>By invoking a function bound to a collection of entities that
returns a collection of entities (see rule: <code>boundOperation</code>)</p>

<p class=MsoCaption>Example 18: </p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:21.3pt;margin-right:.2pt'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'><code>http://host/service/Categories(1)/Products/Model.AllOrders()</code></p>

</div>

<p class=MsoNormal style='margin-left:21.3pt;text-indent:-14.2pt;page-break-after:
avoid'><span style='font-family:Symbol'>· </span>By invoking an action bound to a collection of entities that
returns a collection of entities (see rule: <code>boundOperation</code>)</p>

<p class=MsoNormal>Finally it is possible to compose path segments onto a
resource path that identifies a primitive, complex instance, collection of
primitives or collection of complex instances and bind an action or function
that returns an entity or collections of entities.</p>

<h3>##subsubsec Canonical URL</h3>

<p class=MsoNormal>For OData services conformant with the addressing
conventions in this section, the canonical form of an absolute URL identifying
a non-contained entity is formed by adding a single path segment to the service
root URL. The path segment is made up of the name of the entity set associated
with the entity followed by the key predicate identifying the entity within the
collection. No type-cast segment is added to the canonical URL, even if the
entity is an instance of a type derived from the declared entity type of its
entity set.</p>

<p class=MsoNormal>The canonical key predicate for single-part keys consists
only of the key property value without the key property name. For multi-part
keys the key properties appear in the same order they appear in the key
definition in the service metadata.</p>

<p class=MsoCaption>Example 19: Non-canonical URL</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;page-break-after:avoid;
background:#D9D9D9'>http://host/service/Categories(ID=1)/Products(ID=1) </p>

</div>

<p class=MsoCaption>Example 20: Canonical URL for previous example:</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>http://host/service/Products(1) </p>

</div>

<h3>##subsubsec Canonical URL for Contained
Entities</h3>

<p class=MsoNormal>For contained entities (i.e. related via a containment
navigation property, see <a href="#ODataCSDL">OData-CSDLJSON</a>
or <a href="#ODataCSDL">OData-CSDLXML</a>)
the canonical URL is the canonical URL of the containing entity followed by:</p>

<p class=MsoListParagraphCxSpFirst style='text-indent:-.25in'><span
style='font-family:Symbol'>· </span>A type-cast segment if the navigation property is defined on a
type derived from the entity type declared for the entity set,</p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-.25in'><span
style='font-family:Symbol'>· </span>A path segment for the containment navigation property, and</p>

<p class=MsoListParagraphCxSpLast style='text-indent:-.25in'><span
style='font-family:Symbol'>· </span>If the navigation property returns a collection, a key predicate
that uniquely identifies the entity in that collection.</p>

<p class=MsoNormal>If the containment navigation property is defined on a
complex type used within an ordered collection, the canonical URL of the
containing entity is the canonical URL for the collection of complex types
followed by a segment containing the zero-based ordinal of the complex typed
instance within the collection.</p>

<h3>##subsubsec URLs for Related Entities with
Referential Constraints</h3>

<p class=MsoNormal>If a navigation property leading to a related entity type
has a partner navigation property that specifies a referential constraint, then
those key properties of the related entity that take part in the referential
constraint MAY be omitted from URLs.</p>

<p class=MsoCaption>Example 21: full key predicate of related entity</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;page-break-after:avoid;
background:#D9D9D9'>https://host/service/Orders(1)/Items(OrderID=1,ItemNo=2)
</p>

</div>

<p class=MsoCaption>Example 22: shortened key predicate of related entity</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>https://host/service/Orders(1)/Items(2) </p>

</div>

<p class=MsoCaption>The two above examples are equivalent if the navigation
property <code>Items</code> from <code>Order</code>
to <code>OrderItem</code> has a partner navigation property from
<code>OrderItem</code> to <code>Order</code> with
a referential constraint tying the value of the <code>OrderID</code>
key property of the <code>OrderItem</code> to the value of the <code>ID</code> key property of the <code>Order</code>.
</p>

<p class=MsoNormal>The shorter form that does not specify the constrained key
parts redundantly is preferred. If the value of the constrained key is
redundantly specified, then it MUST match the principal key value.</p>

<h3>##subsubsec Resolving an Entity-Id</h3>

<p class=MsoNormal>To resolve an entity-id into a representation of the
identified entity, the client issues a <code>GET</code> request
to the <code>$entity</code> resource located at the URL <code>$entity</code> relative to the service root URL. The entity-id
MUST be specified using the system query option <code>$id</code>.
The entity-id may be expressed as an absolute IRI or relative to the request
root URL. </p>

<p class=MsoCaption>Example 23: request the entity representation for an
entity-id</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;page-break-after:avoid;
background:#D9D9D9'>http://host/service/$entity?$id=Products(0)</p>

</div>

<p class=MsoNormal>The semantics of <code>$entity</code> are
covered in the <a href="#odata">OData-Protocol</a> document.</p>

<h3>##subsubsec Alternate Keys</h3>

<p class=MsoNormal>In addition to the canonical (primary) key an entity set or
entity type can specify one or more alternate keys with the <a
href="https://github.com/oasis-tcs/odata-vocabularies/blob/master/vocabularies/Org.OData.Core.V1.md#AlternateKeys"><code>Core.AlternateKeys</code></a> term (see <a
href="#ODataVocCore">OData-VocCore</a>). Entities can be addressed via an
alternate key using the same parentheses-style convention as for the canonical
key, with one difference: single-part alternate keys MUST specify the key property
name to unambiguously determine the alternate key.</p>

<p class=MsoCaption>Example 24: the same employee identified via the alternate
key SSN, the canonical (primary) key ID using the non-canonical long form with
specified key property name, and the canonical short form without key property
name</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>http://host/service/Employees(SSN='123-45-6789')</p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>http://host/service/Employees(ID='A1245')</p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>http://host/service/Employees('A1245')</p>

</div>

<h3>##subsubsec Key-as-Segment Convention</h3>

<p class=MsoNormal>Services MAY support an alternate convention for addressing
entities by appending a segment containing the unquoted key value to the URL of
the collection containing the entity. Forward-slashes in key value segments
MUST be percent-encoded; single quotes within key value segments are treated as
part of the key value and do not need to be doubled or percent encoded.</p>

<p class=MsoCaption>Example 25: valid OData URLs:</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>http://host/service/Employees/A1245</p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;page-break-after:avoid;
background:#D9D9D9'>http://host/service/People/O'Neil</p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;page-break-after:avoid;
background:#D9D9D9'>http://host/service/People/O%27Neil&nbsp;</p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'><span
style='color:black'>http://host/service/<code>Categories</code>/Smartphone%2FTablet</span></p>

</div>

<p class=MsoNormal>For multi-part keys, the entity MUST be addressed by
multiple segments applied, one for each key value, in the order they appear in
the metadata description of the entity key.</p>

<p class=MsoCaption>Example 26: multi-part key predicate, parentheses-style and
key-as-segment</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;page-break-after:avoid;
background:#D9D9D9'>https://host/service/OrderItems(OrderID=1,ItemNo=2)
</p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;page-break-after:avoid;
background:#D9D9D9'>https://host/service/OrderItems/1/2</p>

</div>

<p class=MsoNormal>If a navigation property leading to a related entity type
has a partner navigation property that specifies a referential constraint, then
those key properties of the related entity that take part in the referential
constraint MUST be omitted from URLs using key-as-segment convention.</p>

<p class=MsoCaption>Example 27: key predicate of related entity – no key
segments for key properties of related entity with a referential constraint to
preceding key segments</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>https://host/service/Orders/1/Items/2</p>

</div>

<p class=MsoCaption>The above example assumes that the navigation property <code>Items</code> from <code>Order</code> to <code>OrderItem</code> has a partner navigation property from <code>OrderItem</code> to <code>Order</code> with a
referential constraint tying the value of the <code>OrderID</code>
key property of the <code>OrderItem</code> to the value of the <code>ID</code> key property of the <code>Order</code>.
</p>

<p class=MsoNormal>Because representing key values as segments could be
ambiguous with other URL construction conventions, services that support key-as
segment MUST implement the following precedence rules:</p>

<p class=MsoNormal>If a segment following an entity collection:</p>

<p class=MsoListParagraphCxSpFirst style='text-indent:-.25in'>1. matches a
defined OData segment (starting with “$”), treat it as such</p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-.25in'>2. matches a
qualified bound function, bound action, or type name, treat it as such</p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-.25in'>3. matches an
unqualified bound function, bound action, or type name defined in a default
namespace (see <a href="#odata">OData-Protocol</a>) treat it as such</p>

<p class=MsoListParagraphCxSpLast style='text-indent:-.25in'>4. treat as a
key value</p>

<p class=MsoNormal>For maximum interoperability, services that support the
key-as-segment convention SHOULD also support the canonical <a
href="#sec_CanonicalURL">parentheses-style convention</a> for addressing an
entity within a collection, otherwise they MUST specify the URL for each
returned entity in a response, as specified by the particular format.</p>

<p class=MsoNormal>Note: the key-as-segment convention can only be used with
the canonical (primary) key and cannot be used with alternate keys as the key
property names are not present in the keys and an alternative key cannot be
determined.</p>

<h2>##subsec Addressing References between
Entities</h2>

<p class=MsoNormal>OData services are based on a data model that supports
relationships as first class constructs. For example, an OData service could
expose a collection of Products entities each of which are related to a
Category entity.</p>

<p class=MsoNormal>References between entities are addressable in OData just
like entities themselves are (as described above) by appending a navigation
property name followed by <code>/$ref</code> to the entity URL.</p>

<p class=MsoCaption>Example 28: URL addressing the references between <code>Categories(1)</code> and <code>Products</code></p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>http://host/service/Categories(1)/Products/$ref</p>

</div>

<p class=MsoNormal>Resource paths addressing a single related entity reference
can be used in <code>DELETE</code> requests to unrelate two
entities. In OData 4.01, this includes resource paths that identify an
individual entity reference within a related collection by key. In OData 4.0,
resource paths addressing a collection of references MUST be followed by the
system query option <code>$id</code> in order to identify a
single entity reference within the collection to be removed. The entity-id
specified by <code>$id</code> may be expressed absolute or
relative to the request URL. For details see <a href="#odata">OData-Protocol</a>.</p>

<p class=MsoCaption>Example 29: three ways of unrelating <code>Categories(1)</code>
and <code>Products(0); the second option is supported only in
OData 4.01</code></p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>DELETE http://host/service/Categories(1)/Products/$ref?$id=../../Products(0)</p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>DELETE http://host/service/Categories(1)/Products(0)/$ref</p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>DELETE http://host/service/Products(0)/Category/$ref</p>

</div>

<h2>##subsec Addressing
Operations</h2>

<p class=MsoNormal><a
name="_Toc371341739">The semantic rules for addressing and invoking actions and
functions are defined in the </a><a href="#odata">OData-Protocol</a>
document.</p>

<p class=MsoNormal>Services MAY additionally support the use of the unqualified
name of an action or function in a URL by defining one or more default
namespaces through the <a
href="https://github.com/oasis-tcs/odata-vocabularies/blob/master/vocabularies/Org.OData.Core.V1.md#DefaultNamespace"><code>Core.DefaultNamespace</code></a><code> </code>term
defined in <a href="#ODataVocCore">OData-VocCore</a>. For more information on default namespaces, see
Default Namespaces in <a href="#odata">OData-Protocol</a>.</p>

<h3>##subsubsec Addressing
Actions</h3>

<p class=MsoNormal>The grammar for addressing and invoking actions is defined
by the following syntax grammar rules in <a href="#ODataABNF">OData-ABNF</a>:</p>

<p class=MsoListParagraphCxSpFirst style='text-indent:-.25in'><span
style='font-family:Symbol'>· </span>The <code>actionImportCall</code> syntax rule
defines the grammar in the <code>resourcePath</code> for
addressing and invoking an action import directly from the service root.</p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-.25in'><span
style='font-family:Symbol'>· </span>The <code>boundActionCall</code> syntax rule
defines the grammar in the <code>resourcePath</code> for
addressing and invoking an action that is appended to a <code>resourcePath</code>
that identifies some resources that can be used as the binding parameter value
when invoking the action.</p>

<p class=MsoListParagraphCxSpLast style='text-indent:-.25in'><span
style='font-family:Symbol'>· </span>The <code>boundOperation</code> syntax rule (which
encompasses the <code>boundActionCall</code> syntax rule), when
used by the <code>resourcePath</code> syntax rule, illustrates
how a <code>boundActionCall</code> can be appended to a <code>resourcePath</code>.</p>

<h3>##subsubsec Addressing Functions</h3>

<p class=MsoNormal>The grammar for addressing and invoking functions is defined
by a number syntax grammar rules in <a href="#ODataABNF">OData-ABNF</a>, in
particular:</p>

<p class=MsoListParagraphCxSpFirst style='text-indent:-.25in'><span
style='font-family:Symbol'>· </span>The function import call syntax rules <code>complexFunctionImportCall</code>,
<code>complexColFunctionImportCall</code>, <code>entityFunctionImportCall</code>,
<code>entityColFunctionImportCall</code>, <code>primitiveFunctionImportCall</code>,
and <code>primitiveColFunctionImportCall</code> define the
grammar in the <code>resourcePath</code> for addressing and
providing parameters for a function import directly from the service root.</p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-.25in'><span
style='font-family:Symbol'>· </span>The bound function call syntax rules <code>boundComplexFunctionCall</code>,
<code>boundComplexColFunctionCall</code>, <code>boundEntityFunctionCall</code>,
<code>boundEntityColFunctionCall</code>, <code>boundPrimitiveFunctionCall</code>
and <code>boundPrimitiveColFunctionCall</code> define the
grammar in the <code>resourcePath</code> for addressing and
providing parameters for a function that is appended to a <code>resourcePath</code>
that identifies some resources that can be used as the binding parameter value
when invoking the function.</p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-.25in'><span
style='font-family:Symbol'>· </span>The <code>boundOperation</code> syntax rule (which
encompasses the bound function call syntax rules), when used by the <code>resourcePath</code> syntax rule, illustrates how a bound
function call can be appended to a <code>resourcePath</code>.</p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-.25in'><span
style='font-family:Symbol'>· </span>The <code>functionExpr</code> and <code>boundFunctionExpr</code> syntax rules as used by the <code>filter</code> and <code>orderby</code> syntax
rules define the grammar for invoking functions to help filter and order
resources identified by the <code>resourcePath</code> of the
URL.</p>

<p class=MsoListParagraphCxSpLast style='text-indent:-.25in'><span
style='font-family:Symbol'>· </span>The <code>aliasAndValue</code> syntax rule defines
the grammar for providing function parameter values using Parameter Alias
Syntax, see <a href="#odata">OData-Protocol</a>.</p>

<h2>##subsec Addressing a
Property</h2>

<p class=MsoNormal>To address an entity property clients append a path segment
containing the property name to the URL of the entity. If the property has a
complex type value, properties of that value can be addressed by further
property name composition.</p>

<h2>##subsec Addressing a Property Value</h2>

<p class=MsoNormal>To address the raw value of a primitive property, clients
append the path segment <code>/$value</code> to the property
URL.</p>

<p class=MsoNormal>Properties of type <code>Edm.Stream</code>
already return the raw value of the media stream and do not support appending
the <code>/$value</code> segment.</p>

<h2>##subsec Addressing
the Count of a Collection</h2>

<p class=MsoNormal>To address the raw value of the number of items in a
collection, clients append <code>/$count</code> to the resource
path of the URL identifying the entity set or collection. </p>

<p class=MsoNormal>The <code>/$count </code>path suffix
identifies the integer count of records in the collection and SHOULD NOT be
combined with the system query options <span class=MsoCommentReference><span
style='font-size:8.0pt'> </span></span><a
href="#sec_SystemQueryOptionstopandskip"><code>$top</code></a>,
<a href="#sec_SystemQueryOptionstopandskip"><code>$skip</code></a>,
<a href="#sec_SystemQueryOptionorderby"><code>$orderby</code></a>,
<a href="#sec_SystemQueryOptionexpand"><code>$expand</code></a>,
and <a href="#sec_SystemQueryOptionformat"><code>$format</code></a>.
The count MUST NOT be affected by<span class=MsoCommentReference><span
style='font-size:8.0pt'> </span></span><code>$top</code>,
<code>$skip</code>, <code>$orderby</code>, or <code>$expand</code>.</p>

<p class=MsoNormal>The count is calculated after applying any <a
href="#sec_AddressingaSubsetofaCollection"><code>/$filter</code></a>
path segments, or <code>$filter</code> or <code>$search</code> system query options to the
collection. </p>

<p class=MsoNormal> </p>

<p class=MsoCaption>Example 30: the number of related entities </p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;page-break-after:avoid;
background:#D9D9D9'>http://host/service/Categories(1)/Products/$count </p>

</div>

<p class=MsoCaption>Example 31: the number of entities in an entity set </p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>http://host/service/Products/$count </p>

</div>

<p class=MsoCaption>Example 32: entity count in a <a
href="#sec_SystemQueryOptionfilter"><code>$filter</code></a>
expression. Note that the spaces around <code>gt</code> are for
readability of the example only; in real URLs they must be percent-encoded as <code>%20</code>.</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;page-break-after:avoid;
background:#D9D9D9'>http://host/service/Categories?$filter=Products/$count gt 0</p>

</div>

<p class=MsoCaption>Example 33: count of a filtered collection in a <a
href="#sec_SystemQueryOptionfilter"><code>$filter</code></a>
expression; returns all Categories containing more than two products whose
price is greater than 5.00.</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;page-break-after:avoid;
background:#D9D9D9'>http://host/service/Categories?$filter=Products/$count($filter=Price
gt 5.00) gt 2</p>

</div>

<p class=MsoCaption><span lang=DE> </span>Example 34: entity count in an <a
href="#sec_SystemQueryOptionorderby"><code>$orderby</code></a>
expression</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>http://host/service/Categories?$orderby=Products/$count</p>

</div>

<h2>##subsec Addressing a Member within an
Entity Collection</h2>

<p class=MsoNormal>Collections of entities are modeled as entity sets,
collection-valued navigation properties, or operation results.</p>

<p class=MsoNormal>For entity sets, results of operations associated with an
entity set through an <code>EntitySet </code>or <code>EntitySetPath</code> declaration, or collection-valued
navigation properties with a <code>NavigationPropertyBinding </code>or <code>ContainsTarget=true </code>specification, members of
the collection can be addressed by convention by appending the parenthesized
key to the URL specifying the collection of entities, or by using the <a
href="#sec_KeyasSegmentConvention">key-as-segment convention</a> if supported
by the service.</p>

<p class=MsoNormal>For collection-valued navigation properties with navigation
property bindings that end in a type-cast segment, a type-cast segment MUST be
appended to the collection URL before appending the key segment. </p>

<p class=MsoNormal>Note: entity sets or collection-valued navigation properties
annotated with term <a
href="https://github.com/oasis-tcs/odata-vocabularies/blob/master/vocabularies/Org.OData.Capabilities.V1.md#IndexableByKey"><code>Capabilities.IndexableByKey</code></a>
defined in <a href="#ODataVocCap">OData-VocCap</a> and a value of <code>false</code> do
not support addressing their members by key.</p>

<h2>##subsec Addressing a Member of an
Ordered Collection</h2>

<p class=MsoNormal>Collections can be annotated as ordered using the <a
href="https://github.com/oasis-tcs/odata-vocabularies/blob/master/vocabularies/Org.OData.Core.V1.md#Ordered"><code>Core.Ordered</code></a> term (see <a
href="#ODataVocCore">OData-VocCore</a>). Individual items within an ordered
collection of primitive or complex types can be addressed by appending a
segment containing the zero-based ordinal to the URL of the collection. A
negative ordinal number indexes from the end of the collection, with <code>-1</code> representing the last item in the
collection. Services MUST NOT specify a negative index when returning the
address of a member of an ordered collection.</p>

<p class=MsoNormal>Entity types are stably addressable using their canonical
URL and SHOULD NOT be accessed or accessible using an index.</p>

<p class=MsoCaption>Example 35: the first address in a list of addresses for <code>MainSupplier</code></p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;page-break-after:avoid;
background:#D9D9D9'>http://host/service/MainSupplier/Addresses/0</p>

</div>

<h2>##subsec Addressing Derived Types</h2>

<p class=MsoNormal>Any resource path or path expression identifying a
collection of entities or complex type instances can be appended with a path
segment containing the qualified name of a type derived from the declared type
of the collection. The result will be restricted to instances of the derived
type and may be empty.&nbsp;</p>

<p class=MsoNormal>Any resource path or path expression identifying a single
entity or complex type instance can be appended with a path segment containing
the qualified name of a type derived from the declared type of the identified
resource. If used in a resource path and the identified resource is not an
instance of the derived type, the request will result in a <code>404 Not Found</code> response. If used in a path expression that
is part of a Boolean expression, the type cast will evaluate to <code>null</code>.&nbsp;</p>

<p class=MsoNormal>Services MAY additionally support the use of the unqualified
name of a derived type in a URL by defining one or more default namespaces
through the <a
href="https://github.com/oasis-tcs/odata-vocabularies/blob/master/vocabularies/Org.OData.Core.V1.md#DefaultNamespace"><code>Core.DefaultNamespace</code></a> term defined
in <a href="#ODataVocCore">OData-VocCore</a>.
For more information on default namespaces, see Default Namespaces in <a
href="#odata">OData-Protocol</a>.</p>

<p class=MsoNormal>Services MAY also support treating an instance as a type
outside of the type hierarchy using the same syntax and semantics as when
addressing a derived type. In this case, the set and values of properties of
the addressed type may be different than the properties of the source type. The
set of such possible target types outside of the type hierarchy SHOULD be
called out using the <a
href="https://github.com/oasis-tcs/odata-vocabularies/blob/master/vocabularies/Org.OData.Core.V1.md#MayImplement"><code>Core.MayImplement</code></a> annotation term,
defined in <a href="#ODataVocCore">OData-VocCore</a>.</p>

<p class=MsoCaption>Example 36: entity set restricted to <code>VipCustomer</code>
instances</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;page-break-after:avoid;
background:#D9D9D9'><code>http://host/service/Customers/Model.VipCustomer</code></p>

</div>

<p class=MsoCaption>Example 37: entity restricted to a <code>VipCustomer</code>
instance, resulting in <code>404 Not Found</code> if the
customer with key <code>1</code> is not a <code>VipCustomer</code></p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;page-break-after:avoid;
background:#D9D9D9'><code>http://host/service/</code>Customers/Model.VipCustomer(1) </p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;page-break-after:avoid;
background:#D9D9D9'><code>http://host/service/</code>Customers(1)/Model.VipCustomer</p>

</div>

<p class=MsoCaption>Example 38: cast the complex property <code>Address</code>
to its derived type <code>DetailedAddress</code>, then get a
property of the derived type</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;page-break-after:avoid;
background:#D9D9D9'><code>http://host/service/Customers(1)/Address/Model.DetailedAddress/Location
</code></p>

</div>

<p class=MsoCaption>Example 39: filter expression with type cast; will evaluate
to <code>null</code> for all non-<code>VipCustomer</code>
instances and thus return only instances of <code>VipCustomer</code></p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;page-break-after:avoid;
background:#D9D9D9'>http://host/service/Customers?$filter=Model.VipCustomer/PercentageOfVipPromotionProductsOrdered
gt 80</p>

</div>

<p class=MsoCaption>Example 40: expand the single related <code>Customer</code>
only if it is an instance of <code>Model.VipCustomer</code>. For
to-many relationships only <code>Model.VipCustomer</code>
instances would be inlined,</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;page-break-after:avoid;
background:#D9D9D9'>http://host/service/Orders?$expand=Customer/Model.VipCustomer</p>

</div>

<h2>##subsec Addressing a Subset of a
Collection</h2>

<p class=MsoNormal>Any resource path or path expression identifying a
collection can be appended with a filter path segment consisting of <code>/$filter</code> followed by parentheses containing a <a
href="#sec_ParameterAliases">parameter alias</a> or a filter expression
following the <code>filter</code> syntax rule in <a href="#ODataABNF">OData-ABNF</a>.
If the parentheses contain a parameter alias, a filter expression MUST be
assigned to the parameter alias in the query part of the request URL. If the
filter path segment appears in the resource path and the parentheses contain a
filter expression, that expression MUST NOT use forward slashes.</p>

<p class=MsoNormal>The collection will be restricted to instances matching the
filter expression assigned to the parameter alias and may be empty.&nbsp;</p>

<p class=MsoNormal>The <code>/$filter</code> path segment MAY
occur multiple times and it MAY be combined with the <a
href="#sec_SystemQueryOptionfilter"><code>$filter</code></a>
system query option.</p>

<p class=MsoCaption>Example 41: red products that cost less than 10  –
combining path segment and system query option</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>GET Products/$filter(@foo)?@foo=Price lt
10&amp;$filter=Color eq 'red'</p>

</div>

<p class=MsoCaption>Example 42: red products that cost less than 10 – combine
two path segments</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>GET Products/$filter(@p)/$filter(@c)?@p=Price
lt 10&amp;@c=Color eq 'red'</p>

</div>

<p class=MsoCaption>Example 43: categories with less than ten products older
than three</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>GET Categories?$filter=Products/$filter(Age
gt 3)/$count lt 10</p>

</div>

<p class=MsoNormal>Note that the <code>/$filter</code> path
segment filters the “input” to the operation, and the <code>$filter</code>
system query option filters the result of the operation, so the two can be used
interchangeably only for <code>GET</code> operations. For a <code>PATCH</code> operation, the <code>/$filter</code>
path segment is evaluated on the items <i>before</i> the modification and
determines which items are to be modified, whereas the <code>$filter</code>
system query option is evaluated <i>after</i> the modification and determines
which of the modified items are part of the response.</p>

<p class=MsoNormal>The <code>/$filter</code> path segment MAY be
followed by a path segment identifying a <a href="#sec_AddressingActions">bound
action</a> or <a href="#sec_AddressingFunctions">bound function</a> applicable
to the collection.</p>

<p class=MsoCaption>Example 44: invoke the <code>Special.Cluster</code>
action on all products older than 3 </p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>POST /service/Products/$filter(@foo)/Special.Cluster?@foo=Age
gt 3</p>

</div>

<h2>##subsec Addressing Each Member of a
Collection</h2>

<p class=MsoNormal>To apply a <code>PATCH</code> or <code>DELETE</code> request to each member of a collection, clients
append the path segment <code>/$each</code> to a resource path
identifying a collection.</p>

<p class=MsoNormal>To apply a <a href="#sec_AddressingActions">bound action</a>
or function to each member of a collection, clients append the path segment <code>/$each</code> followed by a path segment identifying the <a
href="#sec_AddressingActions">bound action</a> or function. The response is a
collection of instances of the result type of the bound operation. If the bound
operation returns a collection, the response is a collection of collections.
System query options applied to the response can use <a href="#sec_it"><code>$it</code></a> to reference an item in the
outermost collection, followed by <a href="#sec_any"><code>/any</code></a>, <a href="#sec_all"><code>/all</code></a>, or <a
href="#sec_AddressingtheCountofaCollection"><code>/$count</code></a>.&nbsp;</p>

<p class=MsoNormal>The resource path of the collection preceding <code>/$each</code> MAY contain <a href="#sec_AddressingDerivedTypes">type-cast</a>
or <a href="#sec_AddressingaSubsetofaCollection">filter path segments</a> to
subset the collection.</p>

<h2>##subsec Addressing the Media Stream of
a Media Entity</h2>

<p class=MsoNormal>To address the media stream represented by a media entity,
clients append <code>/$value</code> to the resource path of the
media entity URL. Services may redirect from this canonical URL to the source
URL of the media stream.</p>

<p class=MsoCaption>Example 45: request the media stream for the picture with
the key value <code>Sunset4321299432:</code></p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'><code>http://host/service/Pictures('Sunset4321299432')/$value</code></p>

</div>

<h2>##subsec Addressing the Cross Join
of Entity Sets</h2>

<p class=MsoNormal>In addition to querying related entities through navigation
properties defined in the entity model of a service, the cross join operator
allows querying across unrelated entity sets.</p>

<p class=MsoNormal>The cross join is addressed by appending the path segment <code>$crossjoin</code> to the <a href="#sec_ServiceRootURL">service root URL</a>, followed by the
parenthesized comma-separated list of joined entity sets. It returns the
Cartesian product of all the specified entity sets, represented as a collection
of instances of a virtual complex type. Each instance consists of one
non-nullable, single-valued navigation property per joined entity set. Each
such navigation property is named identical to the corresponding entity set,
with a target type equal to the declared entity type of the corresponding entity
set. </p>

<p class=MsoNormal>The <a href="#sec_SystemQueryOptionfilter"><code>$filter</code></a> and <a
href="#sec_SystemQueryOptionorderby"><code>$orderby</code></a><code> </code>query options can be specified using properties of the
entities in the selected entity sets, prepended with the entity set as the
navigation property name.</p>

<p class=MsoNormal>The <a href="#sec_SystemQueryOptionexpand"><code>$expand</code></a> query option can be
specified using the names of the selected entity sets as navigation property
names. If a selected entity set is not expanded, it MUST be represented using
the read URL of the related entity as a navigation link in the complex type instance.</p>

<p class=MsoNormal>The <a href="#sec_SystemQueryOptioncount"><code>$count</code></a>, <a
href="#sec_SystemQueryOptionstopandskip"><code>$skip</code></a>,
and <a href="#sec_SystemQueryOptionstopandskip"><code>$top</code></a>
query options can also be used with no special semantics.</p>

<p class=MsoCaption>Example 46: if <code>Sales</code> had a
structural property <code>ProductID</code> instead of a
navigation property <code>Product</code>, a “cross join” between
<code>Sales</code> and <code>Products</code>
could be addressed</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;page-break-after:avoid;
background:#D9D9D9'>http://host/service/$crossjoin(Products,Sales)?$filter=Products/ID
eq Sales/ProductID                 </p>

</div>

<p class=MsoCaption>and would result in </p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'><span
style='color:black'>{<br>
  &quot;@odata.context&quot;:&quot;http://host/service/$metadata#</span><code>Collection(Edm.ComplexType)</code><span
style='color:black'>&quot;,<br>
  &quot;value&quot;:[<br>
    {<br>
      &quot;Products@odata.navigationLink&quot;:&quot;Products(0)&quot;,<br>
      &quot;Sales@odata.navigationLink&quot;:&quot;Sales(42)&quot;,<br>
    },<br>
    {<br>
      &quot;Products@odata.navigationLink&quot;:&quot;Products(0)&quot;,<br>
      &quot;Sales@odata.navigationLink&quot;:&quot;Sales(57)&quot;,<br>
    },<br>
    ...<br>
    {<br>
      &quot;Products@odata.navigationLink&quot;:&quot;Products(99)&quot;,<br>
      &quot;Sales@odata.navigationLink&quot;:&quot;Sales(21)&quot;,<br>
    }<br>
  ]</span></p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>}</p>

</div>

<h2>##subsec Addressing All Entities in a
Service</h2>

<p class=MsoNormal>The symbolic resource <code>$all</code>,
located at the service root,
identifies the collection of all entities in a service, i.e. the union of all
entity sets plus all singletons.</p>

<p class=MsoNormal>This symbolic resource is of type <code>Collection(Edm.EntityType)</code>
and allows the <a href="#sec_SystemQueryOptionsearch"><code>$search</code></a> system query option plus all other query
options applicable to collections of entities.</p>

<p class=MsoNormal>The <code>$all</code> resource can be appended
with a path segment containing the qualified name of an entity type in order to
restrict the collections to entities of that type. Query options such as <a
href="#sec_SystemQueryOptionselect"><code>$select</code></a>,
<a href="#sec_SystemQueryOptionfilter"><code>$filter</code></a>,
<a href="#sec_SystemQueryOptionexpand"><code>$expand</code></a>,
and <a href="#sec_SystemQueryOptionorderby"><code>$orderby</code></a>
can be applied to this restricted set according to the specified type.</p>

<p class=MsoCaption>Example 47: all entities in a service that somehow match <code>red</code></p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>http://host/service/$all?$search=red</p>

</div>

<p class=MsoCaption><a name="_Toc371341748">Example </a>48: all <code>Customer</code> entities in a service whose name contains <code>red</code></p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>http://host/service/$all/Model.Customer?$filter=contains(Name,'red')</p>

</div>

<h2>##subsec Passing Query Options in the
Request Body</h2>

<p class=MsoNormal>The query options part of an OData URL can be quite long,
potentially exceeding the maximum length of URLs supported by components
involved in transmitting or processing the request. One way to avoid this is
wrapping the request in a batch request, which has the penalty of needing to
construct a well-formed batch request body.</p>

<p class=MsoNormal>An easier alternative for <code>GET</code>
requests is to append <code>/$query</code> to the resource path
of the URL, use the <code>POST</code> verb instead of <code>GET</code>, and pass the query options part of the URL in the
request body.</p>

<p class=MsoNormal>Requests to paths ending in <code>/$query</code>
MUST use the <code>POST</code> verb. Query options specified in
the request body and query options specified in the request URL are processed
together.</p>

<p class=MsoNormal>The request body MUST use the content-type <code>text/plain</code>. It contains the query portion of the URL and
MUST use the same percent-encoding as in URLs (especially: no spaces, tabs, or
line breaks allowed) and MUST follow the syntax rules described in chapter
Query Options.</p>

<p class=MsoCaption>Example 49: passing a filter condition in the request body</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;page-break-after:avoid;
background:#D9D9D9'>POST http://host/service/People/$query</p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;page-break-after:avoid;
background:#D9D9D9'>Content-Type:
text/plain</p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;page-break-after:avoid;
background:#D9D9D9'>&nbsp;</p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;page-break-after:avoid;
background:#D9D9D9'>$filter=[FirstName,LastName]%20in%20[[&quot;John&quot;,&quot;Doe&quot;],[&quot;Jane&quot;,&quot;Smith&quot;]]</p>

</div>



<h1>##sec Query Options</h1>



<p class=MsoNormal>The query options part of an OData URL specifies three types
of information: <a href="#sec_SystemQueryOptions">system query options</a>, <a
href="#sec_CustomQueryOptions">custom query options</a>, and <a
href="#sec_ParameterAliases">parameter aliases</a>. All OData services MUST
follow the query string parsing and construction rules defined in this section
and its subsections.</p>

<h2>##subsec System Query Options</h2>

<p class=MsoNormal>System query options are query string parameters that
control the amount and order of the data returned for the resource identified
by the URL. The names of all system query options are optionally prefixed with
a dollar (<code>$</code>) character. 4.01 Services MUST support
case-insensitive system query option names specified with or without the <code>$
</code>prefix. Clients that want to work with 4.0 services MUST use
lower case names and specify the <code>$</code> prefix.</p>

<p class=MsoNormal>For <code>GET</code>, <code>PATCH</code>,
and <code>PUT</code> requests the following rules apply:</p>

<p class=MsoNormal style='margin-left:21.3pt;text-indent:-14.2pt'><span
style='font-family:Symbol'>· </span>Resource paths identifying a single entity, a complex type
instance, a collection of entities, or a collection of complex type instances
allow <a href="#sec_SystemQueryOptioncompute"><code>$compute</code></a>,
<a href="#sec_SystemQueryOptionexpand"><code>$expand</code></a>
and <a href="#sec_SystemQueryOptionselect"><code>$select</code></a>.
</p>

<p class=MsoNormal style='margin-left:21.3pt;text-indent:-14.2pt'><span
style='font-family:Symbol'>· </span>Resource paths identifying a collection allow <a
href="#sec_SystemQueryOptionfilter"><code>$filter</code></a>,
<a href="#sec_SystemQueryOptionsearch"><code>$search</code></a>,
<a href="#sec_SystemQueryOptioncount"><code>$count</code></a>,
<a href="#sec_SystemQueryOptionorderby"><code>$orderby</code></a>,
<a href="#sec_SystemQueryOptionstopandskip"><code>$skip</code></a>,
and <a href="#sec_SystemQueryOptionstopandskip"><code>$top</code></a>.
</p>

<p class=MsoNormal style='margin-left:21.3pt;text-indent:-14.2pt'><span
style='font-family:Symbol'>· </span>Resource paths ending in <code>/$count</code>
allow <a href="#sec_SystemQueryOptionfilter"><code>$filter</code></a>
and <a href="#sec_SystemQueryOptionsearch"><code>$search</code></a>.</p>

<p class=MsoNormal style='margin-left:21.3pt;text-indent:-14.2pt'><span
style='font-family:Symbol'>· </span>Resource paths not ending in <code>/$count</code>
or <code>/$batch</code> allow <a
href="#sec_SystemQueryOptionformat"><code>$format</code></a>.</p>

<p class=MsoNormal>For <code>POST</code> requests to an action
URL the return type of the action determines the applicable system query
options that a service MAY support, following the same rules as <code>GET</code> requests.</p>

<p class=MsoNormal><code>POST</code> requests to an entity set
follow the same rules as <code>GET</code> requests that return a
single entity.</p>

<p class=MsoNormal><code>System
query options SHOULD NOT be applied to a DELETE</code>
request.</p>

<p class=MsoNormal>An OData service may support some or all of the system query
options defined. If a data service does not support a system query option, it
MUST reject any request that contains the unsupported option.</p>

<p class=MsoNormal>The same system query option, irrespective of casing or
whether or not it is prefixed with a <code>$</code>, MUST NOT be
specified more than once for any resource.</p>

<p class=MsoNormal>The semantics of all system query options are defined in the
<a href="#odata">OData-Protocol</a> document.</p>

<p class=MsoNormal>The grammar and syntax rules for system query options are
defined in <a href="#ODataABNF">OData-ABNF</a>.</p>

<p class=MsoNormal>Dynamic properties can be used in the same way as declared
properties. If they are not defined on an instance, they evaluate to <code>null</code>.</p>

<h3>##subsubsec Common
Expression Syntax</h3>

<p class=MsoNormal>The following operators, functions, and literals can be used
in <code>$filter</code>, <code>$orderby</code>,
and <code>$compute</code> expressions.</p>

<p class=MsoNormal>The <a href="#ODataABNF">OData-ABNF</a> <code>commonExpr</code> syntax rule defines the formal grammar of
common expressions.</p>

<h4>##subsubsubsec Logical Operators</h4>

<p class=MsoNormal>OData defines a set of logical operators that evaluate to
true or false (i.e. a <code>boolCommonExpr</code> as defined in <a
href="#ODataABNF">OData-ABNF</a>). Logical operators are typically used to
filter a collection of resources.</p>

<p class=MsoNormal>The syntax rules for the logical operators are defined in <a
href="#ODataABNF">OData-ABNF</a>.  4.01 Services MUST support
case-insensitive operator names. Clients that want to work with 4.0 services
MUST use lower case operator names.</p>

<p class=MsoNormal>The six comparison operators can be used with all primitive
values except <code>Edm.Binary</code>, <code>Edm.Stream</code>,
and the <code>Edm.Geo</code> types. <code>Edm.Binary</code>,
<code>Edm.Stream</code>, and the <code>Edm.Geo</code>
types can only be compared to the <code>null</code> value using
the <a href="#sec_Equals"><code>eq</code></a>
and <a href="#sec_NotEquals"><code>ne</code></a>
operators.</p>

<p class=MsoNormal>When applied to operands of numeric types, <a
href="#sec_NumericPromotion">numeric promotion</a> rules are applied. </p>

<p class=MsoNormal>The <code>eq</code>,
<code>ne</code>, and <code>in</code> operators
can be used with collection-valued operands, and the <code>eq</code>
and <code>ne</code> operators can be used with structured
operands.</p>

<h5>##subsubsubsubsec Equals</h5>

<p class=MsoNormal>The <code>eq</code> operator returns true if
the left operand is equal to the right operand, otherwise it returns false.</p>

<p class=MsoNormal>When applied to operands of entity types, the <code>eq</code> operator returns true if both operands represent the
same entity, or both operands represent null. </p>

<p class=MsoNormal>When applied to operands of complex types, the <code>eq</code> operator returns true if both operands have the same
structure and same values, or both operands represent null. </p>

<p class=MsoNormal>When applied to ordered collections, the <code>eq</code> operator returns true if both operands have the same
cardinality and each member of the left operand is equal to the corresponding
member of the right operand.</p>

<p class=MsoNormal>For services that support comparing unordered collections, the
<code>eq</code> operator returns true if both operands are equal
after applying the same ordering on both collections. </p>

<p class=MsoNormal>Each of the special values <code>null</code>,
<code>-INF</code>, and <code>INF</code> is equal
to itself, and only to itself.</p>

<p class=MsoNormal>The special value <code>NaN</code> is not
equal to anything, even to itself.</p>

<h5>##subsubsubsubsec Not Equals</h5>

<p class=MsoNormal>The <code>ne</code> operator returns true if
the left operand is not equal to the right operand, otherwise it returns false.</p>

<p class=MsoNormal><a name=greater-than-operatorurl5.1.2.1.3>When applied to
operands of entity types, the </a><code>ne</code> operator
returns true if the two operands do not represent the same entity. </p>

<p class=MsoNormal>When applied to operands of complex types, the <code>ne</code> operator returns true if the operands do not have the
same structure and same values. </p>

<p class=MsoNormal>When applied to ordered collections, the <code>ne</code> operator returns true if both operands do not have the
same cardinality or any member of the left operand is not equal to the
corresponding member of the right operand.</p>

<p class=MsoNormal>For services that support comparing unordered collections, the
<code>ne</code> operator returns true if both operands do not
have the same cardinality or do not contain the same members, in any order. </p>

<p class=MsoNormal>Each of the special values <code>null</code>,
<code>-INF</code>, and <code>INF</code> is not
equal to any value but itself.</p>

<p class=MsoNormal>The special value <code>NaN</code> is not
equal to anything, even to itself.</p>

<p class=MsoNormal>The <code>null</code>
value is not equal to any value but itself.</p>

<h5>##subsubsubsubsec Greater Than</h5>

<p class=MsoNormal>The <code>gt</code> operator returns true if
the left operand is greater than the right operand, otherwise it returns false.</p>

<p class=MsoNormal>The special value <code>INF</code> is greater
than any number, and any number is greater than <code>-INF</code>.</p>

<p class=MsoNormal>The Boolean value <code>true</code> is
greater than <code>false</code>.</p>

<p class=MsoNormal>Services SHOULD order language-dependent strings according
to the content-language of the response, and SHOULD annotate string properties
with language-dependent order with the term <a
href="https://github.com/oasis-tcs/odata-vocabularies/blob/master/vocabularies/Org.OData.Core.V1.md#IsLanguageDependent"><code>Core.IsLanguageDependent</code></a>, see <a href="#ODataVocCore">OData-VocCore</a>.</p>

<p class=MsoNormal>If any operand is <code>null</code>, the
operator returns false.</p>

<h5>##subsubsubsubsec Greater Than or Equal</h5>

<p class=MsoNormal>The <code>ge</code> operator returns true if
the left operand is greater than or equal to the right operand, otherwise it
returns false.</p>

<p class=MsoNormal>See rules for <a href="#sec_GreaterThan"><code>gt</code></a> and <a href="#sec_Equals"><code>eq</code></a> for details.</p>

<h5>##subsubsubsubsec Less Than</h5>

<p class=MsoNormal>The <code>lt</code> operator returns true if
the left operand is less than the right operand, otherwise it returns false.</p>

<p class=MsoNormal>The special value <code>-INF</code> is less
than any number, and any number is less than <code>INF</code>.</p>

<p class=MsoNormal>The Boolean value <code>false</code> is less
than <code>true</code>.</p>

<p class=MsoNormal><a name=less-than-or-equal-operatorurl5.1.2.1.6>Services
SHOULD order language-dependent strings according to the content-language of
the response, and SHOULD annotate string properties with language-dependent
order with the term </a><a
href="https://github.com/oasis-tcs/odata-vocabularies/blob/master/vocabularies/Org.OData.Core.V1.md#IsLanguageDependent"><code>Core.IsLanguageDependent</code></a>, see <a href="#ODataVocCore">OData-VocCore</a>.</p>

<p class=MsoNormal>If any operand is <code>null</code>, the
operator returns false.</p>

<h5>##subsubsubsubsec Less Than or Equal</h5>

<p class=MsoNormal>The <code>le</code> operator returns true if
the left operand is less than or equal to the right operand, otherwise it
returns false.</p>

<p class=MsoNormal>See rules for <a href="#sec_LessThan"><code>lt</code></a> and <a href="#sec_Equals"><code>eq</code></a> for details.</p>

<h5>##subsubsubsubsec And</h5>

<p class=MsoNormal>The <code>and</code> operator returns true if
both the left and right operands evaluate to true, otherwise it returns false.</p>

<p class=MsoNormal>The <code>null</code> value is treated as
unknown, so if one operand evaluates to <code>null</code> and the
other operand to false, the <code>and</code> operator returns
false. All other combinations with <code>null</code> return <code>null</code>.</p>

<h5>##subsubsubsubsec Or</h5>

<p class=MsoNormal>The <code>or</code> operator returns false if
both the left and right operands both evaluate to false, otherwise it returns
true.</p>

<p class=MsoNormal>The <code>null</code> value is treated as
unknown, so if one operand evaluates to <code>null</code> and the
other operand to true, the <code>or</code> operator returns
true. All other combinations with <code>null</code> return <code>null</code>.</p>

<h5>##subsubsubsubsec Not</h5>

<p class=MsoNormal>The <code>not</code> operator returns true if
the operand returns false, otherwise it returns false.</p>

<p class=MsoNormal>The <code>null</code> value is treated as
unknown, so <code>not null</code> returns <code>null</code>.</p>

<h5>##subsubsubsubsec Has</h5>

<p class=MsoNormal>The <code>has</code> operator returns true if
the right operand is an enumeration value whose flag(s) are set on the left
operand.</p>

<p class=MsoNormal>The <code>null</code> value is treated as
unknown, so if one operand evaluates to <code>null</code>, the <code>has</code> operator returns <code>null</code>.</p>

<h5>##subsubsubsubsec In</h5>

<p class=MsoNormal>The <code>in</code> operator returns true if
the left operand is a member of the right operand. The right operand MUST be
either a comma-separated list of primitive values, enclosed in parentheses, or
a single expression that resolves to a collection.</p>

<h5>##subsubsubsubsec Logical Operator Examples</h5>

<p class=MsoNormal style='page-break-after:avoid'>The following examples
illustrate the use and semantics of each of the logical operators. </p>

<p class=MsoCaption>Example 50: all products with a <code>Name</code>
equal to '<code>Milk'</code></p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>http://host/service/Products?$filter=Name
eq 'Milk'</p>

</div>

<p class=MsoCaption>Example 51: all products with a <code>Name</code>
not equal to '<code>Milk'</code></p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>http://host/service/Products?$filter=Name
ne 'Milk'</p>

</div>

<p class=MsoCaption>Example 52: all products with a Name greater than 'Milk':</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>http://host/service/Products?$filter=Name
gt 'Milk'</p>

</div>

<p class=MsoCaption>Example 53: all products with a Name greater than or equal
to 'Milk':</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>http://host/service/Products?$filter=Name
ge 'Milk'</p>

</div>

<p class=MsoCaption>Example 54: all products with a Name less than 'Milk':</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>http://host/service/Products?$filter=Name
lt 'Milk'</p>

</div>

<p class=MsoCaption>Example 55: all products with a Name less than or equal to
'Milk':</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>http://host/service/Products?$filter=Name
le 'Milk'<code> </code></p>

</div>

<p class=MsoCaption>Example 56: all products with the Name 'Milk' that also
have a Price less than 2.55:</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>http://host/service/Products?$filter=Name
eq 'Milk' and Price lt 2.55</p>

</div>

<p class=MsoCaption>Example 57: all products that either have the Name 'Milk'
or have a Price less than 2.55:</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>http://host/service/Products?$filter=Name
eq 'Milk' or Price lt 2.55</p>

</div>

<p class=MsoCaption>Example 58: all products that do not have a Name that ends
with 'ilk':</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;page-break-after:avoid;
background:#D9D9D9'>http://host/service/Products?$filter=not
endswith(Name,'ilk')</p>

</div>

<p class=MsoCaption><a name=arithmetic-operatorsurl5.1.2.2>Example </a>59:
all products whose <code>style</code> value includes <code>Yellow</code>:</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;page-break-after:avoid;
background:#D9D9D9'>http://host/service/Products?$filter=style
has Sales.Pattern'Yellow'</p>

</div>

<p class=MsoCaption><a name="_Toc371341763">Example </a>60: all products whose <code>name</code> value is ‘Milk’ or ‘Cheese’:</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;page-break-after:avoid;
background:#D9D9D9'>http://host/service/Products?$filter=Name
in ('Milk', 'Cheese')</p>

</div>

<h4>##subsubsubsec Arithmetic Operators</h4>

<p class=MsoNormal>OData defines a set of arithmetic operators that require
operands that evaluate to numeric types. Arithmetic operators are typically
used to filter a collection of resources. However, services MAY allow using
arithmetic operators with the <a href="#sec_SystemQueryOptionorderby"><code>$orderby</code></a> system query option.</p>

<p class=MsoNormal>If an operand of an arithmetic operator is null, the result
is null.</p>

<p class=MsoNormal>The syntax rules for the arithmetic operators are defined in
<a href="#ODataABNF">OData-ABNF</a>. 4.01 Services MUST support
case-insensitive operator names. Clients that want to work with 4.0 services
MUST use lower case operator names.</p>

<h5>##subsubsubsubsec <a
href="#sec_Addition">Addition</a> </h5>

<p class=MsoNormal>The <code>add</code> operator adds the left
and right numeric operands.</p>

<p class=MsoNormal>For operands of
type <code>Edm.Decimal</code> the scale of the result is scaleof(A add B) = max(scaleof(A),
scaleof(B)), or variable if any operand has variable scale.<span
style='color:#333333'><br>
<br>
</span></p>

<p class=MsoNormal>The <code>add</code> operator is also valid
for the following time-related operands:</p>

<p class=MsoNormal style='margin-left:21.3pt;text-indent:-14.2pt'><span
style='font-family:Symbol'>· </span><code>DateTimeOffset add Duration</code> results
in a <code>DateTimeOffset</code>&nbsp;</p>

<p class=MsoNormal style='margin-left:21.3pt;text-indent:-14.2pt'><span
style='font-family:Symbol'>· </span><code>Duration add Duration</code> results in a <code>Duration</code>&nbsp;</p>

<p class=MsoNormal style='margin-left:21.3pt;text-indent:-14.2pt'><span
style='font-family:Symbol'>· </span><code>Date add Duration</code> results in a <code>Date</code></p>

<p class=MsoNormal><a
name="_Toc371341765">The rules for time-related operands are defined in </a><a
href="#BMXMLSchema2"><b>[XML&#8209;Schema&#8209;2]</b></a>, section E.3.3.
Specifically, for adding a duration to a date: </p>

<p class=MsoNormal style='margin-left:21.3pt;text-indent:-14.2pt'><span
class=Datatype><span style='font-family:Symbol'>· </span></span><code>Convert
date to datetime (in any timezone) with a zero time component </code></p>

<p class=MsoNormal style='margin-left:21.3pt;text-indent:-14.2pt'><span
class=Datatype><span style='font-family:Symbol'>· </span></span><code>Add/subtract
duration </code></p>

<p class=MsoNormal style='margin-left:21.3pt;text-indent:-14.2pt'><span
style='font-family:Symbol'>· </span><code>Convert
to date by removing the time and timezone components </code></p>

<p class=MsoNormal>Thus, today plus a positive duration smaller than one day is
today; today minus a positive duration smaller than one day is yesterday.</p>

<h5>##subsubsubsubsec <a href="#sec_Subtraction">Subtraction</a> </h5>

<p class=MsoNormal>The <code>sub</code> operator subtracts the
right numeric operand from the left numeric operand.</p>

<p class=MsoNormal>For operands of
type <code>Edm.Decimal</code> the scale of the result is scaleof(A sub B) = max(scaleof(A),
scaleof(B)), or variable if any operand has variable scale.</p>

<p class=MsoNormal>The <code>sub</code> operator is also valid
for the following time-related operands:</p>

<p class=MsoNormal style='margin-left:21.3pt;text-indent:-14.2pt'><span
style='font-family:Symbol'>· </span><code>DateTimeOffset</code> <code>sub</code>
<code>Duration</code> results in a <code>DateTimeOffset</code>&nbsp;</p>

<p class=MsoNormal style='margin-left:21.3pt;text-indent:-14.2pt'><span
style='font-family:Symbol'>· </span><code>Duration sub Duration</code> results in a <code>Duration</code>&nbsp;</p>

<p class=MsoNormal style='margin-left:21.3pt;text-indent:-14.2pt'><span
style='font-family:Symbol'>· </span><code>DateTimeOffset sub DateTimeOffset</code>
results in a <code>Duration</code>&nbsp;</p>

<p class=MsoNormal style='margin-left:21.3pt;text-indent:-14.2pt'><span
style='font-family:Symbol'>· </span><code>Date sub Duration</code> results in a <code>Date</code></p>

<p class=MsoNormal style='margin-left:21.3pt;text-indent:-14.2pt'><span
style='font-family:Symbol'>· </span><code>Date sub Date</code> results in a <code>Duration</code>&nbsp;</p>

<p class=MsoNormal><a name="_Toc371341766">The rules for time-related operands
are defined in </a><a href="#BMXMLSchema2"><b>[XML&#8209;Schema&#8209;2]</b></a>,
section E.3.3. Specifically for subtracting a duration from a date see the
preceding <a href="#sec_Addition">section</a>.</p>

<h5>##subsubsubsubsec <a href="#sec_Negation">Negation</a> </h5>

<p class=MsoNormal>The negation operator, represented by a minus (<code>-</code>) sign, changes the sign of its numeric or <code>Duration</code> operand.</p>

<h5>##subsubsubsubsec <a
href="#sec_Multiplication">Multiplication</a> </h5>

<p class=MsoNormal>The <code>mul</code> operator multiplies the
left and right numeric operands. The
<code>mul</code><span style='color:#333333;background:
white'> operator is also valid for multiplying a </span><code>Duration</code> value with a numeric value.</p>

<p class=MsoNormal>For operands of
type <code>Edm.Decimal</code> the scale of the result is scaleof(A mul B) = scaleof(A) + scaleof(B),
floating if any operand has floating scale, or else variable if any operand has
variable scale.</p>

<h5>##subsubsubsubsec <a href="#sec_Division">Division</a> </h5>

<p class=MsoNormal>The <code>div</code> and<code> divby</code>
operators divide the left numeric operand by the right numeric operand. They are also valid for dividing a <code>Duration</code>
value by a numeric value. </p>

<p class=MsoNormal>If the left operand is of type <code>Edm.Decimal</code>
with floating scale, <code>Edm.Double</code>, or <code>Edm.Single</code>, then positive <code>div</code>
zero returns <code>INF</code>, negative <code>div</code>
zero returns <code>-INF</code>, and zero <code>div</code>
zero returns <code>NaN</code>. For all other types the request
fails.</p>

<p class=MsoNormal><a
name="_Toc371341769">For operands of
type </a><code>Edm.Decimal</code> <span style='color:
#333333;background:white'>the result is computed with maximal decimal scale. If
any operand has floating scale, the result has floating scale, else if any
operand has variable scale, the result has variable scale. Otherwise the
resulting scale is service-specific, and clients can use </span><code>cast</code> to
force the result to a specific scale. </p>

<p class=MsoNormal>The <code>div</code> and<code>
divby</code> operators differ in their handling of integers. If both operands
to <code>div</code> are of an integer type, the result is an
integer representing the whole number of times the right operator fits into the
left operator. The <code>divby</code> operator, on the other
hand, promotes both operands to decimal before computing the result, may yield
a fractional result, and does not fail for <code>divby</code>
zero, returning <code>-INF</code>, <code>INF</code>,
or <code>NaN depending on the sign of the left operand.</code></p>

<h5>##subsubsubsubsec <a href="#sec_Modulo">Modulo</a> </h5>

<p class=MsoNormal>The <code>mod</code> operator returns the
remainder when the left numeric operand is divided by the right numeric
operand.  The sign of the result is the same as the sign of the left operand.
If the right operand is zero, the request fails. </p>

<p class=MsoNormal>For operands of
type <code>Edm.Decimal</code> the scale of the result is scaleof(A mod B) = max(scaleof(A),
scaleof(B)), or variable if any operand has variable scale.</p>

<h5>##subsubsubsubsec Arithmetic Operator Examples</h5>

<p class=MsoNormal style='page-break-after:avoid'>The following examples
illustrate the use and semantics of each of the Arithmetic operators.</p>

<p class=MsoCaption>Example 61: all products with a Price of 2.55:</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>http://host/service/Products?$filter=Price
add 2.45 eq 5.00</p>

</div>

<p class=MsoCaption>Example 62: all products with a Price of 2.55:</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>http://host/service/Products?$filter=Price
sub 0.55 eq 2.00</p>

</div>

<p class=MsoCaption>Example 63: all products with a Price of 2.55:</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>http://host/service/Products?$filter=Price
mul 2.0 eq 5.10<code> </code></p>

</div>

<p class=MsoCaption>Example 64: all products with a Price of 2.55:</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>http://host/service/Products?$filter=Price
div 2.55 eq 1</p>

</div>

<p class=MsoCaption>Example 65: all products with an integer Rating value of 4
or 5:</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>http://host/service/Products?$filter=Rating
div 2 eq 2</p>

</div>

<p class=MsoCaption>Example 66: all products with an integer Rating value of 5:</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>http://host/service/Products?$filter=Rating
divby 2 eq 2.5</p>

</div>

<p class=MsoCaption>Example 67: all products with a Rating exactly divisible by
5:</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>http://host/service/Products?$filter=Rating
mod 5 eq 0</p>

</div>

<h4>##subsubsubsec <a href="#sec_Grouping">Grouping</a> </h4>

<p class=MsoNormal style='page-break-after:avoid'>The Grouping operator (open
and close parenthesis “<code>( )</code>”) controls the
evaluation order of an expression. The Grouping operator returns the expression
grouped inside the parenthesis. </p>

<p class=MsoCaption>Example 68: all products because 9 mod 3 is 0</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;page-break-after:avoid;
background:#D9D9D9'>http://host/service/Products?$filter=(4
add 5) mod (4 sub 1) eq 0</p>

</div>

<h4>##subsubsubsec Canonical
Functions</h4>

<p class=MsoNormal>In addition to operators, a set of functions is also defined
for use with the <a href="#sec_SystemQueryOptioncompute"><code>$compute</code></a>, <code>$filter</code>
or <a href="#sec_SystemQueryOptionorderby"><code>$orderby</code></a>
system query options, or in <a href="#sec_ParameterAliases">parameter alias</a>
values. The following sections describe the available functions. Note: ISNULL
or COALESCE operators are not defined. Instead, OData defines a <a
href="#sec_null"><code>null</code></a>
literal that can be used in comparisons.</p>

<p class=MsoNormal>If a parameter of a canonical function is <code>null</code>, the function returns <code>null</code>.</p>

<p class=MsoNormal>The syntax rules for all functions are defined in<b> </b><a
href="#ODataABNF">OData-ABNF</a>. 4.01 Services MUST support
case-insensitive canonical function names. Clients that want to work with 4.0
services MUST use lower case canonical function names.</p>

<h4>##subsubsubsec String and Collection Functions</h4>

<h5>##subsubsubsubsec <code>concat</code></h5>

<p class=MsoNormal>The <code>concat</code> function has three
overloads, with the following signatures:</p>

<p class=SourceCode><span class=VerbatimChar>Edm.String
concat(Edm.String,Edm.String)<br>
Collection concat(Collection,Collection)<br>
OrderedCollection concat(OrderedCollection,OrderedCollection)</span></p>

<p class=MsoNormal>The <code>concat</code> function with string
parameter values returns a string that appends the second parameter string
value to the first. </p>

<p class=MsoNormal>The concat function with collection parameter values returns
a collection that appends all items of the second collection to the first. If
both collections are ordered, the result is also ordered.</p>

<p class=MsoNormal>The <code>concatMethodCallExpr</code> syntax
rule defines how the <code>concat</code> function is invoked.</p>

<p class=MsoCaption>Example 69: all customers from Berlin, Germany</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;page-break-after:avoid;
background:#D9D9D9'>http://host/service/Customers?$filter=concat(concat(City,',
'),Country) eq 'Berlin, Germany'</p>

</div>

<h5>##subsubsubsubsec <code>contains</code></h5>

<p class=MsoNormal>The <code>contains</code> function has two
overloads, with the following signatures:</p>

<p class=SourceCode><span class=VerbatimChar>Edm.Boolean
contains(Edm.String,Edm.String)<br>
Edm.Boolean contains(OrderedCollection,OrderedCollection)</span></p>

<p class=MsoNormal>The <code>contains</code> function with
string parameter values returns true if the second string is a substring of the
first string, otherwise it returns false. String comparison is case-sensitive,
case-insensitive comparison can be achieved in combination with <a
href="#sec_tolower"><code>tolower</code></a> or
<a href="#sec_toupper"><code>toupper</code></a>.</p>

<p class=MsoNormal>The <code>contains</code> function with
ordered collection parameter values returns true if the first collection can be
transformed into the second collection by removing zero or more items from the
beginning or the end of the first collection.</p>

<p class=MsoNormal>The <code>containsMethodCallExpr</code>
syntax rule defines how the <code>contains</code> function is
invoked.</p>

<p class=MsoCaption>Example 70: all customers with a <code>CompanyName</code>
that contains <code>'Alfreds'</code></p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;page-break-after:avoid;
background:#D9D9D9'>http://host/service/Customers?$filter=contains(CompanyName,'Alfreds')</p>

</div>

<h5>##subsubsubsubsec <code>endswith</code></h5>

<p class=MsoNormal style='page-break-after:avoid'>The <code>endswith</code>
function has two overloads, with the following signatures:</p>

<p class=SourceCode><span class=VerbatimChar>Edm.Boolean endswith(Edm.String,Edm.String)
<br>
Edm.Boolean endswith(OrderedCollection,OrderedCollection)</span></p>

<p class=MsoNormal>The <code>endswith</code> function with
string parameter values returns true if the first string ends with the second
string, otherwise it returns false. String comparison is case-sensitive,
case-insensitive comparison can be achieved in combination with <a
href="#sec_tolower"><code>tolower</code></a> or
<a href="#sec_toupper"><code>toupper</code></a>.</p>

<p class=MsoNormal>The <code>endswith</code> function with
ordered collection parameter values returns true if the first collection can be
transformed into the second collection by removing zero or more items from the
beginning of the first collection.</p>

<p class=MsoNormal>The <code>endsWithMethodCallExpr</code>
syntax rule defines how the <code>endswith</code> function is
invoked.</p>

<p class=MsoCaption>Example 71: all customers with a <code>CompanyName</code>
that ends with <code>'Futterkiste'</code></p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;page-break-after:avoid;
background:#D9D9D9'>http://host/service/Customers?$filter=endswith(CompanyName,'Futterkiste')</p>

</div>

<h5>##subsubsubsubsec <code>indexof</code></h5>

<p class=MsoNormal>The <code>indexof</code> function has two
overloads, with the following signatures:</p>

<p class=SourceCode><span class=VerbatimChar>Edm.Int32
indexof(Edm.String,Edm.String) <br>
Edm.Int32 indexof(OrderedCollection,OrderedCollection)</span></p>

<p class=MsoNormal>The <code>indexof</code> function with string
parameter values returns the zero-based character position of the first
occurrence of the second string in the first string, or -1 if the first string
does not contain the second string. String comparison is case-sensitive,
case-insensitive comparison can be achieved in combination with <a
href="#sec_tolower"><code>tolower</code></a> or
<a href="#sec_toupper"><code>toupper</code></a>.</p>

<p class=MsoNormal>The <code>indexof</code> function with
ordered collection parameter values returns the zero-based index of the first
occurrence of the second collection in the first collection, or -1 if the first
collection does not contain the second collection.</p>

<p class=MsoNormal>The <code>indexOfMethodCallExpr</code> syntax
rule defines how the <code>indexof</code> function is invoked.</p>

<p class=MsoCaption>Example 72: all customers with a <code>CompanyName</code>
containing '<code>lfreds'</code> starting at the second character</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;page-break-after:avoid;
background:#D9D9D9'>http://host/service/Customers?$filter=indexof(CompanyName,'lfreds')
eq 1</p>

</div>

<h5>##subsubsubsubsec <code>length</code></h5>

<p class=MsoNormal>The <code>length</code> function has two
overloads, with the following signatures:</p>

<p class=SourceCode><span class=VerbatimChar>Edm.Int32 length(Edm.String)<br>
Edm.Int32 length(Collection)</span></p>

<p class=MsoNormal>The <code>length</code> function with a
string parameter value returns the number of characters in the string.</p>

<p class=MsoNormal>The <code>length</code> function with a
collection parameter value returns the number of itens in the collection. </p>

<p class=MsoNormal>The <code>lengthMethodCallExpr</code> syntax
rule defines how the <code>length</code> function is invoked.</p>

<p class=MsoCaption>Example 73: all customers with a <code>CompanyName</code>
that is 19 characters long</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;page-break-after:avoid;
background:#D9D9D9'>http://host/service/Customers?$filter=length(CompanyName)
eq 19</p>

</div>

<h5>##subsubsubsubsec <code>startswith</code></h5>

<p class=MsoNormal>The <code>startswith</code> function has two
overloads, with the following signatures:</p>

<p class=SourceCode><span class=VerbatimChar>Edm.Boolean
startswith(Edm.String,Edm.String) <br>
Edm.Boolean startswith(Collection,Collection)</span></p>

<p class=MsoNormal>The <code>startswith</code> function with
string parameter values returns true if the first string starts with the second
string, otherwise it returns false. String comparison is case-sensitive,
case-insensitive comparison can be achieved in combination with <a
href="#sec_tolower"><code>tolower</code></a> or
<a href="#sec_toupper"><code>toupper</code></a>.</p>

<p class=MsoNormal>The <code>startswith</code> function with
ordered collection parameter values returns true if the first collection can be
transformed into the second collection by removing zero or more items from the
end of the first collection.</p>

<p class=MsoNormal>The <code>startsWithMethodCallExpr</code>
syntax rule defines how the <code>startswith</code> function is
invoked.</p>

<p class=MsoCaption>Example 74: all customers with a <code>CompanyName</code>
that starts with <code>'Alfr'</code></p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;page-break-after:avoid;
background:#D9D9D9'>http://host/service/Customers?$filter=startswith(CompanyName,'Alfr')</p>

</div>

<h5>##subsubsubsubsec <code>substring</code></h5>

<p class=MsoNormal>The <code>substring</code> function has four
overloads, with the following signatures:</p>

<p class=SourceCode><code>Edm.String
substring(Edm.String,Edm.Int32)</code><br>
<span class=VerbatimChar>Edm.String substring(Edm.String,Edm.Int32,Edm.Int32)<br>
OrderedCollection substring(OrderedCollection,Edm.Int32)<br>
OrderedCollection substring(OrderedCollection,Edm.Int32,Edm.Int32)</span></p>

<p class=MsoNormal>The two-argument <code>substring</code>
function with string parameter values returns a substring of the first
parameter string value, starting at the Nth character and finishing at the last
character (where N is the second parameter integer value). The three-argument <code>substring</code> function with string parameter values returns a
substring of the first parameter string value identified by selecting up to M
characters starting at the Nth character (where N is the second parameter
integer value and M is the third parameter integer value).</p>

<p class=MsoNormal>The two-argument <code>substring</code>
function with ordered collection parameter values returns an ordered collection
consisting of all items of the first collection starting at the Nth item and
finishing at the last item. The three-argument <code>substring</code>
function with ordered collection parameter values returns an ordered collection
consisting of up to M items of the first collection starting at the Nth item
(where N is the second parameter integer value and M is the third parameter
integer value).</p>

<p class=MsoNormal>The start index N is zero-based.</p>

<p class=MsoNormal>If the start
index N is larger than the length of the string/collection, an empty string/collection
is returned.</p>

<p class=MsoNormal>If the length M
is larger than the length of the remaining string/collection starting at the
Nth character/item, as many characters/items as are available are returned.</p>

<p class=MsoNormal>A negative
length M is a bad request.</p>

<p class=MsoNormal>A negative
start index N, if supported, returns a string/collection starting N
characters/items before the end of the string/collection. </p>

<p class=MsoNormal>The <code>substringMethodCallExpr</code>
syntax rule defines how the <code>substring</code> function is
invoked.</p>

<p class=MsoCaption>Example 75: all customers with a <code>CompanyName</code>
of <code>'lfreds Futterkiste'</code> once the first character
has been removed </p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;page-break-after:avoid;
background:#D9D9D9'>http://host/service/Customers?$filter=substring(CompanyName,1)
eq 'lfreds Futterkiste'</p>

</div>

<p class=MsoCaption>Example 76: all customers with a <code>CompanyName</code>
that has '<code>lf' </code>as the second and third characters,
e.g, '<code>Alfreds Futterkiste</code>'</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;page-break-after:avoid;
background:#D9D9D9'>http://host/service/Customers?$filter=substring(CompanyName,1,2)
eq 'lf'</p>

</div>

<h4>##subsubsubsec Collection Functions</h4>

<h5>##subsubsubsubsec <code>hassubset</code></h5>

<p class=MsoNormal style='page-break-after:avoid'>The <code>hassubset</code>
function has the following signature:</p>

<p class=SourceCode><code>Edm.Boolean hassubset(Collection,
Collection)</code></p>

<p class=MsoNormal>The <code>hassubset</code> function returns
true if the first collection can be transformed into the second collection by
reordering and/or removing zero or more items. The <code>hasSubsetMethodCallExpr</code>
syntax rule defines how the <code>hassubset</code> function is
invoked.</p>

<p class=MsoCaption>Example 77: <code>hassubset</code>
expressions that return true</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;page-break-after:avoid;
background:#D9D9D9'>hassubset([4,1,3],[4,1,3])</p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;page-break-after:avoid;
background:#D9D9D9'>hassubset([4,1,3],[1,3,4])</p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;page-break-after:avoid;
background:#D9D9D9'>hassubset([4,1,3],[3,1])</p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;page-break-after:avoid;
background:#D9D9D9'>hassubset([4,1,3],[4,3])</p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;page-break-after:avoid;
background:#D9D9D9'>hassubset([4,1,3,1],[1,1])</p>

</div>

<p class=MsoCaption>Example 78: <code>hassubset</code>
expression that returns false: 1 appears only once in the left operand</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;page-break-after:avoid;
background:#D9D9D9'>hassubset([1,2],[1,1,2])</p>

</div>

<h5>##subsubsubsubsec <code>hassubsequence</code></h5>

<p class=MsoNormal style='page-break-after:avoid'>The <code>hassubsequence</code>
function has the following signature:</p>

<p class=SourceCode><code>Edm.Boolean
hassubsequence(OrderedCollection,OrderedCollection)</code></p>

<p class=MsoNormal>The <code>hassubsequence</code> function
returns true if the first collection can be transformed into the second
collection by removing zero or more items. The <code>hasSubsequenceMethodCallExpr</code>
syntax rule defines how the <code>hassubsequence</code> function
is invoked.</p>

<p class=MsoCaption>Example 79: <code>hassubsequence</code>
expressions that return true</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;page-break-after:avoid;
background:#D9D9D9'>hassubsequence([4,1,3],[4,1,3])</p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;page-break-after:avoid;
background:#D9D9D9'>hassubsequence([4,1,3],[4,1])</p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;page-break-after:avoid;
background:#D9D9D9'>hassubsequence([4,1,3],[4,3])</p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;page-break-after:avoid;
background:#D9D9D9'>hassubsequence([4,1,3,1],[1,1])</p>

</div>

<p class=MsoCaption>Example 80: <code>hassubsequence</code>
expressions that return false</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;page-break-after:avoid;
background:#D9D9D9'>hassubsequence([4,1,3],[1,3,4])</p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;page-break-after:avoid;
background:#D9D9D9'>hassubsequence([4,1,3],[3,1])</p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;page-break-after:avoid;
background:#D9D9D9'>hassubsequence([1,2],[1,1,2])</p>

</div>

<h4>##subsubsubsec String
Functions</h4>

<h5>##subsubsubsubsec <code>matchesPattern</code></h5>

<p class=MsoNormal>The <code>matchesPattern</code> function has
the following signature:</p>

<p class=SourceCode><code>Edm.Boolean
matchesPattern(Edm.String,Edm.String)</code></p>

<p class=MsoNormal>The second parameter MUST evaluate to a string containing an
<a href="#ECMAScript"><b>[ECMAScript]</b></a> (JavaScript) regular expression.
The <code>matchesPattern</code> function returns true if the first
parameter evaluates to a string matching that regular expression, using syntax
and semantics of <a href="#ECMAScript"><b>[ECMAScript]</b></a> regular
expressions, otherwise it returns false.</p>

<p class=MsoCaption>Example 81: all customers with a <code>CompanyName</code>
that match the (percent-encoded) regular expression <code>^A.*e$</code></p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;page-break-after:avoid;
background:#D9D9D9'>http://host/service/Customers?$filter=matchesPattern(CompanyName,'%5EA.*e$')</p>

</div>

<h5>##subsubsubsubsec <code>tolower</code></h5>

<p class=MsoNormal>The <code>tolower</code> function has the
following signature:</p>

<p class=SourceCode><code>Edm.String tolower(Edm.String)</code></p>

<p class=MsoNormal>The <code>tolower</code> function returns the
input parameter string value with all uppercase characters converted to
lowercase according to Unicode rules. The <code>toLowerMethodCallExpr</code>
syntax rule defines how the <code>tolower</code> function is
invoked.</p>

<p class=MsoCaption>Example 82: all customers with a <code>CompanyName</code>
that equals <code>'alfreds futterkiste'</code> once any
uppercase characters have been converted to lowercase</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;page-break-after:avoid;
background:#D9D9D9'>http://host/service/Customers?$filter=tolower(CompanyName)
eq 'alfreds futterkiste'</p>

</div>

<h5>##subsubsubsubsec <code>toupper</code></h5>

<p class=MsoNormal>The <code>toupper</code> function has the
following signature:</p>

<p class=SourceCode><code>Edm.String toupper(Edm.String)</code></p>

<p class=MsoNormal>The <code>toupper</code> function returns the
input parameter string value with all lowercase characters converted to
uppercase according to Unicode rules. The <code>toUpperMethodCallExpr</code>
syntax rule defines how the <code>toupper</code> function is
invoked.</p>

<p class=MsoCaption>Example 83: all customers with a <code>CompanyName</code>
that equals <code>'ALFREDS FUTTERKISTE'</code> once any
lowercase characters have been converted to uppercase</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;page-break-after:avoid;
background:#D9D9D9'>http://host/service/Customers?$filter=toupper(<span
style='color:black'>CompanyName) eq 'ALFREDS FUTTERKISTE'</span></p>

</div>

<h5>##subsubsubsubsec <code>trim</code></h5>

<p class=MsoNormal>The <code>trim</code> function has the
following signature:</p>

<p class=SourceCode><code>Edm.String trim(Edm.String)</code></p>

<p class=MsoNormal>The <code>trim</code> function returns the
input parameter string value with all leading and trailing whitespace
characters, according to Unicode rules, removed. The <code>trimMethodCallExpr</code>
syntax rule defines how the <code>trim</code> function is
invoked.</p>

<p class=MsoCaption>Example 84: all customers with a <code>CompanyName</code>
without leading or trailing whitespace characters</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;page-break-after:avoid;
background:#D9D9D9'>http://host/service/Customers?$filter=trim(CompanyName)
eq CompanyName</p>

</div>

<h4>##subsubsubsec Date
and Time Functions</h4>

<h5>##subsubsubsubsec <code>date</code></h5>

<p class=MsoNormal>The <code>date</code> function has the following
signature:</p>

<p class=SourceCode><code>Edm.Date date(Edm.DateTimeOffset)</code></p>

<p class=MsoNormal>The <code>date</code> function returns the
date part of the <code>DateTimeOffset</code> parameter value, evaluated in the time zone of the <code>DateTimeOffset</code> parameter value.</p>

<h5>##subsubsubsubsec <code>day</code></h5>

<p class=MsoNormal>The <code>day</code> function has the
following signatures:</p>

<p class=SourceCode><code>Edm.Int32 day(Edm.Date)</code><br>
<code>Edm.Int32 day(Edm.DateTimeOffset)</code></p>

<p class=MsoNormal>The <code>day</code> function returns the day
component <code>Date</code> or <code>DateTimeOffset</code>
parameter value, evaluated in the
time zone of the <code>DateTimeOffset</code> parameter value. The <code>dayMethodCallExpr</code>
syntax rule defines how the <code>day</code> function is
invoked.</p>

<p class=MsoNormal>Services that are unable to preserve the offset of <code>Edm.DateTimeOffset</code> values and instead normalize the values
to some common time zone (i.e. UTC) MUST
fail evaluation of the <code>day</code> function for literal <code>Edm.DateTimeOffset</code> <span style='color:black;background:
white'>values that are not stated in the time zone of the normalized values.</span></p>

<p class=MsoCaption>Example 85: all employees born on the 8th day of a month</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;page-break-after:avoid;
background:#D9D9D9'>http://host/service/Employees?$filter=day(BirthDate)
eq 8</p>

</div>

<h5>##subsubsubsubsec <code>fractionalseconds</code></h5>

<p class=MsoNormal>The <code>fractionalseconds</code> function
has the following signatures:</p>

<p class=SourceCode><code>Edm.Decimal fractionalseconds</code><span class=VerbatimChar>(Edm.DateTimeOffset)<br>
Edm.Decimal fractionalseconds(Edm.TimeOfDay)</span></p>

<p class=MsoNormal>The <code>fractionalseconds</code> function
returns the fractional seconds component of the <code>DateTimeOffset</code>
or <code>TimeOfDay</code> parameter value as a non-negative
decimal value less than 1. The <code>fractionalsecondsMethodCallExpr</code>
syntax rule defines how the <code>fractionalseconds</code>
function is invoked.</p>

<p class=MsoCaption>Example 86: all employees born less than 100 milliseconds
after a full second of any minute of any hour on any day</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;page-break-after:avoid;
background:#D9D9D9'>http://host/service/Employees?$filter=<span
lang=DE style='color:black'>fractionalseconds(BirthDate)
lt 0.1</span></p>

</div>

<h5>##subsubsubsubsec <code>hour</code></h5>

<p class=MsoNormal>The <code>hour</code> function has the
following signatures:</p>

<p class=SourceCode><span class=VerbatimChar>Edm.Int32 hour(Edm.DateTimeOffset)<br>
Edm.Int32 hour(Edm.TimeOfDay)</span></p>

<p class=MsoNormal>The <code>hour</code> function returns the
hour component (<code>0</code> to <code>23</code>)
of the <code>DateTimeOffset</code> or <code>TimeOfDay</code>
parameter value, evaluated in the
time zone of the <code>DateTimeOffset</code> parameter value. The <code>hourMethodCallExpr</code>
syntax rule defines how the <code>hour</code> function is
invoked.</p>

<p class=MsoNormal>Services that are unable to preserve the offset of <code>Edm.DateTimeOffset</code> values and instead normalize the values
to some common time zone (i.e. UTC) MUST
fail evaluation of the <code>hour</code> function for literal <code>Edm.DateTimeOffset</code> <span style='color:black;background:
white'>values that are not stated in the time zone of the normalized values.</span></p>

<p class=MsoCaption>Example 87: all employees born in hour 4, between 04:00
(inclusive) and 05:00 (exclusive) </p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;page-break-after:avoid;
background:#D9D9D9'>http://host/service/Employees?$filter=hour(BirthDate)
eq 4</p>

</div>

<h5>##subsubsubsubsec <code>maxdatetime</code></h5>

<p class=MsoNormal>The <code>maxdatetime</code> function has the
following signature:</p>

<p class=SourceCode><code>Edm.DateTimeOffset maxdatetime()</code></p>

<p class=MsoNormal>The <code>maxdatetime</code> function returns
the latest possible point in time as a <code>DateTimeOffset</code>
value.</p>

<h5>##subsubsubsubsec <code>mindatetime</code></h5>

<p class=MsoNormal>The <code>mindatetime</code> function has the
following signature:</p>

<p class=SourceCode><code>Edm.DateTimeOffset mindatetime()</code></p>

<p class=MsoNormal>The <code>mindatetime</code> function returns
the earliest possible point in time as a <code>DateTimeOffset</code>
value.</p>

<h5>##subsubsubsubsec <code>minute</code></h5>

<p class=MsoNormal>The <code>minute</code> function has the
following signatures:</p>

<p class=SourceCode><span class=VerbatimChar>Edm.Int32 minute(Edm.DateTimeOffset)<br>
Edm.Int32 minute(Edm.TimeOfDay)</span></p>

<p class=MsoNormal>The <code>minute</code> function returns the
minute component (<code>0</code> to <code>59</code>)
of the <code>DateTimeOffset</code> or <code>TimeOfDay</code>
parameter value, evaluated in the
time zone of the <code>DateTimeOffset</code> parameter value. The <code>minuteMethodCallExpr</code>
syntax rule defines how the <code>minute</code> function is
invoked.</p>

<p class=MsoCaption>Example 88: all employees born in minute 40 of any hour on
any day</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;page-break-after:avoid;
background:#D9D9D9'>http://host/service/Employees?$filter=minute(BirthDate)
eq 40</p>

</div>

<h5>##subsubsubsubsec <code>month</code></h5>

<p class=MsoNormal>The <code>month</code> function has the
following signatures:</p>

<p class=SourceCode><code>Edm.Int32 month(Edm.Date)</code><br>
<code>Edm.Int32 month(Edm.DateTimeOffset)</code></p>

<p class=MsoNormal>The <code>month</code> function returns the
month component of the <code>Date</code> or <code>DateTimeOffset</code> parameter value, evaluated in the time zone of the <code>DateTimeOffset</code> parameter value. The <code>monthMethodCallExpr</code>
syntax rule defines how the <code>month</code> function is
invoked.</p>

<p class=MsoNormal>Services that are unable to preserve the offset of <code>Edm.DateTimeOffset</code> values and instead normalize the values
to some common time zone (i.e. UTC) MUST
fail evaluation of the <code>month</code> function for literal <code>Edm.DateTimeOffset</code> <span style='color:black;background:
white'>values that are not stated in the time zone of the normalized values.</span></p>

<p class=MsoCaption>Example 89: all employees born in May</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;page-break-after:avoid;
background:#D9D9D9'>http://host/service/Employees?$filter=month(BirthDate)
eq 5</p>

</div>

<h5>##subsubsubsubsec <code>now</code></h5>

<p class=MsoNormal>The <code>now</code> function has the
following signature:</p>

<p class=SourceCode><code>Edm.DateTimeOffset now()</code></p>

<p class=MsoNormal>The <code>now</code> function returns the
current point in time (date and time with time zone) as a <code>DateTimeOffset</code>
value.</p>

<p class=MsoNormal>Services are free to choose the time zone for the current
point, e.g. UTC. Services that are unable to preserve the offset of <code>Edm.DateTimeOffset</code> values and instead normalize the values
to some common time zone SHOULD return a value in the normalized time zone
(i.e., UTC).</p>

<h5>##subsubsubsubsec <code>second</code></h5>

<p class=MsoNormal>The <code>second</code> function has the
following signatures:</p>

<p class=SourceCode><span class=VerbatimChar>Edm.Int32
second(Edm.DateTimeOffset)<br>
Edm.Int32 second(Edm.TimeOfDay)</span></p>

<p class=MsoNormal>The <code>second</code> function returns the
second component (<code>0</code> to <code>59</code>
for regular seconds, and <code>60</code> for leap seconds, without
the fractional part) of the <code>DateTimeOffset</code> or <code>TimeOfDay</code> parameter value. The <code>secondMethodCallExpr</code>
syntax rule defines how the <code>second</code> function is
invoked.</p>

<p class=MsoCaption>Example 90: all employees born in second 40 of any minute
of any hour on any day</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;page-break-after:avoid;
background:#D9D9D9'>http://host/service/Employees?$filter=second(BirthDate)
eq 40</p>

</div>

<h5>##subsubsubsubsec <code>time</code></h5>

<p class=MsoNormal>The <code>time</code> function has the
following signature:</p>

<p class=SourceCode><code>Edm.TimeOfDay
time(Edm.DateTimeOffset)</code></p>

<p class=MsoNormal>The <code>time</code> function returns the
time part of the <code>DateTimeOffset</code> parameter value, evaluated in the time zone of the <code>DateTimeOffset</code> parameter value.</p>

<p class=MsoNormal>Services that are unable to preserve the offset of <code>Edm.DateTimeOffset</code> values and instead normalize the values
to some common time zone (i.e. UTC) MUST
fail evaluation of the <code>time</code> function for literal <code>Edm.DateTimeOffset</code> <span style='color:black;background:
white'>values that are not stated in the time zone of the normalized values.</span></p>

<h5>##subsubsubsubsec <code>totaloffsetminutes</code></h5>

<p class=MsoNormal>The <code>totaloffsetminutes</code> function
has the following signature:</p>

<p class=SourceCode><code>Edm.Int32
totaloffsetminutes(Edm.DateTimeOffset)</code></p>

<p class=MsoNormal>The <code>totaloffsetminutes</code> function
returns the signed number of minutes in the time zone offset part of the <code>DateTimeOffset</code> parameter value, evaluated in the time zone of the <code>DateTimeOffset</code> parameter value.</p>

<h5>##subsubsubsubsec <code>totalseconds</code></h5>

<p class=MsoNormal>The <code>totalseconds</code> function has
the following signature:</p>

<p class=SourceCode><code>Edm.Decimal
totalseconds(Edm.Duration)</code></p>

<p class=MsoNormal>The <code>totalseconds</code> function
returns the duration of the value in total seconds, including fractional
seconds.</p>

<h5>##subsubsubsubsec <code>year</code></h5>

<p class=MsoNormal>The <code>year</code> function has the
following signatures:</p>

<p class=SourceCode><code>Edm.Int32 year(Edm.Date)</code><br>
<code>Edm.Int32 year(Edm.DateTimeOffset)</code></p>

<p class=MsoNormal>The <code>year</code> function returns the
year component of the <code>Date</code> or <code>DateTimeOffset</code>
parameter value, evaluated in the
time zone of the<span style='font-size:9.0pt;color:black;background:
white'> </span><code>DateTimeOffset</code> parameter value. The <code>yearMethodCallExpr</code>
syntax rule defines how the <code>year</code> function is
invoked.</p>

<p class=MsoNormal>Services that are unable to preserve the offset of <code>Edm.DateTimeOffset</code> values and instead normalize the values
to some common time zone (i.e. UTC) MUST
fail evaluation of the <code>year</code> function for literal <code>Edm.DateTimeOffset</code> <span style='color:black;background:
white'>values that are not stated in the time zone of the normalized values.</span></p>

<p class=MsoCaption>Example 91: all employees born in 1971</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;page-break-after:avoid;
background:#D9D9D9'>http://host/service/<span
style='color:black'>Employees?$filter=year(BirthDate)
eq 1971</span></p>

</div>

<h4>##subsubsubsec Arithmetic Functions</h4>

<h5>##subsubsubsubsec <code>ceiling</code></h5>

<p class=MsoNormal>The <code>ceiling</code> function has the
following signatures</p>

<p class=SourceCode><code>Edm.Double ceiling(Edm.Double)</code><br>
<code>Edm.Decimal ceiling(Edm.Decimal)</code></p>

<p class=MsoNormal>The <code>ceiling</code> function rounds the
input numeric parameter up to the nearest numeric value with no decimal
component. The <code>ceilingMethodCallExpr</code> syntax rule
defines how the <code>ceiling</code> function is invoked.</p>

<p class=MsoCaption>Example 92: all orders with freight costs that round up to
32</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;page-break-after:avoid;
background:#D9D9D9'>http://host/service/Orders?$filter=ceiling(Freight)
eq 32</p>

</div>

<h5>##subsubsubsubsec <code>floor</code></h5>

<p class=MsoNormal>The <code>floor</code> function has the
following signatures</p>

<p class=SourceCode><code>Edm.Double floor(Edm.Double)</code><br>
<code>Edm.Decimal floor(Edm.Decimal)</code></p>

<p class=MsoNormal>The <code>floor</code> function rounds the
input numeric parameter down to the nearest numeric value with no decimal
component. The <code>floorMethodCallExpr</code> syntax rule
defines how the <code>floor</code> function is invoked.</p>

<p class=MsoCaption>Example 93: all orders with freight costs that round down
to 32</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;page-break-after:avoid;
background:#D9D9D9'>http://host/service/Orders?$filter=floor(Freight)
eq 32</p>

</div>

<h5>##subsubsubsubsec <code>round</code></h5>

<p class=MsoNormal>The <code>round</code> function has the
following signatures</p>

<p class=SourceCode><code>Edm.Double round(Edm.Double)</code><br>
<code>Edm.Decimal round(Edm.Decimal)</code></p>

<p class=MsoNormal>The <code>round</code> function rounds the
input numeric parameter to the nearest numeric value with no decimal component.
The mid-point between two integers is rounded away from zero, i.e. 0.5 is
rounded to 1 and &#8209;0.5 is rounded to -1. The <code>roundMethodCallExpr</code>
syntax rule defines how the <code>round</code> function is
invoked.</p>

<p class=MsoCaption>Example 94: all orders with freight costs that round to 32</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;page-break-after:avoid;
background:#D9D9D9'>http://host/service/Orders?$filter=round(Freight)
eq 32</p>

</div>

<h4>##subsubsubsec Type
Functions</h4>

<h5>##subsubsubsubsec <code>cast</code></h5>

<p class=MsoNormal>The <code>cast</code> function has the
following signatures:</p>

<p class=SourceCode><code>type cast(type)</code><br>
<code>type cast(expression,type)</code></p>

<p class=MsoNormal>The single parameter <code>cast</code>
function returns the current instance cast to the type specified. The
two-parameter <code>cast</code> function returns the object
referred to by the expression cast to the type specified. </p>

<p class=MsoNormal>The <code>cast</code> function follows these
assignment rules:</p>

<ol style='margin-top:0in' start=1 type=1>
 <li class=MsoNormal><code>The
     null value can be cast to any type.</code></li>
 <li class=MsoNormal><code>Primitive
     types are cast to Edm.String or a type
     definition based on it by using the literal representation used in
     payloads, and WKT </code>(well-known text) format<code> for Geo</code><span class=Datatype><span style='font-family:
     "Arial",sans-serif'> types</span></span>, see rules <code>fullCollectionLiteral</code>,
     <code>fullLineStringLiteral</code>, <code>fullMultiPointLiteral</code>,
     <code>fullMultiLineStringLiteral</code>, <code>fullMultiPolygonLiteral</code>, <code>fullPointLiteral</code>,
     and <code>fullPolygonLiteral</code> in <a href="#ODataABNF">OData-ABNF</a><code>. The cast
     fails if the target type specifies an insufficient MaxLength.</code></li>
 <li class=MsoNormal><code>Edm.String, or a type
     definition based on Edm.String, can be cast
     to a primitive type if the string contains a literal representation for
     the target type.</code></li>
 <li class=MsoNormal><code>Numeric
     primitive types are cast to each other with appropriate rounding. The cast
     fails if the integer part doesn't fit into the target type.</code></li>
 <li class=MsoNormal><code>Edm.DateTimeOffset, Edm.Duration, and Edm.TimeOfDay values can be cast to the same
     type with a different precision with appropriate rounding.</code></li>
 <li class=MsoNormal><code>Non-Unicode
     string values can be cast to a Unicode string type definition. Unicode
     string values can be cast to a non-Unicode string type definition if the
     Unicode string only contains ASCII characters.</code></li>
 <li class=MsoNormal><code>Structured
     types are assignable to their type or a direct or indirect base type. </code></li>
 <li class=MsoNormal><code>Collections
     are cast item by item.</code></li>
 <li class=MsoNormal><code>Enumeration
     types are cast to integer types based on the numeric value of the
     enumeration member. The cast fails if the numeric value is not in the
     value range of the target type. </code></li>
 <li class=MsoNormal><code>Integer
     types are cast to enumeration types based on the numeric value of the
     enumeration members of the target type. For non-flag enumeration types the
     cast fails if there is no enumeration member with the same numeric value
     as the integer value. For flag enumeration types the cast fails if the
     integer value is not in the value range of the underlying integer type of
     the enumeration type. </code></li>
 <li class=MsoNormal><code>String
     values containing a representation of a date-time value according to </code><a
     href="#BMXMLSchema2"><b>[XML&#8209;Schema&#8209;2]</b></a>, section 3.3.7
     dateTime, can be cast to <code>Edm.DateTimeOffset</code>.
     If the string value does not contain a time-zone offset, it is treated as
     UTC.</li>
</ol>

<p class=MsoNormal>The <code>cast</code> function is optional
for primitive values (first five rules) and up-casts (seventh rule).</p>

<p class=MsoNormal>If the cast fails, the <code>cast</code>
function returns <code>null</code>.</p>

<h5>##subsubsubsubsec <code>isof</code></h5>

<p class=MsoNormal style='page-break-after:avoid'>The <code>isof</code>
function has the following signatures</p>

<p class=SourceCode><code>Edm.Boolean isof(type)</code><br>
<code>Edm.Boolean isof(expression,type)</code></p>

<p class=MsoNormal>The single parameter <code>isof</code>
function returns true if the current instance is assignable to the type
specified, according to the assignment rules for the <a href="#sec_cast"><code>cast</code></a> function, otherwise it
returns <code>false</code>.</p>

<p class=MsoNormal>The two parameter <code>isof</code> function
returns true if the object referred to by the expression is assignable to the
type specified, according to the same rules, otherwise it returns false.</p>

<p class=MsoNormal>The <code>isofExpr</code> syntax rule defines
how the <code>isof</code> function is invoked.</p>

<p class=MsoCaption>Example 95: orders that are also <code>BigOrders</code></p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;page-break-after:avoid;
background:#D9D9D9'><code>http://host/service/Orders?$filter=isof(NorthwindModel.BigOrder)</code></p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;page-break-after:avoid;
background:#D9D9D9'><code>http://host/service/Orders?$filter=isof($it,NorthwindModel.BigOrder)</code></p>

</div>

<p class=MsoCaption>Example 96: orders of a customer that is a <code>VIPCustomer</code></p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;page-break-after:avoid;
background:#D9D9D9'><code>http://host/service/Orders?$filter=isof(Customer,NorthwindModel.VIPCustomer)</code></p>

</div>

<h4>##subsubsubsec Geo
Functions</h4>

<h5>##subsubsubsubsec <code>geo.distance</code></h5>

<p class=MsoNormal style='page-break-after:avoid'>The <code>geo.distance</code>
function has the following signatures:</p>

<p class=SourceCode><span class=VerbatimChar>Edm.Double geo.distance(Edm.GeographyPoint,Edm.GeographyPoint)<br>
Edm.Double geo.distance(Edm.GeometryPoint,Edm.GeometryPoint)</span></p>

<p class=MsoNormal>The <code>geo.distance</code> function
returns the shortest distance between the two points in the coordinate
reference system signified by the two points’ SRIDs.</p>

<h5>##subsubsubsubsec <code>geo.intersects</code></h5>

<p class=MsoNormal>The <code>geo.intersects</code> function has
the following signatures:</p>

<p class=SourceCode><span class=VerbatimChar>Edm.Boolean geo.intersects(Edm.GeographyPoint,Edm.GeographyPolygon)<br>
Edm.Boolean geo.intersects(Edm.GeometryPoint,Edm.GeometryPolygon)</span></p>

<p class=MsoNormal>The <code>geo.intersects</code> function
returns true if the specified point lies within the interior or on the boundary
of the specified polygon, otherwise it returns false.</p>

<h5>##subsubsubsubsec <code>geo.length</code></h5>

<p class=MsoNormal>The <code>geo.length</code> function has the
following signatures:</p>

<p class=SourceCode><span class=VerbatimChar>Edm.Double
geo.length(Edm.GeographyLineString)<br>
Edm.Double geo.length(Edm.GeometryLineString)</span></p>

<p class=MsoNormal>The <code>geo.length</code> function returns
the total length of its line string parameter in the coordinate reference
system signified by its SRID.</p>

<h4>##subsubsubsec Conditional Functions</h4>

<h5>##subsubsubsubsec <a href="#sec_case"><code>case</code></a> </h5>

<p class=MsoNormal>The <code>case</code> function has the
following signature:</p>

<p class=SourceCode><code>expression
case(Edm.Boolean:expression, ..., Edm.Boolean:expression)</code></p>

<p class=MsoNormal>Each parameter is a pair of expressions separated by a colon
(<code>:</code>), where the first expression – the condition –
MUST be a Boolean expression, and the second expression – the result – may evaluate
to any type.</p>

<p class=MsoNormal>The case function evaluates the condition in each pair,
starting with the leftmost pair, and stops as soon as a condition evaluates to <code>true</code>. It then returns the value of the result of this
pair. It returns <code>null</code> if none of the conditions in
any pair evaluates to <code>true</code>. Clients can specify a
last pair whose condition is <code>true</code> to get a non-null
“default/else/otherwise” result.</p>

<p class=MsoNormal>Clients SHOULD ensure that the results in all pairs are
compatible. If all results are of the same type, the type of the <code>case</code> expression is of that type. If all results are of
numeric type, then the type of the <code>case</code> expression
is a numeric type capable of representing any of these expressions according to
standard type promotion rules.</p>

<p class=MsoNormal>Services MAY support <code>case</code>
expressions containing parameters of incompatible types, in which case the case
expression is treated as <code>Edm.Untyped</code> and its value
has the type of the parameter expression selected by the case statement.</p>

<p class=MsoCaption>Example 97: compute signum(X)</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;page-break-after:avoid;
background:#D9D9D9'>$compute=case(X gt 0:1,X lt
0:-1,true:0) as SignumX </p>

</div>

<h4>##subsubsubsec Lambda
Operators</h4>

<p class=MsoNormal>OData defines two operators that evaluate a Boolean
expression on a collection. Both must be prepended with a navigation path that
identifies a collection. </p>

<p class=MsoNormal>4.01 Services MUST support case-insensitive lambda operator
names. Clients that want to work with 4.0 services MUST use lower case lambda
operator names.</p>

<p class=MsoNormal>The argument of a lambda operator is a case-sensitive lambda
variable name followed by a colon (<code>:</code>) and a Boolean
expression that uses the lambda variable name to refer to properties of members
of the collection identified by the navigation path.</p>

<p class=MsoNormal>If the name chosen for the lambda variable matches a
property name of the current resource referenced by the resource path, the
lambda variable takes precedence. Clients can prefix properties of the current
resource referenced by the resource path with <a href="#sec_it"><code>$it</code></a>.</p>

<p class=MsoNormal>Other path expressions in the Boolean expression neither
prefixed with the lambda variable nor <code>$it</code> are
evaluated in the scope of the collection instances at the origin of the
navigation path prepended to the lambda operator.</p>

<h5>##subsubsubsubsec <a
href="#sec_any"><code>any</code></a> </h5>

<p class=MsoNormal>The <code>any</code> operator applies a
Boolean expression to each member of a collection and returns true if and only
if the expression is true for any member of the collection, otherwise it returns
false. This implies that the <code>any</code> operator always
returns false for an empty collection. </p>

<p class=MsoNormal>The <code>any</code> operator can be used
without an argument expression. This short form returns false if and only if
the collection is empty. </p>

<p class=MsoCaption>Example 98: all <code>Orders</code> that
have any <code>Items</code> with a <code>Quantity</code>
greater than <code>100</code></p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;page-break-after:avoid;
background:#D9D9D9'>http://host/service/Orders?$filter=Items/any(d:d/Quantity
gt 100) </p>

</div>

<p class=MsoCaption><a name="_Toc371341807">Example </a>99:
all customers having an order with a deviating shipping address. The <code>Address</code> in the argument expression is evaluated in the
scope of the <code>Customers</code> collection.</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;page-break-after:avoid;
background:#D9D9D9'>http://host/service/Customers?$filter=Orders/any(o:o/ShippingAddress
ne Address) </p>

</div>

<p class=MsoCaption>Example 100: all categories along with their products used
in some order with a deviating unit price. The unprefixed <code>UnitPrice</code>
in the argument expression is evaluated in the scope of the expanded <code>Products</code>.</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;page-break-after:avoid;
background:#D9D9D9'>http://host/service/Categories?$expand=Products($filter=OrderItems/any(oi:oi/UnitPrice
ne UnitPrice)</p>

</div>

<h5>##subsubsubsubsec <a href="#sec_all"><code>all</code></a> </h5>

<p class=MsoNormal>The <code>all</code> operator applies a
Boolean expression to each member of a collection and returns true if the
expression is true for all members of the collection, otherwise it returns false.
This implies that the <code>all</code> operator always returns true
for an empty collection.</p>

<p class=MsoNormal>The <code>all</code> operator cannot be used
without an argument expression.</p>

<p class=MsoCaption>Example 101: all <code>Orders</code> that
have only <code>Items</code> with a <code>Quantity</code>
greater than <code>100</code></p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;page-break-after:avoid;
background:#D9D9D9'>http://host/service/Orders?$filter=Items/all(d:d/Quantity
gt 100) </p>

</div>

<h4>##subsubsubsec Literals</h4>

<h5>##subsubsubsubsec Primitive Literals</h5>

<p class=MsoNormal>Primitive literals can appear in the resource path as key
property values, and in the query part, for example, as operands in <a
href="#sec_SystemQueryOptionfilter"><code>$filter</code></a>
expressions. They are represented according to the <code>primitiveLiteral</code>
rule in <a href="#ODataABNF">OData-ABNF</a>.</p>

<p class=MsoCaption>Example 102: expressions using primitive literals</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>NullValue eq null</p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>TrueValue eq true</p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>FalseValue eq false</p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>Custom.Base64UrlDecode(binary'T0RhdGE') eq 'OData'</p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>IntegerValue lt -128</p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>DoubleValue ge 0.31415926535897931e1</p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'><span
class=string>SingleValue</span><span
style='color:black'> eq <span class=string>INF</span></span></p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'><span
class=string>DecimalValue eq 34.95</span></p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'><span
style='color:black'>StringValue eq '<span class=string>Say Hello,then go'</span></span></p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'><span
class=string>DateValue eq 2012-12-03</span></p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'><span
class=string>DateTimeOffsetValue eq
2012-12-03T07:16:23Z</span></p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'><span
class=string>DurationValue eq
duration'P12DT23H59M59.999999999999S'</span></p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'><span
class=string>DurationValue eq
'P12DT23H59M59.999999999999S'</span></p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'><span
class=string>TimeOfDayValue eq 07:59:59.999</span></p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'><span
class=string>GuidValue eq 01234567-89ab-cdef-0123-456789abcdef</span></p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'><span
class=string>Int64Value eq</span><span
style='color:black'> <span class=string>0</span></span></p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'><span
style='color:black'>ColorEnumValue eq <code>Sales.Pattern'Yellow'</code>,</span></p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'><span
style='color:black'>ColorEnumValue eq <code>'Yellow'</code>,</span></p>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'><span
class=string>geo.distance(Location,geography'SRID=0;Point(142.1
64.1)')</span></p>

</div>

<p class=MsoNormal>Duration literals in OData 4.0 required
prefixing with “duration”. Enumeration literals in OData 4.0 required prefixing
with the qualified type name of the enumeration. </p>

<p class=MsoNormal>In OData 4.01, services MUST support duration and
enumeration literals with or without the type prefix. OData clients that want
to operate across OData 4.0 and OData 4.01 services should always include the
prefix for duration and enumeration types.</p>

<h5>##subsubsubsubsec Complex and Collection Literals</h5>

<p class=MsoNormal>Complex literals and collection literals in URLs are
represented as JSON objects and arrays according to the <code>arrayOrObject</code>
rule in <a href="#ODataABNF">OData-ABNF</a>. Such literals MUST NOT appear
in the path portion of the URL but can be passed to bound <a
href="#sec_AddressingFunctions">functions</a> and function imports in path
segments by using <a href="#sec_ParameterAliases">parameter aliases</a>.</p>

<p class=MsoNormal>Object member values and array items can be expressions,
including other objects and arrays, arithmetic expressions, property names, and
of course primitive values.</p>

<p class=MsoNormal>Note that the special characters <code>{</code>,
<code>}</code>, <code>[</code>, <code>]</code>, and <code>&quot;</code> MUST be
percent-encoded in URLs although some browsers will accept and pass them on
unencoded.</p>

<p class=MsoCaption>Example 103: collection of string literals</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>http://host/service/ProductsByColors(colors=@c)?@c=[&quot;red&quot;,&quot;green&quot;]</p>

</div>

<p class=MsoCaption>Example 104:
check whether a pair of properties has one of several possible pair values</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>$filter=[FirstName,LastName] in [[&quot;John&quot;,&quot;Doe&quot;],[&quot;Jane&quot;,&quot;Smith&quot;]]</p>

</div>

<h5>##subsubsubsubsec <code>null</code></h5>

<p class=MsoNormal>The <code>null</code> literal can be used to
compare a value to null, or to pass a null value to a function.</p>

<h5>##subsubsubsubsec <a href="#sec_it"><code>$it</code></a> </h5>

<p class=MsoNormal>The <code>$it</code> literal can be used in
expressions to refer to the current instance of the resource identified by the
resource path. For a collection-valued resource the current instance is the
instance currently being evaluated by the system query option. For a single-valued
resource it is the resource itself.</p>

<p class=MsoNormal>It allows comparing properties of related entities to
properties of the current instance in expressions within lambda operators or in
<a href="#sec_SystemQueryOptionfilter"><code>$filter</code></a>
expressions nested within <a href="#sec_SystemQueryOptionexpand"><code>$expand</code></a> or <a
href="#sec_SystemQueryOptionselect"><code>$select</code></a>.
</p>

<p class=MsoNormal>It also can be used in <a href="#sec_SystemQueryOptionfilter"><code>$filter</code></a> and <a
href="#sec_SystemQueryOptionorderby"><code>$orderby</code></a>
expressions on collections of primitive types to refer to the current primitive
instance, but using the <a href="#sec_this"><code>$this</code></a>
literal is preferred as <a href="#sec_this"><code>$this</code></a>
can also be used in <a href="#sec_SystemQueryOptionfilter"><code>$filter</code></a> and <a
href="#sec_SystemQueryOptionorderby"><code>$orderby</code></a>
expressions nested within <a href="#sec_SystemQueryOptionselect"><code>$select</code></a>. </p>

<p class=MsoNormal>Note: property names and property paths in <a
href="#sec_SystemQueryOptionfilter"><code>$filter</code></a>
expressions nested within <a href="#sec_SystemQueryOptionexpand"><code>$expand</code></a> are evaluated in the
context of the declared type of the expanded navigation property, so property
names and property paths for the current instance of the collection identified
by the resource path MUST be prefixed with <code>$it/</code>.</p>

<p class=MsoNormal>The <code>$it</code> literal can also be used
as a path prefix to invoke a bound function overload on the current instance
within an expression. Function names without a path prefix refer to an unbound
function overload.</p>

<p class=MsoCaption>Example 105: email addresses ending with <code>.com</code> assuming <code>EmailAddresses</code>
is a collection of strings</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>http://host/service/Customers(1)/EmailAddresses?$filter=endswith($it,'.com')</p>

</div>

<p class=MsoCaption>Example 106: customers along with their orders that shipped
to the same city as the customer's address. The nested filter expression is
evaluated in the context of Orders; <code>$it</code> allows
referring to values in the outer context of Customers.</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>http://host/service/Customers?$expand=Orders($filter=$it/Address/City
eq ShipTo/City)</p>

</div>

<p class=MsoCaption><a name="_Toc371341813">Example </a>107: products with at
least 10 positive reviews. <code>Model.PositiveReviews</code> is
a function bound to <code>Model.Product</code> returning a
collection of reviews.</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>http://host/service/Products?$filter=$it/Model.PositiveReviews()/$count
ge 10</p>

</div>

<h5>##subsubsubsubsec <a
href="#sec_root"><code>$root</code></a> </h5>

<p class=MsoNormal style='page-break-after:avoid'>The <code>$root</code>
literal can be used in expressions to refer to resources of the same service.
It can be used as a single-valued expression or within <a
href="#sec_ComplexandCollectionLiterals">complex or collection literals</a>.</p>

<p class=MsoCaption>Example 108: all employees with the same last name as
employee <code>A1235</code></p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>http://host/service/Employees?$filter=LastName eq
$root/Employees('A1245')/LastName</p>

</div>

<p class=MsoCaption>Example 109: products ordered by a set of customers, where
the set of customers is passed as a JSON array containing the resource paths
from <code>$root</code> to each customer.</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>http://host/service/ProductsOrderedBy(Customers=@c)?@c=[$root/Customers('ALFKI'),$root/Customers('BLAUS')]</p>

</div>

<h5>##subsubsubsubsec <a href="#sec_this"><code>$this</code></a><code>
</code></h5>

<p class=MsoNormal>The <code>$this</code> literal can be used in
<a href="#sec_SystemQueryOptionfilter"><code>$filter</code></a>
and <a href="#sec_SystemQueryOptionorderby"><code>$orderby</code></a>
expressions nested within <a href="#sec_SystemQueryOptionexpand"><code>$expand</code></a> and <a
href="#sec_SystemQueryOptionselect"><code>$select</code></a>
for collection-valued properties and navigation properties. It refers to the
current instance of the collection.</p>

<p class=MsoCaption>Example 110: select only email addresses ending with <code>.com</code></p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>http://host/service/Customers?$select=EmailAddresses($filter=endswith($this,'.com'))</p>

</div>

<h4>##subsubsubsec Path
Expressions</h4>

<p class=MsoNormal>Properties and navigation properties of the entity type of
the set of resources that are addressed by the request URL can be used as
operands or function parameters, as shown in the preceding examples. </p>

<p class=MsoNormal>Properties of complex properties can be used via the same
syntax as in resource paths, i.e. by specifying the name of a complex property,
followed by a forward slash (<code>/)</code> and the name of a
property of the complex property, and so on,</p>

<p class=MsoNormal>Properties and navigation properties of entities related
with a target cardinality 0..1 or 1 can be used by specifying the navigation
property, followed by a forward slash (<code>/)</code> and the
name of a property of the related entity, and so on.</p>

<p class=MsoNormal>If a complex property is <code>null</code>,
or no entity is related (in case of target cardinality 0..1), its value, and
the values of its components, are treated as <code>null</code>. </p>

<p class=MsoCaption>Example 111: similar behavior whether <code>HeadquarterAddress</code>
is a nullable complex type or a nullable navigation property</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;page-break-after:avoid;
background:#D9D9D9'>Companies(1)/HeadquarterAddress/Street
</p>

</div>

<p class=MsoNormal>To access properties of derived types, the property name
MUST be prefixed with the qualified name of the derived type on which the
property is defined, followed by a forward slash (<code>/</code>),
see <a href="#sec_AddressingDerivedTypes">addressing derived types</a>. If the
current instance is not of the specified derived type, the path expression
returns <code>null</code>.</p>

<p class=MsoNormal>If the property
or navigation property is not defined for the type of the resource and that
type supports dynamic properties or navigation properties, then the property or
navigation property is treated as null for all instances on which it has no
value.</p>

<p class=MsoNormal>If the property
or navigation property is not defined for the type of the resource and that
type does not support dynamic properties or navigation properties, then the
request may be considered malformed.</p>

<h4>##subsubsubsec Annotation Values in Expressions</h4>

<p class=MsoNormal>Services MAY support the use of annotation values as
operands or function parameters, and they MAY advertise this by annotating the
entity container with term <a
href="https://github.com/oasis-tcs/odata-vocabularies/blob/master/vocabularies/Org.OData.Capabilities.V1.md#AnnotationValuesInQuerySupported"><code>Capabilities.AnnotationValuesInQuerySupported</code></a>,
see <a href="#ODataVocCap">OData-VocCap</a>. </p>

<p class=MsoNormal>Annotation values are referenced by the annotation name
which consists of an at sign (<code>@</code>) followed by
the qualified term name, optionally
followed by a percent-encoded hash (<code>%23</code>) and an annotation qualifier.
The annotation name can be prefixed with a <a href="#sec_PathExpressions">path
expression</a> leading to the annotated resource or property.</p>

<p class=MsoNormal>If an annotation is not applied to the resource or property,
then its value, and the values of its components, are treated as <code>null</code>. </p>

<p class=MsoCaption>Example 112: Return Products that have prices in Euro</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;page-break-after:avoid;
background:#D9D9D9'>http://host/service/Products?$filter=Price/@Measures.Currency
eq 'EUR'</p>

</div>

<p class=MsoCaption>Example 113: Return Employees that have any error messages
in the <a
href="https://github.com/oasis-tcs/odata-vocabularies/blob/master/vocabularies/Org.OData.Core.V1.md#Messages"><code>Core.Messages</code></a> annotation</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;page-break-after:avoid;
background:#D9D9D9'><span style='color:black'>http://host/service/Employees?$filter=@Core.Messages/any(m:m/severity
eq <code>'</code>error<code>'</code>)</span></p>

</div>

<p class=MsoNormal>Services MAY additionally support the use of the unqualified
term name by defining one or more default namespaces through the <a
href="https://github.com/oasis-tcs/odata-vocabularies/blob/master/vocabularies/Org.OData.Core.V1.md#DefaultNamespace"><code>Core.DefaultNamespace</code></a><code> </code>annotation term defined in <a href="#ODataVocCore">OData-VocCore</a>. For more information on default namespaces, see
Default Namespaces in <a href="#odata">OData-Protocol</a>. This short notation however uses the
same name pattern as parameter aliases. If a query option is specified as a <a
href="#sec_ParameterAliases">parameter alias</a>, then any occurrence of the parameter
alias name in an expression MUST evaluate to the parameter alias value and MUST
NOT evaluate to the annotation value of an identical unqualified term name.</p>

<h4>##subsubsubsec Operator
Precedence</h4>

<p class=MsoNormal>OData services MUST use the following operator precedence
for supported operators when evaluating <a href="#sec_SystemQueryOptionfilter"><code>$filter</code></a> and <a
href="#sec_SystemQueryOptionorderby"><code>$orderby</code></a>
expressions. Operators are listed by category in order of precedence from
highest to lowest. Operators in the same category have equal precedence:</p>

<div align=center>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <thead>
  <tr>
   <td width=143 valign=top style='width:107.5pt;border:solid windowtext 1.0pt;
   background:#F2F2F2;padding:0in 5.4pt 0in 5.4pt'>
   <p class=MsoNormal><b>Group</b></p>
   </td>
   <td width=95 valign=top style='width:70.9pt;border:solid windowtext 1.0pt;
   border-left:none;background:#F2F2F2;padding:0in 5.4pt 0in 5.4pt'>
   <p class=MsoNormal><b>Operator</b></p>
   </td>
   <td width=170 valign=top style='width:127.55pt;border:solid windowtext 1.0pt;
   border-left:none;background:#F2F2F2;padding:0in 5.4pt 0in 5.4pt'>
   <p class=MsoNormal><b>Description</b></p>
   </td>
   <td width=200 valign=top style='width:150.25pt;border:solid windowtext 1.0pt;
   border-left:none;background:#F2F2F2;padding:0in 5.4pt 0in 5.4pt'>
   <p class=MsoNormal><b>ABNF Expression</b></p>
   </td>
  </tr>
 </thead>
 <tr>
  <td width=143 valign=top style='width:107.5pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify'>Grouping </p>
  </td>
  <td width=95 valign=top style='width:70.9pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify'><code>( )</code></p>
  </td>
  <td width=170 valign=top style='width:127.55pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify'>Precedence grouping</p>
  </td>
  <td width=200 valign=top style='width:150.25pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify'><code>parenExpr</code></p>
  <p class=MsoNormal style='text-align:justify'><code>boolParenExpr</code></p>
  </td>
 </tr>
 <tr style='page-break-inside:avoid'>
  <td width=143 valign=top style='width:107.5pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify;page-break-after:avoid'>Primary </p>
  </td>
  <td width=95 valign=top style='width:70.9pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify;page-break-after:avoid'><code>/</code></p>
  </td>
  <td width=170 valign=top style='width:127.55pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify;page-break-after:avoid'>Navigation</p>
  </td>
  <td width=200 valign=top style='width:150.25pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify;page-break-after:avoid'><code>firstMemberExpr</code></p>
  <p class=MsoNormal style='text-align:justify;page-break-after:avoid'><code>memberExpr</code></p>
  </td>
 </tr>
 <tr>
  <td width=143 valign=top style='width:107.5pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify'>&nbsp;</p>
  </td>
  <td width=95 valign=top style='width:70.9pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify'><code>has</code></p>
  </td>
  <td width=170 valign=top style='width:127.55pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Enumeration Flags </p>
  </td>
  <td width=200 valign=top style='width:150.25pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify'><code>hasExpr</code></p>
  </td>
 </tr>
 <tr>
  <td width=143 valign=top style='width:107.5pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify'>&nbsp;</p>
  </td>
  <td width=95 valign=top style='width:70.9pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify'><code>in</code></p>
  </td>
  <td width=170 valign=top style='width:127.55pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify'>Is a member of</p>
  </td>
  <td width=200 valign=top style='width:150.25pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify'><code>inExpr</code></p>
  </td>
 </tr>
 <tr>
  <td width=143 valign=top style='width:107.5pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify'>&nbsp;</p>
  </td>
  <td width=95 valign=top style='width:70.9pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify'><code>xxx( )</code></p>
  </td>
  <td width=170 valign=top style='width:127.55pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify'>Method Call</p>
  </td>
  <td width=200 valign=top style='width:150.25pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify'><code>methodCallExpr</code></p>
  <p class=MsoNormal style='text-align:justify'><code>boolMethodCallExpr</code></p>
  <p class=MsoNormal style='text-align:justify'><code>functionExpr</code></p>
  </td>
 </tr>
 <tr>
  <td width=143 valign=top style='width:107.5pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify;page-break-after:avoid'>Unary </p>
  </td>
  <td width=95 valign=top style='width:70.9pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify;page-break-after:avoid'><code>-</code></p>
  </td>
  <td width=170 valign=top style='width:127.55pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify;page-break-after:avoid'>Negation</p>
  </td>
  <td width=200 valign=top style='width:150.25pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify;page-break-after:avoid'><code>negateExpr</code></p>
  </td>
 </tr>
 <tr>
  <td width=143 valign=top style='width:107.5pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify;page-break-after:avoid'>&nbsp;</p>
  </td>
  <td width=95 valign=top style='width:70.9pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify;page-break-after:avoid'><code>not</code></p>
  </td>
  <td width=170 valign=top style='width:127.55pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify;page-break-after:avoid'>Logical
  Negation</p>
  </td>
  <td width=200 valign=top style='width:150.25pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify;page-break-after:avoid'><code>notExpr</code></p>
  </td>
 </tr>
 <tr>
  <td width=143 valign=top style='width:107.5pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify'>&nbsp;</p>
  </td>
  <td width=95 valign=top style='width:70.9pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify'><code>cast( )</code></p>
  </td>
  <td width=170 valign=top style='width:127.55pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify'>Type Casting</p>
  </td>
  <td width=200 valign=top style='width:150.25pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify'><code>castExpr</code></p>
  </td>
 </tr>
 <tr>
  <td width=143 valign=top style='width:107.5pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify;page-break-after:avoid'>Multiplicative</p>
  </td>
  <td width=95 valign=top style='width:70.9pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify;page-break-after:avoid'><code>mul</code></p>
  </td>
  <td width=170 valign=top style='width:127.55pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify;page-break-after:avoid'>Multiplication</p>
  </td>
  <td width=200 valign=top style='width:150.25pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify;page-break-after:avoid'><code>mulExpr</code></p>
  </td>
 </tr>
 <tr>
  <td width=143 valign=top style='width:107.5pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify;page-break-after:avoid'>&nbsp;</p>
  </td>
  <td width=95 valign=top style='width:70.9pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify;page-break-after:avoid'><code>div</code></p>
  </td>
  <td width=170 valign=top style='width:127.55pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify;page-break-after:avoid'>Division</p>
  </td>
  <td width=200 valign=top style='width:150.25pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify;page-break-after:avoid'><code>divExpr</code></p>
  </td>
 </tr>
 <tr>
  <td width=143 valign=top style='width:107.5pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify'>&nbsp;</p>
  </td>
  <td width=95 valign=top style='width:70.9pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify'><code>divby</code></p>
  </td>
  <td width=170 valign=top style='width:127.55pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify'>Decimal Division</p>
  </td>
  <td width=200 valign=top style='width:150.25pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify'><code>divbyExpr</code></p>
  </td>
 </tr>
 <tr>
  <td width=143 valign=top style='width:107.5pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify'>&nbsp;</p>
  </td>
  <td width=95 valign=top style='width:70.9pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify'><code>mod</code></p>
  </td>
  <td width=170 valign=top style='width:127.55pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify'>Modulo</p>
  </td>
  <td width=200 valign=top style='width:150.25pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify'><code>modExpr</code></p>
  </td>
 </tr>
 <tr>
  <td width=143 valign=top style='width:107.5pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify;page-break-after:avoid'>Additive</p>
  </td>
  <td width=95 valign=top style='width:70.9pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify;page-break-after:avoid'><code>add</code></p>
  </td>
  <td width=170 valign=top style='width:127.55pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify;page-break-after:avoid'>Addition</p>
  </td>
  <td width=200 valign=top style='width:150.25pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify;page-break-after:avoid'><code>addExpr</code></p>
  </td>
 </tr>
 <tr>
  <td width=143 valign=top style='width:107.5pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify'>&nbsp;</p>
  </td>
  <td width=95 valign=top style='width:70.9pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify'><code>sub</code></p>
  </td>
  <td width=170 valign=top style='width:127.55pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify'>Subtraction</p>
  </td>
  <td width=200 valign=top style='width:150.25pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify'><code>subExpr</code></p>
  </td>
 </tr>
 <tr>
  <td width=143 valign=top style='width:107.5pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify;page-break-after:avoid'>Relational</p>
  </td>
  <td width=95 valign=top style='width:70.9pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify;page-break-after:avoid'><code>gt</code></p>
  </td>
  <td width=170 valign=top style='width:127.55pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify;page-break-after:avoid'>Greater
  Than</p>
  </td>
  <td width=200 valign=top style='width:150.25pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify;page-break-after:avoid'><code>gtExpr</code></p>
  </td>
 </tr>
 <tr>
  <td width=143 valign=top style='width:107.5pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify;page-break-after:avoid'>&nbsp;</p>
  </td>
  <td width=95 valign=top style='width:70.9pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify;page-break-after:avoid'><code>ge</code></p>
  </td>
  <td width=170 valign=top style='width:127.55pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify;page-break-after:avoid'>Greater
  than or Equal</p>
  </td>
  <td width=200 valign=top style='width:150.25pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify;page-break-after:avoid'><code>geExpr</code></p>
  </td>
 </tr>
 <tr>
  <td width=143 valign=top style='width:107.5pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify;page-break-after:avoid'>&nbsp;</p>
  </td>
  <td width=95 valign=top style='width:70.9pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify;page-break-after:avoid'><code>lt</code></p>
  </td>
  <td width=170 valign=top style='width:127.55pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify;page-break-after:avoid'>Less
  Than</p>
  </td>
  <td width=200 valign=top style='width:150.25pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify;page-break-after:avoid'><code>ltExpr</code></p>
  </td>
 </tr>
 <tr>
  <td width=143 valign=top style='width:107.5pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify;page-break-after:avoid'>&nbsp;</p>
  </td>
  <td width=95 valign=top style='width:70.9pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify;page-break-after:avoid'><code>le</code></p>
  </td>
  <td width=170 valign=top style='width:127.55pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify;page-break-after:avoid'>Less
  than or Equal</p>
  </td>
  <td width=200 valign=top style='width:150.25pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify;page-break-after:avoid'><code>leExpr</code></p>
  </td>
 </tr>
 <tr>
  <td width=143 valign=top style='width:107.5pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify'>&nbsp;</p>
  </td>
  <td width=95 valign=top style='width:70.9pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify'><code>isof</code></p>
  </td>
  <td width=170 valign=top style='width:127.55pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify'>Type Testing</p>
  </td>
  <td width=200 valign=top style='width:150.25pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify'><code>isofExpr</code></p>
  </td>
 </tr>
 <tr>
  <td width=143 valign=top style='width:107.5pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify;page-break-after:avoid'>Equality</p>
  </td>
  <td width=95 valign=top style='width:70.9pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify;page-break-after:avoid'><code>eq</code></p>
  </td>
  <td width=170 valign=top style='width:127.55pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify;page-break-after:avoid'>Equal</p>
  </td>
  <td width=200 valign=top style='width:150.25pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify;page-break-after:avoid'><code>eqExpr</code></p>
  </td>
 </tr>
 <tr>
  <td width=143 valign=top style='width:107.5pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify'>&nbsp;</p>
  </td>
  <td width=95 valign=top style='width:70.9pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify'><code>ne</code></p>
  </td>
  <td width=170 valign=top style='width:127.55pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify'>Not Equal</p>
  </td>
  <td width=200 valign=top style='width:150.25pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify'><code>neExpr</code></p>
  </td>
 </tr>
 <tr>
  <td width=143 valign=top style='width:107.5pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify'>Conditional AND</p>
  </td>
  <td width=95 valign=top style='width:70.9pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify'><code>and</code></p>
  </td>
  <td width=170 valign=top style='width:127.55pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify'>Logical And</p>
  </td>
  <td width=200 valign=top style='width:150.25pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify'><code>andExpr</code></p>
  </td>
 </tr>
 <tr>
  <td width=143 valign=top style='width:107.5pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify'>Conditional OR</p>
  </td>
  <td width=95 valign=top style='width:70.9pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify'><code>or</code></p>
  </td>
  <td width=170 valign=top style='width:127.55pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify'>Logical Or</p>
  </td>
  <td width=200 valign=top style='width:150.25pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='text-align:justify'><code>orExpr</code></p>
  </td>
 </tr>
</table>

</div>

<h4>##subsubsubsec Numeric Promotion</h4>

<p class=MsoNormal>Services SHOULD NOT require explicit cast operations between
numeric types used in comparison expressions. Wherever possible, such
comparisons should be performed using underlying types of sufficient size.</p>

<p class=MsoNormal>Services MAY support numeric promotion for arithmetic
operations or when comparing two operands of comparable types by applying the
following rules, in order:</p>

<p class=MsoListParagraphCxSpFirst style='text-indent:-.25in'><span
class=Datatype><span style='font-family:Symbol'>· </span></span><code>If
either operand is Edm.Double, the other operand
is converted to type Edm.Double.</code></p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-.25in'><span
class=Datatype><span style='font-family:Symbol'>· </span></span><code>Otherwise,
if either operand is Edm.Single, the other operand
is converted to type Edm.Single.</code></p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-.25in'><span
class=Datatype><span style='font-family:Symbol'>· </span></span><code>Otherwise,
if either operand is of type Edm.Decimal, the other operand
is converted to Edm.Decimal. </code></p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-.25in'><span
class=Datatype><span style='font-family:Symbol'>· </span></span><code>Otherwise,
if either operand is Edm.Int64, the other operand
is converted to type Edm.Int64.</code></p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-.25in'><span
class=Datatype><span style='font-family:Symbol'>· </span></span><code>Otherwise,
if either operand is Edm.Int32, the other operand
is converted to type Edm.Int32.</code></p>

<p class=MsoListParagraphCxSpLast style='text-indent:-.25in'><span
class=Datatype><span style='font-family:Symbol'>· </span></span><code>Otherwise,
if either operand is Edm.Int16, the other operand
is converted to type Edm.Int16. </code></p>

<p class=MsoNormal>Each of these promotions uses the
same semantics as a <code>castExpression</code> to promote an operand to the target type.</p>

<p class=MsoNormal>OData does not define an implicit
conversion between string and numeric types.</p>

<h3>##subsubsec System Query Option <code>$filter</code></h3>

<p class=MsoNormal>The <code>$filter</code> system query option
allows clients to filter a collection of resources that are addressed by a
request URL. The expression specified with <code>$filter</code> is
evaluated for each resource in the collection, and only items where the
expression evaluates to true are included in the response. Resources for which the
expression evaluates to false or to null, or which reference properties that
are unavailable due to permissions, are omitted from the response.</p>

<p class=MsoNormal>The <a href="#ODataABNF">OData-ABNF</a> <code>filter</code> syntax rule defines the formal grammar of the <code>$filter</code> query option.</p>

<h3>##subsubsec System Query Option <code>$expand</code></h3>

<p class=MsoNormal>The <code>$expand</code> system query option
specifies the related resources or media streams to be included in line with
retrieved resources.</p>

<p class=MsoNormal>The <a href="#ODataABNF">OData-ABNF</a> <code>expand</code> syntax rule defines the formal grammar of the <code>$expand</code> query option. </p>

<p class=MsoNormal>The value of <code>$expand</code> is a
comma-separated list of expand items. Each expand item is evaluated relative to
the retrieved resource being expanded. An expand item is either a path or one
of the symbols <code>*</code> or <code>$value</code>.</p>

<p class=MsoNormal>A path consists of segments separated by a forward slash (<code>/</code>). Segments are either names of single- or
collection-valued complex properties, <a
href="#sec_AnnotationValuesinExpressions">instance annotations</a>, or
type-cast segments consisting of the qualified name of a structured type that
is derived from the type identified by the preceding path segment to reach
properties defined on the derived type.</p>

<p class=MsoNormal>A path can end with</p>

<p class=MsoListParagraphCxSpFirst style='text-indent:-.25in'><span
style='font-family:Symbol'>· </span>the name of a stream property to include that stream property,</p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-.25in'><span
style='font-family:Symbol'>· </span>a star (<code>*</code>) to expand all navigation
properties of the identified structured instance, optionally followed by <code>/$ref</code> to expand only entity references, or</p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-.25in'><span
style='font-family:Symbol'>· </span>a navigation property to expand the related entity or entities,
optionally followed by a type-cast segment to expand only related entities of
that derived type or one of its sub-types, optionally followed by <code>/$ref</code> to expand only entity references. </p>

<p class=MsoListParagraphCxSpLast style='text-indent:-.25in'><span
style='font-family:Symbol'>· </span>an entity-valued instance annotation to expand the related entity
or entities, optionally followed by a type-cast segment to expand only related
entities of that derived type or one of its sub-types. </p>

<p class=MsoNormal>If a structured type traversed by the path supports neither
dynamic properties nor instance annotations, then a corresponding property
segment MUST specify a declared property of that structured type. Otherwise, if
a traversed type does support dynamic navigation properties or instance
annotations and the corresponding property segment does not specify a declared
property, then the expanded property appears only for those instances on which
it has a value.</p>

<p class=MsoCaption>Example 114: expand a navigation property of an entity type</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>http://host/service/Products?$expand=Category<code> </code></p>

</div>

<p class=MsoCaption>Example 115: expand a navigation property of a complex type</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>http://host/service/Customers?$expand=Addresses/Country</p>

</div>

<p class=MsoNormal>A property MUST NOT appear in more than one expand item.</p>

<p class=MsoNormal>Query options can be applied to an expanded navigation
property by appending a semicolon-separated list of query options, enclosed in
parentheses, to the navigation property name. Allowed system query options are <a
href="#sec_SystemQueryOptionfilter"><code>$filter</code></a>,
<a href="#sec_SystemQueryOptionselect"><code>$select</code></a>,
<a href="#sec_SystemQueryOptionorderby"><code>$orderby</code></a>,
<a href="#sec_SystemQueryOptionstopandskip"><code>$skip</code></a>,
<a href="#sec_SystemQueryOptionstopandskip"><code>$top</code></a>,
<a href="#sec_SystemQueryOptioncount"><code>$count</code></a>,
<a href="#sec_SystemQueryOptionsearch"><code>$search</code></a>,
and <code>$expand</code>.</p>

<p class=MsoCaption>Example 116: all categories and for each category all
related products with a discontinued date equal to <code>null</code></p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;page-break-after:avoid;
background:#D9D9D9'>http://host/service/Categories? $expand=Products($filter=DiscontinuedDate
eq null)</p>

</div>

<p class=MsoNormal style='page-break-after:avoid'>The <code>$count</code>
segment can be appended to a navigation property name or <a
href="#sec_AddressingDerivedTypes">type-cast segment</a> following a navigation
property name to return just the count of the related entities. The <code>$filter</code> and <code>$search</code> system
query options can be used to limit the number of related entities included in
the count.</p>

<p class=MsoCaption>Example 117: all categories and for each category the
number of all related products</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;page-break-after:avoid;
background:#D9D9D9'>http://host/service/Categories?$expand=Products/$count</p>

</div>

<p class=MsoCaption>Example 118: all categories and for each category the
number of all related blue products</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;page-break-after:avoid;
background:#D9D9D9'>http://host/service/Categories?$expand=Products/$count($search=blue)</p>

</div>

<p class=MsoNormal>To retrieve entity references instead of the related
entities, append <code>/$ref</code> to the navigation property
name or <a href="#sec_AddressingDerivedTypes">type-cast segment</a> following a
navigation property name. The system query options <a
href="#sec_SystemQueryOptionfilter"><code>$filter</code></a>,
<a href="#sec_SystemQueryOptionsearch"><code>$search</code></a>,
<a href="#sec_SystemQueryOptionstopandskip"><code>$skip</code></a>,
<a href="#sec_SystemQueryOptionstopandskip"><code>$top</code></a>,
and <a href="#sec_SystemQueryOptioncount"><code>$count</code></a>
can be used to limit the number of expanded entity references.</p>

<p class=MsoCaption>Example 119: all categories and for each category the references
of all related products</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;page-break-after:avoid;
background:#D9D9D9'>http://host/service/Categories?$expand=Products/$ref</p>

</div>

<p class=MsoCaption>Example 120: all categories and for each category the
references of all related products of the derived type <code>Sales.PremierProduct</code></p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;page-break-after:avoid;
background:#D9D9D9'>http://host/service/Categories?$expand=Products/Sales.PremierProduct/$ref</p>

</div>

<p class=MsoCaption>Example 121: all categories and for each category the
references of all related premier products with a current promotion equal to <code>null</code></p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;page-break-after:avoid;
background:#D9D9D9'>http://host/service/Categories? $expand=Products/Sales.PremierProduct/$ref($filter=CurrentPromotion
eq null)</p>

</div>

<p class=MsoNormal style='page-break-after:avoid'>Cyclic navigation properties
(whose target type is identical or can be cast to its source type) can be
recursively expanded using the special <code>$levels</code>
option. The value of the <code>$levels</code> option is
either a positive integer to specify the number of levels to expand, or the
literal string <code>max</code> to specify the maximum expansion
level supported by that service. A <code>$levels</code> option
with a value of 1 specifies a single expand with no recursion.</p>

<p class=MsoCaption>Example 122: all employees with their manager, manager's
manager, and manager's manager's manager </p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>http://host/service/Employees?$expand=ReportsTo($levels=3)</p>

</div>

<p class=MsoNormal style='page-break-after:avoid'>It
is also possible to expand all declared and dynamic navigation properties using
a star (<code>*</code>). To retrieve references to all related
entities use <code>*/$ref</code>, and to expand all related
entities with a certain distance use the star operator with the <code>$levels</code> option. The star operator can be combined with
explicitly named navigation properties, which take precedence over the star
operator.</p>

<p class=MsoNormal style='page-break-after:avoid'>The star operator does not
implicitly include stream properties. </p>

<p class=MsoCaption>Example 123: expand <code>Supplier</code>
and include references for all other related entities</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;page-break-after:avoid;
background:#D9D9D9'>http://host/service/Categories?$expand=*/$ref,Supplier</p>

</div>

<p class=MsoCaption>Example 124: expand all related entities and their related
entities</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;page-break-after:avoid;
background:#D9D9D9'>http://host/service/Categories?$expand=*($levels=2)</p>

</div>

<p class=MsoNormal style='page-break-after:avoid'>Specifying a stream property includes the
media stream inline according to the specified format.</p>

<p class=MsoCaption>Example 125: include Employee’s <code>Photo </code>stream
property along with other properties of the customer </p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;page-break-after:avoid;
background:#D9D9D9'>http://host/service/Employees?$expand=Photo</p>

</div>

<p class=MsoNormal style='page-break-after:avoid'>Specifying <code>$value</code> for a media entity includes the media entity’s
stream value inline according to the specified format.</p>

<p class=MsoCaption>Example 126: Include the <code>Product’s </code>media
stream along with other properties of the product</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;page-break-after:avoid;
background:#D9D9D9'>http://host/service/Products?$expand=$value</p>

</div>

<h3>##subsubsec System Query Option <code>$select</code></h3>

<p class=MsoNormal>The <code>$select</code> system query option
allows clients to request a specific set of properties for each entity or
complex type.</p>

<p class=MsoNormal>The <code>$select</code> query option is
often used in conjunction with the <a href="#sec_SystemQueryOptionexpand"><code>$expand</code></a> system query option, to
define the extent of the resource graph to return (<code>$expand</code>)
and then specify a subset of properties for each resource in the graph (<code>$select</code>). Expanded navigation properties MUST be
returned, even if they are not specified in <code>$select</code>.</p>

<p class=MsoNormal>The <a href="#ODataABNF">OData-ABNF</a> <code>select</code> syntax rule defines the formal grammar of the <code>$select</code> query option.</p>

<p class=MsoNormal style='page-break-after:avoid'>The value of <code>$select</code> is a comma-separated list of select items. Each
select item is one of the following:</p>

<p class=MsoListParagraphCxSpFirst style='text-indent:-.25in'><span
style='font-family:Symbol'>· </span>a path, to include a property,</p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-.25in'><span
style='font-family:Symbol'>· </span>a star (<code>*</code>), to include all declared
or dynamic properties of the type, or</p>

<p class=MsoListParagraphCxSpLast style='text-indent:-.25in'><span
style='font-family:Symbol'>· </span>a qualified schema name followed by a dot (<code>.</code>)
followed by a star (<code>*</code>) to request all applicable
actions or functions from that schema</p>

<p class=MsoNormal>A path consists of segments separated by a forward slash (<code>/</code>). Segments are either names of single- or
collection-valued complex properties, <a
href="#sec_AnnotationValuesinExpressions">instance annotations</a>, or
type-cast segments consisting of the qualified name of a structured type that
is derived from the type identified by the preceding path segment to reach
properties defined on the derived type.</p>

<p class=MsoNormal>A path can end with</p>

<p class=MsoListParagraphCxSpFirst style='text-indent:-.25in'><span
style='font-family:Symbol'>· </span>the name of a property or non-entity-valued instance annotation
of the identified structured instance,</p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-.25in'><span
style='font-family:Symbol'>· </span>the qualified name of a bound action,</p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-.25in'><span
style='font-family:Symbol'>· </span>the qualified name of a bound function to include all matching
overloads, or</p>

<p class=MsoListParagraphCxSpLast style='text-indent:-.25in'><span
style='font-family:Symbol'>· </span>the qualified name of a bound function followed by parentheses
containing the comma-separated lists of non-binding parameters identifying a
single overload.</p>

<p class=MsoNormal style='page-break-after:avoid'>The <code>$select</code>
system query option is interpreted relative to the entity type or complex type
of the resources identified by the resource path section of the URL. Each
select item in the <code>$select</code> clause indicates that
the response MUST include the declared or dynamic properties, actions and
functions identified by that select item. The simplest form of a select item
explicitly requests a property defined on the entity type of the resources
identified by the resource path section of the URL.</p>

<p class=MsoCaption>Example 127: rating and release date of all products</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>http://host/service/Products?$select=Rating,ReleaseDate</p>

</div>

<p class=MsoNormal style='page-break-after:avoid'>It is also possible to
request all declared and dynamic structural properties using a star (<code>*</code>).</p>

<p class=MsoCaption>Example 128: all structural properties of all products</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>http://host/service/Products?$select=*</p>

</div>

<p class=MsoNormal style='page-break-after:avoid'>If the select item is not
defined for the type of the resource, and that type supports dynamic properties
or instance annotations, then the property is treated as null for all instances
on which it is not defined.</p>

<p class=MsoNormal style='page-break-after:avoid'>If the select item is not
defined for the type of the resource, and that type does not support dynamic
properties or instance annotations, then the request is considered malformed.</p>

<p class=MsoNormal style='page-break-after:avoid'>If the select item is an
instance annotation of type entity or collection of entities, then the request
is considered malformed. Entity-valued annotations can be included using <a
href="#sec_SystemQueryOptionexpand"><code>$expand</code></a>.</p>

<p class=MsoNormal style='page-break-after:avoid'>If the select item is a
navigation property, then the corresponding navigation link is represented in
the response. If the navigation property also appears in an <a
href="#sec_SystemQueryOptionexpand"><code>$expand</code></a>
query option, then it is additionally represented as inline content. This
inline content can itself be restricted with a nested <code>$select</code>
query option, see section 5.1.2. </p>

<p class=MsoCaption>Example 129: name and description of all products, plus
name of expanded category</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;page-break-after:avoid;
background:#D9D9D9'><code>http://host/service/Products?$select=Name,Description&amp;$expand=Category($select=Name)</code></p>

</div>

<p class=MsoNormal>The select item MUST be prefixed with a qualified structured
type name in order to select a property defined on a type derived from the type
of the resource segment.</p>

<p class=MsoNormal style='page-break-after:avoid'>A select item that is a
complex type or collection of complex type can be followed by a forward slash,
an optional <a href="#sec_AddressingDerivedTypes">type-cast segment</a>, and
the name of a property of the complex type (and so on for nested complex
types). </p>

<p class=MsoCaption>Example 130: the <code>AccountRepresentative</code>
property of any supplier that is of the derived type <code>Namespace.PreferredSupplier</code>,
together with the <code>Street</code> property of the complex
property <code>Address, and the Location property of the derived complex type Namespace.AddressWithLocation</code></p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'><code>http://host/service/Suppliers?$select=Namespace.PreferredSupplier/AccountRepresentative,Address/Street,Address/Namespace.AddressWithLocation/Location</code></p>

</div>

<p class=MsoNormal>Query options can be applied to a select item that is a path
to a single complex value or a collection of primitive or complex values by
appending a semicolon-separated list of query options, enclosed in parentheses,
to the select item. The allowed system query options depend on the type of the
resource identified by the select item, see section <a
href="#sec_SystemQueryOptions">System Query Options</a>, with the exception of <a
href="#sec_SystemQueryOptionexpand"><code>$expand</code></a>.
The same property MUST NOT have select options specified in more than one place
in a request and MUST NOT be specified in more than one expand.</p>

<p class=MsoCaption>Example 131: select up to five addresses whose <code>City</code> starts with an <code>H</code>,
sorted, and with the <code>Country</code> expanded</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>http://host/service/Customers?$select=Addresses($filter=startswith(City,'H');$top=5;$orderby=Country/Name,City,Street)&amp;$expand=Addresses/Country</p>

</div>

<p class=MsoNormal>Any structural property, non-expanded navigation property,
or operation not requested as a select item (explicitly or via a star) SHOULD
be omitted from the response. </p>

<p class=MsoNormal>Annotations requested in <code>$select</code>
MUST be included in the response; <code>$select</code> overrules
the <code>include-annotations</code> preference (see <a
href="#odata">OData-Protocol</a>) for the explicitly requested
annotations. Additional annotations matching the preference can be included
even if not requested via <code>$select</code>. The <code>Preference-Applied response</code> header only
reflects the set of annotations included due to the <code>include-annotations</code>
preference and not those only included due to <code>$select</code>.</p>

<p class=MsoNormal>If any select item (including a star) is specified, actions
and functions SHOULD be omitted unless explicitly requested.</p>

<p class=MsoNormal>If an action or function is requested as a select item,
either explicitly by using its qualified name, or implicitly by requesting all
operations in a schema, then the service includes information about how to
invoke that operation for each entity identified by the last path segment in
the request URL for which the operation can be bound.</p>

<p class=MsoNormal>If an action or function is requested in a select item using
its qualified name and that operation cannot be bound to the entities
requested, the service MUST ignore the select item.</p>

<p class=MsoCaption>Example 132: the <code>ID</code> property,
the <code>ActionName</code> action defined in <code>Model</code> and all actions and functions defined in the <code>Model2</code> for each product if those actions and functions
can be bound to that product</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'><code>http://host/service/Products?$select=ID,Model.ActionName,Model2.*</code></p>

</div>

<p class=MsoNormal>When multiple select item exist in a <code>select clause</code>, then the
total set of properties, open properties, navigation properties, actions and
functions to be returned is equal to the union of the set of those identified
by each select item. </p>

<p class=MsoNormal>If a select item is a path expression requesting a component
of a complex property and the complex property is <code>null</code>
on an instance, then the component is treated as <code>null</code>
as well.</p>

<h3>##subsubsec System
Query Option <code>$orderby</code></h3>

<p class=MsoNormal>The <code>$orderby</code> system query option
allows clients to request resources in a particular order.</p>

<p class=MsoNormal>The semantics of <code>$orderby</code> are
covered in the <a href="#odata">OData-Protocol</a> document.</p>

<p class=MsoNormal>The <a href="#ODataABNF">OData-ABNF</a> <code>orderby</code> syntax rule defines the formal grammar of the <code>$orderby</code> query option.</p>

<h3>##subsubsec System
Query Options <code>$top</code> and <code>$skip</code></h3>

<p class=MsoNormal>The <code>$top</code> system query option
requests the number of items in the queried collection to be included in the
result. The <code>$skip</code> query option requests the number
of items in the queried collection that are to be skipped and not included in
the result. A client can request a particular page of items by combining <code>$top</code> and <code>$skip</code>.</p>

<p class=MsoNormal>The semantics of <code>$top</code> and <code>$skip</code> are covered in the <a href="#odata">OData-Protocol</a>
document. The <a href="#ODataABNF">OData-ABNF</a> <code>top</code>
and <code>skip</code> syntax rules define the formal grammar of
the <code>$top</code> and <code>$skip </code>query
options respectively.</p>

<h3>##subsubsec System
Query Option <code>$count</code></h3>

<p class=MsoNormal>The <code>$count</code> system query option
allows clients to request a count of the matching resources included with the
resources in the response. The <code>$count</code> query option
has a Boolean value of <code>true</code> or <code>false</code>.</p>

<p class=MsoNormal>The semantics of <code>$count</code> is
covered in the <a href="#odata">OData-Protocol</a> document.</p>

<h3>##subsubsec System Query Option <code>$search</code></h3>

<p class=MsoNormal>The <code>$search</code>
system query option allows clients to request items within a collection
matching a free-text <a href="#sec_SearchExpressions">search expression</a>.</p>

<p class=MsoNormal>The <code>$search</code> query option can be
applied to a URL representing a collection of entity, complex, or primitive
typed instances, to return all matching items within the collection. Applying
the <code>$search</code> query option to the <a
href="#sec_AddressingAllEntitiesinaService"><code>$all</code></a>
resource requests all matching entities in the service.</p>

<p class=MsoNormal>If both <code>$search</code>
and <a href="#sec_SystemQueryOptionfilter"><code>$filter</code>
</a>are applied to the same request, the results include only those items that
match both criteria.</p>

<p class=MsoNormal>The <a href="#ODataABNF">OData-ABNF</a> <code>search</code> syntax rule defines the formal grammar of the <code>$search</code> query option.</p>

<p class=MsoCaption>Example 133: all products that are blue or green. It is up
to the service to decide what makes a product blue or green.</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;page-break-after:avoid;
background:#D9D9D9'>http://host/service/Products?$search=blue
OR green</p>

</div>

<h4>##subsubsubsec Search
Expressions</h4>

<p class=MsoNormal>Search expressions are used within the <a
href="#sec_SystemQueryOptionsearch"><code>$search</code></a>
system query option to request entities matching the specified expression.</p>

<p class=MsoNormal><i>Terms</i> can be any single word to be matched within the
expression.</p>

<p class=MsoNormal>Terms enclosed in double-quotes comprise a <i>phrase</i>.</p>

<p class=MsoNormal>Each individual term or phrase comprises a Boolean
expression that returns true if the term or phrase is matched, otherwise false.
The semantics of what is considered a match is dependent upon the service.</p>

<p class=MsoNormal>Expressions enclosed in parenthesis comprise a <i>group
expression</i>.</p>

<p class=MsoNormal>The search expression can contain any number of terms,
phrases, or group expressions, along with the case-sensitive keywords <code>NOT</code>, <code>AND</code>, and <code>OR</code>, evaluated in that order. </p>

<p class=MsoNormal>Expressions prefaced with <code>NOT</code>
evaluate to true if the expression is not matched, otherwise false.</p>

<p class=MsoNormal>Two expressions not enclosed in quotes and separated by a
space are equivalent to the same two expressions separated by the <code>AND</code> keyword. Such expressions evaluate to <code>true</code> if both expressions evaluate to true, otherwise false.</p>

<p class=MsoNormal>Expressions separated by an <code>OR</code>
evaluate to true if either of the expressions evaluate to true, otherwise false.</p>

<p class=MsoNormal>To support type-ahead use cases, incomplete search
expressions can be sent as OData string literals enclosed in single-quotes, and
single-quotes within the search expression doubled.</p>

<p class=MsoNormal>The <a href="#ODataABNF">OData-ABNF</a> <code>searchExpr</code> syntax rule defines the formal grammar of the
search expression. </p>

<h3>##subsubsec System Query Option <code>$format</code></h3>

<p class=MsoNormal>The <code>$format</code> system query option
allows clients to request a response in a particular format and is useful for
clients without access to request headers for standard content-type
negotiation. Where present <code>$format</code> takes precedence
over standard content-type negotiation.</p>

<p class=MsoNormal>The semantics of <code>$format</code> is
covered in the <a href="#odata">OData-Protocol</a> document.</p>

<p class=MsoNormal>The <a href="#ODataABNF">OData-ABNF</a> <code>format</code> syntax rule defines the formal grammar of the <code>$format</code> query option.</p>

<h3>##subsubsec System Query Option <code>$compute</code></h3>

<p class=MsoNormal>The <code>$compute</code> system query option
allows clients to define computed properties that can be used in a <a
href="#sec_SystemQueryOptionselect"><code>$select</code></a>
or within a <a href="#sec_SystemQueryOptionfilter"><code>$filter</code></a> or <a href="#sec_SystemQueryOptionorderby"><code>$orderby</code></a> expression.</p>

<p class=MsoNormal style='page-break-after:avoid'>The <code>$compute</code>
system query option is interpreted relative to the entity type or complex type
of the resources identified by the resource path section of the URL.</p>

<p class=MsoNormal>The value of <code>$compute</code> is a
comma-separated list of compute instructions, each consisting of a <a
href="#sec_CommonExpressionSyntax">common expression</a> followed by the
keyword <code>as</code>, followed by the name for the computed
dynamic property. This name MUST differ from the names of declared or dynamic
properties of the identified resources.</p>

<p class=MsoNormal>The <a href="#ODataABNF">OData-ABNF</a> <code>compute</code> syntax rule defines the formal grammar of the <code>$compute</code> query option.</p>

<p class=MsoNormal style='page-break-after:avoid'>Computed properties SHOULD be
included as dynamic properties in the result and MUST be included if <code>$select</code> is specified with the computed property name, or
star (<code>*</code>).</p>

<p class=MsoCaption>Example 134: compute total price for order items</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>http://host/service/Orders(10)/Items?$select=Product/Description,Total&amp;$filter=Total
gt 100&amp;$orderby=Total&amp;$compute=Product/Price mul Quantity as Total</p>

</div>

<h3>##subsubsec System Query Option <code>$index</code></h3>

<p class=MsoNormal>The <code>$index</code> system query option
allows clients to do a positional insert into a collection annotated with using
the <a
href="https://github.com/oasis-tcs/odata-vocabularies/blob/master/vocabularies/Org.OData.Core.V1.md#PositionalInsert"><code>Core.PositionalInsert</code></a>
term (see <a href="#ODataVocCore">OData-VocCore</a>). The value of the <code>$index</code> system query option is the
zero-based ordinal position where the item is to be inserted. The ordinal of
items within the collection greater than or equal to the inserted position are
increased by one. A negative ordinal indexes from the end of the collection,
with -1 representing an insert at the end of the collection.</p>

<p class=MsoNormal>The <a href="#ODataABNF">OData-ABNF</a> <code>index</code> syntax rule defines the formal grammar of the <code>$index</code> query option.</p>

<h3>##subsubsec System Query Option <code>$schemaversion</code></h3>

<p class=MsoNormal>The <code>$schemaversion</code> system query
option allows clients to specify the version of the schema against which the
request is made. The semantics of <code>$schemaversion</code> is covered in the <a href="#odata">OData-Protocol</a>
document.</p>

<p class=MsoNormal>The <a href="#ODataABNF">OData-ABNF</a> <code>schemaversion</code> syntax rule defines the formal grammar of
the <code>$schemaversion</code> query option</p>

<h2>##subsec Custom
Query Options</h2>

<p class=MsoNormal>Custom query options provide an extensible mechanism for
service-specific information to be placed in a URL query string. A custom query
option is any query option of the form shown by the rule <code>customQueryOption</code>
in <a href="#ODataABNF">OData-ABNF</a>.</p>

<p class=MsoNormal>Custom query options MUST NOT begin with a <code>$</code> or <code>@</code>
character.</p>

<p class=MsoCaption>Example 135: service-specific custom query option <code>debug-mode</code></p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>http://host/service/Products?debug-mode=true</p>

</div>

<h2>##subsec Parameter Aliases</h2>

<p class=MsoNormal>Parameter aliases can be used in place of literal values in
entity keys, <a href="#sec_AddressingFunctions">function</a> parameters, or
within a <a href="#sec_SystemQueryOptionfilter"><code>$filter</code></a>
or <a href="#sec_SystemQueryOptionorderby"><code>$orderby</code></a>
expression. </p>

<p class=MsoNormal>Parameter aliases MUST start with an <code>@</code>
character, see rule <code>parameterAlias</code> in <a
href="#ODataABNF">OData-ABNF</a>. </p>

<p class=MsoNormal>The semantics of parameter aliases are covered in <a
href="#odata">OData-Protocol</a>. The <a href="#ODataABNF">OData-ABNF</a>
rule <code>aliasAndValue</code> defines the formal grammar for
passing parameter alias values as query options.</p>

<p class=MsoCaption><a name="_Toc371341828">Example </a>136: </p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;page-break-after:avoid;
background:#D9D9D9'><code>http://host/service/Movies?$filter=contains(@word,Title)&amp;@word='Black'</code></p>

</div>

<p class=MsoCaption>Example 137: </p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>http://host/service/Movies?$filter=Title eq
@title&amp;@title='Wizard of Oz'</p>

</div>

<p class=MsoCaption>Example 138: JSON array of strings as parameter alias value
– note that <code>[</code>, <code>]</code>, and <code>&quot;</code> need to be percent-encoded in real URLs, the
clear-text representation used here is just for readability</p>

<div style='border-top:solid windowtext 1.0pt;border-left:none;border-bottom:
solid windowtext 1.0pt;border-right:none;padding:3.0pt 0in 3.0pt 0in;
background:#D9D9D9;margin-left:.3in;margin-right:.3in'>

<p class=Code style='margin:0in;margin-bottom:.0001pt;background:#D9D9D9'>http://host/service/Products/Model.WithIngredients(Ingredients=@i)?@i=[&quot;Carrots&quot;,&quot;Ginger&quot;,&quot;Oranges&quot;]</p>

</div>



<h1>##sec Conformance</h1>



<p class=MsoNormal>The conformance requirements for OData clients and services
are described in <a href="#odata">OData-Protocol</a>.</p>



<p class=AppendixHeading1><a
name="_Toc371341829">Appendix A. </a><a href="#sec_Acknowledgments">Acknowledgments</a></p>



<p class=MsoNormal>The contributions of the OASIS OData Technical Committee
members, enumerated in <a href="#odata">OData-Protocol</a>, are
gratefully acknowledged.</p>



<p class=AppendixHeading1><a
name="_Toc371341830">Appendix B. </a><a href="#sec_RevisionHistory">Revision History</a></p>



<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='margin-left:5.4pt;border-collapse:collapse;border:none'>
 <tr>
  <td width=101 valign=top style='width:76.1pt;border:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><b>Revision</b></p>
  </td>
  <td width=88 valign=top style='width:66.15pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><b>Date</b></p>
  </td>
  <td width=140 valign=top style='width:105.25pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><b>Editor</b></p>
  </td>
  <td width=286 valign=top style='width:214.6pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><b>Changes Made</b></p>
  </td>
 </tr>
 <tr>
  <td width=101 valign=top style='width:76.1pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Working Draft 01</p>
  </td>
  <td width=88 valign=top style='width:66.15pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>2016-06-22</p>
  </td>
  <td width=140 valign=top style='width:105.25pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Michael Pizzo</p>
  <p class=MsoNormal>Ralf Handl</p>
  </td>
  <td width=286 valign=top style='width:214.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Transferred content from OData 4.0 Part 2 – URL
  Conventions Errata 3</p>
  </td>
 </tr>
 <tr>
  <td width=101 valign=top style='width:76.1pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Committee Specification Draft 01</p>
  </td>
  <td width=88 valign=top style='width:66.15pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>2016-12-08</p>
  </td>
  <td width=140 valign=top style='width:105.25pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Michael Pizzo </p>
  <p class=MsoNormal>Ralf Handl</p>
  </td>
  <td width=286 valign=top style='width:214.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Integrated 4.01 features</p>
  <p class=MsoListParagraphCxSpFirst style='margin-left:.25in;text-indent:-.25in'><span
  style='font-family:Symbol'>· </span>Alternate keys</p>
  <p class=MsoListParagraphCxSpMiddle style='margin-left:.25in;text-indent:
  -.25in'><span style='font-family:Symbol'>· </span>Key-as-segment convention</p>
  <p class=MsoListParagraphCxSpMiddle style='margin-left:.25in;text-indent:
  -.25in'><span style='font-family:Symbol'>· </span>Operators in and <code>divby</code></p>
  <p class=MsoListParagraphCxSpMiddle style='margin-left:.25in;text-indent:
  -.25in'><span style='font-family:Symbol'>· </span><code>$expand</code> with stream properties</p>
  <p class=MsoListParagraphCxSpMiddle style='margin-left:.25in;text-indent:
  -.25in'><span style='font-family:Symbol'>· </span><code>$compute</code> system query option </p>
  <p class=MsoListParagraphCxSpLast style='margin-left:.25in;text-indent:-.25in'><span
  style='font-family:Symbol'>· </span><code>$index</code> system query option</p>
  </td>
 </tr>
 <tr>
  <td width=101 valign=top style='width:76.1pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Committee Specification Draft 02</p>
  </td>
  <td width=88 valign=top style='width:66.15pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>2017-06-08</p>
  </td>
  <td width=140 valign=top style='width:105.25pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Michael Pizzo </p>
  <p class=MsoNormal>Ralf Handl</p>
  </td>
  <td width=286 valign=top style='width:214.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>More 4.01 features</p>
  <p class=MsoListParagraphCxSpFirst style='margin-left:.25in;text-indent:-.25in'><span
  style='font-family:Symbol'>· </span>Set-based operations</p>
  <p class=MsoListParagraphCxSpMiddle style='margin-left:.25in;text-indent:
  -.25in'><span style='font-family:Symbol'>· </span><code>$expand</code>, <code>$select</code>,
  <code>$filter</code> with <code>POST</code> and
  <code>PATCH</code></p>
  <p class=MsoListParagraphCxSpMiddle style='margin-left:.25in;text-indent:
  -.25in'><span style='font-family:Symbol'>· </span>Instance annotations in query options</p>
  <p class=MsoListParagraphCxSpLast style='margin-left:.25in;text-indent:-.25in'><span
  style='font-family:Symbol'>· </span><code>$schemaversion</code> system query option</p>
  </td>
 </tr>
 <tr>
  <td width=101 valign=top style='width:76.1pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Committee Specification Draft 03</p>
  </td>
  <td width=88 valign=top style='width:66.15pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>2017-09-28</p>
  </td>
  <td width=140 valign=top style='width:105.25pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Michael Pizzo </p>
  <p class=MsoNormal>Ralf Handl</p>
  </td>
  <td width=286 valign=top style='width:214.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Incorporated review feedback</p>
  <p class=MsoNormal>Added nested query options within <code>$select</code></p>
  <p class=MsoNormal>Added nested alias value assignments within <code>$expand</code> and <code>$select</code></p>
  </td>
 </tr>
 <tr>
  <td width=101 valign=top style='width:76.1pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Committee Specification Draft 04</p>
  </td>
  <td width=88 valign=top style='width:66.15pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>2017-11-10</p>
  </td>
  <td width=140 valign=top style='width:105.25pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Michael Pizzo </p>
  <p class=MsoNormal>Ralf Handl</p>
  </td>
  <td width=286 valign=top style='width:214.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Incorporated review feedback</p>
  <p class=MsoNormal>Simplified unrelating entities</p>
  </td>
 </tr>
 <tr>
  <td width=101 valign=top style='width:76.1pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Committee Specification 01</p>
  </td>
  <td width=88 valign=top style='width:66.15pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>2017-01-17</p>
  </td>
  <td width=140 valign=top style='width:105.25pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Michael Pizzo </p>
  <p class=MsoNormal>Ralf Handl</p>
  </td>
  <td width=286 valign=top style='width:214.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Non-Material Changes</p>
  </td>
 </tr>
 <tr>
  <td width=101 valign=top style='width:76.1pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Committee Specification Draft 05</p>
  </td>
  <td width=88 valign=top style='width:66.15pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>2019-06-21</p>
  </td>
  <td width=140 valign=top style='width:105.25pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Michael Pizzo</p>
  <p class=MsoNormal>Ralf Handl</p>
  </td>
  <td width=286 valign=top style='width:214.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Cast of LocalDateTime strings to <code>Edm.DateTimeOffset</code>,
  and cast between enumeration and integer types</p>
  <p class=MsoNormal style='margin:0in;margin-bottom:.0001pt'>Arrays and
  objects with expression values</p>
  <p class=MsoNormal style='margin:0in;margin-bottom:.0001pt'><code>/$filter</code> path segment</p>
  <p class=MsoNormal style='margin:0in;margin-bottom:.0001pt'><code>/$query</code> path segment</p>
  <p class=MsoNormal style='margin:0in;margin-bottom:.0001pt'>Instance
  annotations in <code>$select</code> and <code>$expand</code></p>
  <p class=MsoNormal style='margin:0in;margin-bottom:.0001pt'>New functions <code>matchesPattern</code> and <code>case</code></p>
  </td>
 </tr>
 <tr>
  <td width=101 valign=top style='width:76.1pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Committee Specification Draft 06</p>
  </td>
  <td width=88 valign=top style='width:66.15pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>2019-09-20</p>
  </td>
  <td width=140 valign=top style='width:105.25pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Michael Pizzo</p>
  <p class=MsoNormal>Ralf Handl</p>
  </td>
  <td width=286 valign=top style='width:214.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Removed nested <code>$expand</code> within <code>$select</code></p>
  </td>
 </tr>
 <tr>
  <td width=101 valign=top style='width:76.1pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Committee Specification 02</p>
  </td>
  <td width=88 valign=top style='width:66.15pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>2019-11-05</p>
  </td>
  <td width=140 valign=top style='width:105.25pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Michael Pizzo</p>
  <p class=MsoNormal>Ralf Handl</p>
  </td>
  <td width=286 valign=top style='width:214.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Non-material changes</p>
  </td>
 </tr>
</table>

<p class=MsoNormal>&nbsp;</p>

</div>

</body>

</html>
