<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <meta name="description" content="The Open Data Protocol (OData) for representing and interacting with structured content is comprised of a set of specifications. The core specification for the protocol is in OData Version 4.02 Part 1: Protocol. This document extends the core specification by defining representations for OData requests and responses using a JSON format." />
  <title>OData JSON Format Version 4.02</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    /* The extra [class] is a hack that increases specificity enough to
       override a similar rule in reveal.js */
    ul.task-list[class]{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      font-size: inherit;
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { color: #008000; } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { color: #008000; font-weight: bold; } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #19177c; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="styles/markdown-styles-v1.7.3b.css" />
  <link rel="stylesheet" href="styles/odata.css" />
  <script type="text/javascript">
    MathJax = {startup: {
      ready() {
        MathJax.startup.defaultReady();
        MathJax.startup.document.outputJax.font.variant.monospace.chars
          [0x2019] = [.611, -.287, .525, {f: "T", c: "′"}];
      }
    }};
  </script>
  <script type="text/javascript">
    document.addEventListener("DOMContentLoaded", function () {
      function darkmode_auto() {
        if (darkmode_switch.value === "auto") {
          if (darkmode_query.matches) document.documentElement.classList.add("darkmode");
          else document.documentElement.classList.remove("darkmode");
        }
      }

      function darkmode_manual() {
        localStorage.setItem("odata-specs/darkmode", darkmode_switch.value);
        switch (darkmode_switch.value) {
          case "off":
            document.documentElement.classList.remove("darkmode");
            break;
          case "on":
            document.documentElement.classList.add("darkmode");
            break;
          case "auto":
            darkmode_auto();
            break;
        }
      }

      const darkmode_query = matchMedia("(prefers-color-scheme: dark)");
      darkmode_query.addEventListener("change", darkmode_auto);
      const darkmode_switch = document.getElementById("darkmode");
      darkmode_switch.value =
        localStorage.getItem("odata-specs/darkmode") || "off";
      darkmode_switch.addEventListener("change", darkmode_manual);
      darkmode_manual();
    });
  </script>
  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>
</head>
<body>
<select id="darkmode">
  <option value="off" title="Light mode">&#x263C;</option>
  <option value="on" title="Dark mode">&#x263D;</option>
  <option value="auto" title="Follow device mode">&#x25D1;</option>
</select>
<p><img src="https://docs.oasis-open.org/templates/OASISLogo-v3.0.png" alt="OASIS Logo" /></p>
<hr />
<details open><summary>
<h1 id="odata-json-format-version-402">OData JSON Format Version 4.02</h1>
</summary>
<h2>Committee Specification Draft 02</h2>
<details open><summary>
<h2 id="28-february-2024">28 February 2024</h2>
</summary>
<p><span class="math inline">\(\hbox{}\)</span></p>
<h4>This stage:</h4>
<p><a href="https://docs.oasis-open.org/odata/odata-json-format/v4.02/csd02/odata-json-format-v4.02-csd02.md">https://docs.oasis-open.org/odata/odata-json-format/v4.02/csd02/odata-json-format-v4.02-csd02.md</a> (Authoritative)<br />
<a href="https://docs.oasis-open.org/odata/odata-json-format/v4.02/csd02/odata-json-format-v4.02-csd02.html">https://docs.oasis-open.org/odata/odata-json-format/v4.02/csd02/odata-json-format-v4.02-csd02.html</a><br />
<a href="https://docs.oasis-open.org/odata/odata-json-format/v4.02/csd02/odata-json-format-v4.02-csd02.pdf">https://docs.oasis-open.org/odata/odata-json-format/v4.02/csd02/odata-json-format-v4.02-csd02.pdf</a></p>
<h4>Previous stage:</h4>
<p><a href="https://docs.oasis-open.org/odata/odata-json-format/v4.02/csd01/odata-json-format-v4.02-csd01.md">https://docs.oasis-open.org/odata/odata-json-format/v4.02/csd01/odata-json-format-v4.02-csd01.md</a> (Authoritative)<br />
<a href="https://docs.oasis-open.org/odata/odata-json-format/v4.02/csd01/odata-json-format-v4.02-csd01.html">https://docs.oasis-open.org/odata/odata-json-format/v4.02/csd01/odata-json-format-v4.02-csd01.html</a><br />
<a href="https://docs.oasis-open.org/odata/odata-json-format/v4.02/csd01/odata-json-format-v4.02-csd01.pdf">https://docs.oasis-open.org/odata/odata-json-format/v4.02/csd01/odata-json-format-v4.02-csd01.pdf</a></p>
<h4>Latest stage:</h4>
<p><a href="https://docs.oasis-open.org/odata/odata-json-format/v4.02/odata-json-format-v4.02.md">https://docs.oasis-open.org/odata/odata-json-format/v4.02/odata-json-format-v4.02.md</a> (Authoritative)<br />
<a href="https://docs.oasis-open.org/odata/odata-json-format/v4.02/odata-json-format-v4.02.html">https://docs.oasis-open.org/odata/odata-json-format/v4.02/odata-json-format-v4.02.html</a><br />
<a href="https://docs.oasis-open.org/odata/odata-json-format/v4.02/odata-json-format-v4.02.pdf">https://docs.oasis-open.org/odata/odata-json-format/v4.02/odata-json-format-v4.02.pdf</a></p>
<h4>Technical Committee:</h4>
<p><a href="https://www.oasis-open.org/committees/odata/">OASIS Open Data Protocol (OData) TC</a></p>
<h4>Chairs:</h4>
<p>Ralf Handl (<a href="mailto:ralf.handl@sap.com">ralf.handl@sap.com</a>), <a href="http://www.sap.com/">SAP SE</a><br />
Michael Pizzo (<a href="mailto:mikep@microsoft.com">mikep@microsoft.com</a>), <a href="http://www.microsoft.com/">Microsoft</a></p>
<h4>Editors:</h4>
<p>Ralf Handl (<a href="mailto:ralf.handl@sap.com">ralf.handl@sap.com</a>), <a href="http://www.sap.com/">SAP SE</a><br />
Michael Pizzo (<a href="mailto:mikep@microsoft.com">mikep@microsoft.com</a>), <a href="http://www.microsoft.com/">Microsoft</a><br />
Heiko Theißen (<a href="mailto:heiko.theissen@sap.com">heiko.theissen@sap.com</a>), <a href="http://www.sap.com/">SAP SE</a></p>
<h4><span id="RelatedWork">Related work:</span></h4>
<p>This specification replaces or supersedes:</p>
<ul>
<li>OData JSON Format Version 4.01. Edited by Michael Pizzo, Ralf Handl, and Mark Biamonte. OASIS Standard. Latest stage: <a href="https://docs.oasis-open.org/odata/odata-json-format/v4.01/odata-json-format-v4.01.html">https://docs.oasis-open.org/odata/odata-json-format/v4.01/odata-json-format-v4.01.html</a>.</li>
<li>OData JSON Format Version 4.0. Edited by Ralf Handl, Michael Pizzo, and Mark Biamonte. OASIS Standard. Latest stage: <a href="http://docs.oasis-open.org/odata/odata-json-format/v4.0/odata-json-format-v4.0.html">http://docs.oasis-open.org/odata/odata-json-format/v4.0/odata-json-format-v4.0.html</a>.</li>
</ul>
<p>This specification is related to:</p>
<ul>
<li><em>OData Version 4.02</em>. Edited by Michael Pizzo, Ralf Handl, and Heiko Theißen. A multi-part Work Product that includes:
<ul>
<li><em>OData Version 4.02 Part 1: Protocol</em>. Latest stage. <a href="https://docs.oasis-open.org/odata/odata/v4.02/odata-v4.02-part1-protocol.html">https://docs.oasis-open.org/odata/odata/v4.02/odata-v4.02-part1-protocol.html</a></li>
<li><em>OData Version 4.02 Part 2: URL Conventions</em>. Latest stage. <a href="https://docs.oasis-open.org/odata/odata/v4.02/odata-v4.02-part2-url-conventions.html">https://docs.oasis-open.org/odata/odata/v4.02/odata-v4.02-part2-url-conventions.html</a></li>
<li><em>ABNF components: OData ABNF Construction Rules Version 4.02 and OData ABNF Test Cases</em>. <a href="https://docs.oasis-open.org/odata/odata/v4.02/csd02/abnf/">https://docs.oasis-open.org/odata/odata/v4.02/csd02/abnf/</a></li>
</ul></li>
<li><em>OData Vocabularies Version 4.0</em>. Edited by Michael Pizzo, Ralf Handl, and Ram Jeyaraman. Latest stage: <a href="https://docs.oasis-open.org/odata/odata-vocabularies/v4.0/odata-vocabularies-v4.0.html">https://docs.oasis-open.org/odata/odata-vocabularies/v4.0/odata-vocabularies-v4.0.html</a></li>
<li><em>OData Common Schema Definition Language (CSDL) JSON Representation Version 4.02</em>. Edited by Michael Pizzo, Ralf Handl, and Heiko Theißen. Latest stage: <a href="https://docs.oasis-open.org/odata/odata-csdl-json/v4.02/odata-csdl-json-v4.02.html">https://docs.oasis-open.org/odata/odata-csdl-json/v4.02/odata-csdl-json-v4.02.html</a></li>
<li><em>OData Common Schema Definition Language (CSDL) XML Representation Version 4.02</em>. Edited by Michael Pizzo, Ralf Handl, and Heiko Theißen. Latest stage: <a href="https://docs.oasis-open.org/odata/odata-csdl-xml/v4.02/odata-csdl-xml-v4.02.html">https://docs.oasis-open.org/odata/odata-csdl-xml/v4.02/odata-csdl-xml-v4.02.html</a></li>
</ul>
<h4>Abstract:</h4>
<p>The Open Data Protocol (OData) for representing and interacting with structured content is comprised of a set of specifications. The core specification for the protocol is in OData Version 4.02 Part 1: Protocol. This document extends the core specification by defining representations for OData requests and responses using a JSON format.</p>
<h4>Status:</h4>
<p>This document was last revised or approved by the OASIS Open Data Protocol (OData) TC on the above date. The level of approval is also listed above. Check the “Latest stage” location noted above for possible later revisions of this document. Any other numbered Versions and other technical work produced by the Technical Committee (TC) are listed at <a href="https://groups.oasis-open.org/communities/tc-community-home2?CommunityKey=e7cac2a9-2d18-4640-b94d-018dc7d3f0e2#technical">https://groups.oasis-open.org/communities/tc-community-home2?CommunityKey=e7cac2a9-2d18-4640-b94d-018dc7d3f0e2#technical</a>.</p>
<p>TC members should send comments on this specification to the TC’s email list. Any individual may submit comments to the TC by sending email to <a href="mailto:Technical-Committee-Comments@oasis-open.org">Technical-Committee-Comments@oasis-open.org</a>. Please use a Subject line like “Comment on OData JSON Format”.</p>
<p>This specification is provided under the <a href="https://www.oasis-open.org/policies-guidelines/ipr/#RF-on-RAND-Mode">RF on RAND Terms Mode</a> of the <a href="https://www.oasis-open.org/policies-guidelines/ipr/">OASIS IPR Policy</a>, the mode chosen when the Technical Committee was established. For information on whether any patents have been disclosed that may be essential to implementing this specification, and any offers of patent licensing terms, please refer to the Intellectual Property Rights section of the TC’s web page (<a href="https://www.oasis-open.org/committees/odata/ipr.php">https://www.oasis-open.org/committees/odata/ipr.php</a>).</p>
<p>Note that any machine-readable content (<a href="https://www.oasis-open.org/policies-guidelines/tc-process-2017-05-26/#wpComponentsCompLang">Computer Language Definitions</a>) declared Normative for this Work Product is provided in separate plain text files. In the event of a discrepancy between any such plain text file and display content in the Work Product’s prose narrative document(s), the content in the separate plain text file prevails.</p>
<h4>Key words:</h4>
<p>The key words “MUST”, “MUST NOT”, “REQUIRED”, “SHALL”, “SHALL NOT”, “SHOULD”, “SHOULD NOT”, “RECOMMENDED”, “NOT RECOMMENDED”, “MAY”, and “OPTIONAL” in this document are to be interpreted as described in BCP 14 <a href="#rfc2119">RFC2119</a> and <a href="#rfc8174">RFC8174</a> when, and only when, they appear in all capitals, as shown here.</p>
<h4>Citation format:</h4>
<p>When referencing this specification the following citation format should be used:</p>
<p><strong>[OData-JSON-Format-v4.02]</strong></p>
<p><em>OData JSON Format Version 4.02</em>. Edited by Ralf Handl, Michael Pizzo, and Heiko Theißen. 28 February 2024. OASIS Committee Specification Draft 02. <a href="https://docs.oasis-open.org/odata/odata-json-format/v4.02/csd02/odata-json-format-v4.02-csd02.html">https://docs.oasis-open.org/odata/odata-json-format/v4.02/csd02/odata-json-format-v4.02-csd02.html</a>. Latest stage: <a href="https://docs.oasis-open.org/odata/odata-json-format/v4.02/odata-json-format-v4.02.html">https://docs.oasis-open.org/odata/odata-json-format/v4.02/odata-json-format-v4.02.html</a>.</p>
<h4>Notices</h4>
<p>Copyright © OASIS Open 2024. All Rights Reserved.</p>
<p>Distributed under the terms of the OASIS <a href="https://www.oasis-open.org/policies-guidelines/ipr/">IPR Policy</a>.</p>
<p>The name “OASIS” is a trademark of <a href="https://www.oasis-open.org/">OASIS</a>, the owner and developer of this specification, and should be used only to refer to the organization and its official outputs.</p>
<p>For complete copyright information please see the full Notices section in an Appendix <a href="#Notices">below</a>.</p>
</details>
</details>
<hr />
<details open><summary>
<h1 id="table-of-contents">Table of Contents</h1>
</summary>
<div class="toc">
<ul>
<li><a href="#Introduction">1 Introduction</a>
<ul>
<li><a href="#ChangesfromEarlierVersions">1.1 Changes from Earlier Versions</a></li>
<li><a href="#Glossary">1.2 Glossary</a>
<ul>
<li><a href="#DefinitionsofTerms">1.2.1 Definitions of Terms</a></li>
<li><a href="#AcronymsandAbbreviations">1.2.2 Acronyms and Abbreviations</a></li>
<li><a href="#DocumentConventions">1.2.3 Document Conventions</a></li>
</ul></li>
</ul></li>
<li><a href="#JSONFormatDesign">2 JSON Format Design</a></li>
<li><a href="#RequestingtheJSONFormat">3 Requesting the JSON Format</a>
<ul>
<li><a href="#ControllingtheAmountofControlInformationinResponses">3.1 Controlling the Amount of Control Information in Responses</a>
<ul>
<li><a href="#metadataminimalodatametadataminimal">3.1.1 <code>metadata=minimal</code> (<code>odata.metadata=minimal</code>)</a></li>
<li><a href="#metadatafullodatametadatafull">3.1.2 <code>metadata=full</code> (<code>odata.metadata=full</code>)</a></li>
<li><a href="#metadatanoneodatametadatanone">3.1.3 <code>metadata=none</code> (<code>odata.metadata=none</code>)</a></li>
</ul></li>
<li><a href="#ControllingtheRepresentationofNumbers">3.2 Controlling the Representation of Numbers</a></li>
</ul></li>
<li><a href="#CommonCharacteristics">4 Common Characteristics</a>
<ul>
<li><a href="#HeaderContentType">4.1 Header Content-Type</a></li>
<li><a href="#MessageBody">4.2 Message Body</a></li>
<li><a href="#URLsinMessageBodies">4.3 URLs in Message Bodies</a></li>
<li><a href="#RelativeURLs">4.4 Relative URLs</a></li>
<li><a href="#PayloadOrderingConstraints">4.5 Payload Ordering Constraints</a></li>
<li><a href="#ControlInformation">4.6 Control Information</a>
<ul>
<li><a href="#ControlInformationcontextodatacontext">4.6.1 Control Information: <code>context</code> (<code>odata.context</code>)</a></li>
<li><a href="#ControlInformationmetadataEtagodatametadataEtag">4.6.2 Control Information: <code>metadataEtag</code> (<code>odata.metadataEtag</code>)</a></li>
<li><a href="#ControlInformationtypeodatatype">4.6.3 Control Information: <code>type</code> (<code>odata.type</code>)</a></li>
<li><a href="#ControlInformationcountodatacount">4.6.4 Control Information: <code>count</code> (<code>odata.count</code>)</a></li>
<li><a href="#ControlInformationnextLinkodatanextLink">4.6.5 Control Information: <code>nextLink</code> (<code>odata.nextLink</code>)</a></li>
<li><a href="#ControlInformationdeltaodatadelta">4.6.6 Control Information: <code>delta</code> (<code>odata.delta</code>)</a></li>
<li><a href="#ControlInformationdeltaLinkodatadeltaLink">4.6.7 Control Information: <code>deltaLink</code> (<code>odata.deltaLink</code>)</a></li>
<li><a href="#ControlInformationidodataid">4.6.8 Control Information: <code>id</code> (<code>odata.id</code>)</a></li>
<li><a href="#ControlInformationeditLinkandreadLinkodataeditLinkandodatareadLink">4.6.9 Control Information: <code>editLink</code> and <code>readLink</code> (<code>odata.editLink</code> and <code>odata.readLink</code>)</a></li>
<li><a href="#ControlInformationetagodataetag">4.6.10 Control Information: <code>etag</code> (<code>odata.etag</code>)</a></li>
<li><a href="#ControlInformationnavigationLinkandassociationLinkodatanavigationLinkandodataassociationLink">4.6.11 Control Information: <code>navigationLink</code> and <code>associationLink</code> (<code>odata.navigationLink</code> and <code>odata.associationLink</code>)</a></li>
<li><a href="#ControlInformationmediaodatamedia">4.6.12 Control Information: <code>media*</code> (<code>odata.media*</code>)</a></li>
<li><a href="#ControlInformationremovedodataremoved">4.6.13 Control Information: <code>removed</code> (<code>odata.removed</code>)</a></li>
<li><a href="#ControlInformationcollectionAnnotationsodatacollectionAnnotations">4.6.14 Control Information: <code>collectionAnnotations</code> (<code>odata.collectionAnnotations</code>)</a></li>
</ul></li>
</ul></li>
<li><a href="#ServiceDocument">5 Service Document</a></li>
<li><a href="#Entity">6 Entity</a></li>
<li><a href="#StructuralProperty">7 Structural Property</a>
<ul>
<li><a href="#PrimitiveValue">7.1 Primitive Value</a></li>
<li><a href="#ComplexValue">7.2 Complex Value</a></li>
<li><a href="#CollectionofPrimitiveValues">7.3 Collection of Primitive Values</a></li>
<li><a href="#CollectionofComplexValues">7.4 Collection of Complex Values</a></li>
<li><a href="#UntypedValue">7.5 Untyped Value</a></li>
</ul></li>
<li><a href="#NavigationProperty">8 Navigation Property</a>
<ul>
<li><a href="#NavigationLink">8.1 Navigation Link</a></li>
<li><a href="#AssociationLink">8.2 Association Link</a></li>
<li><a href="#ExpandedNavigationProperty">8.3 Expanded Navigation Property</a></li>
<li><a href="#DeepInsert">8.4 Deep Insert</a></li>
<li><a href="#BindOperation">8.5 Bind Operation</a></li>
<li><a href="#CollectionETag">8.6 Collection ETag</a></li>
</ul></li>
<li><a href="#StreamProperty">9 Stream Property</a></li>
<li><a href="#MediaEntity">10 Media Entity</a></li>
<li><a href="#IndividualPropertyorOperationResponse">11 Individual Property or Operation Response</a></li>
<li><a href="#CollectionofOperationResponses">12 Collection of Operation Responses</a></li>
<li><a href="#CollectionofEntities">13 Collection of Entities</a></li>
<li><a href="#EntityReference">14 Entity Reference</a></li>
<li><a href="#DeltaPayload">15 Delta Payload</a>
<ul>
<li><a href="#DeltaResponses">15.1 Delta Responses</a></li>
<li><a href="#AddedChangedEntity">15.2 Added/Changed Entity</a></li>
<li><a href="#DeletedEntity">15.3 Deleted Entity</a></li>
<li><a href="#RelatedEntities">15.4 Related Entities</a>
<ul>
<li><a href="#OData401ExpandedNavigationProperties">15.4.1 OData 4.01 Expanded Navigation Properties</a></li>
<li><a href="#OData40FlattenedDeltaPayload">15.4.2 OData 4.0 Flattened Delta Payload</a>
<ul>
<li><a href="#AddedLink">15.4.2.1 Added Link</a></li>
<li><a href="#DeletedLink">15.4.2.2 Deleted Link</a></li>
</ul></li>
</ul></li>
<li><a href="#UpdateaCollectionofEntities">15.5 Update a Collection of Entities</a></li>
</ul></li>
<li><a href="#BoundFunction">16 Bound Function</a></li>
<li><a href="#BoundAction">17 Bound Action</a></li>
<li><a href="#ActionInvocation">18 Action Invocation</a></li>
<li><a href="#BatchRequestsandResponses">19 Batch Requests and Responses</a>
<ul>
<li><a href="#BatchRequest">19.1 Batch Request</a></li>
<li><a href="#ReferencingNewEntities">19.2 Referencing New Entities</a></li>
<li><a href="#ReferencinganETag">19.3 Referencing an ETag</a></li>
<li><a href="#ReferencingResponseBodyValues">19.4 Referencing Response Body Values</a></li>
<li><a href="#ProcessingaBatchRequest">19.5 Processing a Batch Request</a></li>
<li><a href="#BatchResponse">19.6 Batch Response</a></li>
<li><a href="#AsynchronousBatchRequests">19.7 Asynchronous Batch Requests</a></li>
</ul></li>
<li><a href="#InstanceAnnotations">20 Instance Annotations</a>
<ul>
<li><a href="#AnnotateaJSONObject">20.1 Annotate a JSON Object</a></li>
<li><a href="#AnnotateaJSONArrayorPrimitive">20.2 Annotate a JSON Array or Primitive</a></li>
<li><a href="#AnnotateaPrimitiveValuewithinaJSONArray">20.3 Annotate a Primitive Value within a JSON Array</a></li>
</ul></li>
<li><a href="#ErrorHandling">21 Error Handling</a>
<ul>
<li><a href="#ErrorResponse">21.1 Error Response</a></li>
<li><a href="#InStreamError">21.2 In-Stream Error</a></li>
<li><a href="#ErrorInformationinaSuccessPayload">21.3 Error Information in a Success Payload</a>
<ul>
<li><a href="#PrimitiveValueErrors">21.3.1 Primitive Value Errors</a></li>
<li><a href="#StructuredTypeErrors">21.3.2 Structured Type Errors</a></li>
<li><a href="#CollectionErrors">21.3.3 Collection Errors</a></li>
</ul></li>
</ul></li>
<li><a href="#Extensibility">22 Extensibility</a></li>
<li><a href="#Conformance">23 Conformance</a></li>
<li><a href="#References">A References</a>
<ul>
<li><a href="#NormativeReferences">A.1 Normative References</a></li>
<li><a href="#InformativeReferences">A.2 Informative References</a></li>
</ul></li>
<li><a href="#SafetySecurityandPrivacyConsiderations">B Safety, Security and Privacy Considerations</a></li>
<li><a href="#Acknowledgments">C Acknowledgments</a>
<ul>
<li><a href="#SpecialThanks">C.1 Special Thanks</a></li>
<li><a href="#Participants">C.2 Participants</a></li>
</ul></li>
<li><a href="#RevisionHistory">D Revision History</a></li>
<li><a href="#Notices">E Notices</a></li>
</ul>
</div>
</details>
<hr />
<details open><summary>
<h1 id="1-introduction"><a id="Introduction" href="#Introduction">1 Introduction</a></h1>
</summary>
<p>The OData protocol is comprised of a set of specifications for representing and interacting with structured content. The core specification for the protocol is in <a href="#ODataProtocol">OData-Protocol</a>; this document is an extension of the core protocol. This document defines representations for the OData requests and responses using the JavaScript Object Notation (JSON), see [RFC8259].</p>
<p>An OData JSON payload may represent:</p>
<ul>
<li>a <a href="#PrimitiveValue">single primitive value</a></li>
<li>a <a href="#CollectionofPrimitiveValues">collection of primitive values</a></li>
<li>a <a href="#ComplexValue">single complex type value</a></li>
<li>a <a href="#CollectionofComplexValues">collection of complex type values</a></li>
<li>a <a href="#Entity">single entity</a> or <a href="#EntityReference">entity reference</a></li>
<li>a <a href="#CollectionofEntities">collection of entities</a> or <a href="#EntityReference">entity references</a></li>
<li>a <a href="#DeltaPayload">collection of changes</a></li>
<li>a <a href="#ServiceDocument">service document</a> describing the top-level resources exposed by the service</li>
<li>an <a href="#ErrorResponse">error</a>.</li>
</ul>
<details open><summary>
<h2 id="11-changes-from-earlier-versions"><a id="ChangesfromEarlierVersions" href="#ChangesfromEarlierVersions">1.1 Changes from Earlier Versions</a></h2>
</summary>
<table>
<thead>
<tr class="header">
<th>Section</th>
<th>Feature / Change</th>
<th>Issue</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><a href="#ControlInformationcontextodatacontext">Section 4.6.1</a></td>
<td>Fragment portion of Context URL is not percent-encoded</td>
<td><a href="https://github.com/oasis-tcs/odata-specs/issues/368">368</a></td>
</tr>
<tr class="even">
<td><a href="#ControlInformationidodataid">Section 4.6.8</a></td>
<td>Transient entities can be identifiable</td>
<td><a href="https://github.com/oasis-tcs/odata-specs/issues/1928">1928</a></td>
</tr>
<tr class="odd">
<td><a href="#ControlInformationmediaodatamedia">Section 4.6.12</a></td>
<td><code>mediaContentType</code> can be <code>null</code></td>
<td><a href="https://github.com/oasis-tcs/odata-specs/issues/536">536</a></td>
</tr>
<tr class="even">
<td><a href="#StructuralProperty">Section 7</a>, <a href="#InformativeReferences">Section A.2</a></td>
<td>Removed reference to obsolete version of GeoJSON</td>
<td><a href="https://github.com/oasis-tcs/odata-specs/issues/456">456</a></td>
</tr>
<tr class="odd">
<td><a href="#DeletedEntity">Section 15.3</a></td>
<td><code>type</code> control information, if present, must come immediately after <code>removed</code></td>
<td></td>
</tr>
</tbody>
</table>
<p><a href="https://github.com/oasis-tcs/odata-specs/issues/1985">1985</a> <a href="#ActionInvocation">Section 18</a>| Allow common expressions in action payloads| <a href="https://github.com/oasis-tcs/odata-specs/issues/341">341</a></p>
</details>
<details open><summary>
<h2 id="12-glossary"><a id="Glossary" href="#Glossary">1.2 Glossary</a></h2>
</summary>
<details open><summary>
<h3 id="121-definitions-of-terms"><a id="DefinitionsofTerms" href="#DefinitionsofTerms">1.2.1 Definitions of Terms</a></h3>
</summary>
</details>
<details open><summary>
<h3 id="122-acronyms-and-abbreviations"><a id="AcronymsandAbbreviations" href="#AcronymsandAbbreviations">1.2.2 Acronyms and Abbreviations</a></h3>
</summary>
<!-- TODO -->

</details>
<details open><summary>
<h3 id="123-document-conventions"><a id="DocumentConventions" href="#DocumentConventions">1.2.3 Document Conventions</a></h3>
</summary>
<p>Keywords defined by this specification use <code>this monospaced font</code>.</p>
<p>Some sections of this specification are illustrated with non-normative examples.</p>
<div class="example">
<p>Example 1: text describing an example uses this paragraph style</p>
<pre><code>Non-normative examples use this paragraph style.</code></pre>
</div>
<p>All examples in this document are non-normative and informative only.</p>
<p>All other text is normative unless otherwise labeled.</p>
<!--
Here is a customized command line which will generate HTML from the markdown file (named `odata-json-format-v4.02-csd02.md`). Line breaks are added for readability only:

```
pandoc -f gfm+tex_math_dollars+fenced_divs+smart
       -t html
       -o odata-json-format-v4.02-csd02.html
       -c styles/markdown-styles-v1.7.3b.css
       -c styles/odata.css
       -s
       --mathjax
       --eol=lf
       --wrap=none
       --metadata pagetitle="OData JSON Format Version 4.02"
       odata-json-format-v4.02-csd02.md
```

This uses pandoc 3.1.13 from https://github.com/jgm/pandoc/releases/tag/3.1.13.
-->

</details>
</details>
</details>
<hr />
<details open><summary>
<h1 id="2-json-format-design"><a id="JSONFormatDesign" href="#JSONFormatDesign">2 JSON Format Design</a></h1>
</summary>
<p>JSON, as described in <a href="#rfc8259">RFC8259</a> defines a text format for serializing structured data. Objects are serialized as an unordered collection of name/value pairs.</p>
<p>JSON does not define any semantics around the name/value pairs that make up an object, nor does it define an extensibility mechanism for adding control information to a payload.</p>
<p>OData’s JSON format extends JSON by defining general conventions for name/value pairs that annotate a JSON object, property or array. OData defines a set of canonical name/value pairs for control information such as ids, types, and links, and <a href="#InstanceAnnotations">instance annotations</a> MAY be used to add domain-specific information to the payload.</p>
<p>A key feature of OData’s JSON format is to allow omitting predictable parts of the wire format from the actual payload. To reconstitute this data on the receiving end, expressions are used to compute missing links, type information, and other control data. These expressions (together with the data on the wire) can be used by the client to compute predictable payload pieces as if they had been included on the wire directly.</p>
<p>Control information is used in JSON to capture instance metadata that cannot be predicted (e.g. the next link of a collection) as well as a mechanism to provide values where a computed value would be wrong (e.g. if the media read link of one particular entity does not follow the standard URL conventions). Computing values from metadata expressions is compute intensive and some clients might opt for a larger payload size to avoid computational complexity; to accommodate for this the <code>Accept</code> header allows the client to control the amount of control information added to the response.</p>
<p>To optimize streaming scenarios, there are a few restrictions that MAY be imposed on the sequence in which name/value pairs appear within JSON objects. For details on the ordering requirements see <a href="#PayloadOrderingConstraints">Payload Ordering Constraints</a>.</p>
</details>
<hr />
<details open><summary>
<h1 id="3-requesting-the-json-format"><a id="RequestingtheJSONFormat" href="#RequestingtheJSONFormat">3 Requesting the JSON Format</a></h1>
</summary>
<p>The OData JSON format can be requested using the <code>$format</code> query option in the request URL with the media type <code>application/json</code>, optionally followed by format parameters, or the case-insensitive abbreviation <code>json</code> which MUST NOT be followed by format parameters.</p>
<p>Alternatively, this format can be requested using the <code>Accept</code> header with the media type <code>application/json</code>, optionally followed by format parameters.</p>
<p>If specified, <code>$format</code> overrides any value specified in the <code>Accept</code> header.</p>
<p>Possible format parameters are:</p>
<ul>
<li><a href="#ControllingtheRepresentationofNumbers"><code>ExponentialDecimals</code></a></li>
<li><a href="#ControllingtheRepresentationofNumbers"><code>IEEE754Compatible</code></a></li>
<li><a href="#ControllingtheAmountofControlInformationinResponses"><code>metadata</code></a></li>
<li><a href="#PayloadOrderingConstraints"><code>streaming</code></a></li>
</ul>
<p>The names and values of these format parameters are case-insensitive.</p>
<p>Services SHOULD advertise the supported media types by annotating the entity container with the term <a href="https://github.com/oasis-tcs/odata-vocabularies/blob/main/vocabularies/Org.OData.Capabilities.V1.md#SupportedFormats"><code>Capabilities.SupportedFormats</code></a> defined in <a href="#ODataVocCap">OData-VocCap</a>, listing all available formats and combinations of supported format parameters.</p>
<details open><summary>
<h2 id="31-controlling-the-amount-of-control-information-in-responses"><a id="ControllingtheAmountofControlInformationinResponses" href="#ControllingtheAmountofControlInformationinResponses">3.1 Controlling the Amount of Control Information in Responses</a></h2>
</summary>
<p>The amount of <a href="#ControlInformation">control information</a> needed (or desired) in the payload depends on the client application and device. The <code>metadata</code> parameter can be applied to the <code>Accept</code> header of an OData request to influence how much control information will be included in the response.</p>
<p>Other <code>Accept</code> header parameters (e.g., <code>streaming</code>) are orthogonal to the <code>metadata</code> parameter and are therefore not mentioned in this section.</p>
<p>If a client prefers a very small wire size and is intelligent enough to compute data using metadata expressions, the <code>Accept</code> header should include <a href="#metadataminimalodatametadataminimal"><code>metadata=minimal</code></a>. If computation is more critical than wire size or the client is incapable of computing control information, <a href="#metadatafullodatametadatafull"><code>metadata=full</code></a> directs the service to inline the control information that normally would be computed from metadata expressions in the payload. <a href="#metadatanoneodatametadatanone"><code>metadata=none</code></a> is an option for clients that have out-of-band knowledge or don’t require control information.</p>
<p>In addition, the client may use the <code>include-annotations</code> preference in the <code>Prefer</code> header to request additional control information. Services supporting this MUST NOT omit control information required by the chosen <code>metadata</code> parameter, and services MUST NOT exclude the <a href="#ControlInformationnextLinkodatanextLink"><code>nextLink</code></a>, <a href="#ControlInformationdeltaLinkodatadeltaLink"><code>deltaLink</code></a>, and <a href="#ControlInformationcountodatacount"><code>count</code></a> if they are required by the response type.</p>
<p>If the client includes the <code>OData-MaxVersion</code> header in a request and does not specify the <code>metadata</code> format parameter in either the <code>Accept</code> header or <code>$format</code> query option, the service MUST return at least the <a href="#metadataminimalodatametadataminimal">minimal control information</a>.</p>
<p>Note that in OData 4.0 the <code>metadata</code> format parameter was prefixed with <code>odata.</code>. Payloads with an <code>OData-Version</code> header equal to <code>4.0</code> MUST include the <code>odata.</code> prefix. Payloads with an <code>OData-Version</code> header equal to <code>4.01</code> or greater SHOULD NOT include the <code>odata.</code> prefix.</p>
<details open><summary>
<h3 id="311-metadataminimal-odatametadataminimal"><a id="metadataminimalodatametadataminimal" href="#metadataminimalodatametadataminimal">3.1.1 <code>metadata=minimal</code> (<code>odata.metadata=minimal</code>)</a></h3>
</summary>
<p>The <code>metadata=minimal</code> format parameter indicates that the service SHOULD remove computable control information from the payload wherever possible. The response payload MUST contain at least the following <a href="#ControlInformation">control information</a>:</p>
<ul>
<li><a href="#ControlInformationcontextodatacontext"><code>context</code></a>: the root context URL of the payload and the context URL for any deleted entries or added or deleted links in a delta response, or for entities or entity collections whose set cannot be determined from the root context URL</li>
<li><a href="#ControlInformationetagodataetag"><code>etag</code></a>: the ETag of the entity or collection, as appropriate</li>
<li><a href="#ControlInformationcountodatacount"><code>count</code></a>: the total count of a collection of entities or collection of entity references, if requested</li>
<li><a href="#ControlInformationnextLinkodatanextLink"><code>nextLink</code></a>: the next link of a collection with partial results</li>
<li><a href="#ControlInformationdeltaLinkodatadeltaLink"><code>deltaLink</code></a>: the delta link for obtaining changes to the result, if requested</li>
</ul>
<p>In addition, control information MUST appear in the payload for cases where actual values are not the same as the computed values and MAY appear otherwise. When control information appears in the payload, it is treated as exceptions to the computed values.</p>
<p>Media entities and stream properties MAY in addition contain the following control information:</p>
<ul>
<li><a href="#ControlInformationmediaodatamedia"><code>mediaEtag</code></a>: the ETag of the stream, as appropriate</li>
<li><a href="#ControlInformationmediaodatamedia"><code>mediaContentType</code></a>: the media type of the stream</li>
</ul>
</details>
<details open><summary>
<h3 id="312-metadatafull-odatametadatafull"><a id="metadatafullodatametadatafull" href="#metadatafullodatametadatafull">3.1.2 <code>metadata=full</code> (<code>odata.metadata=full</code>)</a></h3>
</summary>
<p>The <code>metadata=full</code> format parameter indicates that the service MUST include all control information explicitly in the payload.</p>
<p>The full list of control information that may appear in a <code>metadata=full</code> response is as follows:</p>
<ul>
<li><a href="#ControlInformationcontextodatacontext"><code>context</code></a>: the context URL for a collection, entity, primitive value, or service document.</li>
<li><a href="#ControlInformationcountodatacount"><code>count</code></a>: the total count of a collection of entities or collection of entity references, if requested.</li>
<li><a href="#ControlInformationnextLinkodatanextLink"><code>nextLink</code></a>: the next link of a collection with partial results</li>
<li><a href="#ControlInformationdeltaLinkodatadeltaLink"><code>deltaLink</code></a>: the delta link for obtaining changes to the result, if requested</li>
<li><a href="#ControlInformationidodataid"><code>id</code></a>: the ID of the entity</li>
<li><a href="#ControlInformationetagodataetag"><code>etag</code></a>: the ETag of the entity or collection, as appropriate</li>
<li><a href="#ControlInformationeditLinkandreadLinkodataeditLinkandodatareadLink"><code>readLink</code></a>: the link used to read the entity, if the edit link cannot be used to read the entity</li>
<li><a href="#ControlInformationeditLinkandreadLinkodataeditLinkandodatareadLink"><code>editLink</code></a>: the link used to edit/update the entity, if the entity is updatable and the <code>id</code> does not represent a URL that can be used to edit the entity</li>
<li><a href="#NavigationLink"><code>navigationLink</code></a>: the link used to retrieve the values of a navigation property</li>
<li><a href="#AssociationLink"><code>associationLink</code></a>: the link used to describe the relationship between this entity and related entities</li>
<li><a href="#ControlInformationtypeodatatype"><code>type</code></a>: the type of the containing object or targeted property if the type of the object or targeted property cannot be heuristically determined from the data value, see <a href="#ControlInformationtypeodatatype">section 4.6.3</a>.</li>
</ul>
<p>Media entities and stream properties may in addition contain the following control information:</p>
<ul>
<li><a href="#ControlInformationmediaodatamedia"><code>mediaReadLink</code></a>: the link used to read the stream</li>
<li><a href="#ControlInformationmediaodatamedia"><code>mediaEditLink</code></a>: the link used to edit/update the stream</li>
<li><a href="#ControlInformationmediaodatamedia"><code>mediaEtag</code></a>: the ETag of the stream, as appropriate</li>
<li><a href="#ControlInformationmediaodatamedia"><code>mediaContentType</code></a>: the media type of the stream</li>
</ul>
</details>
<details open><summary>
<h3 id="313-metadatanone-odatametadatanone"><a id="metadatanoneodatametadatanone" href="#metadatanoneodatametadatanone">3.1.3 <code>metadata=none</code> (<code>odata.metadata=none</code>)</a></h3>
</summary>
<p>The <code>metadata=none</code> format parameter indicates that the service SHOULD omit control information other than <a href="#ControlInformationnextLinkodatanextLink"><code>nextLink</code></a> and <a href="#ControlInformationcountodatacount"><code>count</code></a>. This control information MUST continue to be included, as applicable, even in the <code>metadata=none</code> case.</p>
<p>It is not valid to specify <code>metadata=none</code> on a <a href="#DeltaPayload">delta request</a>.</p>
</details>
</details>
<details open><summary>
<h2 id="32-controlling-the-representation-of-numbers"><a id="ControllingtheRepresentationofNumbers" href="#ControllingtheRepresentationofNumbers">3.2 Controlling the Representation of Numbers</a></h2>
</summary>
<p>The <code>IEEE754Compatible=true</code> format parameter indicates that the service MUST serialize <code>Edm.Int64</code> and <code>Edm.Decimal</code> numbers (including the <a href="#ControlInformationcountodatacount"><code>count</code></a>, if requested) as strings. This is in conformance with <a href="#rfc7493">RFC7493</a>.</p>
<p>If not specified, or specified as <code>IEEE754Compatible=false</code>, all numbers MUST be serialized as JSON numbers.</p>
<p>This enables support for JavaScript numbers that are defined to be 64-bit binary format IEEE 754 values (see <a href="#_ECMAScript">ECMAScript</a>, <a href="http://www.ecma-international.org/ecma-262/5.1/#sec-4.3.19">section 4.3.1.9</a>) resulting in integers losing precision past 15 digits, and decimals losing precision due to the conversion from base 10 to base 2.</p>
<p>OData JSON request and response payloads that format <code>Edm.Int64</code> and <code>Edm.Decimal</code> values as strings MUST specify this format parameter in the media type sent in the <a href="#HeaderContentType"><code>Content-Type</code></a> header.</p>
<p>Services producing responses without format parameter <code>IEEE754Compatible=true</code> which are unable to produce exact JSON numbers MAY serialize <code>Edm.Int64</code> and <code>Edm.Decimal</code> numbers with a rounded/inexact value as a JSON number and annotate that value with an instance annotation with term <code>Core.ValueException</code> defined in <a href="#ODataVocCore">OData-VocCore</a> containing the exact value as a string. This situation can for example happen if the client only accepts <code>application/json</code> without any format parameters and the service is written in JavaScript.</p>
<p>For payloads with an <code>OData-Version</code> header equal to <code>4.0</code> the <code>ExponentialDecimals=true</code> format parameter indicates that the service MAY serialize <code>Edm.Decimal</code> numbers in exponential notation (e.g. <code>1e-6</code> instead of <code>0.000001</code>).</p>
<p>The sender of a request MUST specify <code>ExponentialDecimals=true</code> in the <code>Content-Type</code> header if the request body contains <code>Edm.Decimal</code> values in exponential notation.</p>
<p>If not specified, or specified as <code>ExponentialDecimals=false</code>, all <code>Edm.Decimal</code> values MUST be serialized in long notation, using only an optional sign, digits, and an optional decimal point followed by digits.</p>
<p>Payloads with an <code>OData-Version</code> header equal to <code>4.01</code> or greater always allow exponential notation for numbers and the <code>ExponentialDecimals</code> format parameter is not needed or used.</p>
</details>
</details>
<hr />
<details open><summary>
<h1 id="4-common-characteristics"><a id="CommonCharacteristics" href="#CommonCharacteristics">4 Common Characteristics</a></h1>
</summary>
<p>This section describes common characteristics of the representation for OData values in JSON. A request or response body consists of several parts. It contains OData values as part of a larger document. Requests and responses are structured almost identical; the few existing differences will be explicitly called out in the respective subsections.</p>
<details open><summary>
<h2 id="41-header-content-type"><a id="HeaderContentType" href="#HeaderContentType">4.1 Header Content-Type</a></h2>
</summary>
<p>Requests and responses with a JSON message body MUST have a <code>Content-Type</code> header value of <code>application/json</code>.</p>
<p>Requests MAY add the <code>charset</code> parameter to the content type. Allowed values are <code>UTF-8</code>, <code>UTF-16</code>, and <code>UTF-32</code>. If no <code>charset</code> parameter is present, <code>UTF-8</code> MUST be assumed.</p>
<p>Responses MUST include the <a href="#ControllingtheAmountofControlInformationinResponses"><code>metadata</code></a> parameter to specify the amount of metadata included in the response.</p>
<p>Requests and responses MUST include the <a href="#ControllingtheRepresentationofNumbers"><code>IEEE754Compatible</code></a> parameter if <code>Edm.Int64</code> and <code>Edm.Decimal</code> numbers are represented as strings.</p>
<p>Requests and responses MAY add the <code>streaming</code> parameter with a value of <code>true</code> or <code>false</code>, see <a href="#PayloadOrderingConstraints">section 4.5</a>.</p>
</details>
<details open><summary>
<h2 id="42-message-body"><a id="MessageBody" href="#MessageBody">4.2 Message Body</a></h2>
</summary>
<p>Each message body is represented as a single JSON object. This object is either the representation of an <a href="#Entity">entity</a>, an <a href="#EntityReference">entity reference</a> or a <a href="#ComplexValue">complex type instance</a>, or it contains a name/value pair whose name MUST be <code>value</code> and whose value is the correct representation for a <a href="#PrimitiveValue">primitive value</a>, a <a href="#CollectionofPrimitiveValues">collection of primitive values</a>, a <a href="#CollectionofComplexValues">collection of complex values</a>, a <a href="#CollectionofEntities">collection of entities</a>, or a collection of objects that represent <a href="#DeltaPayload">changes to a previous result</a>.</p>
<p>Client libraries MUST retain the order of objects within an array in JSON responses.</p>
</details>
<details open><summary>
<h2 id="43-urls-in-message-bodies"><a id="URLsinMessageBodies" href="#URLsinMessageBodies">4.3 URLs in Message Bodies</a></h2>
</summary>
<p>URLs represented as a string within a JSON payload, including <a href="#BatchRequest">batch requests</a>, must follow standard OData encoding rules as defined in <a href="#ODataURL">OData-URL</a>.</p>
<p>For <a href="#RelativeURLs">relative URLs</a> this means that colons (<code>:</code>) in the path part, especially within key values, MUST be percent-encoded to avoid confusion with the scheme separator. Colons within the query part, i.e. after the question mark character (<code>?</code>), need not be percent-encoded.</p>
</details>
<details open><summary>
<h2 id="44-relative-urls"><a id="RelativeURLs" href="#RelativeURLs">4.4 Relative URLs</a></h2>
</summary>
<p>URLs present in a payload (whether request or response) MAY be represented as relative URLs.</p>
<p>Relative URLs, other than those in <a href="#ControlInformationtypeodatatype"><code>type</code></a>, are relative to their base URL, which is</p>
<ul>
<li>the <a href="#ControlInformationcontextodatacontext">context URL</a> of the same JSON object, if one exists, otherwise</li>
<li>the context URL of the enclosing object, if one exists, otherwise</li>
<li>the context URL of the next enclosing object, if one exists, etc. until the document root, otherwise</li>
<li>the request URL.</li>
</ul>
<p>For context URLs, these rules apply starting with the second bullet point.</p>
<p>Within the <a href="#ControlInformationtypeodatatype"><code>type</code></a> control information, relative URLs are relative to the base type URL, which is</p>
<ul>
<li>the <code>type</code> of the enclosing object, if one exists, otherwise</li>
<li>the <code>type</code> of the next enclosing object, if one exists, etc. until the document root, otherwise</li>
<li>the context URL of the document root, if one exists, otherwise</li>
<li>the request URL.</li>
</ul>
<p>Processors expanding the URLs MUST use normal URL expansion rules as defined in <a href="#rfc3986">RFC3986</a>. This means that if the base URL is a context URL, the part starting with <code>$metadata#</code> is ignored when resolving the relative URL.</p>
<p>Clients that receive relative URLs in response payloads SHOULD use the same relative URLs, where appropriate, in request payloads (such as <a href="#BindOperation">bind operations</a> and batch requests) and in system query options (such as <code>$id</code>).</p>
<div class="example">
<p>Example 2:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;@context&quot;</span><span class="fu">:</span> <span class="st">&quot;http://host/service/$metadata#Customers/$entity&quot;</span><span class="fu">,</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>  <span class="er">…</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;@editLink&quot;</span><span class="fu">:</span> <span class="st">&quot;Customers(&#39;ALFKI&#39;)&quot;</span><span class="fu">,</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>  <span class="er">…</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;Orders@navigationLink&quot;</span><span class="fu">:</span> <span class="st">&quot;Customers(&#39;ALFKI&#39;)/Orders&quot;</span><span class="fu">,</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>  <span class="er">…</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p>The resulting absolute URLs are</p>
<pre><code>http://host/service/Customers(&#39;ALFKI&#39;)
http://host/service/Customers(&#39;ALFKI&#39;)/Orders</code></pre>
</div>
</details>
<details open><summary>
<h2 id="45-payload-ordering-constraints"><a id="PayloadOrderingConstraints" href="#PayloadOrderingConstraints">4.5 Payload Ordering Constraints</a></h2>
</summary>
<p>Ordering constraints MAY be imposed on the JSON payload in order to support streaming scenarios. These ordering constraints MUST only be assumed if explicitly specified as some clients (and services) might not be able to control, or might not care about, the order of the JSON properties in the payload.</p>
<p>Clients can request that a JSON response conform to these ordering constraints by specifying a media type of <code>application/json</code> with the <code>streaming=true</code> parameter in the <code>Accept</code> header or <code>$format</code> query option. Services MUST return <code>406 Not Acceptable</code> if the client only requests streaming and the service does not support it.</p>
<p>Clients may specify the <code>streaming=true</code> parameter in the <code>Content-Type</code> header of requests to indicate that the request body follows the payload ordering constraints. In the absence of this parameter, the service must assume that the JSON properties in the request are unordered.</p>
<p>Processors MUST only assume streaming support if it is explicitly indicated in the <code>Content-Type</code> header via the <code>streaming=true</code> parameter.</p>
<div class="example">
<p>Example 3: a payload with</p>
<pre><code>Content-Type: application/json;metadata=minimal;streaming=true</code></pre>
<p>can be assumed to support streaming, whereas a payload with</p>
<pre><code>Content-Type: application/json;metadata=minimal</code></pre>
<p>cannot be assumed to support streaming.</p>
</div>
<p>JSON producers are encouraged to follow the payload ordering constraints whenever possible (and include the <code>streaming=true</code> media type parameter) to support the maximum set of client scenarios.</p>
<p>To support streaming scenarios the following payload ordering constraints have to be met:</p>
<ul>
<li>If present, the <code>context</code> control information MUST be the first property in the JSON object.</li>
<li>For 4.01 deleted entities, the <code>removed</code> control information MUST appear after <code>context</code>, if present, and before any other property or control information.</li>
<li>The <code>type</code> control information, if present, MUST appear next in the JSON object.</li>
<li>The <code>id</code> and <code>etag</code> control information MUST appear before any property, property annotation, or property control information.</li>
<li>All annotations or control information for a structural or navigation property MUST appear as a group immediately before the property itself. The one exception is the <a href="#ControlInformationnextLinkodatanextLink"><code>nextLink</code></a> of a collection which MAY appear after the collection it annotates.</li>
<li>All other control information can appear anywhere in the payload as long as it does not violate any of the above rules.</li>
<li>For 4.0 payloads, annotations and control information for navigation properties MUST appear after all structural properties. 4.01 clients MUST NOT assume this ordering.</li>
</ul>
<p>Note that in OData 4.0 the <code>streaming</code> format parameter was prefixed with <code>odata.</code>. Payloads with an <code>OData-Version</code> header equal to <code>4.0</code> MUST include the <code>odata.</code> prefix. Payloads with an <code>OData-Version</code> header equal to <code>4.01</code> or greater SHOULD NOT include the <code>odata.</code> prefix.</p>
</details>
<details open><summary>
<h2 id="46-control-information"><a id="ControlInformation" href="#ControlInformation">4.6 Control Information</a></h2>
</summary>
<p>In addition to the “pure data” a message body MAY contain <a href="#InstanceAnnotations">annotations</a> and control information that is represented as name/value pairs whose names start with <code>@</code>.</p>
<p>In requests and responses with an <code>OData-Version</code> header with a value of <code>4.0</code> control information names are prefixed with <code>@odata.</code>, e.g. <code>@odata.context</code>. In requests and responses without such a header the <code>odata.</code> prefix SHOULD be omitted, e.g. <code>@context</code>.</p>
<p>In some cases, control information is required in request payloads; this is called out in the following subsections.</p>
<p>Receivers that encounter unknown annotations in any namespace or unknown control information MUST NOT stop processing and MUST NOT signal an error.</p>
<details open><summary>
<h3 id="461-control-information-context-odatacontext"><a id="ControlInformationcontextodatacontext" href="#ControlInformationcontextodatacontext">4.6.1 Control Information: <code>context</code> (<code>odata.context</code>)</a></h3>
</summary>
<p>The <code>context</code> control information returns the context URL (see <a href="#ODataProtocol">OData-Protocol</a>) for the payload. This URL can be absolute or <a href="#RelativeURLs">relative</a>. The fragment portion of the context URL MUST NOT be percent-encoded.</p>
<p>The <code>context</code> control information is not returned if <a href="#metadatanoneodatametadatanone"><code>metadata=none</code></a> is requested. Otherwise it MUST be the first property of any JSON response that allows this control information (this excludes for example <a href="#ErrorResponse">error responses</a>).</p>
<p>The <code>context</code> control information MUST also be included in requests and responses for entities whose entity set cannot be determined from the context URL of the collection.</p>
<p>For more information on the format of the context URL, see <a href="#ODataProtocol">OData-Protocol</a>.</p>
<p>Request payloads MAY include a context URL as a base URL for <a href="#RelativeURLs">relative URLs</a> in the request payload.</p>
<div class="example">
<p>Example 4:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;@context&quot;</span><span class="fu">:</span> <span class="st">&quot;http://host/service/$metadata#Customers/$entity&quot;</span><span class="fu">,</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;@metadataEtag&quot;</span><span class="fu">:</span> <span class="st">&quot;W/</span><span class="ch">\&quot;</span><span class="st">A1FF3E230954908F</span><span class="ch">\&quot;</span><span class="st">&quot;</span><span class="fu">,</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>  <span class="er">…</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
</div>
</details>
<details open><summary>
<h3 id="462-control-information-metadataetag-odatametadataetag"><a id="ControlInformationmetadataEtagodatametadataEtag" href="#ControlInformationmetadataEtagodatametadataEtag">4.6.2 Control Information: <code>metadataEtag</code> (<code>odata.metadataEtag</code>)</a></h3>
</summary>
<p>The <code>metadataEtag</code> control information MAY appear in a response in order to specify the entity tag (ETag) that can be used to determine the version of the metadata of the response. If an ETag is returned when requesting the metadata document, then the service SHOULD set the <code>metadataEtag</code> control information to the metadata document’s ETag in all responses when using <a href="#metadataminimalodatametadataminimal"><code>metadata=minimal</code></a> or <a href="#metadatafullodatametadatafull"><code>metadata=full</code></a>. If no ETag is returned when requesting the metadata document, then the service SHOULD NOT set the <code>metadataEtag</code> control information in any responses.</p>
<p>For details on how ETags are used, see <a href="#ODataProtocol">OData-Protocol</a>.</p>
</details>
<details open><summary>
<h3 id="463-control-information-type-odatatype"><a id="ControlInformationtypeodatatype" href="#ControlInformationtypeodatatype">4.6.3 Control Information: <code>type</code> (<code>odata.type</code>)</a></h3>
</summary>
<p>The <code>type</code> control information specifies the type of a JSON object or name/value pair. Its value is a URI that identifies the type of the property or object. For built-in primitive types the value is the unqualified name of the primitive type. For payloads described by an <code>OData-Version</code> header with a value of <code>4.0</code>, this name MUST be prefixed with the hash symbol (<code>#</code>); for non-OData 4.0 payloads, built-in primitive type values SHOULD be represented without the hash symbol, but consumers of 4.01 or greater payloads MUST support values with or without the hash symbol. For all other types, the URI may be absolute or relative to the <code>type</code> of the containing object. The root <code>type</code> may be absolute or relative to the root <a href="#ControlInformationcontextodatacontext">context URL</a>.</p>
<p>If the URI references a metadata document (that is, it’s not just a fragment), it MAY refer to a specific version of that metadata document using the <code>$schemaversion</code> system query option defined in <a href="#ODataProtocol">OData-Protocol</a>.</p>
<p>For non-built in primitive types, the URI contains the namespace-qualified or alias-qualified type, specified as a URI fragment. For properties that represent a collection of values, the fragment is the namespace-qualified or alias-qualified element type enclosed in parentheses and prefixed with <code>Collection</code>. The namespace or alias MUST be defined or the namespace referenced in the metadata document of the service, see <a href="#ODataCSDL">OData-CSDLJSON</a> or <a href="#ODataCSDL">OData-CSDLXML</a>.</p>
<p>The <code>type</code> control information MUST appear in requests and in responses with <a href="#metadataminimalodatametadataminimal">minimal</a> or <a href="#metadatafullodatametadatafull">full</a> metadata, if the type cannot be heuristically determined, as described below, and one of the following is true:</p>
<ul>
<li>The type is derived from the type specified for the (collection of) entities or (collection of) complex type instances, or</li>
<li>The type is for a property whose type is not declared in <code>$metadata</code>.</li>
</ul>
<p>It MAY appear in other cases in requests and responses if its value does not contradict the type declared in <code>$metadata</code>.</p>
<p>The following heuristics are used to determine the primitive type of a dynamic property in the absence of the <code>type</code> control information:</p>
<ul>
<li>Boolean values have a first-class representation in JSON and do not need any additional control information.</li>
<li>Numeric values have a first-class representation in JSON but are not further distinguished, so they include a <a href="#ControlInformationtypeodatatype"><code>type</code></a> control information unless their type is <code>Double</code>.</li>
<li>The special floating-point values <code>-INF</code>, <code>INF</code>, and <code>NaN</code> are serialized as strings and MUST have a <a href="#ControlInformationtypeodatatype"><code>type</code></a> control information to specify the numeric type of the property.</li>
<li>String values do have a first class representation in JSON, but there is an obvious collision: OData also encodes a number of other primitive types as strings, e.g. <code>DateTimeOffset</code>, <code>Int64</code> in the presence of the <a href="#ControllingtheRepresentationofNumbers"><code>IEEE754Compatible</code></a> format parameter etc. If a property appears in JSON string format, it should be treated as a string value unless the property is known (from the metadata document) to have a different type.</li>
</ul>
<p>The <code>type</code> control information can be absent in properties nested in an instance of type <code>Edm.Untyped</code>. In particular, individual primitive values within a collection cannot have <code>type</code> control information.</p>
<p>For more information on namespace- and alias-qualified names, see <a href="#ODataCSDL">OData-CSDLJSON</a> or <a href="#ODataCSDL">OData-CSDLXML</a>.</p>
<div class="example">
<p>Example 5: entity of type <code>Model.VipCustomer</code> defined in the metadata document of the same service with a dynamic property of type <code>Edm.Date</code></p>
<div class="sourceCode" id="cb7"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;@context&quot;</span><span class="fu">:</span> <span class="st">&quot;http://host/service/$metadata#Customers/$entity&quot;</span><span class="fu">,</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;@type&quot;</span><span class="fu">:</span> <span class="st">&quot;#Model.VipCustomer&quot;</span><span class="fu">,</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;ID&quot;</span><span class="fu">:</span> <span class="dv">2</span><span class="fu">,</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;DynamicValue@type&quot;</span><span class="fu">:</span> <span class="st">&quot;Date&quot;</span><span class="fu">,</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;DynamicValue&quot;</span><span class="fu">:</span> <span class="st">&quot;2016-09-22&quot;</span><span class="fu">,</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>  <span class="er">…</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
</div>
<div class="example">
<p>Example 6: entity of type <code>Model.VipCustomer</code> defined in the metadata document of a different service</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;@context&quot;</span><span class="fu">:</span> <span class="st">&quot;http://host/service/$metadata#Customers/$entity&quot;</span><span class="fu">,</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;@type&quot;</span><span class="fu">:</span> <span class="st">&quot;http://host/alternate/$metadata#Model.VipCustomer&quot;</span><span class="fu">,</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;ID&quot;</span><span class="fu">:</span> <span class="dv">2</span><span class="fu">,</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>  <span class="er">…</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
</div>
</details>
<details open><summary>
<h3 id="464-control-information-count-odatacount"><a id="ControlInformationcountodatacount" href="#ControlInformationcountodatacount">4.6.4 Control Information: <code>count</code> (<code>odata.count</code>)</a></h3>
</summary>
<p>The <code>count</code> control information occurs only in responses and can annotate any collection, see <a href="https://docs.oasis-open.org/odata/odata/v4.02/odata-v4.02-part1-protocol.html#SystemQueryOptioncount">OData-Protocol, section 11.2.6.5</a>. Its value is an <code>Edm.Int64</code> value corresponding to the total count of members in the collection represented by the request.</p>
</details>
<details open><summary>
<h3 id="465-control-information-nextlink-odatanextlink"><a id="ControlInformationnextLinkodatanextLink" href="#ControlInformationnextLinkodatanextLink">4.6.5 Control Information: <code>nextLink</code> (<code>odata.nextLink</code>)</a></h3>
</summary>
<p>The <code>nextLink</code> control information indicates that a response is only a subset of the requested collection. It contains a <a href="URLsinMessageBodies">URL</a> that allows retrieving the next subset of the requested collection.</p>
<p>This control information can also be applied to <a href="#ExpandedNavigationProperty">expanded to-many navigation properties</a> and to collections of <a href="#CollectionofPrimitiveValues">primitive</a> or <a href="#CollectionofComplexValues">complex</a> values.</p>
</details>
<details open><summary>
<h3 id="466-control-information-delta-odatadelta"><a id="ControlInformationdeltaodatadelta" href="#ControlInformationdeltaodatadelta">4.6.6 Control Information: <code>delta</code> (<code>odata.delta</code>)</a></h3>
</summary>
<p>The <code>delta</code> control information is applied to a collection-valued navigation property within an <a href="#AddedChangedEntity">added/changed entity</a> in a delta payload to represent changes in membership or value of nested entities.</p>
</details>
<details open><summary>
<h3 id="467-control-information-deltalink-odatadeltalink"><a id="ControlInformationdeltaLinkodatadeltaLink" href="#ControlInformationdeltaLinkodatadeltaLink">4.6.7 Control Information: <code>deltaLink</code> (<code>odata.deltaLink</code>)</a></h3>
</summary>
<p>The <code>deltaLink</code> control information contains a <a href="URLsinMessageBodies">URL</a> that can be used to retrieve changes to the current set of results. The <code>deltaLink</code> control information MUST only appear on the last page of results. A page of results MUST NOT have both a <code>deltaLink</code> control information and a <a href="#ControlInformationnextLinkodatanextLink"><code>nextLink</code></a> control information.</p>
</details>
<details open><summary>
<h3 id="468-control-information-id-odataid"><a id="ControlInformationidodataid" href="#ControlInformationidodataid">4.6.8 Control Information: <code>id</code> (<code>odata.id</code>)</a></h3>
</summary>
<p>The <code>id</code> control information contains the entity-id, see <a href="#ODataProtocol">OData-Protocol</a>. By convention the entity-id is identical to the canonical URL of the entity, as defined in <a href="#ODataURL">OData-URL</a>.</p>
<p>The <code>id</code> control information MUST appear in responses if <a href="#metadatafullodatametadatafull"><code>metadata=full</code></a> is requested, or if <a href="#metadataminimalodatametadataminimal"><code>metadata=minimal</code></a> is requested and any of a non-transient entity’s key fields are omitted from the response <em>or</em> the entity-id is not identical to the canonical URL of the entity after</p>
<ul>
<li>IRI-to-URI conversion as defined in <a href="#rfc3987">RFC3987</a>,</li>
<li>relative resolution as defined in section 5.2 of <a href="#rfc3986">RFC3986</a>, and</li>
<li>percent-encoding normalization as defined in section 6 of <a href="#rfc3986">RFC3986</a>.</li>
</ul>
<p>Note that the entity-id MUST be invariant across languages, so if key values are language dependent then the <code>id</code> MUST be included if it does not match convention for the localized key values. If the <code>id</code> is represented, it MAY be a <a href="#RelativeURLs">relative URL</a>.</p>
<p>If the entity is transient (see <a href="#ODataProtocol">OData-Protocol</a>), the <code>id</code> control information MUST appear in OData 4.0 payloads and have the <code>null</code> value. In 4.01 or greater payloads transient entities need not have the <code>id</code> control information, and clients receiving such payloads MUST treat entities with neither <code>id</code> control information nor a full set of key properties as transient entities. In 4.02 payloads transient entities MAY have the <code>id</code> control information with a non-null URI value, for example to allow solving a circular dependency by injecting an <a href="#EntityReference">entity reference</a> instead of repeating the transient entity. The URI value SHOULD follow the pattern <code>odata:transient:{some-generated-identifier-unique-within-the-response}</code>, and if the transient entity cannot be re-read its <code>readLink</code> control information SHOULD have the <code>null</code> value.</p>
<p>The <code>id</code> control information MUST NOT appear for a collection. Its meaning in this context is reserved for future versions of this specification.</p>
</details>
<details open><summary>
<h3 id="469-control-information-editlink-and-readlink-odataeditlink-and-odatareadlink"><a id="ControlInformationeditLinkandreadLinkodataeditLinkandodatareadLink" href="#ControlInformationeditLinkandreadLinkodataeditLinkandodatareadLink">4.6.9 Control Information: <code>editLink</code> and <code>readLink</code> (<code>odata.editLink</code> and <code>odata.readLink</code>)</a></h3>
</summary>
<p>The <code>editLink</code> control information contains the edit <a href="URLsinMessageBodies">URL</a> of the entity; see <a href="#ODataProtocol">OData-Protocol</a>.</p>
<p>The <code>readLink</code> control information contains the read URL of the entity or collection; see <a href="#ODataProtocol">OData-Protocol</a>.</p>
<p>The <code>editLink</code> and <code>readLink</code> control information is ignored in request payloads and not written in responses if <a href="#metadatanoneodatametadatanone"><code>metadata=none</code></a> is requested.</p>
<p>The default value of both the edit URL and read URL is the entity’s <a href="#ControlInformationidodataid">entity-id</a> appended with a cast segment to the type of the entity if its type is derived from the declared type of the entity set. If neither the <code>editLink</code> nor the <code>readLink</code> control information is present in an entity, the client uses this default value for the edit URL.</p>
<p>For updatable entities:</p>
<ul>
<li>The <code>editLink</code> control information is written if <a href="#metadatafullodatametadatafull"><code>metadata=full</code></a> is requested or if <a href="#metadataminimalodatametadataminimal"><code>metadata=minimal</code></a> is requested and the edit URL differs from the default value of the edit URL.</li>
<li>The <code>readLink</code> control information is written if the read URL is different from the edit URL. If no <code>readLink</code> control information is present, the read URL is identical to the edit URL.</li>
</ul>
<p>For read-only entities:</p>
<ul>
<li>The <code>readLink</code> control information is written if <a href="#metadatafullodatametadatafull"><code>metadata=full</code></a> is requested or if <a href="#metadataminimalodatametadataminimal"><code>metadata=minimal</code></a> is requested and its value differs from the default value of the read URL.</li>
<li>The <code>readLink</code> control information may also be written if <a href="#metadataminimalodatametadataminimal"><code>metadata=minimal</code></a> is specified in order to signal that an individual entity is read-only.</li>
</ul>
<p>For collections:</p>
<ul>
<li>The <code>readLink</code> control information, if written, MUST be the request URL that produced the collection.</li>
<li>The <code>editLink</code> control information MUST NOT be written as its meaning in this context is reserved for future versions of this specification.</li>
</ul>
</details>
<details open><summary>
<h3 id="4610-control-information-etag-odataetag"><a id="ControlInformationetagodataetag" href="#ControlInformationetagodataetag">4.6.10 Control Information: <code>etag</code> (<code>odata.etag</code>)</a></h3>
</summary>
<p>The <code>etag</code> control information MAY be applied to an <a href="#Entity">entity</a> or collection in a response. The value of the control information is an entity tag (ETag) which is an opaque string value that can be used in a subsequent request to determine if the value of the entity or collection has changed.</p>
<p>For details on how ETags are used, see <a href="#ODataProtocol">OData-Protocol</a>.</p>
<p>The <code>etag</code> control information is ignored in request payloads for single entities and not written in responses if <a href="#metadatanoneodatametadatanone"><code>metadata=none</code></a> is requested.</p>
</details>
<details open><summary>
<h3 id="4611-control-information-navigationlink-and-associationlink-odatanavigationlink-and-odataassociationlink"><a id="ControlInformationnavigationLinkandassociationLinkodatanavigationLinkandodataassociationLink" href="#ControlInformationnavigationLinkandassociationLinkodatanavigationLinkandodataassociationLink">4.6.11 Control Information: <code>navigationLink</code> and <code>associationLink</code> (<code>odata.navigationLink</code> and <code>odata.associationLink</code>)</a></h3>
</summary>
<p>The <code>navigationLink</code> control information in a response contains a <em>navigation <a href="URLsinMessageBodies">URL</a></em> that can be used to retrieve an entity or collection of entities related to the current entity via a <a href="#NavigationProperty">navigation property</a>.</p>
<p>The <em>default computed value of a navigation URL</em> is the value of the <a href="#ControlInformationeditLinkandreadLinkodataeditLinkandodatareadLink">read URL</a> appended with a segment containing the name of the navigation property. The service MAY omit the <code>navigationLink</code> control information if <a href="#metadataminimalodatametadataminimal"><code>metadata=minimal</code></a> has been specified on the request and the navigation link matches this computed value.</p>
<p>The <code>associationLink</code> control information in a response contains an <em>association URL</em> that can be used to retrieve a reference to an entity or a collection of references to entities related to the current entity via a navigation property.</p>
<p>The <em>default computed value of an association URL</em> is the value of the navigation URL appended with <code>/$ref</code>. The service MAY omit the <code>associationLink</code> control information if the association link matches this computed value.</p>
<p>The <code>navigationLink</code> and <code>associationLink</code> control information is ignored in request payloads and not written in responses if <a href="#metadatanoneodatametadatanone"><code>metadata=none</code></a> is requested.</p>
</details>
<details open><summary>
<h3 id="4612-control-information-media-odatamedia"><a id="ControlInformationmediaodatamedia" href="#ControlInformationmediaodatamedia">4.6.12 Control Information: <code>media*</code> (<code>odata.media*</code>)</a></h3>
</summary>
<p>For <a href="#MediaEntity">media entities</a> and <a href="#StreamProperty">stream properties</a> at least one of the control information <code>mediaEditLink</code> and <code>mediaReadLink</code> MUST be included in responses if they don’t follow standard URL conventions as defined in <a href="https://docs.oasis-open.org/odata/odata/v4.02/odata-v4.02-part2-url-conventions.html#AddressingaProperty">OData-URL, section 4.6</a> and <a href="https://docs.oasis-open.org/odata/odata/v4.02/odata-v4.02-part2-url-conventions.html#AddressingtheMediaStreamofaMediaEntity">OData-URL, section 4.14</a>, or if <a href="#metadatafullodatametadatafull"><code>metadata=full</code></a> is requested.</p>
<p>The <code>mediaEditLink</code> control information contains a <a href="URLsinMessageBodies">URL</a> that can be used to update the binary stream associated with the media entity or stream property. It MUST be included for updatable streams if it differs from standard URL conventions relative to the edit link of the entity.</p>
<p>The <code>mediaReadLink</code> control information contains a URL that can be used to read the binary stream associated with the media entity or stream property. It MUST be included if its value differs from the value of the associated <code>mediaEditLink</code>, if present, or if it doesn’t follow standard URL conventions relative to the read link of the entity and the associated <code>mediaEditLink</code> is not present.</p>
<p>The <code>mediaContentType</code> control information MAY be included; its value SHOULD match the media type of the binary stream represented by the <code>mediaReadLink</code> URL. This is only a hint; the actual media type will be included in the <code>Content-Type</code> header when the resource is requested. The presence of <code>mediaContentType</code> with value <code>null</code> MAY be used to indicate the absence of a binary stream.</p>
<p>The <code>mediaEtag</code> control information MAY be included; its value is the ETag of the binary stream represented by this media entity or stream property.</p>
<p>The <code>media*</code> control information is not written in responses if <a href="#metadatanoneodatametadatanone"><code>metadata=none</code></a> is requested.</p>
<p>If a stream property is provided inline in a request, the <code>mediaContentType</code> control information may be specified.</p>
<p>If a stream property is annotated with <code>Capabilities.MediaLocationUpdateSupported</code> (see <a href="#ODataVocCap">OData-VocCap</a>) and a value of <code>true</code>, clients MAY specify the <code>mediaEditLink</code> and/or <code>mediaReadLink</code> control information for that stream property in order to change the association between the stream property and a media stream.</p>
<p>In all other cases <code>media*</code> control information is ignored in request payloads.</p>
<div class="example">
<p>Example 7:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;@context&quot;</span><span class="fu">:</span> <span class="st">&quot;http://host/service/$metadata#Employees/$entity&quot;</span><span class="fu">,</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;@mediaReadLink&quot;</span><span class="fu">:</span> <span class="st">&quot;Employees(1)/$value&quot;</span><span class="fu">,</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;@mediaContentType&quot;</span><span class="fu">:</span> <span class="st">&quot;image/jpeg&quot;</span><span class="fu">,</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;ID&quot;</span><span class="fu">:</span> <span class="dv">1</span><span class="fu">,</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>  <span class="er">…</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
</div>
</details>
<details open><summary>
<h3 id="4613-control-information-removed-odataremoved"><a id="ControlInformationremovedodataremoved" href="#ControlInformationremovedodataremoved">4.6.13 Control Information: <code>removed</code> (<code>odata.removed</code>)</a></h3>
</summary>
<p>The <code>removed</code> control information is used in <a href="#DeletedEntity">delta payloads</a> and indicates that the represented entity is (to be) deleted.</p>
</details>
<details open><summary>
<h3 id="4614-control-information-collectionannotations-odatacollectionannotations"><a id="ControlInformationcollectionAnnotationsodatacollectionAnnotations" href="#ControlInformationcollectionAnnotationsodatacollectionAnnotations">4.6.14 Control Information: <code>collectionAnnotations</code> (<code>odata.collectionAnnotations</code>)</a></h3>
</summary>
<p>The <code>collectionAnnotations</code> control information can be applied to a collection containing primitive members in order to annotate such primitive members. The value of the <code>collectionAnnotations</code> control information is an array of JSON objects containing an integer property <code>index</code>, specifying the zero-based ordinal index of the primitive item within the collection, along with any annotations that are to be applied to that primitive collection member.</p>
<div class="example">
<p>Example 8: Annotating primitive values within a collection</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;@context&quot;</span><span class="fu">:</span> <span class="st">&quot;http://host/service/$metadata#Employees/$entity&quot;</span><span class="fu">,</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;ID&quot;</span><span class="fu">:</span> <span class="dv">1</span><span class="fu">,</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;EmailAddresses@collectionAnnotations&quot;</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;index&quot;</span><span class="fu">:</span> <span class="dv">0</span><span class="fu">,</span></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;@OfficeCommunication.emailType&quot;</span><span class="fu">:</span> <span class="st">&quot;Personal&quot;</span></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;index&quot;</span><span class="fu">:</span> <span class="dv">2</span><span class="fu">,</span></span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;@OfficeCommunication.emailType&quot;</span><span class="fu">:</span> <span class="st">&quot;Work&quot;</span></span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span></span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a>  <span class="ot">]</span><span class="fu">,</span></span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;EmailAddresses&quot;</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;Julie@Swansworth.com&quot;</span><span class="ot">,</span></span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;JulieSwa@live.com&quot;</span><span class="ot">,</span></span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;Julie.Swansworth@work.com&quot;</span></span>
<span id="cb10-18"><a href="#cb10-18" aria-hidden="true" tabindex="-1"></a>  <span class="ot">]</span><span class="fu">,</span></span>
<span id="cb10-19"><a href="#cb10-19" aria-hidden="true" tabindex="-1"></a>  <span class="er">…</span></span>
<span id="cb10-20"><a href="#cb10-20" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
</div>
</details>
</details>
</details>
<hr />
<details open><summary>
<h1 id="5-service-document"><a id="ServiceDocument" href="#ServiceDocument">5 Service Document</a></h1>
</summary>
<p>A service document in JSON is represented as a single JSON object with at least the <a href="#ControlInformationcontextodatacontext"><code>context</code></a> control information and a property <code>value</code>.</p>
<p>The value of the <a href="#ControlInformationcontextodatacontext"><code>context</code></a> control information MUST be the URL of the metadata document, without any fragment part.</p>
<p>The value of the <code>value</code> property MUST be a JSON array containing one element for each entity set and function import with an explicit or default value of <code>true</code> for the attribute <code>IncludeInServiceDocument</code> and each singleton exposed by the service, see <a href="#ODataCSDL">OData-CSDLJSON</a> or <a href="#ODataCSDL">OData-CSDLXML</a>.</p>
<p>Each element MUST be a JSON object with at least two name/value pairs, one with name <code>name</code> containing the name of the entity set, function import, or singleton, and one with name <code>url</code> containing the URL of the entity set, which may be an absolute or a <a href="#RelativeURLs">relative URL</a>. It MAY contain a name/value pair with name <code>title</code> containing a human-readable, language-dependent title for the object.</p>
<p>JSON objects representing an entity set MAY contain an additional name/value pair with name <code>kind</code> and a value of <code>EntitySet</code>. If the <code>kind</code> name/value pair is not present, the object MUST represent an entity set.</p>
<p>JSON objects representing a function import MUST contain the <code>kind</code> name/value pair with a value of <code>FunctionImport</code>.</p>
<p>JSON objects representing a singleton MUST contain the <code>kind</code> name/value pair with a value of <code>Singleton</code>.</p>
<p>JSON objects representing a related service document MUST contain the <code>kind</code> name/value pair with a value of <code>ServiceDocument</code>.</p>
<p>Clients that encounter unknown values of the <code>kind</code> name/value pair not defined in this version of the specification MUST NOT stop processing and MUST NOT signal an error.</p>
<p>Service documents MAY contain <a href="#InstanceAnnotations">annotations</a> in any of its JSON objects. Services MUST NOT produce name/value pairs other than the ones explicitly defined in this section, and clients MUST ignore unknown name/value pairs.</p>
<div class="example">
<p>Example 9:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;@context&quot;</span><span class="fu">:</span> <span class="st">&quot;http://host/service/$metadata&quot;</span><span class="fu">,</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;value&quot;</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;Orders&quot;</span><span class="fu">,</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;kind&quot;</span><span class="fu">:</span> <span class="st">&quot;EntitySet&quot;</span><span class="fu">,</span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;url&quot;</span><span class="fu">:</span>  <span class="st">&quot;Orders&quot;</span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span></span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;name&quot;</span><span class="fu">:</span>  <span class="st">&quot;OrderItems&quot;</span><span class="fu">,</span></span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;title&quot;</span><span class="fu">:</span> <span class="st">&quot;Order Details&quot;</span><span class="fu">,</span></span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;url&quot;</span><span class="fu">:</span>   <span class="st">&quot;OrderItems&quot;</span></span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span></span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;name&quot;</span><span class="fu">:</span>  <span class="st">&quot;TopProducts&quot;</span><span class="fu">,</span></span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;title&quot;</span><span class="fu">:</span> <span class="st">&quot;Best-Selling Products&quot;</span><span class="fu">,</span></span>
<span id="cb11-17"><a href="#cb11-17" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;kind&quot;</span><span class="fu">:</span>  <span class="st">&quot;FunctionImport&quot;</span><span class="fu">,</span></span>
<span id="cb11-18"><a href="#cb11-18" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;url&quot;</span><span class="fu">:</span>   <span class="st">&quot;TopProducts&quot;</span></span>
<span id="cb11-19"><a href="#cb11-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb11-20"><a href="#cb11-20" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span></span>
<span id="cb11-21"><a href="#cb11-21" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;name&quot;</span><span class="fu">:</span>  <span class="st">&quot;MainSupplier&quot;</span><span class="fu">,</span></span>
<span id="cb11-22"><a href="#cb11-22" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;title&quot;</span><span class="fu">:</span> <span class="st">&quot;Main Supplier&quot;</span><span class="fu">,</span></span>
<span id="cb11-23"><a href="#cb11-23" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;kind&quot;</span><span class="fu">:</span>  <span class="st">&quot;Singleton&quot;</span><span class="fu">,</span></span>
<span id="cb11-24"><a href="#cb11-24" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;url&quot;</span><span class="fu">:</span>   <span class="st">&quot;MainSupplier&quot;</span></span>
<span id="cb11-25"><a href="#cb11-25" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb11-26"><a href="#cb11-26" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span></span>
<span id="cb11-27"><a href="#cb11-27" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;Human Resources&quot;</span><span class="fu">,</span></span>
<span id="cb11-28"><a href="#cb11-28" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;kind&quot;</span><span class="fu">:</span> <span class="st">&quot;ServiceDocument&quot;</span><span class="fu">,</span></span>
<span id="cb11-29"><a href="#cb11-29" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;url&quot;</span><span class="fu">:</span>  <span class="st">&quot;http://host/HR/&quot;</span></span>
<span id="cb11-30"><a href="#cb11-30" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span></span>
<span id="cb11-31"><a href="#cb11-31" aria-hidden="true" tabindex="-1"></a>  <span class="ot">]</span></span>
<span id="cb11-32"><a href="#cb11-32" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
</div>
</details>
<hr />
<details open><summary>
<h1 id="6-entity"><a id="Entity" href="#Entity">6 Entity</a></h1>
</summary>
<p>An entity is serialized as a JSON object. It MAY contain <a href="#ControlInformationcontextodatacontext"><code>context</code></a>, <a href="#ControlInformationtypeodatatype"><code>type</code></a>, or <a href="#ControlInformationdeltaLinkodatadeltaLink"><code>deltaLink</code></a> control information.</p>
<p>Each <a href="#StructuralProperty">property</a> to be transmitted is represented as a name/value pair within the object. The order properties appear within the object is considered insignificant.</p>
<p>An entity in a payload may be a complete entity, a projected entity (see <em>System Query Option</em> <code>$select</code> in <a href="#ODataProtocol">OData-Protocol</a>), or a partial entity update (see <em>Update an Entity</em> in <a href="#ODataProtocol">OData-Protocol</a>).</p>
<p>An entity representation can be (modified and) round-tripped to the service directly. The <a href="#ControlInformationcontextodatacontext">context URL</a> is used in requests only as a base for <a href="#RelativeURLs">relative URLs</a>.</p>
<div class="example">
<p>Example 10: entity with <code>metadata=minimal</code></p>
<div class="sourceCode" id="cb12"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;@context&quot;</span><span class="fu">:</span> <span class="st">&quot;http://host/service/$metadata#Customers/$entity&quot;</span><span class="fu">,</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;ID&quot;</span><span class="fu">:</span> <span class="st">&quot;ALFKI&quot;</span><span class="fu">,</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;CompanyName&quot;</span><span class="fu">:</span> <span class="st">&quot;Alfreds Futterkiste&quot;</span><span class="fu">,</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;ContactName&quot;</span><span class="fu">:</span> <span class="st">&quot;Maria Anders&quot;</span><span class="fu">,</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;ContactTitle&quot;</span><span class="fu">:</span> <span class="st">&quot;Sales Representative&quot;</span><span class="fu">,</span></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;Phone&quot;</span><span class="fu">:</span> <span class="st">&quot;030-0074321&quot;</span><span class="fu">,</span></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;Fax&quot;</span><span class="fu">:</span> <span class="st">&quot;030-0076545&quot;</span><span class="fu">,</span></span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;Address&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;Street&quot;</span><span class="fu">:</span> <span class="st">&quot;Obere Str. 57&quot;</span><span class="fu">,</span></span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;City&quot;</span><span class="fu">:</span> <span class="st">&quot;Berlin&quot;</span><span class="fu">,</span></span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;Region&quot;</span><span class="fu">:</span> <span class="kw">null</span><span class="fu">,</span></span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;PostalCode&quot;</span><span class="fu">:</span> <span class="st">&quot;D-12209&quot;</span></span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">}</span></span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p>Example 11: entity with <code>metadata=full</code></p>
<div class="sourceCode" id="cb13"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;@context&quot;</span><span class="fu">:</span> <span class="st">&quot;http://host/service/$metadata#Customers/$entity&quot;</span><span class="fu">,</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;@id&quot;</span><span class="fu">:</span> <span class="st">&quot;Customers(&#39;ALFKI&#39;)&quot;</span><span class="fu">,</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;@etag&quot;</span><span class="fu">:</span> <span class="st">&quot;W/</span><span class="ch">\&quot;</span><span class="st">MjAxMy0wNS0yN1QxMTo1OFo=</span><span class="ch">\&quot;</span><span class="st">&quot;</span><span class="fu">,</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;@editLink&quot;</span><span class="fu">:</span> <span class="st">&quot;Customers(&#39;ALFKI&#39;)&quot;</span><span class="fu">,</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;ID&quot;</span><span class="fu">:</span> <span class="st">&quot;ALFKI&quot;</span><span class="fu">,</span></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;CompanyName&quot;</span><span class="fu">:</span> <span class="st">&quot;Alfreds Futterkiste&quot;</span><span class="fu">,</span></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;ContactName&quot;</span><span class="fu">:</span> <span class="st">&quot;Maria Anders&quot;</span><span class="fu">,</span></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;ContactTitle&quot;</span><span class="fu">:</span> <span class="st">&quot;Sales Representative&quot;</span><span class="fu">,</span></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;Phone&quot;</span><span class="fu">:</span> <span class="st">&quot;030-0074321&quot;</span><span class="fu">,</span></span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;Fax&quot;</span><span class="fu">:</span> <span class="st">&quot;030-0076545&quot;</span><span class="fu">,</span></span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;Address&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;Street&quot;</span><span class="fu">:</span> <span class="st">&quot;Obere Str. 57&quot;</span><span class="fu">,</span></span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;City&quot;</span><span class="fu">:</span> <span class="st">&quot;Berlin&quot;</span><span class="fu">,</span></span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;Region&quot;</span><span class="fu">:</span> <span class="kw">null</span><span class="fu">,</span></span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;PostalCode&quot;</span><span class="fu">:</span> <span class="st">&quot;D-12209&quot;</span><span class="fu">,</span></span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;Country@associationLink&quot;</span><span class="fu">:</span> <span class="st">&quot;Customers(&#39;ALFKI&#39;)/Address/Country/$ref&quot;</span><span class="fu">,</span></span>
<span id="cb13-18"><a href="#cb13-18" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;Country@navigationLink&quot;</span><span class="fu">:</span> <span class="st">&quot;Customers(&#39;ALFKI&#39;)/Address/Country&quot;</span></span>
<span id="cb13-19"><a href="#cb13-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">},</span></span>
<span id="cb13-20"><a href="#cb13-20" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;Orders@associationLink&quot;</span><span class="fu">:</span> <span class="st">&quot;Customers(&#39;ALFKI&#39;)/Orders/$ref&quot;</span><span class="fu">,</span></span>
<span id="cb13-21"><a href="#cb13-21" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;Orders@navigationLink&quot;</span><span class="fu">:</span> <span class="st">&quot;Customers(&#39;ALFKI&#39;)/Orders&quot;</span></span>
<span id="cb13-22"><a href="#cb13-22" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
</div>
</details>
<hr />
<details open><summary>
<h1 id="7-structural-property"><a id="StructuralProperty" href="#StructuralProperty">7 Structural Property</a></h1>
</summary>
<p>A property within an entity or complex type instance is represented as a name/value pair. The name MUST be the name of the property; a non-null value is represented depending on its type as a <a href="#PrimitiveValue">primitive value</a>, a <a href="#ComplexValue">complex value</a>, a <a href="#CollectionofPrimitiveValues">collection of primitive values</a>, or a <a href="#CollectionofComplexValues">collection of complex values</a>.</p>
<p>Null values are represented as the JSON literal <code>null</code>.</p>
<details open><summary>
<h2 id="71-primitive-value"><a id="PrimitiveValue" href="#PrimitiveValue">7.1 Primitive Value</a></h2>
</summary>
<p>Primitive values are represented following the rules of <a href="#rfc8259">RFC8259</a>.</p>
<p>Values of type <code>Edm.Boolean</code> are represented as the JSON literals <code>true</code> and <code>false</code></p>
<p>Values of types <code>Edm.Byte</code>, <code>Edm.SByte</code>, <code>Edm.Int16</code>, <code>Edm.Int32</code>, <code>Edm.Int64</code>, <code>Edm.Single</code>, <code>Edm.Double</code>, and <code>Edm.Decimal</code> are represented as JSON numbers, except for <code>-INF</code>, <code>INF</code>, and <code>NaN</code> which are represented as strings, and except when the <a href="#ControllingtheRepresentationofNumbers"><code>IEEE754Compatible</code></a> format parameter demands representation of <code>Edm.Int64</code> and <code>Edm.Decimal</code> as strings.</p>
<p>Values of type <code>Edm.String</code> are represented as JSON strings, using the JSON string escaping rules.</p>
<p>Values of type <code>Edm.Binary</code>, <code>Edm.Date</code>, <code>Edm.DateTimeOffset</code>, <code>Edm.Duration</code>, <code>Edm.Guid</code>, and <code>Edm.TimeOfDay</code> are represented as JSON strings whose content satisfies the rules <code>binaryValue</code>, <code>dateValue</code>, <code>dateTimeOffsetValue</code>, <code>durationValue</code>, <code>guidValue</code>, and <code>timeOfDayValue</code> respectively, in <a href="#ODataABNF">OData-ABNF</a>.</p>
<p>Primitive values that cannot be represented, for example due to server conversion issues or IEEE754 limitations on the size of an <code>Edm.Int64</code> or <code>Edm.Decimal</code> value, are annotated with the <code>Core.ValueException</code> term. In this case, the payload MAY include an approximation of the value and MAY specify a string representation of the exact value in the <code>value</code> property of the annotation.</p>
<p>Enumeration values are represented as JSON strings whose content satisfies the rule <code>enumValue</code> in <a href="#ODataABNF">OData-ABNF</a>. The preferred representation is the <code>enumerationMember</code>. If no <code>enumerationMember</code> (or combination of named enumeration members) is available, the <code>enumMemberValue</code> representation may be used.</p>
<p>Geography and geometry values are represented as geometry types as defined in <a href="#rfc7946">RFC7946</a>.</p>
<p>Geography and geometry types have the same representation in a JSON payload. Whether the value represents a geography type or geometry type is inferred from its usage or specified using the <a href="#ControlInformationtypeodatatype"><code>type</code></a> control information. <a href="#rfc7946">RFC7946</a> does not define means for expressing instance-specific <a href="https://datatracker.ietf.org/doc/html/rfc7946#section-4">Coordinate Reference Systems</a>.</p>
<div class="example">
<p>Example 12:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;NullValue&quot;</span><span class="fu">:</span> <span class="kw">null</span><span class="fu">,</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;TrueValue&quot;</span><span class="fu">:</span> <span class="kw">true</span><span class="fu">,</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;FalseValue&quot;</span><span class="fu">:</span> <span class="kw">false</span><span class="fu">,</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;BinaryValue&quot;</span><span class="fu">:</span> <span class="st">&quot;T0RhdGE&quot;</span><span class="fu">,</span></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;IntegerValue&quot;</span><span class="fu">:</span> <span class="dv">-128</span><span class="fu">,</span></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;DoubleValue&quot;</span><span class="fu">:</span> <span class="fl">3.1415926535897931</span><span class="fu">,</span></span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;SingleValue&quot;</span><span class="fu">:</span> <span class="st">&quot;INF&quot;</span><span class="fu">,</span></span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;DecimalValue&quot;</span><span class="fu">:</span> <span class="fl">34.95</span><span class="fu">,</span></span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;StringValue&quot;</span><span class="fu">:</span> <span class="st">&quot;Say </span><span class="ch">\&quot;</span><span class="st">Hello</span><span class="ch">\&quot;</span><span class="st">,</span><span class="ch">\n</span><span class="st">then go&quot;</span><span class="fu">,</span></span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;DateValue&quot;</span><span class="fu">:</span> <span class="st">&quot;2012-12-03&quot;</span><span class="fu">,</span></span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;DateTimeOffsetValue&quot;</span><span class="fu">:</span> <span class="st">&quot;2012-12-03T07:16:23Z&quot;</span><span class="fu">,</span></span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;DurationValue&quot;</span><span class="fu">:</span> <span class="st">&quot;P12DT23H59M59.999999999999S&quot;</span><span class="fu">,</span></span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;TimeOfDayValue&quot;</span><span class="fu">:</span> <span class="st">&quot;07:59:59.999&quot;</span><span class="fu">,</span></span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;GuidValue&quot;</span><span class="fu">:</span> <span class="st">&quot;01234567-89ab-cdef-0123-456789abcdef&quot;</span><span class="fu">,</span></span>
<span id="cb14-16"><a href="#cb14-16" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;Int64Value&quot;</span><span class="fu">:</span> <span class="dv">0</span><span class="fu">,</span></span>
<span id="cb14-17"><a href="#cb14-17" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;ColorEnumValue&quot;</span><span class="fu">:</span> <span class="st">&quot;Yellow&quot;</span><span class="fu">,</span></span>
<span id="cb14-18"><a href="#cb14-18" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;GeographyPoint&quot;</span><span class="fu">:</span> <span class="fu">{</span> <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;Point&quot;</span><span class="fu">,</span> <span class="dt">&quot;coordinates&quot;</span><span class="fu">:</span> <span class="ot">[</span><span class="fl">142.1</span><span class="ot">,</span><span class="fl">64.1</span><span class="ot">]</span> <span class="fu">}</span></span>
<span id="cb14-19"><a href="#cb14-19" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
</div>
</details>
<details open><summary>
<h2 id="72-complex-value"><a id="ComplexValue" href="#ComplexValue">7.2 Complex Value</a></h2>
</summary>
<p>A complex value is represented as a single JSON object containing one name/value pair for each property that makes up the complex type. Each property value is formatted as appropriate for the type of the property.</p>
<p>It MAY have name/value pairs for <a href="#InstanceAnnotations">instance annotations</a> and control information.</p>
<div class="example">
<p>Example 13:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;@context&quot;</span><span class="fu">:</span> <span class="st">&quot;http://host/service/$metadata#Customers/$entity&quot;</span><span class="fu">,</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>  <span class="er">…</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;Address&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;Street&quot;</span><span class="fu">:</span> <span class="st">&quot;Obere Str. 57&quot;</span><span class="fu">,</span></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;City&quot;</span><span class="fu">:</span> <span class="st">&quot;Berlin&quot;</span><span class="fu">,</span></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;Region&quot;</span><span class="fu">:</span> <span class="kw">null</span><span class="fu">,</span></span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;PostalCode&quot;</span><span class="fu">:</span> <span class="st">&quot;D-12209&quot;</span></span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">}</span></span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
</div>
<p>A complex value with no selected properties, or no defined properties (such as an empty open complex type or complex type with no structural properties) is represented as an empty JSON object.</p>
</details>
<details open><summary>
<h2 id="73-collection-of-primitive-values"><a id="CollectionofPrimitiveValues" href="#CollectionofPrimitiveValues">7.3 Collection of Primitive Values</a></h2>
</summary>
<p>A collection of primitive values is represented as a JSON array; each element in the array is the representation of a <a href="#PrimitiveValue">primitive value</a>. A JSON literal <code>null</code> represents a null value within the collection. An empty collection is represented as an empty array.</p>
<div class="example">
<p>Example 14: partial collection of strings with next link</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;@context&quot;</span><span class="fu">:</span> <span class="st">&quot;http://host/service/$metadata#Customers/$entity&quot;</span><span class="fu">,</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>  <span class="er">…</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;EmailAddresses&quot;</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;Julie@Swansworth.com&quot;</span><span class="ot">,</span></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;Julie.Swansworth@work.com&quot;</span></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>  <span class="ot">]</span><span class="fu">,</span></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;EmailAddresses@nextLink&quot;</span><span class="fu">:</span> <span class="st">&quot;…&quot;</span></span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
</div>
</details>
<details open><summary>
<h2 id="74-collection-of-complex-values"><a id="CollectionofComplexValues" href="#CollectionofComplexValues">7.4 Collection of Complex Values</a></h2>
</summary>
<p>A collection of complex values is represented as a JSON array; each element in the array is the representation of a <a href="#ComplexValue">complex value</a>. A JSON literal <code>null</code> represents a null value within the collection. An empty collection is represented as an empty array.</p>
<div class="example">
<p>Example 15: partial collection of complex values with next link</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;PhoneNumbers&quot;</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;Number&quot;</span><span class="fu">:</span> <span class="st">&quot;425-555-1212&quot;</span><span class="fu">,</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;Type&quot;</span><span class="fu">:</span> <span class="st">&quot;Home&quot;</span></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span></span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;@type&quot;</span><span class="fu">:</span> <span class="st">&quot;#Model.CellPhoneNumber&quot;</span><span class="fu">,</span></span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;Number&quot;</span><span class="fu">:</span> <span class="st">&quot;425-555-0178&quot;</span><span class="fu">,</span></span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;Type&quot;</span><span class="fu">:</span> <span class="st">&quot;Cell&quot;</span><span class="fu">,</span></span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;Carrier&quot;</span><span class="fu">:</span> <span class="st">&quot;Sprint&quot;</span></span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span></span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a>  <span class="ot">]</span><span class="fu">,</span></span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;PhoneNumbers@nextLink&quot;</span><span class="fu">:</span> <span class="st">&quot;…&quot;</span></span>
<span id="cb17-15"><a href="#cb17-15" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
</div>
</details>
<details open><summary>
<h2 id="75-untyped-value"><a id="UntypedValue" href="#UntypedValue">7.5 Untyped Value</a></h2>
</summary>
<p>OData 4.01 adds the built-in abstract types <code>Edm.Untyped</code> and <code>Collection(Edm.Untyped)</code>that services can use to advertise in metadata that there is a property of a particular name present, but there is no type to describe the structure of the property’s values.</p>
<p>The value of an <code>Edm.Untyped</code> property MAY be a primitive value, a structural value, or a collection. If a collection, it may contain any combination of primitive values, structural values, and collections.</p>
<p>The value of a property of type <code>Collection(Edm.Untyped)</code>MUST be a collection, and it MAY contain any combination of primitive values, structural values, and collections. Enumeration values within an untyped collection SHOULD be represented as a string, using the <code>enumerationMember</code>.</p>
<p>Untyped values are the only place where a collection can directly contain a collection, or a collection can contain a mix of primitive values, structural values, and collections.</p>
<p>All children of an untyped property are assumed to be untyped unless they are annotated with the <a href="#ControlInformationtypeodatatype"><code>type</code></a> control information, in which case they MUST conform to the type described by the control information.</p>
<p>A primitive value within an untyped collection is interpreted as an <code>Edm.Boolean</code>, <code>Edm.String</code>, or <code>Edm.Decimal</code> value, depending on the JavaScript type.</p>
<h2>Collections directly contained within an untyped collection are themselves untyped.</h2>
</details>
</details>
<details open><summary>
<h1 id="8-navigation-property"><a id="NavigationProperty" href="#NavigationProperty">8 Navigation Property</a></h1>
</summary>
<p>A navigation property is a reference from a source entity to zero or more related entities.</p>
<details open><summary>
<h2 id="81-navigation-link"><a id="NavigationLink" href="#NavigationLink">8.1 Navigation Link</a></h2>
</summary>
<p>The navigation link for a navigation property is represented as a <a href="#ControlInformationnavigationLinkandassociationLinkodatanavigationLinkandodataassociationLink"><code>navigationLink</code></a> control information on the navigation property. Its value is an absolute or <a href="#RelativeURLs">relative URL</a> that allows retrieving the related entity or collection of entities.</p>
<p>The navigation link for a navigation property is only represented if the client requests <code>metadata=full</code> or the navigation link cannot be computed, e.g. if it is within a collection of complex type instances. If it is represented it MUST immediately precede the expanded navigation property if the latter is represented.</p>
<div class="example">
<p>Example 16:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;@context&quot;</span><span class="fu">:</span> <span class="st">&quot;http://host/service/$metadata#Customers/$entity&quot;</span><span class="fu">,</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>  <span class="er">…</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;Orders@navigationLink&quot;</span><span class="fu">:</span> <span class="st">&quot;Customers(&#39;ALFKI&#39;)/Orders&quot;</span><span class="fu">,</span></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>  <span class="er">…</span></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
</div>
</details>
<details open><summary>
<h2 id="82-association-link"><a id="AssociationLink" href="#AssociationLink">8.2 Association Link</a></h2>
</summary>
<p>The association link for a navigation property is represented as an <a href="#ControlInformationnavigationLinkandassociationLinkodatanavigationLinkandodataassociationLink"><code>associationLink</code></a> control information on the navigation property. Its value is an absolute or <a href="#RelativeURLs">relative URL</a> that can be used to retrieve the reference or collection of references to the related entity or entities.</p>
<p>The association link for a navigation property is only represented if the client requests <code>metadata=full</code> or the association link cannot be computed by appending <code>/$ref</code> to the navigation link. If it is represented, it MUST immediately precede the navigation link if the latter is represented, otherwise it MUST immediately precede the expanded navigation property if it is represented.</p>
<div class="example">
<p>Example 17:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;@context&quot;</span><span class="fu">:</span> <span class="st">&quot;http://host/service/$metadata#Customers/$entity&quot;</span><span class="fu">,</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>  <span class="er">…</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;Orders@associationLink&quot;</span><span class="fu">:</span> <span class="st">&quot;Customers(&#39;ALFKI&#39;)/Orders/$ref&quot;</span><span class="fu">,</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>  <span class="er">…</span></span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
</div>
</details>
<details open><summary>
<h2 id="83-expanded-navigation-property"><a id="ExpandedNavigationProperty" href="#ExpandedNavigationProperty">8.3 Expanded Navigation Property</a></h2>
</summary>
<p>An expanded navigation property is represented as a name/value pair where the name is the name of the navigation property, and the value is the representation of the related entity or collection of entities.</p>
<p>If at most one entity can be related, the value is the representation of the related entity, or <code>null</code> if no entity is currently related.</p>
<p>If a collection of entities can be related, it is represented as a JSON array. Each element is the <a href="#Entity">representation of an entity</a> or the <a href="#EntityReference">representation of an entity reference</a>. An empty collection of entities (one that contains no entities) is represented as an empty JSON array. The navigation property MAY include <a href="#ControlInformationcontextodatacontext"><code>context</code></a>, <a href="#ControlInformationtypeodatatype"><code>type</code></a>, <a href="#ControlInformationcountodatacount"><code>count</code></a>, or <a href="#ControlInformationnextLinkodatanextLink"><code>nextLink</code></a> control information. If a navigation property is expanded with the suffix <code>/$count</code>, only the <a href="#ControlInformationcountodatacount"><code>count</code></a> control information is represented.</p>
<div class="example">
<p>Example 18:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;@context&quot;</span><span class="fu">:</span> <span class="st">&quot;http://host/service/$metadata#Customers/$entity&quot;</span><span class="fu">,</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;Orders@count&quot;</span><span class="fu">:</span> <span class="dv">42</span><span class="fu">,</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;Orders&quot;</span><span class="fu">:</span> <span class="ot">[</span> <span class="er">…</span> <span class="ot">]</span><span class="fu">,</span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;Orders@nextLink&quot;</span><span class="fu">:</span> <span class="st">&quot;…&quot;</span><span class="fu">,</span></span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>  <span class="er">…</span></span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
</div>
</details>
<details open><summary>
<h2 id="84-deep-insert"><a id="DeepInsert" href="#DeepInsert">8.4 Deep Insert</a></h2>
</summary>
<p>When inserting a new entity with a <code>POST</code> request, related new entities MAY be specified using the same representation as for an <a href="#ExpandedNavigationProperty">expanded navigation property</a>.</p>
<p>Deep inserts are not allowed in update operations using <code>PUT</code> or <code>PATCH</code> requests.</p>
<div class="example">
<p>Example 19: inserting a new order for a new customer with order items related to existing products:</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;ID&quot;</span><span class="fu">:</span> <span class="dv">11643</span><span class="fu">,</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;Amount&quot;</span><span class="fu">:</span> <span class="dv">100</span><span class="fu">,</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>  <span class="er">…</span><span class="fu">,</span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;Customer&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;ID&quot;</span><span class="fu">:</span> <span class="st">&quot;ANEWONE&quot;</span><span class="fu">,</span></span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>    <span class="er">…</span></span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">},</span></span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;Items&quot;</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span></span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;Product&quot;</span><span class="fu">:</span> <span class="fu">{</span> <span class="dt">&quot;@id&quot;</span><span class="fu">:</span> <span class="st">&quot;Products(28)&quot;</span> <span class="fu">},</span></span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;Quantity&quot;</span><span class="fu">:</span> <span class="dv">1</span><span class="fu">,</span></span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a>      <span class="er">…</span></span>
<span id="cb21-14"><a href="#cb21-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb21-15"><a href="#cb21-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span></span>
<span id="cb21-16"><a href="#cb21-16" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;Product&quot;</span><span class="fu">:</span> <span class="fu">{</span> <span class="dt">&quot;@id&quot;</span><span class="fu">:</span> <span class="st">&quot;Products(39)&quot;</span> <span class="fu">},</span></span>
<span id="cb21-17"><a href="#cb21-17" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;Quantity&quot;</span><span class="fu">:</span> <span class="dv">5</span><span class="fu">,</span></span>
<span id="cb21-18"><a href="#cb21-18" aria-hidden="true" tabindex="-1"></a>      <span class="er">…</span></span>
<span id="cb21-19"><a href="#cb21-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span></span>
<span id="cb21-20"><a href="#cb21-20" aria-hidden="true" tabindex="-1"></a>  <span class="ot">]</span></span>
<span id="cb21-21"><a href="#cb21-21" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
</div>
</details>
<details open><summary>
<h2 id="85-bind-operation"><a id="BindOperation" href="#BindOperation">8.5 Bind Operation</a></h2>
</summary>
<p>When inserting or updating an entity, relationships of navigation properties MAY be inserted or updated via bind operations.</p>
<p>For requests containing an <code>OData-Version</code> header with a value of <code>4.0</code>, a bind operation is encoded as a property control information <code>odata.bind</code> on the navigation property it belongs to and has a single value for single-valued navigation properties or an array of values for collection navigation properties. For nullable single-valued navigation properties the value <code>null</code> may be used to remove the relationship.</p>
<div class="example">
<p>Example 20: assign an existing product to an existing category with a partial update request against the product</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="er">PATCH</span> <span class="er">http://host/service/Products(42)</span> <span class="er">HTTP/1.1</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="er">Content-Type:</span> <span class="er">application/json</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;Category@odata.bind&quot;</span><span class="fu">:</span> <span class="st">&quot;Categories(6)&quot;</span></span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
</div>
<p>The values are the <a href="#ControlInformationidodataid">ids</a> of the related entities. They MAY be absolute or <a href="#RelativeURLs">relative URLs</a>.</p>
<p>For requests containing an <code>OData-Version</code> header with a value of <code>4.01</code>, a relationship is bound to an existing entity using the same representation as for an <a href="#EntityReference">expanded entity reference</a>.</p>
<div class="example">
<p>Example 21: assign an existing product to an existing category with a partial update request against the product</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="er">PATCH</span> <span class="er">http://host/service/Products(42)</span> <span class="er">HTTP/1.1</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="er">Content-Type:</span> <span class="er">application/json</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;Category&quot;</span><span class="fu">:</span> <span class="fu">{</span> <span class="dt">&quot;@id&quot;</span><span class="fu">:</span> <span class="st">&quot;Categories(6)&quot;</span> <span class="fu">}</span></span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
</div>
<div class="example">
<p>Example 22: submit a partial update request to:</p>
<ul>
<li>modify the name of an existing category</li>
<li>assign an existing product with the id 42 to the category</li>
<li>assign an existing product 57 to the category and update its name</li>
<li>create a new product named <code>Wedges</code> and assign it to the category</li>
</ul>
<p>At the end of the request, the updated category contains exactly the three specified products.</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="er">PATCH</span> <span class="er">http://host/service/Categories(6)</span> <span class="er">HTTP/1.1</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="er">Content-Type:</span> <span class="er">application/json</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;Name&quot;</span><span class="fu">:</span> <span class="st">&quot;UpdatedCategory&quot;</span><span class="fu">,</span></span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;Products&quot;</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span></span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;@id&quot;</span><span class="fu">:</span> <span class="st">&quot;Products(42)&quot;</span></span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span></span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;@id&quot;</span><span class="fu">:</span> <span class="st">&quot;Products(57)&quot;</span><span class="fu">,</span></span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;Name&quot;</span><span class="fu">:</span> <span class="st">&quot;Widgets&quot;</span></span>
<span id="cb24-13"><a href="#cb24-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb24-14"><a href="#cb24-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span></span>
<span id="cb24-15"><a href="#cb24-15" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;Name&quot;</span><span class="fu">:</span> <span class="st">&quot;Wedges&quot;</span></span>
<span id="cb24-16"><a href="#cb24-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span></span>
<span id="cb24-17"><a href="#cb24-17" aria-hidden="true" tabindex="-1"></a>  <span class="ot">]</span></span>
<span id="cb24-18"><a href="#cb24-18" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
</div>
<p>OData 4.01 services MUST support both the OData 4.0 representation, for requests containing an <code>OData-Version</code> header with a value of <code>4.0</code>, and the OData 4.01 representation, for requests containing an <code>OData-Version</code> header with a value of <code>4.01</code>. Clients MUST NOT use <code>@odata.bind</code> in requests with an <code>OData-Version</code> header with a value of <code>4.01</code>.</p>
<p>For insert operations collection navigation property bind operations and deep insert operations can be combined. For OData 4.0 requests, the bind operations MUST appear before the deep insert operations in the payload.</p>
<p>For update operations a bind operation on a collection navigation property adds additional relationships, it does not replace existing relationships, while bind operations on an entity navigation property update the relationship.</p>
</details>
<details open><summary>
<h2 id="86-collection-etag"><a id="CollectionETag" href="#CollectionETag">8.6 Collection ETag</a></h2>
</summary>
<p>The ETag for a collection of related entities is represented as <a href="#ControlInformationetagodataetag"><code>etag</code></a> control information on the navigation property. Its value is an opaque string that can be used in a subsequent request to determine if the collection has changed.</p>
<p>Services MAY include this control information as appropriate.</p>
<div class="example">
<p>Example 23: ETag for a collection of related entities</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;@context&quot;</span><span class="fu">:</span> <span class="st">&quot;http://host/service/$metadata#Orders/$entity&quot;</span><span class="fu">,</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;@id&quot;</span><span class="fu">:</span> <span class="st">&quot;Orders(1234)&quot;</span><span class="fu">,</span></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;@etag&quot;</span><span class="fu">:</span> <span class="st">&quot;W/</span><span class="ch">\&quot;</span><span class="st">MjAxMy0wNS0yN1QxMTo1OFo=</span><span class="ch">\&quot;</span><span class="st">&quot;</span><span class="fu">,</span></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;ID&quot;</span><span class="fu">:</span> <span class="dv">1234</span><span class="fu">,</span></span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;Items@etag&quot;</span><span class="fu">:</span> <span class="st">&quot;W/</span><span class="ch">\&quot;</span><span class="st">MjAxOS0wMy0xMlQxMDoyMlo=</span><span class="ch">\&quot;</span><span class="st">&quot;</span></span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a>  <span class="er">…</span></span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
</div>
<p>Note: the collection ETag for a navigation property may or may not be identical to the ETag of the containing entity, the example shows a different ETag for the <code>Items</code> collection.</p>
</details>
</details>
<hr />
<details open><summary>
<h1 id="9-stream-property"><a id="StreamProperty" href="#StreamProperty">9 Stream Property</a></h1>
</summary>
<p>An entity or complex type instance can have one or more stream properties.</p>
<p>The actual stream data is not usually contained in the representation. Instead stream property data is generally read and edited via URLs.</p>
<ul>
<li>Stream properties requested with <code>$select</code> or included in the default selection are represented by <a href="#ControlInformationmediaodatamedia"><code>media*</code></a> control information.</li>
<li>Stream properties requested with <code>$expand</code> or implicitly expanded are represented as a property with its value.</li>
</ul>
<p>See <a href="#ODataProtocol">OData-Protocol</a> for details on the system query options <code>$select</code> and <code>$expand</code>.</p>
<p>Depending on the <a href="#ControllingtheAmountofControlInformationinResponses">metadata level</a>, the stream property MAY be annotated to provide the read link, edit link, media type, and ETag of the media stream through their <code>media*</code> control information.</p>
<p>If the actual stream data is included inline, the control information <a href="#ControlInformationmediaodatamedia"><code>mediaContentType</code></a> MUST be present to indicate how the included stream property value is represented. Stream property values of media type <code>application/json</code> or one of its subtypes, optionally with format parameters, are represented as native JSON. Values of top-level type <code>text</code> with an explicit or default <code>charset</code> of <code>utf-8</code> or <code>us-ascii</code>, for example <code>text/plain</code>, are represented as a string, with JSON string escaping rules applied. Included stream data of other media types is represented as a base64url-encoded string value, see <a href="#rfc4648">RFC4648</a>, section 5.</p>
<p>If the included stream property has no value, the non-existing stream data is represented as <code>null</code> and the control information <a href="#ControlInformationmediaodatamedia"><code>mediaContentType</code></a> is not necessary.</p>
<div class="example">
<p>Example 24:</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;@context&quot;</span><span class="fu">:</span> <span class="st">&quot;http://host/service/$metadata#Products/$entity&quot;</span><span class="fu">,</span></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>  <span class="er">…</span></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;Thumbnail@mediaReadLink&quot;</span><span class="fu">:</span> <span class="st">&quot;http://server/Thumbnail546.jpg&quot;</span><span class="fu">,</span></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;Thumbnail@mediaEditLink&quot;</span><span class="fu">:</span> <span class="st">&quot;http://server/uploads/Thumbnail546.jpg&quot;</span><span class="fu">,</span></span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;Thumbnail@mediaContentType&quot;</span><span class="fu">:</span> <span class="st">&quot;image/jpeg&quot;</span><span class="fu">,</span></span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;Thumbnail@mediaEtag&quot;</span><span class="fu">:</span> <span class="st">&quot;W/</span><span class="ch">\&quot;</span><span class="st">####</span><span class="ch">\&quot;</span><span class="st">&quot;</span><span class="fu">,</span></span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;Thumbnail&quot;</span><span class="fu">:</span> <span class="st">&quot;…base64url encoded value…&quot;</span><span class="fu">,</span></span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a>  <span class="er">…</span></span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
</div>
</details>
<hr />
<details open><summary>
<h1 id="10-media-entity"><a id="MediaEntity" href="#MediaEntity">10 Media Entity</a></h1>
</summary>
<p>Media entities are entities that describe a media resource, for example a photo. They are represented as entities that contain additional <a href="#ControlInformationmediaodatamedia"><code>media*</code></a> control information.</p>
<p>If the actual stream data for the media entity is included, it is represented as property named <code>$value</code> whose string value is the base64url-encoded value of the media stream, see <a href="#rfc4648">RFC4648</a>.</p>
<div class="example">
<p>Example 25:</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;@context&quot;</span><span class="fu">:</span> <span class="st">&quot;http://host/service/$metadata#Employees/$entity&quot;</span><span class="fu">,</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;@mediaReadLink&quot;</span><span class="fu">:</span> <span class="st">&quot;Employees(1)/$value&quot;</span><span class="fu">,</span></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;@mediaContentType&quot;</span><span class="fu">:</span> <span class="st">&quot;image/jpeg&quot;</span><span class="fu">,</span></span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;$value&quot;</span><span class="fu">:</span> <span class="st">&quot;…base64url encoded value…&quot;</span><span class="fu">,</span></span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;ID&quot;</span><span class="fu">:</span> <span class="dv">1</span><span class="fu">,</span></span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a>  <span class="er">…</span></span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
</div>
</details>
<hr />
<details open><summary>
<h1 id="11-individual-property-or-operation-response"><a id="IndividualPropertyorOperationResponse" href="#IndividualPropertyorOperationResponse">11 Individual Property or Operation Response</a></h1>
</summary>
<p>An individual property or operation response is represented as a JSON object.</p>
<p>A single-valued property or operation response that has the <code>null</code> value does not have a representation; see <a href="#ODataProtocol">OData-Protocol</a>.</p>
<p>A property or operation response that is of a primitive type is represented as an object with a single name/value pair, whose name is <code>value</code> and whose value is a <a href="#PrimitiveValue">primitive value</a>.</p>
<p>A property or operation response that is of complex type is represented as a <a href="#ComplexValue">complex value</a>.</p>
<p>A property or operation response that is of a collection type is represented as an object with a single name/value pair whose name is <code>value</code>. Its value is the JSON representation of a <a href="#CollectionofComplexValues">collection of complex type values</a> or <a href="#CollectionofPrimitiveValues">collection of primitive values</a>.</p>
<div class="example">
<p>Example 26: primitive value</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;@context&quot;</span><span class="fu">:</span> <span class="st">&quot;http://host/service/$metadata#Edm.String&quot;</span><span class="fu">,</span></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;value&quot;</span><span class="fu">:</span> <span class="st">&quot;Pilar Ackerman&quot;</span></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
</div>
<div class="example">
<p>Example 27: collection of primitive values</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;@context&quot;</span><span class="fu">:</span> <span class="st">&quot;http://host/service/$metadata#Collection(Edm.String)&quot;</span><span class="fu">,</span></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;value&quot;</span><span class="fu">:</span> <span class="ot">[</span><span class="st">&quot;small&quot;</span><span class="ot">,</span> <span class="st">&quot;medium&quot;</span><span class="ot">,</span> <span class="st">&quot;extra large&quot;</span><span class="ot">]</span></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
</div>
<div class="example">
<p>Example 28: empty collection of primitive values</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;@context&quot;</span><span class="fu">:</span> <span class="st">&quot;http://host/service/$metadata#Collection(Edm.String)&quot;</span><span class="fu">,</span></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;value&quot;</span><span class="fu">:</span> <span class="ot">[]</span></span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
</div>
<div class="example">
<p>Example 29: complex value</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;@context&quot;</span><span class="fu">:</span> <span class="st">&quot;http://host/service/$metadata#Model.Address&quot;</span><span class="fu">,</span></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;Street&quot;</span><span class="fu">:</span> <span class="st">&quot;12345 Grant Street&quot;</span><span class="fu">,</span></span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;City&quot;</span><span class="fu">:</span> <span class="st">&quot;Taft&quot;</span><span class="fu">,</span></span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;Region&quot;</span><span class="fu">:</span> <span class="st">&quot;Ohio&quot;</span><span class="fu">,</span></span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;PostalCode&quot;</span><span class="fu">:</span> <span class="st">&quot;OH 98052&quot;</span><span class="fu">,</span></span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;Country@navigationLink&quot;</span><span class="fu">:</span> <span class="st">&quot;Countries(&#39;US&#39;)&quot;</span></span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
</div>
<div class="example">
<p>Example 30: empty collection of complex values</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;@context&quot;</span><span class="fu">:</span> <span class="st">&quot;http://host/service/$metadata#Collection(Model.Address)&quot;</span><span class="fu">,</span></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;value&quot;</span><span class="fu">:</span> <span class="ot">[]</span></span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
</div>
<p>Note: the context URL is optional in requests.</p>
</details>
<hr />
<details open><summary>
<h1 id="12-collection-of-operation-responses"><a id="CollectionofOperationResponses" href="#CollectionofOperationResponses">12 Collection of Operation Responses</a></h1>
</summary>
<p>Invoking a bound action or function with <code>/$each</code> on each member of a collection in one request results in a collection of operation results, which is represented as a JSON object containing a name/value pair named <code>value</code>. It MAY contain <a href="#ControlInformationcontextodatacontext"><code>context</code></a>, <a href="#ControlInformationtypeodatatype"><code>type</code></a>, <a href="#ControlInformationcountodatacount"><code>count</code></a>, or <a href="#ControlInformationnextLinkodatanextLink"><code>nextLink</code></a> control information.</p>
<p>If present, the <code>context</code> control information MUST be the first name/value pair in the response.</p>
<p>The <code>count</code> name/value pair represents the number of operation responses in the collection. If present and the <a href="#PayloadOrderingConstraints"><code>streaming=true</code></a> media type parameter is set, it MUST come before the <code>value</code> name/value pair. If the response represents a partial result, the <code>count</code> name/value pair MUST appear in the first partial response, and it MAY appear in subsequent partial responses (in which case it may vary from response to response).</p>
<p>The value of the <code>value</code> name/value pair is an array of objects, each object representing a single <a href="#IndividualPropertyorOperationResponse">operation response</a>. Note: if the operation response is a collection, each single operation response object itself contains a name/value pair named <code>value</code>.</p>
</details>
<hr />
<details open><summary>
<h1 id="13-collection-of-entities"><a id="CollectionofEntities" href="#CollectionofEntities">13 Collection of Entities</a></h1>
</summary>
<p>A collection of entities is represented as a JSON object containing a name/value pair named <code>value</code>. It MAY contain <a href="#ControlInformationcontextodatacontext"><code>context</code></a>, <a href="#ControlInformationtypeodatatype"><code>type</code></a>, <a href="#ControlInformationcountodatacount"><code>count</code></a>, <a href="#ControlInformationnextLinkodatanextLink"><code>nextLink</code></a>, or <a href="#ControlInformationdeltaLinkodatadeltaLink"><code>deltaLink</code></a> control information.</p>
<p>If present, the <code>context</code> control information MUST be the first name/value pair in the response.</p>
<p>The <code>count</code> name/value pair represents the number of entities in the collection. If present and the <a href="#PayloadOrderingConstraints"><code>streaming=true</code></a> media type parameter is set, it MUST come before the <code>value</code> name/value pair. If the response represents a partial result, the <code>count</code> name/value pair MUST appear in the first partial response, and it MAY appear in subsequent partial responses (in which case it may vary from response to response).</p>
<p>The value of the <code>value</code> name/value pair is a JSON array where each element is <a href="#Entity">representation of an entity</a> or a <a href="#EntityReference">representation of an entity reference</a>. An empty collection is represented as an empty JSON array.</p>
<p>Functions or actions that are bound to this collection of entities are advertised in the “wrapper object” in the same way as <a href="#BoundFunction">functions</a> or <a href="#BoundAction">actions</a> are advertised in the object representing a single entity.</p>
<p>The <a href="#ControlInformationnextLinkodatanextLink"><code>nextLink</code></a> control information MUST be included in a response that represents a partial result.</p>
<div class="example">
<p>Example 31:</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;@context&quot;</span><span class="fu">:</span> <span class="st">&quot;…&quot;</span><span class="fu">,</span></span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;@count&quot;</span><span class="fu">:</span> <span class="dv">37</span><span class="fu">,</span></span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;value&quot;</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span> <span class="er">…</span> <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span> <span class="er">…</span> <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span> <span class="er">…</span> <span class="fu">}</span></span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a>  <span class="ot">]</span><span class="fu">,</span></span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;@nextLink&quot;</span><span class="fu">:</span> <span class="st">&quot;…?$skiptoken=342r89&quot;</span></span>
<span id="cb33-10"><a href="#cb33-10" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
</div>
</details>
<hr />
<details open><summary>
<h1 id="14-entity-reference"><a id="EntityReference" href="#EntityReference">14 Entity Reference</a></h1>
</summary>
<p>An entity reference (see <a href="#ODataProtocol">OData-Protocol</a>) MAY take the place of an entity in a JSON payload, based on the client request. It is serialized as a JSON object that MUST contain the <a href="#ControlInformationidodataid">id</a> of the referenced entity and MAY contain the <a href="#ControlInformationtypeodatatype"><code>type</code></a> control information and <a href="#InstanceAnnotations">instance annotations</a>, but no additional properties or control information.</p>
<p>A collection of entity references is represented as a <a href="#CollectionofEntities">collection of entities</a>, with entity reference representations instead of entity representations as items in the array value of the <code>value</code> name/value pair.</p>
<p>The outermost JSON object in a response MUST contain a <a href="#ControlInformationcontextodatacontext"><code>context</code></a> control information and MAY contain <a href="#ControlInformationcountodatacount"><code>count</code></a>, <a href="#ControlInformationnextLinkodatanextLink"><code>nextLink</code></a>, or <a href="#ControlInformationdeltaLinkodatadeltaLink"><code>deltaLink</code></a> control information.</p>
<div class="example">
<p>Example 32: entity reference to order 10643</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;@context&quot;</span><span class="fu">:</span> <span class="st">&quot;http://host/service/$metadata#$ref&quot;</span><span class="fu">,</span></span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;@id&quot;</span><span class="fu">:</span> <span class="st">&quot;Orders(10643)&quot;</span></span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
</div>
<div class="example">
<p>Example 33: collection of entity references</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;@context&quot;</span><span class="fu">:</span> <span class="st">&quot;http://host/service/$metadata#Collection($ref)&quot;</span><span class="fu">,</span></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;value&quot;</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span> <span class="dt">&quot;@id&quot;</span><span class="fu">:</span> <span class="st">&quot;Orders(10643)&quot;</span> <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span> <span class="dt">&quot;@id&quot;</span><span class="fu">:</span> <span class="st">&quot;Orders(10759)&quot;</span> <span class="fu">}</span></span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a>  <span class="ot">]</span></span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
</div>
</details>
<hr />
<details open><summary>
<h1 id="15-delta-payload"><a id="DeltaPayload" href="#DeltaPayload">15 Delta Payload</a></h1>
</summary>
<p>The non-format specific aspects of the delta handling are described in <a href="https://docs.oasis-open.org/odata/odata/v4.02/odata-v4.02-part1-protocol.html#RequestingChanges">OData-Protocol, section 11.3</a>.</p>
<details open><summary>
<h2 id="151-delta-responses"><a id="DeltaResponses" href="#DeltaResponses">15.1 Delta Responses</a></h2>
</summary>
<p>Responses from a delta request are returned as a JSON object.</p>
<p>The JSON object for a delta response to a single entity is either an <a href="#AddedChangedEntity">added</a>, <a href="#AddedChangedEntity">changed</a>, or <a href="#DeletedEntity">deleted entity</a>.</p>
<p>The JSON object for a delta response to a collection of entities MUST contain an array-valued property named <code>value</code> containing all <a href="#AddedChangedEntity">added</a>, <a href="#AddedChangedEntity">changed</a>, or <a href="#DeletedEntity">deleted entities</a>, and MAY contain additional, unchanged entities. A <a href="#OData40FlattenedDeltaPayload">flattened OData 4.0 delta response</a> may also include <a href="#AddedLink">added</a> or <a href="#DeletedLink">deleted links</a>, while these are generally represented as <a href="#OData401ExpandedNavigationProperties">nested delta payloads</a> in OData 4.01 and greater.</p>
<p>If the response from the delta link contains <code>count</code> control information, the returned number MUST include the count of all top-level added, changed, or deleted entities to be returned, as well as added or deleted links in an OData 4.0 delta response.</p>
<p>If the delta response contains a partial list of changes, it MUST include a <a href="#ControlInformationnextLinkodatanextLink">next link</a> for the client to retrieve the next set of changes.</p>
<p>The last page of a delta response SHOULD contain a <a href="#ControlInformationdeltaLinkodatadeltaLink">delta link</a> in place of the <a href="#ControlInformationnextLinkodatanextLink">next link</a> for retrieving subsequent changes once the current set of changes has been applied to the initial set.</p>
<div class="example">
<p>Example 34: a 4.01 delta response with three changes, in order of occurrence</p>
<ol type="1">
<li><code>ContactName</code> for customer <code>BOTTM</code> was changed to <code>Susan Halvenstern</code></li>
<li>Customer <code>ANTON</code> was deleted</li>
<li><code>ContactName</code> for customer <code>ALFKI</code> was changed to <code>Blake Smithe</code></li>
</ol>
<div class="sourceCode" id="cb36"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;@context&quot;</span><span class="fu">:</span> <span class="st">&quot;http://host/service/$metadata#Customers/$delta&quot;</span><span class="fu">,</span></span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;@count&quot;</span><span class="fu">:</span><span class="dv">3</span><span class="fu">,</span></span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;value&quot;</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span></span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;@id&quot;</span><span class="fu">:</span> <span class="st">&quot;Customers(&#39;BOTTM&#39;)&quot;</span><span class="fu">,</span></span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;ContactName&quot;</span><span class="fu">:</span> <span class="st">&quot;Susan Halvenstern&quot;</span></span>
<span id="cb36-8"><a href="#cb36-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb36-9"><a href="#cb36-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span></span>
<span id="cb36-10"><a href="#cb36-10" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;@removed&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb36-11"><a href="#cb36-11" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;reason&quot;</span><span class="fu">:</span> <span class="st">&quot;deleted&quot;</span></span>
<span id="cb36-12"><a href="#cb36-12" aria-hidden="true" tabindex="-1"></a>      <span class="fu">},</span></span>
<span id="cb36-13"><a href="#cb36-13" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;@id&quot;</span><span class="fu">:</span> <span class="st">&quot;Customers(&#39;ANTON&#39;)&quot;</span></span>
<span id="cb36-14"><a href="#cb36-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb36-15"><a href="#cb36-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span></span>
<span id="cb36-16"><a href="#cb36-16" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;@id&quot;</span><span class="fu">:</span> <span class="st">&quot;Customers(&#39;ALFKI&#39;)&quot;</span><span class="fu">,</span></span>
<span id="cb36-17"><a href="#cb36-17" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;ContactName&quot;</span><span class="fu">:</span> <span class="st">&quot;Blake Smithe&quot;</span></span>
<span id="cb36-18"><a href="#cb36-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span></span>
<span id="cb36-19"><a href="#cb36-19" aria-hidden="true" tabindex="-1"></a>  <span class="ot">]</span><span class="fu">,</span></span>
<span id="cb36-20"><a href="#cb36-20" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;@deltaLink&quot;</span><span class="fu">:</span> <span class="st">&quot;Customers?$deltatoken=8015&quot;</span></span>
<span id="cb36-21"><a href="#cb36-21" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
</div>
<div class="example">
<p>Example 35: a 4.0 delta response with three changes, in order of occurrence</p>
<ol type="1">
<li><code>ContactName</code> for customer <code>BOTTM</code> was changed to <code>Susan Halvenstern</code></li>
<li>Customer <code>ANTON</code> was deleted</li>
<li><code>ContactName</code> for customer <code>ALFKI</code> was changed to <code>Blake Smithe</code></li>
</ol>
<div class="sourceCode" id="cb37"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;@odata.context&quot;</span><span class="fu">:</span> <span class="st">&quot;http://host/service/$metadata#Customers/$delta&quot;</span><span class="fu">,</span></span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;@odata.count&quot;</span><span class="fu">:</span> <span class="dv">3</span><span class="fu">,</span></span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;value&quot;</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span></span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;@odata.id&quot;</span><span class="fu">:</span> <span class="st">&quot;Customers(&#39;BOTTM&#39;)&quot;</span><span class="fu">,</span></span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;ContactName&quot;</span><span class="fu">:</span> <span class="st">&quot;Susan Halvenstern&quot;</span><span class="fu">,</span></span>
<span id="cb37-8"><a href="#cb37-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb37-9"><a href="#cb37-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span></span>
<span id="cb37-10"><a href="#cb37-10" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;@odata.context&quot;</span><span class="fu">:</span> <span class="st">&quot;#Customers/$deletedEntity&quot;</span><span class="fu">,</span></span>
<span id="cb37-11"><a href="#cb37-11" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;@odata.id&quot;</span><span class="fu">:</span> <span class="st">&quot;Customers(&#39;ANTON&#39;)&quot;</span></span>
<span id="cb37-12"><a href="#cb37-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb37-13"><a href="#cb37-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span></span>
<span id="cb37-14"><a href="#cb37-14" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;@odata.id&quot;</span><span class="fu">:</span> <span class="st">&quot;Customers(&#39;ALFKI&#39;)&quot;</span><span class="fu">,</span></span>
<span id="cb37-15"><a href="#cb37-15" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;ContactName&quot;</span><span class="fu">:</span> <span class="st">&quot;Blake Smithe&quot;</span></span>
<span id="cb37-16"><a href="#cb37-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span></span>
<span id="cb37-17"><a href="#cb37-17" aria-hidden="true" tabindex="-1"></a>  <span class="ot">]</span><span class="fu">,</span></span>
<span id="cb37-18"><a href="#cb37-18" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;@odata.deltaLink&quot;</span><span class="fu">:</span> <span class="st">&quot;Customers?$deltatoken=8015&quot;</span></span>
<span id="cb37-19"><a href="#cb37-19" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
</div>
</details>
<details open><summary>
<h2 id="152-addedchanged-entity"><a id="AddedChangedEntity" href="#AddedChangedEntity">15.2 Added/Changed Entity</a></h2>
</summary>
<p>Added or changed entities within a delta payload are represented as <a href="#Entity">entities</a>. All entities within a delta response payload MUST include the control information <a href="#ControlInformationidodataid"><code>id</code></a> or all of the entity’s primary key fields. The <code>id</code> control information MUST appear if any of the entity’s primary key fields are omitted from the response <em>or</em> the entity-id is not identical to the canonical URL of the entity.</p>
<p>When using a delta payload in an <a href="#UpdateaCollectionofEntities">update request</a>, an <a href="https://github.com/oasis-tcs/odata-vocabularies/blob/main/vocabularies/Org.OData.Core.V1.md#AlternateKeys">alternate key</a> (see <em>Alternate Keys</em> in <a href="#ODataURL">OData-URL</a>) MAY be used in place of the entity’s primary key. A delta response from an update request using alternate keys SHOULD include all fields of the alternate key used in the request, in which case it MAY omit the <code>id</code> control information and other primary key fields.</p>
<p>Any entity in an update request that has neither the <code>id</code> control information, nor the primary or alternate key values of an existing entity, are treated as an added entity.</p>
<p>Added entities MUST include all available selected properties and MAY include additional, unselected properties. Collection-valued properties are treated as atomic values; any collection-valued properties returned from a delta request MUST contain all current values for that collection.</p>
<p>Changed entities MUST include all available selected properties that have changed, and MAY include additional properties.</p>
<p>Added or changed entities MAY include <a href="#ControlInformationetagodataetag">ETags</a>.</p>
<p>Entities include control information for selected navigation links based on <a href="#ControllingtheAmountofControlInformationinResponses"><code>metadata</code></a>.</p>
</details>
<details open><summary>
<h2 id="153-deleted-entity"><a id="DeletedEntity" href="#DeletedEntity">15.3 Deleted Entity</a></h2>
</summary>
<p>Deleted entities in JSON are returned as deleted-entity objects. Delta responses MUST contain a deleted-entity object for each deleted entity, including deleted expanded entities that are not related through a containment navigation property. The service MAY additionally include expanded entities related through a containment navigation property in which case it MUST include those in any returned count of enumerated changes.</p>
<p>The representation of deleted-entity objects differs between OData 4.0 and OData 4.01.</p>
<p>In OData 4.0 payloads the deleted-entity object MUST include the following properties, regardless of the specified <a href="#ControllingtheAmountofControlInformationinResponses"><code>metadata</code></a> value:</p>
<ul>
<li>Control information <a href="#ControlInformationcontextodatacontext"><code>context</code></a> — The context URL fragment MUST be <code>#{entity-set}/$deletedEntity</code>, where <code>{entity-set}</code> is the entity set of the deleted entity</li>
<li><code>id</code> — The <a href="#ControlInformationidodataid">id</a> of the deleted entity (same as the <a href="#ControlInformationidodataid">id</a> returned or computed when calling GET on resource), which may be absolute or <a href="#RelativeURLs">relative</a></li>
</ul>
<p>In OData 4.0 payloads the deleted-entity object MAY include the following optional property, regardless of the specified <a href="#ControllingtheAmountofControlInformationinResponses"><code>metadata</code></a> value, and MAY include <a href="#InstanceAnnotations">annotations</a>:</p>
<ul>
<li><code>reason</code> — either <code>deleted</code>, if the entity was deleted (destroyed), or <code>changed</code> if the entity was removed from membership in the result (i.e., due to a data change).</li>
</ul>
<div class="example">
<p>Example 36: deleted entity in OData 4.0 response — note that <code>id</code> is a property, not control information</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;@context&quot;</span><span class="fu">:</span> <span class="st">&quot;#Customers/$deletedEntity&quot;</span><span class="fu">,</span></span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;reason&quot;</span><span class="fu">:</span> <span class="st">&quot;deleted&quot;</span><span class="fu">,</span></span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;id&quot;</span><span class="fu">:</span> <span class="st">&quot;Customers(&#39;ANTON&#39;)&quot;</span></span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
</div>
<p>In OData 4.01 payloads the deleted-entity object MUST include the following properties, regardless of the specified <a href="#ControllingtheAmountofControlInformationinResponses"><code>metadata</code></a> value. For ordered payloads, this control information MUST follow the <a href="#PayloadOrderingConstraints">payload ordering constraints</a>.</p>
<ul>
<li><p>Control information <a href="#ControlInformationremovedodataremoved"><code>removed</code></a>, whose value is an object that MAY contain a property named <code>reason</code>. If present, the value of <code>reason</code> MUST be either <code>deleted</code> if the entity was deleted (destroyed), or <code>changed</code> if the entity was removed from membership in the result either due to change in value such that the entity no longer matches the defining query or because the entity was removed from the collection. The object MAY include <a href="#InstanceAnnotations">annotations</a>, and clients SHOULD NOT error due to the presence of additional properties that MAY be defined by future versions of this specification.</p></li>
<li><p>Control information <a href="#ControlInformationidodataid"><code>id</code></a> or all of the entity’s primary key fields. The <code>id</code> control information MUST appear if any of the entity’s primary key fields are omitted from the response <em>or</em> the entity-id is not identical to the canonical URL of the entity. When using a delta payload in an <a href="#UpdateaCollectionofEntities">update request</a>, an <a href="https://github.com/oasis-tcs/odata-vocabularies/blob/main/vocabularies/Org.OData.Core.V1.md#AlternateKeys">alternate key</a> (see <em>Alternate Keys</em> in <a href="#ODataURL">OData-URL</a>) MAY be used in place of the entity’s primary key. A delta response from an update request using alternate keys SHOULD include all fields of the alternate key used in the request, in which case it MAY omit the <code>id</code> control information and other primary key fields.</p></li>
</ul>
<p>For full metadata the <a href="#ControlInformationcontextodatacontext"><code>context</code></a> control information MUST be included. It also MUST be included if the entity set of the deleted entity cannot be determined from the surrounding context.</p>
<p>The deleted-entity object MAY include additional properties of the entity, as well as <a href="#InstanceAnnotations">annotations</a>, and MAY include related entities, related deleted entities, or a delta or full representation of a related collection of entities, to represent related entities that have been modified or deleted.</p>
<div class="example">
<p>Example 37: deleted entity in OData 4.01 response with <code>id</code> control information (prefixed with an <code>@</code>)</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;@context&quot;</span><span class="fu">:</span> <span class="st">&quot;#Customers/$deletedEntity&quot;</span><span class="fu">,</span></span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;@removed&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;reason&quot;</span><span class="fu">:</span> <span class="st">&quot;deleted&quot;</span><span class="fu">,</span></span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;@myannoation.deletedBy&quot;</span><span class="fu">:</span> <span class="st">&quot;Mario&quot;</span></span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">},</span></span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;@id&quot;</span><span class="fu">:</span> <span class="st">&quot;Customers(&#39;ANTON&#39;)&quot;</span></span>
<span id="cb39-8"><a href="#cb39-8" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
</div>
<div class="example">
<p>Example 38: entity removed OData 4.01 response without <code>id</code> control information and instead all key fields (<code>ID</code> is the single key field of <code>Customer</code>)</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;@removed&quot;</span><span class="fu">:</span> <span class="fu">{},</span></span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;ID&quot;</span><span class="fu">:</span> <span class="st">&quot;ANTON&quot;</span></span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
</div>
</details>
<details open><summary>
<h2 id="154-related-entities"><a id="RelatedEntities" href="#RelatedEntities">15.4 Related Entities</a></h2>
</summary>
<p>Changes to related entities are represented differently in OData 4.0 and OData 4.01.</p>
<p>In OData 4.01, changes to relationships and related entities are generally represented as <a href="#OData401ExpandedNavigationProperties">expanded navigation properties</a>.</p>
<p>In OData 4.0, changes to relationships and related entities are represented as a <a href="#OData40FlattenedDeltaPayload">flat array</a> of added, deleted, or changed entities, along with added or deleted links.</p>
<details open><summary>
<h3 id="1541-odata-401-expanded-navigation-properties"><a id="OData401ExpandedNavigationProperties" href="#OData401ExpandedNavigationProperties">15.4.1 OData 4.01 Expanded Navigation Properties</a></h3>
</summary>
<p>OData 4.01 delta payloads represent changes to relationships and related entities as expanded navigation properties. Related single entities are represented as either an <a href="#AddedChangedEntity">added/changed</a> entity, an <a href="#EntityReference">entity reference</a>, a <a href="#DeletedEntity">deleted entity</a>, or a null value (if no entity is related as the outcome of the change). Collection-valued navigation properties are represented either as a delta representation or as a full representation of the collection.</p>
<p>If the expanded navigation property represents a delta, it MUST be represented as an array-valued control information <a href="#ControlInformationdeltaodatadelta"><code>delta</code></a> on the navigation property. <a href="#AddedChangedEntity">Added/changed</a> entities or <a href="#EntityReference">entity references</a> are added to the collection. <a href="#DeletedEntity">Deleted entities</a> in a nested delta representation represent entities no longer part of the collection. If the deleted entity specifies a <code>reason</code> as <code>deleted</code>, then the entity is both removed from the collection and deleted, otherwise it is removed from the collection and only deleted if the navigation property is a containment navigation property. The array MUST NOT contain <a href="#AddedLink">added</a> or <a href="#DeletedLink">deleted links</a>.</p>
<div class="example">
<p>Example 39: changes to related orders represented as a 4.01 nested delta representation</p>
<ol type="1">
<li>For Customer <code>ALFKI</code>:
<ol type="1">
<li>Order 10643 was removed</li>
<li>Order 10645 was added, and 3. The shipping information for related order 10645 was updated</li>
</ol></li>
<li>Customer <code>ANTON</code> was deleted</li>
<li><code>ContactName</code> for customer <code>ALFKI</code> was subsequently changed to <code>Blake Smithe</code></li>
</ol>
<p>Note that the <code>count</code> is the count of top level change records in the response, regardless of how many related changes are applied in each change record.</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;@context&quot;</span><span class="fu">:</span> <span class="st">&quot;http://host/service/$metadata#Customers/$delta&quot;</span><span class="fu">,</span></span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;@count&quot;</span><span class="fu">:</span><span class="dv">3</span><span class="fu">,</span></span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;value&quot;</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span></span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;@id&quot;</span><span class="fu">:</span> <span class="st">&quot;Customers(&#39;ALFKI&#39;)&quot;</span><span class="fu">,</span></span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;Orders@delta&quot;</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb41-8"><a href="#cb41-8" aria-hidden="true" tabindex="-1"></a>        <span class="fu">{</span></span>
<span id="cb41-9"><a href="#cb41-9" aria-hidden="true" tabindex="-1"></a>          <span class="dt">&quot;@removed&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb41-10"><a href="#cb41-10" aria-hidden="true" tabindex="-1"></a>            <span class="dt">&quot;reason&quot;</span><span class="fu">:</span> <span class="st">&quot;changed&quot;</span></span>
<span id="cb41-11"><a href="#cb41-11" aria-hidden="true" tabindex="-1"></a>          <span class="fu">},</span></span>
<span id="cb41-12"><a href="#cb41-12" aria-hidden="true" tabindex="-1"></a>          <span class="dt">&quot;@id&quot;</span><span class="fu">:</span> <span class="st">&quot;Orders(10643)&quot;</span></span>
<span id="cb41-13"><a href="#cb41-13" aria-hidden="true" tabindex="-1"></a>        <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb41-14"><a href="#cb41-14" aria-hidden="true" tabindex="-1"></a>        <span class="fu">{</span></span>
<span id="cb41-15"><a href="#cb41-15" aria-hidden="true" tabindex="-1"></a>          <span class="dt">&quot;@id&quot;</span><span class="fu">:</span> <span class="st">&quot;Orders(10645)&quot;</span><span class="fu">,</span></span>
<span id="cb41-16"><a href="#cb41-16" aria-hidden="true" tabindex="-1"></a>          <span class="dt">&quot;ShippingAddress&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb41-17"><a href="#cb41-17" aria-hidden="true" tabindex="-1"></a>            <span class="dt">&quot;Street&quot;</span><span class="fu">:</span> <span class="st">&quot;23 Tsawassen Blvd.&quot;</span><span class="fu">,</span></span>
<span id="cb41-18"><a href="#cb41-18" aria-hidden="true" tabindex="-1"></a>            <span class="dt">&quot;City&quot;</span><span class="fu">:</span> <span class="st">&quot;Tsawassen&quot;</span><span class="fu">,</span></span>
<span id="cb41-19"><a href="#cb41-19" aria-hidden="true" tabindex="-1"></a>            <span class="dt">&quot;Region&quot;</span><span class="fu">:</span> <span class="st">&quot;BC&quot;</span><span class="fu">,</span></span>
<span id="cb41-20"><a href="#cb41-20" aria-hidden="true" tabindex="-1"></a>            <span class="dt">&quot;PostalCode&quot;</span><span class="fu">:</span> <span class="st">&quot;T2F 8M4&quot;</span></span>
<span id="cb41-21"><a href="#cb41-21" aria-hidden="true" tabindex="-1"></a>          <span class="fu">}</span></span>
<span id="cb41-22"><a href="#cb41-22" aria-hidden="true" tabindex="-1"></a>        <span class="fu">}</span></span>
<span id="cb41-23"><a href="#cb41-23" aria-hidden="true" tabindex="-1"></a>      <span class="ot">]</span></span>
<span id="cb41-24"><a href="#cb41-24" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb41-25"><a href="#cb41-25" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span></span>
<span id="cb41-26"><a href="#cb41-26" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;@removed&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb41-27"><a href="#cb41-27" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;reason&quot;</span><span class="fu">:</span> <span class="st">&quot;deleted&quot;</span></span>
<span id="cb41-28"><a href="#cb41-28" aria-hidden="true" tabindex="-1"></a>      <span class="fu">},</span></span>
<span id="cb41-29"><a href="#cb41-29" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;@id&quot;</span><span class="fu">:</span> <span class="st">&quot;Customers(&#39;ANTON&#39;)&quot;</span></span>
<span id="cb41-30"><a href="#cb41-30" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb41-31"><a href="#cb41-31" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span></span>
<span id="cb41-32"><a href="#cb41-32" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;@id&quot;</span><span class="fu">:</span> <span class="st">&quot;Customers(&#39;ALFKI&#39;)&quot;</span><span class="fu">,</span></span>
<span id="cb41-33"><a href="#cb41-33" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;ContactName&quot;</span><span class="fu">:</span> <span class="st">&quot;Blake Smithe&quot;</span></span>
<span id="cb41-34"><a href="#cb41-34" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span></span>
<span id="cb41-35"><a href="#cb41-35" aria-hidden="true" tabindex="-1"></a>  <span class="ot">]</span><span class="fu">,</span></span>
<span id="cb41-36"><a href="#cb41-36" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;@deltaLink&quot;</span><span class="fu">:</span> <span class="st">&quot;Customers?$expand=Orders&amp;$deltatoken=8015&quot;</span></span>
<span id="cb41-37"><a href="#cb41-37" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
</div>
<p>If the expanded navigation property is a full representation of the collection, it MUST be represented as an expanded navigation property, and its array value MUST represent the full set of entities related according to that relationship and satisfying any specified expand options, or a partial list containing a <a href="#ControlInformationnextLinkodatanextLink"><code>nextLink</code></a>. Following this chain of next links MUST eventually return the full set of entities related according to that relationship and satisfying any specified expand options; the final page does not include a delta link.</p>
<p>Members of the expanded navigation property MUST be represented as <a href="#AddedChangedEntity">added/changed</a> entities or <a href="#EntityReference">entity references</a> and MUST NOT include added links, deleted links, or deleted entities. Any entity not represented in the collection has either been removed, deleted, or changed such that it no longer satisfies the expand options in the defining query. In any case, clients SHOULD NOT receive additional notifications for such removed entities.</p>
<div class="example">
<p>Example 40: 4.01 delta response for a single entity with an expanded navigation property containing only a partial list of related entities (as indicated with a <a href="#ControlInformationnextLinkodatanextLink">next link</a>)</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;@context&quot;</span><span class="fu">:</span> <span class="st">&quot;http://host/service/$metadata#Customers/$entity/$delta&quot;</span><span class="fu">,</span></span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>  <span class="er">…</span></span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;Orders@count&quot;</span><span class="fu">:</span> <span class="dv">42</span><span class="fu">,</span></span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;Orders&quot;</span><span class="fu">:</span> <span class="ot">[</span> <span class="er">…</span> <span class="ot">]</span><span class="fu">,</span></span>
<span id="cb42-6"><a href="#cb42-6" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;Orders@nextLink&quot;</span><span class="fu">:</span> <span class="st">&quot;…&quot;</span><span class="fu">,</span></span>
<span id="cb42-7"><a href="#cb42-7" aria-hidden="true" tabindex="-1"></a>  <span class="er">…</span></span>
<span id="cb42-8"><a href="#cb42-8" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;@deltaLink&quot;</span><span class="fu">:</span> <span class="st">&quot;Customers(&#39;ALFKI&#39;)?$expand=Orders&amp;$deltatoken=9711&quot;</span></span>
<span id="cb42-9"><a href="#cb42-9" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
</div>
</details>
<details open><summary>
<h3 id="1542-odata-40-flattened-delta-payload"><a id="OData40FlattenedDeltaPayload" href="#OData40FlattenedDeltaPayload">15.4.2 OData 4.0 Flattened Delta Payload</a></h3>
</summary>
<p>OData 4.0 payloads MUST NOT include expanded navigation properties inline. Changes to relationships are represented as <a href="#AddedLink">added</a> or <a href="#DeletedLink">deleted links</a>. Changes to related entities are represented as top-level entities whose <a href="#ControlInformationcontextodatacontext"><code>context</code></a> control information specifies the entity set of the entity. This control information MUST be present for entities are not part of the entity set specified by the context URL, regardless of the specified <a href="#ControllingtheAmountofControlInformationinResponses"><code>metadata</code></a> value.</p>
<div class="example">
<p>Example 41: changes to related orders represented as a 4.0 flattened delta payload</p>
<ol type="1">
<li>Order 10643 was removed from customer <code>ALFKI</code></li>
<li>Order 10645 was added to customer <code>ALFKI</code></li>
<li>The shipping information for related order 10645 was updated</li>
<li>Customer <code>ANTON</code> was deleted</li>
<li><code>ContactName</code> for customer <code>ALFKI</code> was subsequently changed to <code>Blake Smithe</code></li>
</ol>
<div class="sourceCode" id="cb43"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;@odata.context&quot;</span><span class="fu">:</span> <span class="st">&quot;http://host/service/$metadata#Customers/$delta&quot;</span><span class="fu">,</span></span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;@odata.count&quot;</span><span class="fu">:</span> <span class="dv">5</span><span class="fu">,</span></span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;value&quot;</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span></span>
<span id="cb43-6"><a href="#cb43-6" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;@odata.context&quot;</span><span class="fu">:</span> <span class="st">&quot;#Customers/$deletedLink&quot;</span><span class="fu">,</span></span>
<span id="cb43-7"><a href="#cb43-7" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;source&quot;</span><span class="fu">:</span> <span class="st">&quot;Customers(&#39;ALFKI&#39;)&quot;</span><span class="fu">,</span></span>
<span id="cb43-8"><a href="#cb43-8" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;relationship&quot;</span><span class="fu">:</span> <span class="st">&quot;Orders&quot;</span><span class="fu">,</span></span>
<span id="cb43-9"><a href="#cb43-9" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;target&quot;</span><span class="fu">:</span> <span class="st">&quot;Orders(10643)&quot;</span></span>
<span id="cb43-10"><a href="#cb43-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb43-11"><a href="#cb43-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span></span>
<span id="cb43-12"><a href="#cb43-12" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;@odata.context&quot;</span><span class="fu">:</span> <span class="st">&quot;#Customers/$link&quot;</span><span class="fu">,</span></span>
<span id="cb43-13"><a href="#cb43-13" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;source&quot;</span><span class="fu">:</span> <span class="st">&quot;Customers(&#39;BOTTM&#39;)&quot;</span><span class="fu">,</span></span>
<span id="cb43-14"><a href="#cb43-14" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;relationship&quot;</span><span class="fu">:</span> <span class="st">&quot;Orders&quot;</span><span class="fu">,</span></span>
<span id="cb43-15"><a href="#cb43-15" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;target&quot;</span><span class="fu">:</span> <span class="st">&quot;Orders(10645)&quot;</span></span>
<span id="cb43-16"><a href="#cb43-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb43-17"><a href="#cb43-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span></span>
<span id="cb43-18"><a href="#cb43-18" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;@odata.context&quot;</span><span class="fu">:</span> <span class="st">&quot;#Orders/$entity&quot;</span><span class="fu">,</span></span>
<span id="cb43-19"><a href="#cb43-19" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;@odata.id&quot;</span><span class="fu">:</span> <span class="st">&quot;Orders(10645)&quot;</span><span class="fu">,</span></span>
<span id="cb43-20"><a href="#cb43-20" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;ShippingAddress&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb43-21"><a href="#cb43-21" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;Street&quot;</span><span class="fu">:</span> <span class="st">&quot;23 Tsawassen Blvd.&quot;</span><span class="fu">,</span></span>
<span id="cb43-22"><a href="#cb43-22" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;City&quot;</span><span class="fu">:</span> <span class="st">&quot;Tsawassen&quot;</span><span class="fu">,</span></span>
<span id="cb43-23"><a href="#cb43-23" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;Region&quot;</span><span class="fu">:</span> <span class="st">&quot;BC&quot;</span><span class="fu">,</span></span>
<span id="cb43-24"><a href="#cb43-24" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;PostalCode&quot;</span><span class="fu">:</span> <span class="st">&quot;T2F 8M4&quot;</span></span>
<span id="cb43-25"><a href="#cb43-25" aria-hidden="true" tabindex="-1"></a>      <span class="fu">}</span></span>
<span id="cb43-26"><a href="#cb43-26" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb43-27"><a href="#cb43-27" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span></span>
<span id="cb43-28"><a href="#cb43-28" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;@odata.context&quot;</span><span class="fu">:</span> <span class="st">&quot;#Customers/$deletedEntity&quot;</span><span class="fu">,</span></span>
<span id="cb43-29"><a href="#cb43-29" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;@odata.id&quot;</span><span class="fu">:</span> <span class="st">&quot;Customers(&#39;ANTON&#39;)&quot;</span></span>
<span id="cb43-30"><a href="#cb43-30" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb43-31"><a href="#cb43-31" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span></span>
<span id="cb43-32"><a href="#cb43-32" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;@odata.id&quot;</span><span class="fu">:</span> <span class="st">&quot;Customers(&#39;ALFKI&#39;)&quot;</span><span class="fu">,</span></span>
<span id="cb43-33"><a href="#cb43-33" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;ContactName&quot;</span><span class="fu">:</span> <span class="st">&quot;Blake Smithe&quot;</span></span>
<span id="cb43-34"><a href="#cb43-34" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span></span>
<span id="cb43-35"><a href="#cb43-35" aria-hidden="true" tabindex="-1"></a>  <span class="ot">]</span><span class="fu">,</span></span>
<span id="cb43-36"><a href="#cb43-36" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;@odata.deltaLink&quot;</span><span class="fu">:</span> <span class="st">&quot;Customers?$expand=Orders&amp;$deltatoken=8016&quot;</span></span>
<span id="cb43-37"><a href="#cb43-37" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
</div>
<p>If a property of an entity is dependent upon the property of another entity within the expanded set of entities being tracked, then both the change to the dependent property as well as the change to the principal property or <a href="#AddedLink">added</a>/<a href="#DeletedLink">deleted link</a> corresponding to the change to the dependent property are returned in the delta response.</p>
<details open><summary>
<h4 id="15421-added-link"><a id="AddedLink" href="#AddedLink">15.4.2.1 Added Link</a></h4>
</summary>
<p>Links within an OData 4.0 <a href="#OData40FlattenedDeltaPayload">flattened delta response</a> are represented as link objects.</p>
<p>Delta responses MUST contain a link object for each added link that corresponds to a <code>$expand</code> path in the initial request.</p>
<p>The link object MUST include the following properties, regardless of the specified <a href="#ControllingtheAmountofControlInformationinResponses"><code>metadata</code></a> value, and MAY include <a href="#InstanceAnnotations">annotations</a>:</p>
<ul>
<li><a href="#ControlInformationcontextodatacontext"><code>context</code></a> - the context URL fragment MUST be <code>#{entity-set}/$link</code>, where <code>{entity-set}</code> is the entity set containing the source entity</li>
<li><code>source</code> — The <a href="#ControlInformationidodataid">id</a> of the entity from which the relationship is defined, which may be absolute or <a href="#RelativeURLs">relative</a></li>
<li><code>relationship</code> — The path from the source object to the navigation property which MAY traverse one or more complex properties, type cast segments, or members of ordered collections</li>
<li><code>target</code> — The <a href="#ControlInformationidodataid">id</a> of the related entity, which may be absolute or <a href="#RelativeURLs">relative</a></li>
</ul>
</details>
<details open><summary>
<h4 id="15422-deleted-link"><a id="DeletedLink" href="#DeletedLink">15.4.2.2 Deleted Link</a></h4>
</summary>
<p>Deleted links within an OData 4.0 <a href="#OData40FlattenedDeltaPayload">flattened delta response</a> are represented as deleted-link objects.</p>
<p>Delta responses MUST contain a deleted-link object for each deleted link that corresponds to a <code>$expand</code> path in the initial request, unless either of the following is true:</p>
<ul>
<li>The <code>source</code> or <code>target</code> entity has been deleted</li>
<li>The maximum cardinality of the related entity is one and there is a subsequent <a href="#AddedLink">link object</a> that specifies the same <code>source</code> and <code>relationship</code>.</li>
</ul>
<p>The deleted-link object MUST include the following properties, regardless of the specified <a href="#ControllingtheAmountofControlInformationinResponses"><code>metadata</code></a> value, and MAY include <a href="#InstanceAnnotations">annotations</a>:</p>
<ul>
<li><a href="#ControlInformationcontextodatacontext"><code>context</code></a> — the context URL fragment MUST be <code>#{entity-set}/$deletedLink</code>, where <code>{entity-set}</code> is the entity set containing the source entity</li>
<li><code>source</code> — The <a href="#ControlInformationidodataid">id</a> of the entity from which the relationship is defined, which may be absolute or <a href="#RelativeURLs">relative</a></li>
<li><code>relationship</code> — The path from the source object to the navigation property which MAY traverse one or more complex properties, type cast segments, or members of ordered collections</li>
<li><code>target</code> — The <a href="#ControlInformationidodataid">id</a> of the related entity for multi-valued navigation properties, which may be absolute or <a href="#RelativeURLs">relative</a>. For delta payloads that do not specify an <code>OData-Version</code> header value of <code>4.0</code>, the target MAY be omitted for single-valued navigation.</li>
</ul>
</details>
</details>
</details>
<details open><summary>
<h2 id="155-update-a-collection-of-entities"><a id="UpdateaCollectionofEntities" href="#UpdateaCollectionofEntities">15.5 Update a Collection of Entities</a></h2>
</summary>
<p>The body of a <code>PATCH</code> request to a URL identifying a collection of entities is a JSON object. It MUST contain the <a href="#ControlInformationcontextodatacontext"><code>context</code></a> control information with a string value of <code>#$delta</code>, and it MUST contain an array-valued property named <code>value</code> containing all <a href="#AddedChangedEntity">added, changed</a>, or <a href="#DeletedEntity">deleted</a> entities. OData 4.0 delta payloads MAY additionally include <a href="#AddedLink">added</a> or <a href="#DeletedLink">deleted</a> links between entities.</p>
<div class="example">
<p>Example 42: 4.01 collection-update request for customers with expanded orders represented inline as a delta</p>
<ol type="1">
<li>Add customer <code>EASTC</code></li>
<li>Change <code>ContactName</code> of customer <code>AROUT</code></li>
<li>Delete customer <code>ANTON</code></li>
<li>Change customer <code>ALFKI</code>:
<ol type="1">
<li>Create order 11011</li>
<li>Add existing order 10692</li>
<li>Change <code>RequiredDate</code> of related order 10835</li>
<li>Remove order 10643</li>
</ol></li>
<li>Add order 10643 to customer <code>ANATR</code></li>
<li>Remove order 10311 from customer <code>DUMON</code></li>
</ol>
<div class="sourceCode" id="cb44"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="er">PATCH</span> <span class="er">/service/Customers</span> <span class="er">HTTP/1.1</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a><span class="er">Host:</span> <span class="er">host</span></span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a><span class="er">Content-Type:</span> <span class="er">application/json</span></span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a><span class="er">Content-Length:</span> <span class="er">###</span></span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a><span class="er">Prefer:</span> <span class="er">return=minimal,</span> <span class="er">continue-on-error</span></span>
<span id="cb44-6"><a href="#cb44-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-7"><a href="#cb44-7" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb44-8"><a href="#cb44-8" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;@context&quot;</span><span class="fu">:</span> <span class="st">&quot;#$delta&quot;</span><span class="fu">,</span></span>
<span id="cb44-9"><a href="#cb44-9" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;value&quot;</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb44-10"><a href="#cb44-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span></span>
<span id="cb44-11"><a href="#cb44-11" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;@Org.OData.Core.V1.ContentID&quot;</span><span class="fu">:</span> <span class="st">&quot;1&quot;</span><span class="fu">,</span></span>
<span id="cb44-12"><a href="#cb44-12" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;CustomerID&quot;</span><span class="fu">:</span> <span class="st">&quot;EASTC&quot;</span><span class="fu">,</span></span>
<span id="cb44-13"><a href="#cb44-13" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;CompanyName&quot;</span><span class="fu">:</span> <span class="st">&quot;Eastern Connection&quot;</span><span class="fu">,</span></span>
<span id="cb44-14"><a href="#cb44-14" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;ContactName&quot;</span><span class="fu">:</span> <span class="st">&quot;Ann Devon&quot;</span><span class="fu">,</span></span>
<span id="cb44-15"><a href="#cb44-15" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;ContactTitle&quot;</span><span class="fu">:</span> <span class="st">&quot;Sales Agent&quot;</span></span>
<span id="cb44-16"><a href="#cb44-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb44-17"><a href="#cb44-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span></span>
<span id="cb44-18"><a href="#cb44-18" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;@Org.OData.Core.V1.ContentID&quot;</span><span class="fu">:</span> <span class="st">&quot;2&quot;</span><span class="fu">,</span></span>
<span id="cb44-19"><a href="#cb44-19" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;CustomerID&quot;</span><span class="fu">:</span> <span class="st">&quot;AROUT&quot;</span><span class="fu">,</span></span>
<span id="cb44-20"><a href="#cb44-20" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;ContactName&quot;</span><span class="fu">:</span> <span class="st">&quot;Thomas Hardy&quot;</span><span class="fu">,</span></span>
<span id="cb44-21"><a href="#cb44-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb44-22"><a href="#cb44-22" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span></span>
<span id="cb44-23"><a href="#cb44-23" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;@Org.OData.Core.V1.ContentID&quot;</span><span class="fu">:</span> <span class="st">&quot;3&quot;</span><span class="fu">,</span></span>
<span id="cb44-24"><a href="#cb44-24" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;@removed&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb44-25"><a href="#cb44-25" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;reason&quot;</span><span class="fu">:</span> <span class="st">&quot;deleted&quot;</span></span>
<span id="cb44-26"><a href="#cb44-26" aria-hidden="true" tabindex="-1"></a>      <span class="fu">},</span></span>
<span id="cb44-27"><a href="#cb44-27" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;CustomerID&quot;</span><span class="fu">:</span> <span class="st">&quot;ANTON&quot;</span></span>
<span id="cb44-28"><a href="#cb44-28" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb44-29"><a href="#cb44-29" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span></span>
<span id="cb44-30"><a href="#cb44-30" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;@Org.OData.Core.V1.ContentID&quot;</span><span class="fu">:</span> <span class="st">&quot;4&quot;</span><span class="fu">,</span></span>
<span id="cb44-31"><a href="#cb44-31" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;CustomerID&quot;</span><span class="fu">:</span> <span class="st">&quot;ALFKI&quot;</span><span class="fu">,</span></span>
<span id="cb44-32"><a href="#cb44-32" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;Orders@delta&quot;</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb44-33"><a href="#cb44-33" aria-hidden="true" tabindex="-1"></a>        <span class="fu">{</span></span>
<span id="cb44-34"><a href="#cb44-34" aria-hidden="true" tabindex="-1"></a>          <span class="dt">&quot;@Org.OData.Core.V1.ContentID&quot;</span><span class="fu">:</span> <span class="st">&quot;4.1&quot;</span><span class="fu">,</span></span>
<span id="cb44-35"><a href="#cb44-35" aria-hidden="true" tabindex="-1"></a>          <span class="dt">&quot;OrderID&quot;</span><span class="fu">:</span> <span class="dv">11011</span><span class="fu">,</span></span>
<span id="cb44-36"><a href="#cb44-36" aria-hidden="true" tabindex="-1"></a>          <span class="dt">&quot;CustomerID&quot;</span><span class="fu">:</span> <span class="st">&quot;ALFKI&quot;</span><span class="fu">,</span></span>
<span id="cb44-37"><a href="#cb44-37" aria-hidden="true" tabindex="-1"></a>          <span class="dt">&quot;EmployeeID&quot;</span><span class="fu">:</span> <span class="dv">3</span><span class="fu">,</span></span>
<span id="cb44-38"><a href="#cb44-38" aria-hidden="true" tabindex="-1"></a>          <span class="dt">&quot;OrderDate&quot;</span><span class="fu">:</span> <span class="st">&quot;1998-04-09T00:00:00Z&quot;</span><span class="fu">,</span></span>
<span id="cb44-39"><a href="#cb44-39" aria-hidden="true" tabindex="-1"></a>          <span class="dt">&quot;RequiredDate&quot;</span><span class="fu">:</span> <span class="st">&quot;1998-05-07T00:00:00Z&quot;</span><span class="fu">,</span></span>
<span id="cb44-40"><a href="#cb44-40" aria-hidden="true" tabindex="-1"></a>          <span class="dt">&quot;ShippedDate&quot;</span><span class="fu">:</span> <span class="st">&quot;1998-04-13T00:00:00Z&quot;</span></span>
<span id="cb44-41"><a href="#cb44-41" aria-hidden="true" tabindex="-1"></a>        <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb44-42"><a href="#cb44-42" aria-hidden="true" tabindex="-1"></a>        <span class="fu">{</span></span>
<span id="cb44-43"><a href="#cb44-43" aria-hidden="true" tabindex="-1"></a>          <span class="dt">&quot;@Org.OData.Core.V1.ContentID&quot;</span><span class="fu">:</span> <span class="st">&quot;4.2&quot;</span><span class="fu">,</span></span>
<span id="cb44-44"><a href="#cb44-44" aria-hidden="true" tabindex="-1"></a>          <span class="dt">&quot;@id&quot;</span><span class="fu">:</span> <span class="st">&quot;Orders(10692)&quot;</span></span>
<span id="cb44-45"><a href="#cb44-45" aria-hidden="true" tabindex="-1"></a>        <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb44-46"><a href="#cb44-46" aria-hidden="true" tabindex="-1"></a>        <span class="fu">{</span></span>
<span id="cb44-47"><a href="#cb44-47" aria-hidden="true" tabindex="-1"></a>          <span class="dt">&quot;@Org.OData.Core.V1.ContentID&quot;</span><span class="fu">:</span> <span class="st">&quot;4.3&quot;</span><span class="fu">,</span></span>
<span id="cb44-48"><a href="#cb44-48" aria-hidden="true" tabindex="-1"></a>          <span class="dt">&quot;@id&quot;</span><span class="fu">:</span> <span class="st">&quot;Orders(10835)&quot;</span><span class="fu">,</span></span>
<span id="cb44-49"><a href="#cb44-49" aria-hidden="true" tabindex="-1"></a>          <span class="dt">&quot;RequiredDate&quot;</span><span class="fu">:</span> <span class="st">&quot;1998-01-23T00:00:00Z&quot;</span><span class="fu">,</span></span>
<span id="cb44-50"><a href="#cb44-50" aria-hidden="true" tabindex="-1"></a>        <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb44-51"><a href="#cb44-51" aria-hidden="true" tabindex="-1"></a>        <span class="fu">{</span></span>
<span id="cb44-52"><a href="#cb44-52" aria-hidden="true" tabindex="-1"></a>          <span class="dt">&quot;@Org.OData.Core.V1.ContentID&quot;</span><span class="fu">:</span> <span class="st">&quot;4.4&quot;</span><span class="fu">,</span></span>
<span id="cb44-53"><a href="#cb44-53" aria-hidden="true" tabindex="-1"></a>          <span class="dt">&quot;@removed&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb44-54"><a href="#cb44-54" aria-hidden="true" tabindex="-1"></a>            <span class="dt">&quot;reason&quot;</span><span class="fu">:</span> <span class="st">&quot;changed&quot;</span></span>
<span id="cb44-55"><a href="#cb44-55" aria-hidden="true" tabindex="-1"></a>          <span class="fu">},</span></span>
<span id="cb44-56"><a href="#cb44-56" aria-hidden="true" tabindex="-1"></a>          <span class="dt">&quot;OrderID&quot;</span><span class="fu">:</span> <span class="dv">10643</span></span>
<span id="cb44-57"><a href="#cb44-57" aria-hidden="true" tabindex="-1"></a>        <span class="fu">}</span></span>
<span id="cb44-58"><a href="#cb44-58" aria-hidden="true" tabindex="-1"></a>      <span class="ot">]</span></span>
<span id="cb44-59"><a href="#cb44-59" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb44-60"><a href="#cb44-60" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span></span>
<span id="cb44-61"><a href="#cb44-61" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;@Org.OData.Core.V1.ContentID&quot;</span><span class="fu">:</span> <span class="st">&quot;5&quot;</span><span class="fu">,</span></span>
<span id="cb44-62"><a href="#cb44-62" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;CustomerID&quot;</span><span class="fu">:</span> <span class="st">&quot;ANATR&quot;</span><span class="fu">,</span></span>
<span id="cb44-63"><a href="#cb44-63" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;Orders@delta&quot;</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb44-64"><a href="#cb44-64" aria-hidden="true" tabindex="-1"></a>        <span class="fu">{</span></span>
<span id="cb44-65"><a href="#cb44-65" aria-hidden="true" tabindex="-1"></a>          <span class="dt">&quot;@Org.OData.Core.V1.ContentID&quot;</span><span class="fu">:</span> <span class="st">&quot;5.1&quot;</span><span class="fu">,</span></span>
<span id="cb44-66"><a href="#cb44-66" aria-hidden="true" tabindex="-1"></a>          <span class="dt">&quot;OrderID&quot;</span><span class="fu">:</span> <span class="dv">10643</span></span>
<span id="cb44-67"><a href="#cb44-67" aria-hidden="true" tabindex="-1"></a>        <span class="fu">}</span></span>
<span id="cb44-68"><a href="#cb44-68" aria-hidden="true" tabindex="-1"></a>      <span class="ot">]</span><span class="fu">,</span></span>
<span id="cb44-69"><a href="#cb44-69" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb44-70"><a href="#cb44-70" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span></span>
<span id="cb44-71"><a href="#cb44-71" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;@Org.OData.Core.V1.ContentID&quot;</span><span class="fu">:</span> <span class="st">&quot;6&quot;</span><span class="fu">,</span></span>
<span id="cb44-72"><a href="#cb44-72" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;CustomerID&quot;</span><span class="fu">:</span> <span class="st">&quot;DUMON&quot;</span><span class="fu">,</span></span>
<span id="cb44-73"><a href="#cb44-73" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;Orders@delta&quot;</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb44-74"><a href="#cb44-74" aria-hidden="true" tabindex="-1"></a>        <span class="fu">{</span></span>
<span id="cb44-75"><a href="#cb44-75" aria-hidden="true" tabindex="-1"></a>          <span class="dt">&quot;@Org.OData.Core.V1.ContentID&quot;</span><span class="fu">:</span> <span class="st">&quot;6.1&quot;</span><span class="fu">,</span></span>
<span id="cb44-76"><a href="#cb44-76" aria-hidden="true" tabindex="-1"></a>          <span class="dt">&quot;@removed&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb44-77"><a href="#cb44-77" aria-hidden="true" tabindex="-1"></a>            <span class="dt">&quot;reason&quot;</span><span class="fu">:</span> <span class="st">&quot;changed&quot;</span></span>
<span id="cb44-78"><a href="#cb44-78" aria-hidden="true" tabindex="-1"></a>          <span class="fu">},</span></span>
<span id="cb44-79"><a href="#cb44-79" aria-hidden="true" tabindex="-1"></a>          <span class="dt">&quot;OrderID&quot;</span><span class="fu">:</span> <span class="dv">10311</span></span>
<span id="cb44-80"><a href="#cb44-80" aria-hidden="true" tabindex="-1"></a>        <span class="fu">}</span></span>
<span id="cb44-81"><a href="#cb44-81" aria-hidden="true" tabindex="-1"></a>      <span class="ot">]</span></span>
<span id="cb44-82"><a href="#cb44-82" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span></span>
<span id="cb44-83"><a href="#cb44-83" aria-hidden="true" tabindex="-1"></a>  <span class="ot">]</span></span>
<span id="cb44-84"><a href="#cb44-84" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p>Assuming all changes can be applied without errors, the response would be</p>
<pre><code>HTTP/1.1 204 No Content
Preference-Applied: return=minimal, continue-on-error

</code></pre>
<p>Assuming some or all changes cannot be applied, the overall request is still deemed successful due to the <code>continue-on-error</code> preference, and the response details what went wrong</p>
<ol type="1">
<li>Add customer ‘EASTC’ - failed</li>
<li>Change <code>ContactName</code> of customer ‘AROUT’ - failed</li>
<li>Delete customer ‘ANTON’ - failed</li>
<li>Change customer ‘ALFKI’:
<ol type="1">
<li>Create order 11011 - succeeded, not mentioned in response</li>
<li>Add existing order 10692 - succeeded, not mentioned in response</li>
<li>Change <code>RequiredDate</code> of related order 10835 - failed</li>
<li>Remove order 10643 - succeeded, not mentioned in response</li>
</ol></li>
<li>Add order 10643 to customer ‘ANATR’ - failed without further info</li>
<li>Remove order 10311 from customer ‘DUMON’ - failed without further info</li>
</ol>
<div class="sourceCode" id="cb46"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="er">HTTP/1.1</span> <span class="er">200</span> <span class="er">OK</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a><span class="er">Content-Type:</span> <span class="er">application/json</span></span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a><span class="er">Content-Length:</span> <span class="er">###</span></span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a><span class="er">Preference-Applied:</span> <span class="er">return=minimal,</span> <span class="er">continue-on-error</span></span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-6"><a href="#cb46-6" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb46-7"><a href="#cb46-7" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;@context&quot;</span><span class="fu">:</span> <span class="st">&quot;#$delta&quot;</span><span class="fu">,</span></span>
<span id="cb46-8"><a href="#cb46-8" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;value&quot;</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb46-9"><a href="#cb46-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span></span>
<span id="cb46-10"><a href="#cb46-10" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;@Org.OData.Core.V1.ContentID&quot;</span><span class="fu">:</span> <span class="st">&quot;1&quot;</span><span class="fu">,</span></span>
<span id="cb46-11"><a href="#cb46-11" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;CustomerID&quot;</span><span class="fu">:</span> <span class="st">&quot;EASTC&quot;</span><span class="fu">,</span></span>
<span id="cb46-12"><a href="#cb46-12" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;@removed&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb46-13"><a href="#cb46-13" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;reason&quot;</span><span class="fu">:</span> <span class="st">&quot;changed&quot;</span></span>
<span id="cb46-14"><a href="#cb46-14" aria-hidden="true" tabindex="-1"></a>      <span class="fu">},</span></span>
<span id="cb46-15"><a href="#cb46-15" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;@Org.OData.Core.V1.DataModificationException&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb46-16"><a href="#cb46-16" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;failedOperation&quot;</span><span class="fu">:</span> <span class="st">&quot;insert&quot;</span><span class="fu">,</span></span>
<span id="cb46-17"><a href="#cb46-17" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;responseCode&quot;</span><span class="fu">:</span> <span class="dv">400</span><span class="fu">,</span></span>
<span id="cb46-18"><a href="#cb46-18" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;info&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb46-19"><a href="#cb46-19" aria-hidden="true" tabindex="-1"></a>          <span class="dt">&quot;code&quot;</span><span class="fu">:</span> <span class="st">&quot;incmplt&quot;</span><span class="fu">,</span></span>
<span id="cb46-20"><a href="#cb46-20" aria-hidden="true" tabindex="-1"></a>          <span class="dt">&quot;message&quot;</span><span class="fu">:</span> <span class="st">&quot;Required field(s) not provided&quot;</span><span class="fu">,</span></span>
<span id="cb46-21"><a href="#cb46-21" aria-hidden="true" tabindex="-1"></a>          <span class="dt">&quot;target&quot;</span><span class="fu">:</span> <span class="st">&quot;Address&quot;</span><span class="fu">,</span></span>
<span id="cb46-22"><a href="#cb46-22" aria-hidden="true" tabindex="-1"></a>          <span class="dt">&quot;@OtherVocab.additionalTargets&quot;</span><span class="fu">:</span> <span class="ot">[</span> <span class="st">&quot;Industry&quot;</span><span class="ot">,</span> <span class="st">&quot;VATRegistration&quot;</span> <span class="ot">]</span><span class="fu">,</span></span>
<span id="cb46-23"><a href="#cb46-23" aria-hidden="true" tabindex="-1"></a>          <span class="dt">&quot;severity&quot;</span><span class="fu">:</span> <span class="st">&quot;error&quot;</span></span>
<span id="cb46-24"><a href="#cb46-24" aria-hidden="true" tabindex="-1"></a>        <span class="fu">}</span></span>
<span id="cb46-25"><a href="#cb46-25" aria-hidden="true" tabindex="-1"></a>      <span class="fu">}</span></span>
<span id="cb46-26"><a href="#cb46-26" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb46-27"><a href="#cb46-27" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span></span>
<span id="cb46-28"><a href="#cb46-28" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;@Org.OData.Core.V1.ContentID&quot;</span><span class="fu">:</span> <span class="st">&quot;2&quot;</span><span class="fu">,</span></span>
<span id="cb46-29"><a href="#cb46-29" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;CustomerID&quot;</span><span class="fu">:</span> <span class="st">&quot;AROUT&quot;</span><span class="fu">,</span></span>
<span id="cb46-30"><a href="#cb46-30" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;@Org.OData.Core.V1.DataModificationException&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb46-31"><a href="#cb46-31" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;failedOperation&quot;</span><span class="fu">:</span> <span class="st">&quot;update&quot;</span><span class="fu">,</span></span>
<span id="cb46-32"><a href="#cb46-32" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;responseCode&quot;</span><span class="fu">:</span> <span class="dv">400</span><span class="fu">,</span></span>
<span id="cb46-33"><a href="#cb46-33" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;info&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb46-34"><a href="#cb46-34" aria-hidden="true" tabindex="-1"></a>          <span class="dt">&quot;code&quot;</span><span class="fu">:</span> <span class="st">&quot;r-o&quot;</span><span class="fu">,</span></span>
<span id="cb46-35"><a href="#cb46-35" aria-hidden="true" tabindex="-1"></a>          <span class="dt">&quot;message&quot;</span><span class="fu">:</span> <span class="st">&quot;Customer is archived and cannot be changed&quot;</span><span class="fu">,</span></span>
<span id="cb46-36"><a href="#cb46-36" aria-hidden="true" tabindex="-1"></a>          <span class="dt">&quot;severity&quot;</span><span class="fu">:</span> <span class="st">&quot;error&quot;</span></span>
<span id="cb46-37"><a href="#cb46-37" aria-hidden="true" tabindex="-1"></a>        <span class="fu">}</span></span>
<span id="cb46-38"><a href="#cb46-38" aria-hidden="true" tabindex="-1"></a>      <span class="fu">}</span></span>
<span id="cb46-39"><a href="#cb46-39" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb46-40"><a href="#cb46-40" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span></span>
<span id="cb46-41"><a href="#cb46-41" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;@Org.OData.Core.V1.ContentID&quot;</span><span class="fu">:</span> <span class="st">&quot;3&quot;</span><span class="fu">,</span></span>
<span id="cb46-42"><a href="#cb46-42" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;CustomerID&quot;</span><span class="fu">:</span> <span class="st">&quot;ANTON&quot;</span><span class="fu">,</span></span>
<span id="cb46-43"><a href="#cb46-43" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;@Org.OData.Core.V1.DataModificationException&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb46-44"><a href="#cb46-44" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;failedOperation&quot;</span><span class="fu">:</span> <span class="st">&quot;delete&quot;</span><span class="fu">,</span></span>
<span id="cb46-45"><a href="#cb46-45" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;responseCode&quot;</span><span class="fu">:</span> <span class="dv">400</span><span class="fu">,</span></span>
<span id="cb46-46"><a href="#cb46-46" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;info&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb46-47"><a href="#cb46-47" aria-hidden="true" tabindex="-1"></a>          <span class="dt">&quot;code&quot;</span><span class="fu">:</span> <span class="st">&quot;ufo&quot;</span><span class="fu">,</span></span>
<span id="cb46-48"><a href="#cb46-48" aria-hidden="true" tabindex="-1"></a>          <span class="dt">&quot;message&quot;</span><span class="fu">:</span> <span class="st">&quot;Customer has unfinished orders and cannot be deleted&quot;</span><span class="fu">,</span></span>
<span id="cb46-49"><a href="#cb46-49" aria-hidden="true" tabindex="-1"></a>          <span class="dt">&quot;severity&quot;</span><span class="fu">:</span> <span class="st">&quot;error&quot;</span></span>
<span id="cb46-50"><a href="#cb46-50" aria-hidden="true" tabindex="-1"></a>        <span class="fu">}</span></span>
<span id="cb46-51"><a href="#cb46-51" aria-hidden="true" tabindex="-1"></a>      <span class="fu">}</span></span>
<span id="cb46-52"><a href="#cb46-52" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb46-53"><a href="#cb46-53" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span></span>
<span id="cb46-54"><a href="#cb46-54" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;@Org.OData.Core.V1.ContentID&quot;</span><span class="fu">:</span> <span class="st">&quot;4&quot;</span><span class="fu">,</span></span>
<span id="cb46-55"><a href="#cb46-55" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;CustomerID&quot;</span><span class="fu">:</span> <span class="st">&quot;ALFKI&quot;</span><span class="fu">,</span></span>
<span id="cb46-56"><a href="#cb46-56" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;Orders@delta&quot;</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb46-57"><a href="#cb46-57" aria-hidden="true" tabindex="-1"></a>        <span class="fu">{</span></span>
<span id="cb46-58"><a href="#cb46-58" aria-hidden="true" tabindex="-1"></a>          <span class="dt">&quot;@Org.OData.Core.V1.ContentID&quot;</span><span class="fu">:</span> <span class="st">&quot;4.3&quot;</span><span class="fu">,</span></span>
<span id="cb46-59"><a href="#cb46-59" aria-hidden="true" tabindex="-1"></a>          <span class="dt">&quot;@id&quot;</span><span class="fu">:</span> <span class="st">&quot;Orders(10835)&quot;</span><span class="fu">,</span></span>
<span id="cb46-60"><a href="#cb46-60" aria-hidden="true" tabindex="-1"></a>          <span class="dt">&quot;@Org.OData.Core.V1.DataModificationException&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb46-61"><a href="#cb46-61" aria-hidden="true" tabindex="-1"></a>            <span class="dt">&quot;failedOperation&quot;</span><span class="fu">:</span> <span class="st">&quot;update&quot;</span><span class="fu">,</span></span>
<span id="cb46-62"><a href="#cb46-62" aria-hidden="true" tabindex="-1"></a>            <span class="dt">&quot;responseCode&quot;</span><span class="fu">:</span> <span class="dv">400</span><span class="fu">,</span></span>
<span id="cb46-63"><a href="#cb46-63" aria-hidden="true" tabindex="-1"></a>            <span class="dt">&quot;info&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb46-64"><a href="#cb46-64" aria-hidden="true" tabindex="-1"></a>              <span class="dt">&quot;code&quot;</span><span class="fu">:</span> <span class="st">&quot;b/s&quot;</span><span class="fu">,</span></span>
<span id="cb46-65"><a href="#cb46-65" aria-hidden="true" tabindex="-1"></a>              <span class="dt">&quot;message&quot;</span><span class="fu">:</span> <span class="st">&quot;RequiredDate cannot be changed because Order is already being shipped&quot;</span><span class="fu">,</span></span>
<span id="cb46-66"><a href="#cb46-66" aria-hidden="true" tabindex="-1"></a>              <span class="dt">&quot;severity&quot;</span><span class="fu">:</span> <span class="st">&quot;error&quot;</span></span>
<span id="cb46-67"><a href="#cb46-67" aria-hidden="true" tabindex="-1"></a>            <span class="fu">}</span></span>
<span id="cb46-68"><a href="#cb46-68" aria-hidden="true" tabindex="-1"></a>          <span class="fu">}</span></span>
<span id="cb46-69"><a href="#cb46-69" aria-hidden="true" tabindex="-1"></a>        <span class="fu">}</span></span>
<span id="cb46-70"><a href="#cb46-70" aria-hidden="true" tabindex="-1"></a>      <span class="ot">]</span></span>
<span id="cb46-71"><a href="#cb46-71" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb46-72"><a href="#cb46-72" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span></span>
<span id="cb46-73"><a href="#cb46-73" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;@Org.OData.Core.V1.ContentID&quot;</span><span class="fu">:</span> <span class="st">&quot;5&quot;</span><span class="fu">,</span></span>
<span id="cb46-74"><a href="#cb46-74" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;CustomerID&quot;</span><span class="fu">:</span> <span class="st">&quot;ANATR&quot;</span><span class="fu">,</span></span>
<span id="cb46-75"><a href="#cb46-75" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;Orders@delta&quot;</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb46-76"><a href="#cb46-76" aria-hidden="true" tabindex="-1"></a>        <span class="fu">{</span></span>
<span id="cb46-77"><a href="#cb46-77" aria-hidden="true" tabindex="-1"></a>          <span class="dt">&quot;@Org.OData.Core.V1.ContentID&quot;</span><span class="fu">:</span> <span class="st">&quot;5.1&quot;</span><span class="fu">,</span></span>
<span id="cb46-78"><a href="#cb46-78" aria-hidden="true" tabindex="-1"></a>          <span class="dt">&quot;@removed&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb46-79"><a href="#cb46-79" aria-hidden="true" tabindex="-1"></a>            <span class="dt">&quot;reason&quot;</span><span class="fu">:</span> <span class="st">&quot;changed&quot;</span></span>
<span id="cb46-80"><a href="#cb46-80" aria-hidden="true" tabindex="-1"></a>          <span class="fu">},</span></span>
<span id="cb46-81"><a href="#cb46-81" aria-hidden="true" tabindex="-1"></a>          <span class="dt">&quot;OrderID&quot;</span><span class="fu">:</span> <span class="dv">10643</span><span class="fu">,</span></span>
<span id="cb46-82"><a href="#cb46-82" aria-hidden="true" tabindex="-1"></a>          <span class="dt">&quot;@Org.OData.Core.V1.DataModificationException&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb46-83"><a href="#cb46-83" aria-hidden="true" tabindex="-1"></a>            <span class="dt">&quot;failedOperation&quot;</span><span class="fu">:</span> <span class="st">&quot;link&quot;</span><span class="fu">,</span></span>
<span id="cb46-84"><a href="#cb46-84" aria-hidden="true" tabindex="-1"></a>            <span class="dt">&quot;responseCode&quot;</span><span class="fu">:</span> <span class="dv">404</span><span class="fu">,</span></span>
<span id="cb46-85"><a href="#cb46-85" aria-hidden="true" tabindex="-1"></a>            <span class="dt">&quot;info&quot;</span><span class="fu">:</span> <span class="kw">null</span></span>
<span id="cb46-86"><a href="#cb46-86" aria-hidden="true" tabindex="-1"></a>          <span class="fu">}</span></span>
<span id="cb46-87"><a href="#cb46-87" aria-hidden="true" tabindex="-1"></a>        <span class="fu">}</span></span>
<span id="cb46-88"><a href="#cb46-88" aria-hidden="true" tabindex="-1"></a>      <span class="ot">]</span></span>
<span id="cb46-89"><a href="#cb46-89" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb46-90"><a href="#cb46-90" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span></span>
<span id="cb46-91"><a href="#cb46-91" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;@Org.OData.Core.V1.ContentID&quot;</span><span class="fu">:</span> <span class="st">&quot;6&quot;</span><span class="fu">,</span></span>
<span id="cb46-92"><a href="#cb46-92" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;CustomerID&quot;</span><span class="fu">:</span> <span class="st">&quot;DUMON&quot;</span><span class="fu">,</span></span>
<span id="cb46-93"><a href="#cb46-93" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;Orders@delta&quot;</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb46-94"><a href="#cb46-94" aria-hidden="true" tabindex="-1"></a>        <span class="fu">{</span></span>
<span id="cb46-95"><a href="#cb46-95" aria-hidden="true" tabindex="-1"></a>          <span class="dt">&quot;@Org.OData.Core.V1.ContentID&quot;</span><span class="fu">:</span> <span class="st">&quot;6.1&quot;</span><span class="fu">,</span></span>
<span id="cb46-96"><a href="#cb46-96" aria-hidden="true" tabindex="-1"></a>          <span class="dt">&quot;OrderID&quot;</span><span class="fu">:</span> <span class="dv">10311</span><span class="fu">,</span></span>
<span id="cb46-97"><a href="#cb46-97" aria-hidden="true" tabindex="-1"></a>          <span class="dt">&quot;@Org.OData.Core.V1.DataModificationException&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb46-98"><a href="#cb46-98" aria-hidden="true" tabindex="-1"></a>            <span class="dt">&quot;failedOperation&quot;</span><span class="fu">:</span> <span class="st">&quot;unlink&quot;</span><span class="fu">,</span></span>
<span id="cb46-99"><a href="#cb46-99" aria-hidden="true" tabindex="-1"></a>            <span class="dt">&quot;responseCode&quot;</span><span class="fu">:</span> <span class="dv">404</span></span>
<span id="cb46-100"><a href="#cb46-100" aria-hidden="true" tabindex="-1"></a>          <span class="fu">}</span></span>
<span id="cb46-101"><a href="#cb46-101" aria-hidden="true" tabindex="-1"></a>        <span class="fu">}</span></span>
<span id="cb46-102"><a href="#cb46-102" aria-hidden="true" tabindex="-1"></a>      <span class="ot">]</span></span>
<span id="cb46-103"><a href="#cb46-103" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span></span>
<span id="cb46-104"><a href="#cb46-104" aria-hidden="true" tabindex="-1"></a>  <span class="ot">]</span></span>
<span id="cb46-105"><a href="#cb46-105" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p>Without the <code>continue-on-error</code> preference processing would stop on the first error, and the response would be a standard OData error response</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="er">HTTP/1.1</span> <span class="er">400</span> <span class="er">Bad</span> <span class="er">Request</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a><span class="er">Content-Type:</span> <span class="er">application/json</span></span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a><span class="er">Content-Length:</span> <span class="er">###</span></span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb47-6"><a href="#cb47-6" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;error&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb47-7"><a href="#cb47-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;code&quot;</span><span class="fu">:</span> <span class="st">&quot;incmplt&quot;</span><span class="fu">,</span></span>
<span id="cb47-8"><a href="#cb47-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;message&quot;</span><span class="fu">:</span> <span class="st">&quot;Required field(s) not provided&quot;</span><span class="fu">,</span></span>
<span id="cb47-9"><a href="#cb47-9" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;target&quot;</span><span class="fu">:</span> <span class="st">&quot;Customers(&#39;EASTC&#39;)/Address&quot;</span><span class="fu">,</span></span>
<span id="cb47-10"><a href="#cb47-10" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;@OtherVocab.additionalTargets&quot;</span><span class="fu">:</span> <span class="ot">[</span> <span class="st">&quot;Customers(&#39;EASTC&#39;)/Industry&quot;</span><span class="ot">,</span> <span class="st">&quot;Customers(&#39;EASTC&#39;)/VATRegistration&quot;</span> <span class="ot">]</span></span>
<span id="cb47-11"><a href="#cb47-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">}</span></span>
<span id="cb47-12"><a href="#cb47-12" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
</div>
</details>
</details>
<hr />
<details open><summary>
<h1 id="16-bound-function"><a id="BoundFunction" href="#BoundFunction">16 Bound Function</a></h1>
</summary>
<p>A bound function is advertised via a name/value pair where the name is a hash (<code>#</code>) character followed by the namespace- or alias-qualified name of the function. The namespace or alias MUST be defined or the namespace referenced in the metadata document of the service, see <a href="#ODataCSDL">OData-CSDLJSON</a> or <a href="#ODataCSDL">OData-CSDLXML</a> A specific function overload can be advertised by appending the parentheses-enclosed, comma-separated list of non-binding parameter names to the qualified function name, see rule <code>qualifiedFunctionName</code> in <a href="#ODataABNF">OData-ABNF</a>.</p>
<p>A function that is bound to a single structured type MAY be advertised within the JSON object representing that structured type.</p>
<p>Functions that are bound to a collection MAY be advertised within the JSON object containing the collection. If the collection is the top-level response, the function advertisement name/value pair is placed next to the <code>value</code> name/value pair representing the collection. If the collection is nested within an instance of a structured type, then in 4.01 payloads the name of the function advertisement is prepended with the name of the collection-valued property and is placed next to the collection-valued property, <a href="#ExpandedNavigationProperty">expanded navigation property</a>, or <a href="#NavigationLink"><code>navigationLink</code></a> control information, if present. 4.0 payloads MUST NOT advertise functions prefixed with property names.</p>
<p>If the function is available, the value of the advertisement is an object. OData 4.01 services MAY advertise the non-availability of the function with the value <code>null</code>.</p>
<p>If <a href="#metadatafullodatametadatafull"><code>metadata=full</code></a> is requested, each value object MUST have at least the two name/value pairs <code>title</code> and <code>target</code>. It MAY contain <a href="#InstanceAnnotations">annotations</a>. The order of the name/value pairs MUST be considered insignificant.</p>
<p>The <code>target</code> name/value pair contains a URL. Clients MUST be able to invoke the function or the specific function overload by passing the parameter values via query options for <a href="https://docs.oasis-open.org/odata/odata/v4.01/odata-v4.01-part1-protocol.html#sec_ParameterAliases">parameter aliases</a> that are identical to the parameter name preceded by an at (<code>@</code>) sign. Clients MUST check if the obtained URL already contains a query part and appropriately precede the parameters either with an ampersand (<code>&amp;</code>) or a question mark (<code>?</code>).</p>
<p>The <code>title</code> name/value pair contains the function or action title as a string.</p>
<p>If <a href="#metadataminimalodatametadataminimal"><code>metadata=minimal</code></a> is requested, the <code>target</code> name/value pair MUST be included if its value differs from the canonical function or action URL.</p>
<div class="example">
<p>Example 43: minimal representation of a function where all overloads are applicable</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;@context&quot;</span><span class="fu">:</span> <span class="st">&quot;http://host/service/$metadata#Employees/$entity&quot;</span><span class="fu">,</span></span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;#Model.RemainingVacation&quot;</span><span class="fu">:</span> <span class="fu">{},</span></span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a>  <span class="er">…</span></span>
<span id="cb48-5"><a href="#cb48-5" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
</div>
<div class="example">
<p>Example 44: full representation of a specific overload with parameter alias for the <code>Year</code> parameter</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;@context&quot;</span><span class="fu">:</span> <span class="st">&quot;http://host/service/$metadata#Employees/$entity&quot;</span><span class="fu">,</span></span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;#Model.RemainingVacation(Year)&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;title&quot;</span><span class="fu">:</span> <span class="st">&quot;Remaining vacation from year.&quot;</span><span class="fu">,</span></span>
<span id="cb49-5"><a href="#cb49-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;target&quot;</span><span class="fu">:</span> <span class="st">&quot;Employees(2)/RemainingVacation(Year=@Year)&quot;</span></span>
<span id="cb49-6"><a href="#cb49-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">},</span></span>
<span id="cb49-7"><a href="#cb49-7" aria-hidden="true" tabindex="-1"></a>  <span class="er">…</span></span>
<span id="cb49-8"><a href="#cb49-8" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
</div>
<div class="example">
<p>Example 45: full representation in a collection</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;@context&quot;</span><span class="fu">:</span> <span class="st">&quot;http://host/service/$metadata#Employees&quot;</span><span class="fu">,</span></span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;#Model.RemainingVacation&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;title&quot;</span><span class="fu">:</span> <span class="st">&quot;Remaining Vacation&quot;</span><span class="fu">,</span></span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;target&quot;</span><span class="fu">:</span> <span class="st">&quot;Managers(22)/Employees/RemainingVacation&quot;</span></span>
<span id="cb50-6"><a href="#cb50-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">},</span></span>
<span id="cb50-7"><a href="#cb50-7" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;value&quot;</span><span class="fu">:</span> <span class="ot">[</span> <span class="er">…</span> <span class="ot">]</span></span>
<span id="cb50-8"><a href="#cb50-8" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
</div>
<div class="example">
<p>Example 46: full representation in a nested collection</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;@context&quot;</span><span class="fu">:</span> <span class="st">&quot;http://host/service/$metadata#Employees/$entity&quot;</span><span class="fu">,</span></span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;@type&quot;</span><span class="fu">:</span> <span class="st">&quot;Model.Manager&quot;</span><span class="fu">,</span></span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;ID&quot;</span><span class="fu">:</span><span class="dv">22</span><span class="fu">,</span></span>
<span id="cb51-5"><a href="#cb51-5" aria-hidden="true" tabindex="-1"></a>  <span class="er">…</span></span>
<span id="cb51-6"><a href="#cb51-6" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;Employees#RemainingVacation&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb51-7"><a href="#cb51-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;title&quot;</span><span class="fu">:</span> <span class="st">&quot;RemainingVacation&quot;</span><span class="fu">,</span></span>
<span id="cb51-8"><a href="#cb51-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;target&quot;</span><span class="fu">:</span> <span class="st">&quot;Managers(22)/Employees/RemainingVacation&quot;</span></span>
<span id="cb51-9"><a href="#cb51-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">}</span></span>
<span id="cb51-10"><a href="#cb51-10" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
</div>
</details>
<hr />
<details open><summary>
<h1 id="17-bound-action"><a id="BoundAction" href="#BoundAction">17 Bound Action</a></h1>
</summary>
<p>A bound action is advertised via a name/value pair where the name is a hash (<code>#</code>) character followed by the namespace- or alias-qualified name of the action. The namespace or alias MUST be defined or the namespace referenced in the metadata document of the service, see <a href="#ODataCSDL">OData-CSDLJSON</a> or <a href="#ODataCSDL">OData-CSDLXML</a></p>
<p>An action that is bound to a single structured type is advertised within the JSON object representing that structured type.</p>
<p>Actions that are bound to a collection MAY be advertised within the JSON object containing the collection. If the collection is the top-level response, the action advertisement name/value pair is placed next to the <code>value</code> name/value pair representing the collection. If the collection is nested within an instance of a structured type, then in 4.01 payloads the name of the action advertisement is prepended with the name of the collection-valued property and is placed next to the name/value pair representing the collection-valued property, <a href="#ExpandedNavigationProperty">expanded navigation property</a>, or <a href="#NavigationLink"><code>navigationLink</code></a> control information, if present. 4.0 payloads MUST NOT advertise actions prefixed with property names.</p>
<p>If the action is available, the value of the advertisement is an object. OData 4.01 services MAY advertise the non-availability of the action with the value <code>null</code>.</p>
<p>If <a href="#metadatafullodatametadatafull"><code>metadata=full</code></a> is requested, each value object MUST have at least the two name/value pairs <code>title</code> and <code>target</code>. It MAY contain <a href="#InstanceAnnotations">annotations</a>. The order of these name/value pairs MUST be considered insignificant.</p>
<p>The <code>target</code> name/value pair contains a bound function or action URL.</p>
<p>The <code>title</code> name/value pair contains the function or action title as a string.</p>
<p>If <a href="#metadataminimalodatametadataminimal"><code>metadata=minimal</code></a> is requested, the <code>target</code> name/value pair MUST be included if its value differs from the canonical function or action URL.</p>
<div class="example">
<p>Example 47: minimal representation in an entity</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;@context&quot;</span><span class="fu">:</span> <span class="st">&quot;http://host/service/$metadata#LeaveRequests/$entity&quot;</span><span class="fu">,</span></span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;#Model.Approve&quot;</span><span class="fu">:</span> <span class="fu">{},</span></span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a>  <span class="er">…</span></span>
<span id="cb52-5"><a href="#cb52-5" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
</div>
<div class="example">
<p>Example 48: full representation in an entity:</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;@context&quot;</span><span class="fu">:</span> <span class="st">&quot;http://host/service/$metadata#LeaveRequests/$entity&quot;</span><span class="fu">,</span></span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;#Model.Approve&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb53-4"><a href="#cb53-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;title&quot;</span><span class="fu">:</span> <span class="st">&quot;Approve Leave Request&quot;</span><span class="fu">,</span></span>
<span id="cb53-5"><a href="#cb53-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;target&quot;</span><span class="fu">:</span> <span class="st">&quot;LeaveRequests(2)/Approve&quot;</span></span>
<span id="cb53-6"><a href="#cb53-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">},</span></span>
<span id="cb53-7"><a href="#cb53-7" aria-hidden="true" tabindex="-1"></a>  <span class="er">…</span></span>
<span id="cb53-8"><a href="#cb53-8" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
</div>
<div class="example">
<p>Example 49: full representation in a collection</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;@context&quot;</span><span class="fu">:</span> <span class="st">&quot;http://host/service/$metadata#LeaveRequests&quot;</span><span class="fu">,</span></span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;#Model.Approve&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb54-4"><a href="#cb54-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;title&quot;</span><span class="fu">:</span> <span class="st">&quot;Approve All Leave Requests&quot;</span><span class="fu">,</span></span>
<span id="cb54-5"><a href="#cb54-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;target&quot;</span><span class="fu">:</span> <span class="st">&quot;Employees(22)/Model.Manager/LeaveRequests/Approve&quot;</span></span>
<span id="cb54-6"><a href="#cb54-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">},</span></span>
<span id="cb54-7"><a href="#cb54-7" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;value&quot;</span><span class="fu">:</span> <span class="ot">[</span> <span class="er">…</span> <span class="ot">]</span></span>
<span id="cb54-8"><a href="#cb54-8" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
</div>
<div class="example">
<p>Example 50: full representation in a nested collection</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;@context&quot;</span><span class="fu">:</span> <span class="st">&quot;http://host/service/$metadata#Employees/$entity&quot;</span><span class="fu">,</span></span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;@type&quot;</span><span class="fu">:</span> <span class="st">&quot;Model.Manager&quot;</span><span class="fu">,</span></span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;ID&quot;</span><span class="fu">:</span> <span class="dv">22</span><span class="fu">,</span></span>
<span id="cb55-5"><a href="#cb55-5" aria-hidden="true" tabindex="-1"></a>  <span class="er">…</span></span>
<span id="cb55-6"><a href="#cb55-6" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;LeaveRequests#Model.Approve&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb55-7"><a href="#cb55-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;title&quot;</span><span class="fu">:</span> <span class="st">&quot;Approve All Leave Requests&quot;</span><span class="fu">,</span></span>
<span id="cb55-8"><a href="#cb55-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;target&quot;</span><span class="fu">:</span> <span class="st">&quot;Employees(22)/Model.Manager/LeaveRequests/Approve&quot;</span></span>
<span id="cb55-9"><a href="#cb55-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">}</span></span>
<span id="cb55-10"><a href="#cb55-10" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
</div>
</details>
<hr />
<details open><summary>
<h1 id="18-action-invocation"><a id="ActionInvocation" href="#ActionInvocation">18 Action Invocation</a></h1>
</summary>
<p>Action parameter values are encoded in a single JSON object in the request body.</p>
<p>Each non-binding parameter value is encoded as a separate name/value pair in this JSON object. The name is the name of the parameter. The value is the parameter value in the JSON representation appropriate for its type. Entity typed parameter values MAY include a subset of the properties, or just the <a href="#EntityReference">entity reference</a>, as appropriate to the action. Stream typed parameter values are represented following the same rules as inlined <a href="#StreamProperty">stream properties</a>.</p>
<p>Entities as parameter values are represented as explained in <a href="#Entity">section 6</a>.</p>
<div class="example">
<p>Example 51: Create a quote for a product that does not yet exist. The <code>Product</code> parameter takes a transient entity.</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="er">POST</span> <span class="er">http://host/service/CreateQuote</span></span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a><span class="er">Content-Type:</span> <span class="er">application/json</span></span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb56-5"><a href="#cb56-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;Product&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb56-6"><a href="#cb56-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;Name&quot;</span><span class="fu">:</span> <span class="st">&quot;Our best ever&quot;</span><span class="fu">,</span></span>
<span id="cb56-7"><a href="#cb56-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;Price&quot;</span><span class="fu">:</span> <span class="dv">1</span></span>
<span id="cb56-8"><a href="#cb56-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">},</span></span>
<span id="cb56-9"><a href="#cb56-9" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;CustomerID&quot;</span><span class="fu">:</span> <span class="st">&quot;ALFKI&quot;</span></span>
<span id="cb56-10"><a href="#cb56-10" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
</div>
<div class="example">
<p>Example 52: Create a quote for an existing product. The <code>Product</code> parameter takes a non-transient entity which can be identified through its entity-id:</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="er">POST</span> <span class="er">http://host/service/CreateQuote</span></span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a><span class="er">Content-Type:</span> <span class="er">application/json</span></span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-4"><a href="#cb57-4" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb57-5"><a href="#cb57-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;Product&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb57-6"><a href="#cb57-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;@id&quot;</span><span class="fu">:</span> <span class="st">&quot;Products(14)&quot;</span></span>
<span id="cb57-7"><a href="#cb57-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">},</span></span>
<span id="cb57-8"><a href="#cb57-8" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;CustomerID&quot;</span><span class="fu">:</span> <span class="st">&quot;ALFKI&quot;</span></span>
<span id="cb57-9"><a href="#cb57-9" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p>or, as in <a href="#AddedChangedEntity">section 15.2</a>, through its primary key fields plus, if necessary, its context:</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="er">POST</span> <span class="er">http://host/service/CreateQuote</span></span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a><span class="er">Content-Type:</span> <span class="er">application/json</span></span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-4"><a href="#cb58-4" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb58-5"><a href="#cb58-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;Product&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb58-6"><a href="#cb58-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;@context&quot;</span><span class="fu">:</span> <span class="st">&quot;#Products&quot;</span><span class="fu">,</span></span>
<span id="cb58-7"><a href="#cb58-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;ProductID&quot;</span><span class="fu">:</span> <span class="dv">14</span></span>
<span id="cb58-8"><a href="#cb58-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">},</span></span>
<span id="cb58-9"><a href="#cb58-9" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;CustomerID&quot;</span><span class="fu">:</span> <span class="st">&quot;ALFKI&quot;</span></span>
<span id="cb58-10"><a href="#cb58-10" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
</div>
<p>Alternatively, values of non-binding parameters MAY be specified as common expressions <a href="https://docs.oasis-open.org/odata/odata/v4.02/odata-v4.02-part2-url-conventions.html#CommonExpressionSyntax">OData-URL, section 5.1.1</a>. In the case of a bound action these MAY contain path expressions <a href="https://docs.oasis-open.org/odata/odata/v4.02/odata-v4.02-part2-url-conventions.html#PathExpressions">OData-URL, section 5.1.1.15</a>, which the service evaluates on the binding parameter value. Such parameters are encoded as name/value pairs where the name is the name of the parameter followed by <code>@expression</code> and the value is the common expression. As the following example demonstrates, non-transient entities can be passed as non-binding action parameters through a resource path in this way.</p>
<div class="example">
<p>Example 53: An employee requests leave from their manager for the next two weeks:</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="er">POST</span> <span class="er">/service/Employees(23)/self.RequestLeave</span></span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a><span class="er">Host:</span> <span class="er">host</span></span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true" tabindex="-1"></a><span class="er">Content-Type:</span> <span class="er">application/json</span></span>
<span id="cb59-4"><a href="#cb59-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-5"><a href="#cb59-5" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb59-6"><a href="#cb59-6" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;StartDate@expression&quot;</span><span class="fu">:</span> <span class="st">&quot;now()&quot;</span><span class="fu">,</span></span>
<span id="cb59-7"><a href="#cb59-7" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;EndDate@expression&quot;</span><span class="fu">:</span> <span class="st">&quot;now() add duration&#39;P14D&#39;&quot;</span><span class="fu">,</span></span>
<span id="cb59-8"><a href="#cb59-8" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;Approver@expression&quot;</span><span class="fu">:</span> <span class="st">&quot;Manager&quot;</span></span>
<span id="cb59-9"><a href="#cb59-9" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p>The expression <code>Manager</code> is evaluated on the binding parameter value <code>Employees(23)</code>.</p>
<p>When invoking an unbound action through an action import, expressions involving paths must start with <code>$root</code>:</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="er">POST</span> <span class="er">/service/RequestLeave</span></span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a><span class="er">Host:</span> <span class="er">host</span></span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true" tabindex="-1"></a><span class="er">Content-Type:</span> <span class="er">application/json</span></span>
<span id="cb60-4"><a href="#cb60-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-5"><a href="#cb60-5" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb60-6"><a href="#cb60-6" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;Requester@expression&quot;</span><span class="fu">:</span> <span class="st">&quot;$root/services/Employee(23)&quot;</span><span class="fu">,</span></span>
<span id="cb60-7"><a href="#cb60-7" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;StartDate@expression&quot;</span><span class="fu">:</span> <span class="st">&quot;now()&quot;</span><span class="fu">,</span></span>
<span id="cb60-8"><a href="#cb60-8" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;EndDate@expression&quot;</span><span class="fu">:</span> <span class="st">&quot;now() add duration&#39;P14D&#39;&quot;</span><span class="fu">,</span></span>
<span id="cb60-9"><a href="#cb60-9" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;Approver@expression&quot;</span><span class="fu">:</span> <span class="st">&quot;$root/services/Employee(23)/Manager&quot;</span></span>
<span id="cb60-10"><a href="#cb60-10" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
</div>
<p>Inside a batch request the common expressions can also be value references starting with <code>$</code>, as introduced in <a href="https://docs.oasis-open.org/odata/odata/v4.02/odata-v4.02-part1-protocol.html#ReferencingValuesfromResponseBodies">OData-Protocol, section 11.7.6</a>.</p>
<p>Non-binding parameters that are nullable or annotated with the term <a href="https://github.com/oasis-tcs/odata-vocabularies/blob/main/vocabularies/Org.OData.Core.V1.md#OptionalParameter"><code>Core.OptionalParameter</code></a> defined in <a href="#ODataVocCore">OData-VocCore</a> MAY be omitted from the request body. If an omitted parameter is not annotated (and thus nullable), it MUST be interpreted as having the <code>null</code> value. If it is annotated and the annotation specifies a <code>DefaultValue</code>, the omitted parameter is interpreted as having that default value. If omitted and the annotation does not specify a default value, the service is free on how to interpret the omitted parameter. Note: a nullable non-binding parameter is equivalent to being annotated as optional with a default value of <code>null</code>.</p>
<div class="example">
<p>Example 54:</p>
<div class="sourceCode" id="cb61"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;param1&quot;</span><span class="fu">:</span> <span class="dv">42</span><span class="fu">,</span></span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;param2&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb61-4"><a href="#cb61-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;Street&quot;</span><span class="fu">:</span> <span class="st">&quot;One Microsoft Way&quot;</span><span class="fu">,</span></span>
<span id="cb61-5"><a href="#cb61-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;Zip&quot;</span><span class="fu">:</span> <span class="dv">98052</span></span>
<span id="cb61-6"><a href="#cb61-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">},</span></span>
<span id="cb61-7"><a href="#cb61-7" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;param3&quot;</span><span class="fu">:</span> <span class="ot">[</span> <span class="dv">1</span><span class="ot">,</span> <span class="dv">42</span><span class="ot">,</span> <span class="dv">99</span> <span class="ot">]</span><span class="fu">,</span></span>
<span id="cb61-8"><a href="#cb61-8" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;param4&quot;</span><span class="fu">:</span> <span class="kw">null</span></span>
<span id="cb61-9"><a href="#cb61-9" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
</div>
<p>In order to invoke an action with no non-binding parameters, the client passes an empty JSON object in the body of the request. 4.01 Services MUST also support clients passing an empty request body for this case.</p>
</details>
<hr />
<details open><summary>
<h1 id="19-batch-requests-and-responses"><a id="BatchRequestsandResponses" href="#BatchRequestsandResponses">19 Batch Requests and Responses</a></h1>
</summary>
<details open><summary>
<h2 id="191-batch-request"><a id="BatchRequest" href="#BatchRequest">19.1 Batch Request</a></h2>
</summary>
<p>A JSON batch request body consists of a single JSON object that MUST contain the name/value pair <code>requests</code> and MAY contain <a href="#InstanceAnnotations">annotations</a>. It does not contain the <code>context</code> control information.</p>
<p>The value of <code>requests</code> is an array of request objects, each representing an individual request. Note: an individual request MUST NOT itself be a batch request.</p>
<p>A <em>request object</em> MUST contain the name/value pairs <code>id</code>, <code>method</code> and <code>url</code>, and it MAY contain the name/value pairs <code>atomicityGroup</code>, <code>dependsOn</code>, <code>if</code>, <code>headers</code>, and <code>body</code>.</p>
<p>The value of <code>id</code> is a string containing the request identifier of the individual request, see <a href="#ODataProtocol">OData-Protocol</a>. It MUST NOT be identical to the value of any other request identifier nor any <code>atomicityGroup</code> within the batch request.</p>
<p>Note: the <code>id</code> name/value pair corresponds to the <code>Content-ID</code> header in the multipart batch format specified in <a href="#ODataProtocol">OData-Protocol</a>.</p>
<p>The value of <code>method</code> is a string that MUST contain one of the literals <code>delete</code>, <code>get</code>, <code>patch</code>, <code>post</code>, or <code>put</code>. These literals are case-insensitive.</p>
<p>The value of <code>url</code> is a string containing the individual request URL. The URL MAY be an absolute path (starting with a forward slash <code>/</code>) which is appended to scheme, host, and port of the batch request URL, or a relative path (not starting with a forward slash <code>/</code>).</p>
<p>If the first segment of a relative path starts with a <code>$</code> character and is not identical to the name of a top-level system resource (<code>$batch</code>, <code>$crossjoin</code>, <code>$all</code>, <code>$entity</code>, <code>$root</code>, <code>$id</code>, <code>$metadata</code>, or other system resources defined according to the <code>OData-Version</code> of the protocol specified in the request), then this first segment is replaced with the URL of the entity created by or returned from a preceding request whose <code>id</code> value is identical to the value of the first segment with the leading <code>$</code> character removed. The <code>id</code> of this request MUST be specified in the <code>dependsOn</code> name/value pair.</p>
<p>Otherwise, the relative path is resolved relative to the batch request URL (i.e. relative to the service root).</p>
<p>The value of <code>atomicityGroup</code> is a string whose content MUST NOT be identical to any value of <code>id</code> within the batch request, and which MUST satisfy the rule <code>request-id</code> in <a href="#ODataABNF">OData-ABNF</a>. All request objects with the same value for <code>atomicityGroup</code> MUST be adjacent in the <code>requests</code> array. These requests are processed as an atomic operation and MUST either all succeed, or all fail.</p>
<p>Note: the atomicity group is a generalization of the change set in the multipart batch format specified in <a href="#ODataProtocol">OData-Protocol</a>.</p>
<p>The value of <code>dependsOn</code> is an array of strings whose values MUST be values of either <code>id</code> or <code>atomicityGroup</code> of preceding request objects; forward references are not allowed. If a request depends on another request that is part of a different atomicity group, the atomicity group MUST be listed in <code>dependsOn</code>. In the absence of the optional <code>if</code> member a request that depends on other requests or atomicity groups is only executed if those requests were executed successfully, i.e. with a <code>2xx</code> response code. If one of the requests it depends on has failed, the dependent request is not executed and a response with status code of <code>424 Failed Dependency</code> is returned for it as part of the batch response.</p>
<p>The <code>if</code> member can specify an alternative condition for executing the dependent request. Its value MUST be URL expression (see <a href="#ODataURL">OData-URL</a>) that evaluates to a Boolean value. The URL expression syntax is extended and additionally allows</p>
<ul>
<li><code>$&lt;content-id&gt;/$succeeded</code> to check if the referenced request has succeeded</li>
<li><code>$&lt;content-id&gt;</code> to reference the response body of the referenced request</li>
<li><code>$&lt;content-id&gt;/&lt;path&gt;</code> to reference a part of the response body</li>
</ul>
<p>Services SHOULD advertise support of the <code>if</code> member by specifying the property <code>RequestDependencyConditionsSupported</code> in the <a href="https://github.com/oasis-tcs/odata-vocabularies/blob/main/vocabularies/Org.OData.Capabilities.V1.md#BatchSupport"><code>Capabilities.BatchSupport</code></a> term applied to the entity container, see <a href="#ODataVocCap">OData-VocCap</a>. If a service does not support request dependencies, the dependent request MUST fail with <code>424 Failed Dependency</code>, and if the dependent request is part of an atomicity group, all requests in that group fail with <code>424 Failed Dependency</code> with no changes applied.</p>
<p>The value of <code>headers</code> is an object whose name/value pairs represent request headers. The name of each pair MUST be the lower-case header name; the value is a string containing the header-encoded value of the header. The <code>headers</code> object MUST contain a name/value pair with the name <code>content-type</code> whose value is the media type.</p>
<p>The value of <code>body</code> can be <code>null</code>, which is equivalent to not specifying the <code>body</code> name/value pair.</p>
<p>For media type <code>application/json</code> or one of its subtypes, optionally with format parameters, the value of <code>body</code> is JSON.</p>
<p>For media types of top-level type <code>text</code>, for example <code>text/plain</code>, the value of <code>body</code> is a string containing the value of the request body.</p>
<p>For all other media types the value of <code>body</code> is a string containing the base64url-encoded value of the request body. In this case the body content can be compressed or chunked if this is correctly reflected in the <code>Transfer-Encoding</code> header.</p>
<p>A <code>body</code> MUST NOT be specified if the <code>method</code> is <code>get</code> or <code>delete</code>.</p>
<p>The request object and the <code>headers</code> object MUST NOT contain name/value pairs with duplicate names. This is in conformance with <a href="#rfc7493">RFC7493</a>.</p>
<div class="example">
<p>Example <a id="batchRequest" href="#batchRequest">55</a>: a batch request that contains the following individual requests in the order listed</p>
<ol type="1">
<li>A query request</li>
<li>An atomicity group that contains the following requests:
<ul>
<li>Insert entity</li>
<li>Update entity</li>
</ul></li>
<li>A second query request</li>
</ol>
<p>Note: For brevity, in the example, request bodies are excluded in favor of English descriptions inside <code>&lt;&gt;</code> brackets and <code>OData-Version</code> headers are omitted.</p>
<div class="sourceCode" id="cb62"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="er">POST</span> <span class="er">/service/$batch</span> <span class="er">HTTP/1.1</span></span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a><span class="er">Host:</span> <span class="er">host</span></span>
<span id="cb62-3"><a href="#cb62-3" aria-hidden="true" tabindex="-1"></a><span class="er">OData-Version:</span> <span class="er">4.01</span></span>
<span id="cb62-4"><a href="#cb62-4" aria-hidden="true" tabindex="-1"></a><span class="er">Content-Type:</span> <span class="er">application/json</span></span>
<span id="cb62-5"><a href="#cb62-5" aria-hidden="true" tabindex="-1"></a><span class="er">Content-Length:</span> <span class="er">###</span></span>
<span id="cb62-6"><a href="#cb62-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-7"><a href="#cb62-7" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb62-8"><a href="#cb62-8" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;requests&quot;</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb62-9"><a href="#cb62-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span></span>
<span id="cb62-10"><a href="#cb62-10" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;id&quot;</span><span class="fu">:</span> <span class="st">&quot;0&quot;</span><span class="fu">,</span></span>
<span id="cb62-11"><a href="#cb62-11" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;method&quot;</span><span class="fu">:</span> <span class="st">&quot;get&quot;</span><span class="fu">,</span></span>
<span id="cb62-12"><a href="#cb62-12" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;url&quot;</span><span class="fu">:</span> <span class="st">&quot;/service/Customers(&#39;ALFKI&#39;)&quot;</span></span>
<span id="cb62-13"><a href="#cb62-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb62-14"><a href="#cb62-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span></span>
<span id="cb62-15"><a href="#cb62-15" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;id&quot;</span><span class="fu">:</span> <span class="st">&quot;1&quot;</span><span class="fu">,</span></span>
<span id="cb62-16"><a href="#cb62-16" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;atomicityGroup&quot;</span><span class="fu">:</span> <span class="st">&quot;group1&quot;</span><span class="fu">,</span></span>
<span id="cb62-17"><a href="#cb62-17" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;dependsOn&quot;</span><span class="fu">:</span> <span class="ot">[</span> <span class="st">&quot;0&quot;</span> <span class="ot">]</span><span class="fu">,</span></span>
<span id="cb62-18"><a href="#cb62-18" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;method&quot;</span><span class="fu">:</span> <span class="st">&quot;patch&quot;</span><span class="fu">,</span></span>
<span id="cb62-19"><a href="#cb62-19" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;url&quot;</span><span class="fu">:</span> <span class="st">&quot;/service/Customers(&#39;ALFKI&#39;)&quot;</span><span class="fu">,</span></span>
<span id="cb62-20"><a href="#cb62-20" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;headers&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb62-21"><a href="#cb62-21" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;Prefer&quot;</span><span class="fu">:</span> <span class="st">&quot;return=minimal&quot;</span></span>
<span id="cb62-22"><a href="#cb62-22" aria-hidden="true" tabindex="-1"></a>      <span class="fu">},</span></span>
<span id="cb62-23"><a href="#cb62-23" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;body&quot;</span><span class="fu">:</span> <span class="er">&lt;JSON</span> <span class="er">representation</span> <span class="er">of</span> <span class="er">changes</span> <span class="er">to</span> <span class="er">Customer</span> <span class="er">ALFKI&gt;</span></span>
<span id="cb62-24"><a href="#cb62-24" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb62-25"><a href="#cb62-25" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span></span>
<span id="cb62-26"><a href="#cb62-26" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;id&quot;</span><span class="fu">:</span> <span class="st">&quot;2&quot;</span><span class="fu">,</span></span>
<span id="cb62-27"><a href="#cb62-27" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;atomicityGroup&quot;</span><span class="fu">:</span> <span class="st">&quot;group1&quot;</span><span class="fu">,</span></span>
<span id="cb62-28"><a href="#cb62-28" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;method&quot;</span><span class="fu">:</span> <span class="st">&quot;post&quot;</span><span class="fu">,</span></span>
<span id="cb62-29"><a href="#cb62-29" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;url&quot;</span><span class="fu">:</span> <span class="st">&quot;/service/Customers&quot;</span><span class="fu">,</span></span>
<span id="cb62-30"><a href="#cb62-30" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;body&quot;</span><span class="fu">:</span> <span class="er">&lt;JSON</span> <span class="er">representation</span> <span class="er">of</span> <span class="er">a</span> <span class="er">new</span> <span class="er">Customer</span> <span class="er">entity&gt;</span></span>
<span id="cb62-31"><a href="#cb62-31" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb62-32"><a href="#cb62-32" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span></span>
<span id="cb62-33"><a href="#cb62-33" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;id&quot;</span><span class="fu">:</span> <span class="st">&quot;3&quot;</span><span class="fu">,</span></span>
<span id="cb62-34"><a href="#cb62-34" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;dependsOn&quot;</span><span class="fu">:</span> <span class="ot">[</span> <span class="st">&quot;group1&quot;</span> <span class="ot">]</span><span class="fu">,</span></span>
<span id="cb62-35"><a href="#cb62-35" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;method&quot;</span><span class="fu">:</span> <span class="st">&quot;get&quot;</span><span class="fu">,</span></span>
<span id="cb62-36"><a href="#cb62-36" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;url&quot;</span><span class="fu">:</span> <span class="st">&quot;/service/Products&quot;</span></span>
<span id="cb62-37"><a href="#cb62-37" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span></span>
<span id="cb62-38"><a href="#cb62-38" aria-hidden="true" tabindex="-1"></a>  <span class="ot">]</span></span>
<span id="cb62-39"><a href="#cb62-39" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
</div>
</details>
<details open><summary>
<h2 id="192-referencing-new-entities"><a id="ReferencingNewEntities" href="#ReferencingNewEntities">19.2 Referencing New Entities</a></h2>
</summary>
<p>The entity returned by a preceding request can be referenced in the request URL of subsequent requests. If the <code>Location</code> header in the response contains a relative URL, clients MUST be able to resolve it relative to the request’s URL even if that contains such a reference.</p>
<div class="example">
<p>Example 56: a batch request that contains the following operations in the order listed:</p>
<ul>
<li>Insert a new entity (with <code>id = 1</code>)</li>
<li>Insert a second new entity (references request with <code>id = 1</code>)</li>
</ul>
<div class="sourceCode" id="cb63"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="er">POST</span> <span class="er">/service/$batch</span> <span class="er">HTTP/1.1</span></span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a><span class="er">Host:</span> <span class="er">host</span></span>
<span id="cb63-3"><a href="#cb63-3" aria-hidden="true" tabindex="-1"></a><span class="er">OData-Version:</span> <span class="er">4.01</span></span>
<span id="cb63-4"><a href="#cb63-4" aria-hidden="true" tabindex="-1"></a><span class="er">Content-Type:</span> <span class="er">application/json</span></span>
<span id="cb63-5"><a href="#cb63-5" aria-hidden="true" tabindex="-1"></a><span class="er">Content-Length:</span> <span class="er">###</span></span>
<span id="cb63-6"><a href="#cb63-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-7"><a href="#cb63-7" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb63-8"><a href="#cb63-8" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;requests&quot;</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb63-9"><a href="#cb63-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span></span>
<span id="cb63-10"><a href="#cb63-10" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;id&quot;</span><span class="fu">:</span> <span class="st">&quot;1&quot;</span><span class="fu">,</span></span>
<span id="cb63-11"><a href="#cb63-11" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;method&quot;</span><span class="fu">:</span> <span class="st">&quot;post&quot;</span><span class="fu">,</span></span>
<span id="cb63-12"><a href="#cb63-12" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;url&quot;</span><span class="fu">:</span> <span class="st">&quot;/service/Customers&quot;</span><span class="fu">,</span></span>
<span id="cb63-13"><a href="#cb63-13" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;body&quot;</span><span class="fu">:</span> <span class="er">&lt;JSON</span> <span class="er">representation</span> <span class="er">of</span> <span class="er">a</span> <span class="er">new</span> <span class="er">Customer</span> <span class="er">entity&gt;</span></span>
<span id="cb63-14"><a href="#cb63-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb63-15"><a href="#cb63-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span></span>
<span id="cb63-16"><a href="#cb63-16" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;id&quot;</span><span class="fu">:</span> <span class="st">&quot;2&quot;</span><span class="fu">,</span></span>
<span id="cb63-17"><a href="#cb63-17" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;dependsOn&quot;</span><span class="fu">:</span> <span class="ot">[</span> <span class="st">&quot;1&quot;</span> <span class="ot">]</span></span>
<span id="cb63-18"><a href="#cb63-18" aria-hidden="true" tabindex="-1"></a>      <span class="st">&quot;method&quot;</span><span class="er">:</span> <span class="st">&quot;post&quot;</span><span class="fu">,</span></span>
<span id="cb63-19"><a href="#cb63-19" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;url&quot;</span><span class="fu">:</span> <span class="st">&quot;$1/Orders&quot;</span><span class="fu">,</span></span>
<span id="cb63-20"><a href="#cb63-20" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;body&quot;</span><span class="fu">:</span> <span class="er">&lt;JSON</span> <span class="er">representation</span> <span class="er">of</span> <span class="er">a</span> <span class="er">new</span> <span class="er">Order&gt;</span></span>
<span id="cb63-21"><a href="#cb63-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span></span>
<span id="cb63-22"><a href="#cb63-22" aria-hidden="true" tabindex="-1"></a>  <span class="ot">]</span></span>
<span id="cb63-23"><a href="#cb63-23" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
</div>
</details>
<details open><summary>
<h2 id="193-referencing-an-etag"><a id="ReferencinganETag" href="#ReferencinganETag">19.3 Referencing an ETag</a></h2>
</summary>
<div class="example">
<p>Example 57: a batch request that contains the following operations in the order listed:</p>
<ul>
<li>Get an Employee (with <code>id</code> = 1)</li>
<li>Update the salary only if the employee has not changed</li>
</ul>
<div class="sourceCode" id="cb64"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="er">POST</span> <span class="er">/service/$batch</span> <span class="er">HTTP/1.1</span></span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a><span class="er">Host:</span> <span class="er">host</span></span>
<span id="cb64-3"><a href="#cb64-3" aria-hidden="true" tabindex="-1"></a><span class="er">OData-Version:</span> <span class="er">4.01</span></span>
<span id="cb64-4"><a href="#cb64-4" aria-hidden="true" tabindex="-1"></a><span class="er">Content-Type:</span> <span class="er">application/json</span></span>
<span id="cb64-5"><a href="#cb64-5" aria-hidden="true" tabindex="-1"></a><span class="er">Content-Length:</span> <span class="er">###</span></span>
<span id="cb64-6"><a href="#cb64-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-7"><a href="#cb64-7" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb64-8"><a href="#cb64-8" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;requests&quot;</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb64-9"><a href="#cb64-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span></span>
<span id="cb64-10"><a href="#cb64-10" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;id&quot;</span><span class="fu">:</span> <span class="st">&quot;1&quot;</span><span class="fu">,</span></span>
<span id="cb64-11"><a href="#cb64-11" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;method&quot;</span><span class="fu">:</span> <span class="st">&quot;get&quot;</span><span class="fu">,</span></span>
<span id="cb64-12"><a href="#cb64-12" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;url&quot;</span><span class="fu">:</span> <span class="st">&quot;/service/Employees(0)&quot;</span><span class="fu">,</span></span>
<span id="cb64-13"><a href="#cb64-13" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;headers&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb64-14"><a href="#cb64-14" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;accept&quot;</span><span class="fu">:</span> <span class="st">&quot;application/json&quot;</span></span>
<span id="cb64-15"><a href="#cb64-15" aria-hidden="true" tabindex="-1"></a>      <span class="fu">}</span></span>
<span id="cb64-16"><a href="#cb64-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb64-17"><a href="#cb64-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span></span>
<span id="cb64-18"><a href="#cb64-18" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;id&quot;</span><span class="fu">:</span> <span class="st">&quot;2&quot;</span><span class="fu">,</span></span>
<span id="cb64-19"><a href="#cb64-19" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;dependsOn&quot;</span><span class="fu">:</span> <span class="ot">[</span> <span class="st">&quot;1&quot;</span> <span class="ot">]</span><span class="fu">,</span></span>
<span id="cb64-20"><a href="#cb64-20" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;method&quot;</span><span class="fu">:</span> <span class="st">&quot;patch&quot;</span><span class="fu">,</span></span>
<span id="cb64-21"><a href="#cb64-21" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;url&quot;</span><span class="fu">:</span> <span class="st">&quot;/service/Employees(0)&quot;</span><span class="fu">,</span></span>
<span id="cb64-22"><a href="#cb64-22" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;headers&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb64-23"><a href="#cb64-23" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;if-match&quot;</span><span class="fu">:</span> <span class="st">&quot;$1&quot;</span></span>
<span id="cb64-24"><a href="#cb64-24" aria-hidden="true" tabindex="-1"></a>      <span class="fu">},</span></span>
<span id="cb64-25"><a href="#cb64-25" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;body&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb64-26"><a href="#cb64-26" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;Salary&quot;</span><span class="fu">:</span> <span class="dv">75000</span></span>
<span id="cb64-27"><a href="#cb64-27" aria-hidden="true" tabindex="-1"></a>      <span class="fu">}</span></span>
<span id="cb64-28"><a href="#cb64-28" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span></span>
<span id="cb64-29"><a href="#cb64-29" aria-hidden="true" tabindex="-1"></a>  <span class="ot">]</span></span>
<span id="cb64-30"><a href="#cb64-30" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
</div>
</details>
<details open><summary>
<h2 id="194-referencing-response-body-values"><a id="ReferencingResponseBodyValues" href="#ReferencingResponseBodyValues">19.4 Referencing Response Body Values</a></h2>
</summary>
<div class="example">
<p>Example 58: a batch request that contains the following operations in the order listed:</p>
<ul>
<li>Get an employee (with <code>Content-ID = 1</code>)</li>
<li>Get all employees residing in the same building</li>
</ul>
<div class="sourceCode" id="cb65"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="er">POST</span> <span class="er">/service/$batch</span> <span class="er">HTTP/1.1</span></span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a><span class="er">Host:</span> <span class="er">host</span></span>
<span id="cb65-3"><a href="#cb65-3" aria-hidden="true" tabindex="-1"></a><span class="er">OData-Version:</span> <span class="er">4.01</span></span>
<span id="cb65-4"><a href="#cb65-4" aria-hidden="true" tabindex="-1"></a><span class="er">Content-Type:</span> <span class="er">application/json</span></span>
<span id="cb65-5"><a href="#cb65-5" aria-hidden="true" tabindex="-1"></a><span class="er">Content-Length:</span> <span class="er">###</span></span>
<span id="cb65-6"><a href="#cb65-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-7"><a href="#cb65-7" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb65-8"><a href="#cb65-8" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;requests&quot;</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb65-9"><a href="#cb65-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span></span>
<span id="cb65-10"><a href="#cb65-10" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;id&quot;</span><span class="fu">:</span> <span class="st">&quot;1&quot;</span><span class="fu">,</span></span>
<span id="cb65-11"><a href="#cb65-11" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;method&quot;</span><span class="fu">:</span> <span class="st">&quot;get&quot;</span><span class="fu">,</span></span>
<span id="cb65-12"><a href="#cb65-12" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;url&quot;</span><span class="fu">:</span> <span class="st">&quot;/service/Employees/0?$select=Building&quot;</span><span class="fu">,</span></span>
<span id="cb65-13"><a href="#cb65-13" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;headers&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb65-14"><a href="#cb65-14" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;accept&quot;</span><span class="fu">:</span> <span class="st">&quot;application/json&quot;</span></span>
<span id="cb65-15"><a href="#cb65-15" aria-hidden="true" tabindex="-1"></a>      <span class="fu">}</span></span>
<span id="cb65-16"><a href="#cb65-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb65-17"><a href="#cb65-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span></span>
<span id="cb65-18"><a href="#cb65-18" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;id&quot;</span><span class="fu">:</span> <span class="st">&quot;2&quot;</span><span class="fu">,</span></span>
<span id="cb65-19"><a href="#cb65-19" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;dependsOn&quot;</span><span class="fu">:</span> <span class="ot">[</span> <span class="st">&quot;1&quot;</span> <span class="ot">]</span><span class="fu">,</span></span>
<span id="cb65-20"><a href="#cb65-20" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;method&quot;</span><span class="fu">:</span> <span class="st">&quot;get&quot;</span><span class="fu">,</span></span>
<span id="cb65-21"><a href="#cb65-21" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;url&quot;</span><span class="fu">:</span> <span class="st">&quot;/service/Employees?$filter=Building eq $1/Building&quot;</span><span class="fu">,</span></span>
<span id="cb65-22"><a href="#cb65-22" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;headers&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb65-23"><a href="#cb65-23" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;accept&quot;</span><span class="fu">:</span> <span class="st">&quot;application/json&quot;</span></span>
<span id="cb65-24"><a href="#cb65-24" aria-hidden="true" tabindex="-1"></a>      <span class="fu">}</span></span>
<span id="cb65-25"><a href="#cb65-25" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span></span>
<span id="cb65-26"><a href="#cb65-26" aria-hidden="true" tabindex="-1"></a>  <span class="ot">]</span></span>
<span id="cb65-27"><a href="#cb65-27" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
</div>
</details>
<details open><summary>
<h2 id="195-processing-a-batch-request"><a id="ProcessingaBatchRequest" href="#ProcessingaBatchRequest">19.5 Processing a Batch Request</a></h2>
</summary>
<p>All requests in an atomicity group represent a single change unit. A service MUST successfully process and apply all the requests in the atomicity group or else apply none of them. It is up to the service implementation to define rollback semantics to undo any requests within an atomicity group that may have been applied before another request in that same atomicity group failed.</p>
<p>The service MAY process the individual requests and atomicity groups within a batch request, or individual requests within an atomicity group, in any order that is compatible with the dependencies expressed with the <code>dependsOn</code> name/value pair. Individual requests and atomicity groups that do not specify the <code>dependsOn</code> name/value pair may be processed in parallel. Clients that are only interested in completely successful batch responses MAY specify the preference <code>continue-on-error=false</code> to indicate that the service need not spend cycles on further processing once an error occurs in one of the dependency chains. In this case the response MAY omit response objects for requests that have not been processed. If the preference <code>continue-on-error</code> is not specified, or specified with a value of <code>true</code>, all requests are processed according to their dependencies.</p>
<p>The service MUST include the <code>id</code> name/value pair in each response object with the value of the request identifier that the client specified in the corresponding request, so clients can correlate requests and responses.</p>
</details>
<details open><summary>
<h2 id="196-batch-response"><a id="BatchResponse" href="#BatchResponse">19.6 Batch Response</a></h2>
</summary>
<p>A JSON batch response body consists of a single JSON object that MUST contain the name/value pair <code>responses</code> and MAY contain <a href="#InstanceAnnotations">annotations</a>. It does not contain the <code>context</code> control information.</p>
<p>The value of <code>responses</code> is an array of response objects, each representing an individual response.</p>
<p>A JSON batch response MAY be a partial result containing the <a href="#ControlInformationnextLinkodatanextLink"><code>nextLink</code></a> control information. This allows services to chunk results into manageable pieces, or to return results for already processed requests and continue processing the remaining individual requests while waiting for the client to fire a <code>GET</code> request to the next link.</p>
<p>In a response to a batch request using the multipart format defined in <a href="#ODataProtocol">OData-Protocol</a> the response objects MUST appear in the same order as required for multipart batch responses because the <code>Content-ID</code> header is not required outside of change sets. Response objects corresponding to requests that specify a <code>Content-ID</code> header MUST contain the <code>id</code> name/value pair, and the value of <code>id</code> MUST be the value of the <code>Content-ID</code> header of the corresponding request. This is necessarily the case for requests contained within a change set. Responses to requests within a change set MUST contain the <code>atomicityGroup</code> name/value pair with a value common within a change set and unique across change sets.</p>
<p>In a response to a batch request using the JSON batch request format specified in the preceding section the response objects MAY appear in any order, and each response object MUST contain the <code>id</code> name/value pair with the same value as in the corresponding request object. If the corresponding request object contains the <code>atomicityGroup</code> name/value pair, it MUST also be present in the response object with the same value.</p>
<p>If any response within an atomicity group returns a failure code, all requests within that atomicity group are considered failed, regardless of their individual returned status code. The service MAY return <code>424 Failed Dependency</code> for statements within an atomicity group that fail or are not attempted due to other failures within the same atomicity group.</p>
<p>A response object MUST contain the name/value pair <code>status</code> whose value is a number representing the HTTP status code of the response to the individual request.</p>
<p>The response object MAY contain the name/value pair <code>headers</code> whose value is an object with name/value pairs representing response headers. The name of each pair MUST be the lower-case header name; the value is a string containing the header-encoded value of the header.</p>
<p>The response object MAY contain the name/value pair <code>body</code> which follows the same rules as within <a href="#BatchRequest">request objects</a>.</p>
<p>If the media type is not exactly equal to <code>application/json</code> (i.e. it is a subtype or has format parameters), the <code>headers</code> object MUST contain a name/value pair with the name <code>content-type</code> whose value is the media type.</p>
<p>Relative URLs in a response object follow the rules for <a href="#RelativeURLs">relative URLs</a> based on the request URL of the corresponding request. Especially: URLs in responses MUST NOT contain <code>$</code>-prefixed request identifiers.</p>
<div class="example">
<p>Example 59: referencing the batch request <a href="#batchRequest">example 55</a> above, assume all the requests except the final query request succeed. In this case the response would be</p>
<div class="sourceCode" id="cb66"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="er">HTTP/1.1</span> <span class="er">200</span> <span class="er">OK</span></span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a><span class="er">OData-Version:</span> <span class="er">4.01</span></span>
<span id="cb66-3"><a href="#cb66-3" aria-hidden="true" tabindex="-1"></a><span class="er">Content-Length:</span> <span class="er">####</span></span>
<span id="cb66-4"><a href="#cb66-4" aria-hidden="true" tabindex="-1"></a><span class="er">Content-Type:</span> <span class="er">application/json</span></span>
<span id="cb66-5"><a href="#cb66-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-6"><a href="#cb66-6" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb66-7"><a href="#cb66-7" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;responses&quot;</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb66-8"><a href="#cb66-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span></span>
<span id="cb66-9"><a href="#cb66-9" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;id&quot;</span><span class="fu">:</span> <span class="st">&quot;0&quot;</span><span class="fu">,</span></span>
<span id="cb66-10"><a href="#cb66-10" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;status&quot;</span><span class="fu">:</span> <span class="dv">200</span><span class="fu">,</span></span>
<span id="cb66-11"><a href="#cb66-11" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;body&quot;</span><span class="fu">:</span> <span class="er">&lt;JSON</span> <span class="er">representation</span> <span class="er">of</span> <span class="er">the</span> <span class="er">Customer</span> <span class="er">entity</span> <span class="er">with</span> <span class="er">key</span> <span class="er">ALFKI&gt;</span></span>
<span id="cb66-12"><a href="#cb66-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb66-13"><a href="#cb66-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span></span>
<span id="cb66-14"><a href="#cb66-14" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;id&quot;</span><span class="fu">:</span> <span class="st">&quot;1&quot;</span><span class="fu">,</span></span>
<span id="cb66-15"><a href="#cb66-15" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;status&quot;</span><span class="fu">:</span> <span class="dv">204</span></span>
<span id="cb66-16"><a href="#cb66-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb66-17"><a href="#cb66-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span></span>
<span id="cb66-18"><a href="#cb66-18" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;id&quot;</span><span class="fu">:</span> <span class="st">&quot;2&quot;</span><span class="fu">,</span></span>
<span id="cb66-19"><a href="#cb66-19" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;status&quot;</span><span class="fu">:</span> <span class="dv">201</span><span class="fu">,</span></span>
<span id="cb66-20"><a href="#cb66-20" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;headers&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb66-21"><a href="#cb66-21" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;location&quot;</span><span class="fu">:</span> <span class="st">&quot;http://host/service.svc/Customer(&#39;POIUY&#39;)&quot;</span></span>
<span id="cb66-22"><a href="#cb66-22" aria-hidden="true" tabindex="-1"></a>      <span class="fu">},</span></span>
<span id="cb66-23"><a href="#cb66-23" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;body&quot;</span><span class="fu">:</span> <span class="er">&lt;JSON</span> <span class="er">representation</span> <span class="er">of</span> <span class="er">the</span> <span class="er">new</span> <span class="er">Customer</span> <span class="er">entity&gt;</span></span>
<span id="cb66-24"><a href="#cb66-24" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb66-25"><a href="#cb66-25" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span></span>
<span id="cb66-26"><a href="#cb66-26" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;id&quot;</span><span class="fu">:</span> <span class="st">&quot;3&quot;</span><span class="fu">,</span></span>
<span id="cb66-27"><a href="#cb66-27" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;status&quot;</span><span class="fu">:</span> <span class="dv">404</span><span class="fu">,</span></span>
<span id="cb66-28"><a href="#cb66-28" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;body&quot;</span><span class="fu">:</span> <span class="er">&lt;Error</span> <span class="er">message&gt;</span></span>
<span id="cb66-29"><a href="#cb66-29" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span></span>
<span id="cb66-30"><a href="#cb66-30" aria-hidden="true" tabindex="-1"></a>  <span class="ot">]</span></span>
<span id="cb66-31"><a href="#cb66-31" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
</div>
</details>
<details open><summary>
<h2 id="197-asynchronous-batch-requests"><a id="AsynchronousBatchRequests" href="#AsynchronousBatchRequests">19.7 Asynchronous Batch Requests</a></h2>
</summary>
<p>A batch request that specifies the <code>respond-async</code> preference MAY be executed asynchronously. This means that the “outer” batch request is executed asynchronously; this preference does not automatically cascade down to the individual requests within the batch. After successful execution of the batch request the response to the batch request is returned in the body of a response to an interrogation request against the status monitor resource URL, see <a href="https://docs.oasis-open.org/odata/odata/v4.02/odata-v4.02-part1-protocol.html#AsynchronousRequests">OData-Protocol, section 11.6</a>.</p>
<p>A service MAY return interim results to an asynchronously executing batch. It does this by responding with <code>200 OK</code> to a <code>GET</code> request to the monitor resource and including a <a href="#ControlInformationnextLinkodatanextLink"><code>nextLink</code></a> control information in the JSON batch response, thus signaling that the response is only a partial result. A subsequent <code>GET</code> request to the next link MAY result in a <code>202 Accepted</code> response with a <code>location</code> header pointing to a new status monitor resource.</p>
<div class="example">
<p>Example 60: referencing the <a href="#batchRequest">example 55</a> above again, assume that the request is sent with the <code>respond-async</code> preference. This results in a <code>202</code> response pointing to a status monitor resource:</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="er">HTTP/1.1</span> <span class="er">202</span> <span class="er">Accepted</span></span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a><span class="er">Location:</span> <span class="er">http://service-root/async-monitor-0</span></span>
<span id="cb67-3"><a href="#cb67-3" aria-hidden="true" tabindex="-1"></a><span class="er">Retry-After:</span> <span class="er">###</span></span></code></pre></div>
<p>When interrogating the monitor URL only the first request in the batch has finished processing and all the remaining requests are still being processed. The service signals that asynchronous processing is “finished” and returns a partial result with the first response and a next link. The client did not explicitly accept <code>application/http</code>, so the response is “unwrapped” and only indicates with the <code>AsyncResult</code> header that it is a response to a status monitor resource:</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="er">HTTP/1.1</span> <span class="er">200</span> <span class="er">OK</span></span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a><span class="er">AsyncResult:</span> <span class="er">200</span></span>
<span id="cb68-3"><a href="#cb68-3" aria-hidden="true" tabindex="-1"></a><span class="er">OData-Version:</span> <span class="er">4.01</span></span>
<span id="cb68-4"><a href="#cb68-4" aria-hidden="true" tabindex="-1"></a><span class="er">Content-Length:</span> <span class="er">###</span></span>
<span id="cb68-5"><a href="#cb68-5" aria-hidden="true" tabindex="-1"></a><span class="er">Content-Type:</span> <span class="er">application/json</span></span>
<span id="cb68-6"><a href="#cb68-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-7"><a href="#cb68-7" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb68-8"><a href="#cb68-8" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;responses&quot;</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb68-9"><a href="#cb68-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span></span>
<span id="cb68-10"><a href="#cb68-10" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;id&quot;</span><span class="fu">:</span> <span class="st">&quot;0&quot;</span><span class="fu">,</span></span>
<span id="cb68-11"><a href="#cb68-11" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;status&quot;</span><span class="fu">:</span> <span class="dv">200</span><span class="fu">,</span></span>
<span id="cb68-12"><a href="#cb68-12" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;body&quot;</span><span class="fu">:</span> <span class="er">&lt;JSON</span> <span class="er">representation</span> <span class="er">of</span> <span class="er">the</span> <span class="er">Customer</span> <span class="er">entity</span> <span class="er">with</span> <span class="er">key</span> <span class="er">ALFKI&gt;</span></span>
<span id="cb68-13"><a href="#cb68-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span></span>
<span id="cb68-14"><a href="#cb68-14" aria-hidden="true" tabindex="-1"></a>  <span class="ot">]</span><span class="fu">,</span></span>
<span id="cb68-15"><a href="#cb68-15" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;@nextLink&quot;</span><span class="fu">:</span> <span class="st">&quot;…?$skiptoken=YmF0Y2gx&quot;</span></span>
<span id="cb68-16"><a href="#cb68-16" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p>Client makes a <code>GET</code> request to the next link and receives a <code>202</code> response with the location of a new monitor resource.</p>
<div class="sourceCode" id="cb69"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="er">HTTP/1.1</span> <span class="er">202</span> <span class="er">Accepted</span></span>
<span id="cb69-2"><a href="#cb69-2" aria-hidden="true" tabindex="-1"></a><span class="er">Location:</span> <span class="er">http://service-root/async-monitor-1</span></span>
<span id="cb69-3"><a href="#cb69-3" aria-hidden="true" tabindex="-1"></a><span class="er">Retry-After:</span> <span class="er">###</span></span></code></pre></div>
<p>After some time a <code>GET</code> request to the monitor resource returns the remainder of the result.</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="er">HTTP/1.1</span> <span class="er">200</span> <span class="er">OK</span></span>
<span id="cb70-2"><a href="#cb70-2" aria-hidden="true" tabindex="-1"></a><span class="er">AsyncResult:</span> <span class="er">200</span></span>
<span id="cb70-3"><a href="#cb70-3" aria-hidden="true" tabindex="-1"></a><span class="er">OData-Version:</span> <span class="er">4.01</span></span>
<span id="cb70-4"><a href="#cb70-4" aria-hidden="true" tabindex="-1"></a><span class="er">Content-Length:</span> <span class="er">###</span></span>
<span id="cb70-5"><a href="#cb70-5" aria-hidden="true" tabindex="-1"></a><span class="er">Content-Type:</span> <span class="er">application/json</span></span>
<span id="cb70-6"><a href="#cb70-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb70-7"><a href="#cb70-7" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb70-8"><a href="#cb70-8" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;responses&quot;</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb70-9"><a href="#cb70-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span></span>
<span id="cb70-10"><a href="#cb70-10" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;id&quot;</span><span class="fu">:</span> <span class="st">&quot;1&quot;</span><span class="fu">,</span></span>
<span id="cb70-11"><a href="#cb70-11" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;status&quot;</span><span class="fu">:</span> <span class="dv">204</span></span>
<span id="cb70-12"><a href="#cb70-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb70-13"><a href="#cb70-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span></span>
<span id="cb70-14"><a href="#cb70-14" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;id&quot;</span><span class="fu">:</span> <span class="st">&quot;2&quot;</span><span class="fu">,</span></span>
<span id="cb70-15"><a href="#cb70-15" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;status&quot;</span><span class="fu">:</span> <span class="dv">201</span><span class="fu">,</span></span>
<span id="cb70-16"><a href="#cb70-16" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;headers&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb70-17"><a href="#cb70-17" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;location&quot;</span><span class="fu">:</span> <span class="st">&quot;http://host/service.svc/Customer(&#39;POIUY&#39;)&quot;</span></span>
<span id="cb70-18"><a href="#cb70-18" aria-hidden="true" tabindex="-1"></a>      <span class="fu">},</span></span>
<span id="cb70-19"><a href="#cb70-19" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;body&quot;</span><span class="fu">:</span> <span class="er">&lt;JSON</span> <span class="er">representation</span> <span class="er">of</span> <span class="er">the</span> <span class="er">new</span> <span class="er">Customer</span> <span class="er">entity&gt;</span></span>
<span id="cb70-20"><a href="#cb70-20" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb70-21"><a href="#cb70-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span></span>
<span id="cb70-22"><a href="#cb70-22" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;id&quot;</span><span class="fu">:</span> <span class="st">&quot;3&quot;</span><span class="fu">,</span></span>
<span id="cb70-23"><a href="#cb70-23" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;status&quot;</span><span class="fu">:</span> <span class="dv">404</span><span class="fu">,</span></span>
<span id="cb70-24"><a href="#cb70-24" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;body&quot;</span><span class="fu">:</span> <span class="er">&lt;Error</span> <span class="er">message&gt;</span></span>
<span id="cb70-25"><a href="#cb70-25" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span></span>
<span id="cb70-26"><a href="#cb70-26" aria-hidden="true" tabindex="-1"></a>  <span class="ot">]</span></span>
<span id="cb70-27"><a href="#cb70-27" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
</div>
<p>In addition to the above interaction pattern individual requests within a batch with no other requests depending on it and not part of an atomicity group MAY be executed asynchronously if they specify the <code>respond-async</code> preference and if the service responds with a JSON batch response. In this case the <code>response</code> array contains a response object for each asynchronously executed individual request with a <code>status</code> of <code>202</code>, a <code>location</code> header pointing to an individual status monitor resource, and optionally a <code>retry-after</code> header.</p>
<div class="example">
<p>Example 61: the first individual request is processed asynchronously, the second synchronously, the batch itself is processed synchronously</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a><span class="er">HTTP/1.1</span> <span class="er">200</span> <span class="er">OK</span></span>
<span id="cb71-2"><a href="#cb71-2" aria-hidden="true" tabindex="-1"></a><span class="er">OData-Version:</span> <span class="er">4.01</span></span>
<span id="cb71-3"><a href="#cb71-3" aria-hidden="true" tabindex="-1"></a><span class="er">Content-Length:</span> <span class="er">###</span></span>
<span id="cb71-4"><a href="#cb71-4" aria-hidden="true" tabindex="-1"></a><span class="er">Content-Type:</span> <span class="er">application/json</span></span>
<span id="cb71-5"><a href="#cb71-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-6"><a href="#cb71-6" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb71-7"><a href="#cb71-7" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;responses&quot;</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb71-8"><a href="#cb71-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span></span>
<span id="cb71-9"><a href="#cb71-9" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;id&quot;</span><span class="fu">:</span> <span class="st">&quot;0&quot;</span><span class="fu">,</span></span>
<span id="cb71-10"><a href="#cb71-10" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;status&quot;</span><span class="fu">:</span> <span class="dv">202</span><span class="fu">,</span></span>
<span id="cb71-11"><a href="#cb71-11" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;headers&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb71-12"><a href="#cb71-12" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;location&quot;</span><span class="fu">:</span> <span class="st">&quot;http://service-root/async-monitor-0&quot;</span></span>
<span id="cb71-13"><a href="#cb71-13" aria-hidden="true" tabindex="-1"></a>      <span class="fu">}</span></span>
<span id="cb71-14"><a href="#cb71-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb71-15"><a href="#cb71-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span></span>
<span id="cb71-16"><a href="#cb71-16" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;id&quot;</span><span class="fu">:</span> <span class="st">&quot;1&quot;</span><span class="fu">,</span></span>
<span id="cb71-17"><a href="#cb71-17" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;status&quot;</span><span class="fu">:</span> <span class="dv">204</span></span>
<span id="cb71-18"><a href="#cb71-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span></span>
<span id="cb71-19"><a href="#cb71-19" aria-hidden="true" tabindex="-1"></a>  <span class="ot">]</span></span>
<span id="cb71-20"><a href="#cb71-20" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
</div>
</details>
</details>
<hr />
<details open><summary>
<h1 id="20-instance-annotations"><a id="InstanceAnnotations" href="#InstanceAnnotations">20 Instance Annotations</a></h1>
</summary>
<p>Annotations are an extensibility mechanism that allows services and clients to include information other than the raw data in the request or response.</p>
<p>Annotations are name/value pairs that have an at (<code>@</code>) and a dot (<code>.</code>) as part of the name. The part after the “at” sign (<code>@</code>) is the <em>annotation identifier</em>. It consists of the namespace or alias of the schema that defines the term, followed by a dot (<code>.</code>), followed by the name of the term, optionally followed by a hash (<code>#</code>) and a qualifier. The namespace or alias MUST be defined in the metadata document, see <a href="#ODataCSDL">OData-CSDLJSON</a> or <a href="#ODataCSDL">OData-CSDLXML</a></p>
<p>The annotation identifier <code>odata</code> is reserved for future extensions of the protocol and format. Instance annotations MUST have a namespace or alias that is different from <code>odata</code>.</p>
<p>Annotations can be applied to any name/value pair in a JSON payload that represents a value of any type from the entity data model. Clients should never error due to an unexpected annotation in a JSON payload.</p>
<p>Annotations are always expressed as name/value pairs. For entity data model constructs represented as JSON objects the annotation name/value pairs are placed within the object; for constructs represented as JSON arrays or primitives, including null, they are placed next to the annotated model construct and have the name of the annotated property before the <code>@</code>. An annotation in the latter format can also take the place of an absent property. When annotating a payload that represents a <a href="#IndividualPropertyorOperationResponse">single primitive or collection value</a>, the annotations for the value appear next to the <code>value</code> property and are not prefixed with a property name.</p>
<div class="example">
<p>Example 62:</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb72-2"><a href="#cb72-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;@context&quot;</span><span class="fu">:</span> <span class="st">&quot;http://host/service/$metadata#Customers&quot;</span><span class="fu">,</span></span>
<span id="cb72-3"><a href="#cb72-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;@com.example.customer.setkind&quot;</span><span class="fu">:</span> <span class="st">&quot;VIPs&quot;</span><span class="fu">,</span></span>
<span id="cb72-4"><a href="#cb72-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;value&quot;</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb72-5"><a href="#cb72-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span></span>
<span id="cb72-6"><a href="#cb72-6" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;@com.example.display.highlight&quot;</span><span class="fu">:</span> <span class="kw">true</span><span class="fu">,</span></span>
<span id="cb72-7"><a href="#cb72-7" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;ID&quot;</span><span class="fu">:</span> <span class="st">&quot;ALFKI&quot;</span><span class="fu">,</span></span>
<span id="cb72-8"><a href="#cb72-8" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;CompanyName@com.example.display.style&quot;</span><span class="fu">:</span> <span class="fu">{</span> <span class="dt">&quot;title&quot;</span><span class="fu">:</span> <span class="kw">true</span><span class="fu">,</span> <span class="dt">&quot;order&quot;</span><span class="fu">:</span> <span class="dv">1</span> <span class="fu">},</span></span>
<span id="cb72-9"><a href="#cb72-9" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;CompanyName&quot;</span><span class="fu">:</span> <span class="st">&quot;Alfreds Futterkiste&quot;</span><span class="fu">,</span></span>
<span id="cb72-10"><a href="#cb72-10" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;Orders@com.example.display.style#simple&quot;</span><span class="fu">:</span> <span class="fu">{</span> <span class="dt">&quot;order&quot;</span><span class="fu">:</span> <span class="dv">2</span> <span class="fu">}</span></span>
<span id="cb72-11"><a href="#cb72-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span></span>
<span id="cb72-12"><a href="#cb72-12" aria-hidden="true" tabindex="-1"></a>  <span class="ot">]</span></span>
<span id="cb72-13"><a href="#cb72-13" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
</div>
<details open><summary>
<h2 id="201-annotate-a-json-object"><a id="AnnotateaJSONObject" href="#AnnotateaJSONObject">20.1 Annotate a JSON Object</a></h2>
</summary>
<p>When annotating a name/value pair for which the value is represented as a JSON object, each annotation is placed within the object and represented as a single name/value pair.</p>
<p>The name always starts with the “at” sign (<code>@</code>), followed by the annotation identifier.</p>
<p>The value MUST be an appropriate value for the annotation.</p>
</details>
<details open><summary>
<h2 id="202-annotate-a-json-array-or-primitive"><a id="AnnotateaJSONArrayorPrimitive" href="#AnnotateaJSONArrayorPrimitive">20.2 Annotate a JSON Array or Primitive</a></h2>
</summary>
<p>When annotating a name/value pair for which the value is represented as a JSON array or primitive value, each annotation that applies to this name/value pair MUST be represented as a single name/value pair and placed immediately prior to the annotated name/value pair, with the exception of the <a href="#ControlInformationnextLinkodatanextLink"><code>nextLink</code></a> or <a href="#ControlInformationcollectionAnnotationsodatacollectionAnnotations"><code>collectionAnnotations</code></a> control information, which can appear immediately before or after the annotated collection.</p>
<p>The name is the same as the name of the property or name/value pair being annotated, followed by the “at” sign (<code>@</code>), followed by the annotation identifier.</p>
<p>The value MUST be an appropriate value for the annotation.</p>
</details>
<details open><summary>
<h2 id="203-annotate-a-primitive-value-within-a-json-array"><a id="AnnotateaPrimitiveValuewithinaJSONArray" href="#AnnotateaPrimitiveValuewithinaJSONArray">20.3 Annotate a Primitive Value within a JSON Array</a></h2>
</summary>
<p>Individual primitive elements within a JSON array can be annotated by applying the <a href="#ControlInformationcollectionAnnotationsodatacollectionAnnotations"><code>collectionAnnotations</code></a> control information to the array containing the primitive member.</p>
<p>The control information must come with other annotations or control information immediately before or after the collection valued property. The name of the property representing the control information is the same as the name of the collection-valued property, followed by the “at” sign (<code>@</code>), followed by the <a href="#ControlInformationcollectionAnnotationsodatacollectionAnnotations"><code>collectionAnnotations</code></a> identifier.</p>
</details>
</details>
<hr />
<details open><summary>
<h1 id="21-error-handling"><a id="ErrorHandling" href="#ErrorHandling">21 Error Handling</a></h1>
</summary>
<p>OData requests may return a well formed <a href="#ErrorResponse">error response</a>, an <a href="#InStreamError">in-stream error</a>, or error information <a href="#ErrorInformationinaSuccessPayload">within a success payload</a>.</p>
<details open><summary>
<h2 id="211-error-response"><a id="ErrorResponse" href="#ErrorResponse">21.1 Error Response</a></h2>
</summary>
<p>The error response MUST be a single JSON object. This object MUST have a single name/value pair named <code>error</code>. The value must be an OData error object.</p>
<p>The OData error object MUST contain name/value pairs with the names <code>code</code> and <code>message</code>, and it MAY contain name/value pairs with the names <code>target</code>, <code>details</code>, and <code>innererror</code>.</p>
<p>The value for the <code>code</code> name/value pair is a non-empty language-independent string. Its value is a service-defined error code. This code serves as a sub-status for the HTTP error code specified in the response. It cannot be <code>null</code>.</p>
<p>The value for the <code>message</code> name/value pair is a non-empty, language-dependent, human-readable string describing the error. The <code>Content-Language</code> header MUST contain the language code from <a href="#rfc5646">RFC5646</a> corresponding to the language in which the value for message is written. It cannot be <code>null</code>.</p>
<p>The value for the <code>target</code> name/value pair is a potentially empty string indicating the target of the error (for example, the name of the property in error). It can be <code>null</code>.</p>
<p>The value for the <code>details</code> name/value pair MUST be an array of JSON objects that MUST contain name/value pairs for <code>code</code> and <code>message</code>, and MAY contain a name/value pair for <code>target</code>, as described above.</p>
<p>The value for the <code>innererror</code> name/value pair MUST be an object. The contents of this object are service-defined. Usually this object contains information that will help debug the service.</p>
<p>Service implementations SHOULD carefully consider which information to include in production environments to guard against potential security concerns around information disclosure.</p>
<p>Error responses MAY contain <a href="#InstanceAnnotations">annotations</a> in any of its JSON objects.</p>
<div class="example">
<p>Example 63:</p>
<div class="sourceCode" id="cb73"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb73-2"><a href="#cb73-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;error&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb73-3"><a href="#cb73-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;code&quot;</span><span class="fu">:</span> <span class="st">&quot;err123&quot;</span><span class="fu">,</span></span>
<span id="cb73-4"><a href="#cb73-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;message&quot;</span><span class="fu">:</span> <span class="st">&quot;Unsupported functionality&quot;</span><span class="fu">,</span></span>
<span id="cb73-5"><a href="#cb73-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;target&quot;</span><span class="fu">:</span> <span class="st">&quot;query&quot;</span><span class="fu">,</span></span>
<span id="cb73-6"><a href="#cb73-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;details&quot;</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb73-7"><a href="#cb73-7" aria-hidden="true" tabindex="-1"></a>      <span class="fu">{</span></span>
<span id="cb73-8"><a href="#cb73-8" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;code&quot;</span><span class="fu">:</span> <span class="st">&quot;forty-two&quot;</span><span class="fu">,</span></span>
<span id="cb73-9"><a href="#cb73-9" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;target&quot;</span><span class="fu">:</span> <span class="st">&quot;$search&quot;</span><span class="fu">,</span></span>
<span id="cb73-10"><a href="#cb73-10" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;message&quot;</span><span class="fu">:</span> <span class="st">&quot;$search query option not supported&quot;</span></span>
<span id="cb73-11"><a href="#cb73-11" aria-hidden="true" tabindex="-1"></a>      <span class="fu">}</span></span>
<span id="cb73-12"><a href="#cb73-12" aria-hidden="true" tabindex="-1"></a>    <span class="ot">]</span><span class="fu">,</span></span>
<span id="cb73-13"><a href="#cb73-13" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;innererror&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb73-14"><a href="#cb73-14" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;trace&quot;</span><span class="fu">:</span> <span class="ot">[</span><span class="er">…</span><span class="ot">]</span><span class="fu">,</span></span>
<span id="cb73-15"><a href="#cb73-15" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;context&quot;</span><span class="fu">:</span> <span class="fu">{</span><span class="er">…</span><span class="fu">}</span></span>
<span id="cb73-16"><a href="#cb73-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span></span>
<span id="cb73-17"><a href="#cb73-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">}</span></span>
<span id="cb73-18"><a href="#cb73-18" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
</div>
</details>
<details open><summary>
<h2 id="212-in-stream-error"><a id="InStreamError" href="#InStreamError">21.2 In-Stream Error</a></h2>
</summary>
<p>In the case that a service encounters an error after sending a success status to the client, the service MUST leave the response malformed. This can be achieved by immediately stopping response serialization and thus omitting (among others) the end-object character of the top-level JSON object in the response.</p>
<p>Services MAY include the header <code>OData-Error</code> as a trailing header if supported by the transport protocol (e.g. with HTTP/1.1 and chunked transfer encoding, or with HTTP/2), see <a href="#ODataProtocol">OData-Protocol</a>.</p>
<p>The value of the <code>OData-Error</code> trailing header is an OData error object as defined in the preceding chapter, represented in a header-appropriate way:</p>
<ul>
<li><p>All optional whitespace (indentation and line breaks) is removed, especially (in hex notation) <code>09</code>, <code>0A</code> and <code>0D</code></p></li>
<li><p>Control characters (<code>00</code> to <code>1F</code> and <code>7F</code>) and Unicode characters beyond <code>00FF</code> within JSON strings are encoded as <code>\uXXXX</code> or <code>\uXXXX\uXXXX</code> (see <a href="#rfc8259">RFC8259</a>, section 7)</p></li>
</ul>
<div class="example">
<p>Example 64: note that this is one HTTP header line without any line breaks or optional whitespace</p>
<div class="sourceCode" id="cb74"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="er">OData-error:</span> <span class="fu">{</span><span class="dt">&quot;code&quot;</span><span class="fu">:</span><span class="st">&quot;err123&quot;</span><span class="fu">,</span><span class="dt">&quot;message&quot;</span><span class="fu">:</span><span class="st">&quot;Unsupported</span></span>
<span id="cb74-2"><a href="#cb74-2" aria-hidden="true" tabindex="-1"></a><span class="st">functionality&quot;</span><span class="fu">,</span><span class="dt">&quot;target&quot;</span><span class="fu">:</span><span class="st">&quot;query&quot;</span><span class="fu">,</span><span class="dt">&quot;details&quot;</span><span class="fu">:</span><span class="ot">[</span><span class="fu">{</span><span class="dt">&quot;code&quot;</span><span class="fu">:</span><span class="st">&quot;forty-two&quot;</span><span class="fu">,</span><span class="dt">&quot;target&quot;</span><span class="fu">:</span><span class="st">&quot;$search&quot;</span><span class="fu">,</span><span class="dt">&quot;message&quot;</span><span class="fu">:</span><span class="st">&quot;$search</span></span>
<span id="cb74-3"><a href="#cb74-3" aria-hidden="true" tabindex="-1"></a><span class="st">query option not supported&quot;</span><span class="fu">}</span><span class="ot">]</span><span class="fu">}</span></span></code></pre></div>
</div>
</details>
<details open><summary>
<h2 id="213-error-information-in-a-success-payload"><a id="ErrorInformationinaSuccessPayload" href="#ErrorInformationinaSuccessPayload">21.3 Error Information in a Success Payload</a></h2>
</summary>
<p>Services may return error information within a success payload; for example, if the client has specified the <code>continue-on-error</code> preference.</p>
<details open><summary>
<h3 id="2131-primitive-value-errors"><a id="PrimitiveValueErrors" href="#PrimitiveValueErrors">21.3.1 Primitive Value Errors</a></h3>
</summary>
<p>Primitive values that are in error are annotated with the <code>Core.ValueException</code> term, see <a href="#ODataVocCore">OData-VocCore</a>. In this case, the payload MAY include an approximation of the value and MAY specify a string representation of the exact value in the <code>value</code> property of the annotation.</p>
</details>
<details open><summary>
<h3 id="2132-structured-type-errors"><a id="StructuredTypeErrors" href="#StructuredTypeErrors">21.3.2 Structured Type Errors</a></h3>
</summary>
<p>Structured types that are in error can be represented within a success payload only if the client has specified the <code>continue-on-error</code> preference. Such items are annotated with the <code>Core.ResourceException</code> term, see <a href="#ODataVocCore">OData-VocCore</a>. The annotation MAY include a <code>retryLink</code> property that can be used by the client to attempt to re-fetch the resource.</p>
</details>
<details open><summary>
<h3 id="2133-collection-errors"><a id="CollectionErrors" href="#CollectionErrors">21.3.3 Collection Errors</a></h3>
</summary>
<p>Collections within a success payload can contain primitive values that are in error, or structured values that are in error, if the client has specified the <code>continue-on-error</code> preference. Such elements are annotated as described above. Primitive elements within a collection are annotated using the <a href="#ControlInformationcollectionAnnotationsodatacollectionAnnotations"><code>collectionAnnotations</code></a> control information.</p>
<p>Services can return partial collections within a success payload, for example, if they encounter an error while retrieving the collection and the client has specified the <code>continue-on-error</code> preference. In this case, the service MUST include a <a href="#ControlInformationnextLinkodatanextLink"><code>nextLink</code></a>. The <code>nextLink</code> can be used to attempt retrieving the remaining members of the collection and could return an error indicating that the remaining members are not available.</p>
</details>
</details>
</details>
<hr />
<details open><summary>
<h1 id="22-extensibility"><a id="Extensibility" href="#Extensibility">22 Extensibility</a></h1>
</summary>
<p>Implementations can add <a href="#InstanceAnnotations">instance annotations</a> of the form <code>@namespace.termname</code> or <code>property@namespace.termname</code> to any JSON object, where <code>property</code> MAY or MAY NOT match the name of a name/value pair within the JSON object. However, the namespace MUST NOT start with <code>odata</code> and SHOULD NOT be required to be understood by the receiving party in order to correctly interpret the rest of the payload as the receiving party MUST ignore unknown annotations not defined in this version of the OData JSON Specification.</p>
</details>
<hr />
<details open><summary>
<h1 id="23-conformance"><a id="Conformance" href="#Conformance">23 Conformance</a></h1>
</summary>
<p>Conforming clients MUST be prepared to consume a service that uses any or all of the constructs defined in this specification. The exception to this are the constructs defined in Delta Response, which are only required for clients that request changes.</p>
<!--TODO: V4.02 conformance -->

<p>In order to be a conforming consumer of the OData JSON format, a client or service:</p>
<ol type="1">
<li>MUST either:
<ol type="1">
<li>understand <code>metadata=minimal</code> (<a href="#metadataminimalodatametadataminimal">section 3.1.1</a>) or</li>
<li>explicitly specify <code>metadata=none</code> (<a href="#metadatanoneodatametadatanone">section 3.1.3</a>) or <code>metadata=full</code> (<a href="#metadatafullodatametadatafull">section 3.1.2</a>) in the request (client)</li>
</ol></li>
<li>MUST be prepared to consume a response with full metadata</li>
<li>MUST be prepared to receive all data types (<a href="#PrimitiveValue">section 7.1</a>)
<ol type="1">
<li>defined in this specification (client)</li>
<li>exposed by the service (service)</li>
</ol></li>
<li>MUST interpret all <code>odata</code> control information defined according to the <code>OData-Version</code> header of the payload (<a href="#ControlInformation">section 4.6</a>)</li>
<li>MUST be prepared to receive any annotations and control information not defined in the <code>OData-Version</code> header of the payload (<a href="#InstanceAnnotations">section 20</a>)</li>
<li>MUST NOT require <code>streaming=true</code> in the <code>Content-Type</code> header (<a href="#PayloadOrderingConstraints">section 4.5</a>)</li>
<li>MUST be a conforming consumer of the OData 4.0 JSON format, for payloads with an <code>OData-Version</code> header value of <code>4.0</code>.
<ol type="1">
<li>MUST accept the <code>odata.</code> prefix, where defined, on format parameters and control information</li>
<li>MUST accept the <code>#</code> prefix in <code>@odata.type</code> values</li>
<li>MUST be prepared to handle binding through the use of the <code>@odata.bind</code> property in payloads to a <code>PATCH</code>, <code>PUT</code>, or <code>POST</code> request</li>
<li>MUST accept <code>TargetId</code> within in a deleted link for a relationship with a maximum cardinality of one</li>
<li>MUST accept the string values <code>-INF</code>, <code>INF</code>, and <code>NaN</code> for single and double values</li>
<li>MUST support property annotations that appear immediately before or after the property they annotate</li>
</ol></li>
<li>MAY be a conforming consumer of the OData 4.01 JSON format, for payloads with an <code>OData-Version</code> header value of <code>4.01</code>.
<ol type="1">
<li>MUST be prepared to interpret control information with or without the <code>odata.</code> prefix</li>
<li>MUST be prepared for <code>@type</code> primitive values with or without the <code>#</code> prefix</li>
<li>MUST be prepared to handle binding through inclusion of an entity reference within a collection-valued navigation property in the body of a <code>PATCH</code>, <code>PUT</code>, or <code>POST</code> request</li>
<li>MUST be prepared for <code>TargetId</code> to be included or omitted in a deleted link for a relationship with a maximum cardinality of one</li>
<li>MUST accept the string values <code>-INF</code>, <code>INF</code>, and <code>NaN</code> for decimal values with floating scale</li>
<li>MUST be prepared to handle related entities inline within a delta payload as well as a nested delta representation for the collection</li>
<li>MUST be prepared to handle decimal values written in exponential notation</li>
</ol></li>
</ol>
<p>In order to be a conforming producer of the OData JSON format, a client or service:</p>
<ol start="9" type="1">
<li>MUST support generating OData 4.0 JSON compliant payloads with an <code>OData-Version</code> header value of <code>4.0</code>.
<ol type="1">
<li>MUST NOT omit the <code>odata.</code> prefix from format parameters or control information</li>
<li>MUST NOT omit the <code>#</code> prefix from <code>@odata.type</code> values</li>
<li>MUST NOT include entity values or entity references within a collection-valued navigation property in the body of a <code>PATCH</code>, <code>PUT</code>, or <code>POST</code> request</li>
<li>MUST NOT return decimal values written in exponential notation unless the ExponentialDecimals format parameter is specified.</li>
<li>MUST NOT advertise available actions or functions using name/value pairs prefixed with a property name</li>
<li>MUST NOT return a null value for name/value pairs representing actions or functions that are not available</li>
<li>MUST NOT represent numeric value exceptions for values other than single and double values using the string values <code>-INF</code>, <code>INF</code>, and <code>NaN</code></li>
</ol></li>
<li>MAY support generating OData 4.01 JSON compliant payloads for requests with an <code>OData-Version</code> header value of <code>4.01</code>.
<ol type="1">
<li>MUST return property annotations immediately before the property they annotate</li>
<li>SHOULD omit the <code>odata.</code> prefix from format parameters and control information</li>
<li>SHOULD omit the <code>#</code> prefix from <code>@type</code> primitive values</li>
<li>MAY include inline related entities or nested delta collections within a delta payload</li>
<li>MAY include <code>TargetId</code> within a deleted link for a relationship with a maximum cardinality of 1</li>
<li>MAY return decimal values written in exponential notation</li>
<li>MAY represent numeric value exceptions for decimal values with floating scale using the string values <code>-INF</code>, <code>INF</code>, and <code>NaN</code></li>
</ol></li>
</ol>
<p>In addition, in order to conform to the OData JSON format, a service:</p>
<ol start="11" type="1">
<li>MUST comply with one of the conformance levels defined in <a href="#ODataProtocol">OData-Protocol</a></li>
<li>MUST support the <code>application/json</code> media type in the <code>Accept</code> header (<a href="#RequestingtheJSONFormat">section 3</a>)</li>
<li>MUST return well-formed JSON payloads</li>
<li>MUST support <code>odata.metadata=full</code> (<a href="#metadatafullodatametadatafull">section 3.1.2</a>)</li>
<li>MUST include the <code>odata.nextLink</code> control information in partial results for entity collections (<a href="#ControlInformationnextLinkodatanextLink">section 4.6.5</a>)</li>
<li>MUST support entity instances with external metadata (<a href="#ControlInformationcontextodatacontext">section 4.6.1</a>)</li>
<li>MUST support properties with externally defined data types (<a href="#ControlInformationtypeodatatype">section 4.6.3</a>)</li>
<li>MUST NOT violate any other aspects of this OData JSON specification</li>
<li>SHOULD support the <code>$format</code> system query option (<a href="#RequestingtheJSONFormat">section 3</a>)</li>
<li>MAY support the <code>odata.streaming=true</code> parameter in the <code>Accept</code> header (<a href="#PayloadOrderingConstraints">section 4.5</a>)</li>
<li>MAY return full metadata regardless of <code>odata.metadata</code> (<a href="#metadatafullodatametadatafull">section 3.1.2</a>)</li>
<li>MUST NOT omit null or default values unless the <code>omit-values</code> preference is specified in the <code>Prefer</code> request header and the <code>omit-values</code> preference is included in the <code>Preference-Applied</code> response header</li>
<li>MUST return OData JSON 4.0-compliant responses for requests with an <code>OData-MaxVersion</code> header value of <code>4.0</code></li>
<li>MUST support OData JSON 4.0-compliant payloads in requests with an <code>OData-Version</code> header value of <code>4.0</code></li>
<li>MUST support returning, in the final response to an asynchronous request, the <code>application/json</code> payload that would have been returned had the operation completed synchronously, wrapped in an <code>application/http</code> message</li>
</ol>
<p>In addition, in order to comply with the OData 4.01 JSON format, a service:</p>
<ol start="26" type="1">
<li>SHOULD return the OData JSON 4.01 format for requests with an <code>OData-MaxVersion</code> header value of <code>4.01</code></li>
<li>MUST support the OData JSON 4.01 format in request payloads for requests with an <code>OData-Version</code> header value of <code>4.01</code></li>
<li>MUST honor the <code>odata.etag</code> control information within <code>PUT</code>, <code>PATCH</code> or <code>DELETE</code> payloads, if specified</li>
<li>MUST support returning, in the final response to an asynchronous request, the <code>application/json</code> payload that would have been returned had the operation completed synchronously</li>
</ol>
</details>
<hr />
<details open><summary>
<h1 id="appendix-a-references"><a id="References" href="#References">Appendix A. References</a></h1>
</summary>
<p>This appendix contains the normative and informative references that are used in this document.</p>
<p>While any hyperlinks included in this appendix were valid at the time of publication, OASIS cannot guarantee their long-term validity.</p>
<details open><summary>
<h2 id="a1-normative-references"><a id="NormativeReferences" href="#NormativeReferences">A.1 Normative References</a></h2>
</summary>
<p>The following documents are referenced in such a way that some or all of their content constitutes requirements of this document.</p>
<h6><span id="ODataABNF">OData-ABNF</span></h6>
<p><em>ABNF components: OData ABNF Construction Rules Version 4.02 and OData ABNF Test Cases.</em><br />
See link in “<a href="#RelatedWork">Related work</a>” section on cover page.</p>
<h6><span id="ODataCSDL">OData-CSDL</span></h6>
<p><em>OData Common Schema Definition Language (CSDL) JSON Representation Version 4.02.</em><br />
See link in “<a href="#RelatedWork">Related work</a>” section on cover page.</p>
<p><em>OData Common Schema Definition Language (CSDL) XML Representation Version 4.02.</em><br />
See link in “<a href="#RelatedWork">Related work</a>” section on cover page.</p>
<h6><span id="ODataProtocol">OData-Protocol</span></h6>
<p><em>OData Version 4.02. Part 1: Protocol.</em><br />
See link in “<a href="#RelatedWork">Related work</a>” section on cover page.</p>
<h6><span id="ODataURL">OData-URL</span></h6>
<p><em>OData Version 4.02. Part 2: URL Conventions.</em><br />
See link in “<a href="#RelatedWork">Related work</a>” section on cover page.</p>
<h6><span id="ODataVocCap">OData-VocCap</span></h6>
<p><em>OData Vocabularies Version 4.0: Capabilities Vocabulary.</em><br />
See link in “<a href="#RelatedWork">Related work</a>” section on cover page.</p>
<h6><span id="ODataVocCore">OData-VocCore</span></h6>
<p><em>OData Vocabularies Version 4.0: Core Vocabulary.</em><br />
See link in “<a href="#RelatedWork">Related work</a>” section on cover page.</p>
<h6><span id="rfc2119">RFC2119</span></h6>
<p><em>Bradner, S., “Key words for use in RFCs to Indicate Requirement Levels”, BCP 14, RFC 2119, DOI 10.17487/RFC2119, March 1997</em>. <a href="https://www.rfc-editor.org/info/rfc2119">https://www.rfc-editor.org/info/rfc2119</a>.</p>
<h6><span id="rfc3986">RFC3986</span></h6>
<p><em>Berners-Lee, T., Fielding, R., and L. Masinter, “Uniform Resource Identifier (URI): Generic Syntax”, STD 66, RFC 3986, DOI 10.17487/RFC3986, January 2005</em>. <a href="https://www.rfc-editor.org/info/rfc3986">https://www.rfc-editor.org/info/rfc3986</a>.</p>
<h6><span id="rfc3987">RFC3987</span></h6>
<p><em>Duerst, M. and M. Suignard, “Internationalized Resource Identifiers (IRIs)”, RFC 3987, DOI 10.17487/RFC3987, January 2005</em>. <a href="https://www.rfc-editor.org/info/rfc3987">https://www.rfc-editor.org/info/rfc3987</a>.</p>
<h6><span id="rfc4648">RFC4648</span></h6>
<p><em>Josefsson, S., “The Base16, Base32, and Base64 Data Encodings”, RFC 4648, DOI 10.17487/RFC4648, October 2006</em>. <a href="https://www.rfc-editor.org/info/rfc4648">https://www.rfc-editor.org/info/rfc4648</a>.</p>
<h6><span id="rfc5646">RFC5646</span></h6>
<p><em>Phillips, A., Ed., and M. Davis, Ed., “Tags for Identifying Languages”, BCP 47, RFC 5646, DOI 10.17487/RFC5646, September 2009</em>. <a href="https://www.rfc-editor.org/info/rfc5646">https://www.rfc-editor.org/info/rfc5646</a>.</p>
<h6><span id="rfc7493">RFC7493</span></h6>
<p><em>Bray, T., Ed., “The I-JSON Message Format”, RFC 7493, DOI 10.17487/RFC7493, March 2015</em>. <a href="https://www.rfc-editor.org/info/rfc7493">https://www.rfc-editor.org/info/rfc7493</a>.</p>
<h6><span id="rfc7946">RFC7946</span></h6>
<p><em>Butler, H., Daly, M., Doyle, A., Gillies, S., Hagen, S., and T. Schaub, “The GeoJSON Format”, RFC 7946, DOI 10.17487/RFC7946, August 2016</em>. <a href="https://www.rfc-editor.org/info/rfc7946">https://www.rfc-editor.org/info/rfc7946</a>.</p>
<h6><span id="rfc8174">RFC8174</span></h6>
<p><em>Leiba, B., “Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words”, BCP 14, RFC 8174, DOI 10.17487/RFC8174, May 2017</em>. <a href="https://www.rfc-editor.org/info/rfc8174">https://www.rfc-editor.org/info/rfc8174</a>.</p>
<h6><span id="rfc8259">RFC8259</span></h6>
<p><em>Bray, T., Ed., “The JavaScript Object Notation (JSON) Data Interchange Format”, STD 90, RFC 8259, DOI 10.17487/RFC8259, December 2017</em>. <a href="https://www.rfc-editor.org/info/rfc8259">https://www.rfc-editor.org/info/rfc8259</a>.</p>
</details>
<details open><summary>
<h2 id="a2-informative-references"><a id="InformativeReferences" href="#InformativeReferences">A.2 Informative References</a></h2>
</summary>
<h6><span id="_ECMAScript">ECMAScript</span></h6>
<p><em>ECMAScript 2023 Language Specification, 14th Edition</em>, June 2023. Standard ECMA-262. <a href="https://www.ecma-international.org/publications-and-standards/standards/ecma-262/">https://www.ecma-international.org/publications-and-standards/standards/ecma-262/</a>.</p>
</details>
</details>
<hr />
<details open><summary>
<h1 id="appendix-b-safety-security-and-privacy-considerations"><a id="SafetySecurityandPrivacyConsiderations" href="#SafetySecurityandPrivacyConsiderations">Appendix B. Safety, Security and Privacy Considerations</a></h1>
</summary>
<p>This specification raises no security issues.</p>
<p>This section is provided as a service to the application developers, information providers, and users of OData version 4.0 giving some references to starting points for securing OData services as specified. OData is a REST-full multi-format service that depends on other services and thus inherits both sides of the coin, security enhancements and concerns alike from the latter.</p>
<p>For JSON-relevant security implications please cf. at least the relevant subsections of <a href="#rfc8259">RFC8259</a> as starting point.</p>
</details>
<hr />
<details open><summary>
<h1 id="appendix-c-acknowledgments"><a id="Acknowledgments" href="#Acknowledgments">Appendix C. Acknowledgments</a></h1>
</summary>
<details open><summary>
<h2 id="c1-special-thanks"><a id="SpecialThanks" href="#SpecialThanks">C.1 Special Thanks</a></h2>
</summary>
<p>The contributions of the OASIS OData Technical Committee members, enumerated in <a href="#ODataProtocol">OData-Protocol</a> are gratefully acknowledged.</p>
</details>
<details open><summary>
<h2 id="c2-participants"><a id="Participants" href="#Participants">C.2 Participants</a></h2>
</summary>
<p><strong>OData TC Members:</strong></p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">First Name</th>
<th style="text-align: left;">Last Name</th>
<th style="text-align: left;">Company</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">George</td>
<td style="text-align: left;">Ericson</td>
<td style="text-align: left;">Dell</td>
</tr>
<tr class="even">
<td style="text-align: left;">Hubert</td>
<td style="text-align: left;">Heijkers</td>
<td style="text-align: left;">IBM</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Ling</td>
<td style="text-align: left;">Jin</td>
<td style="text-align: left;">IBM</td>
</tr>
<tr class="even">
<td style="text-align: left;">Stefan</td>
<td style="text-align: left;">Hagen</td>
<td style="text-align: left;">Individual</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Michael</td>
<td style="text-align: left;">Pizzo</td>
<td style="text-align: left;">Microsoft</td>
</tr>
<tr class="even">
<td style="text-align: left;">Christof</td>
<td style="text-align: left;">Sprenger</td>
<td style="text-align: left;">Microsoft</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Ralf</td>
<td style="text-align: left;">Handl</td>
<td style="text-align: left;">SAP SE</td>
</tr>
<tr class="even">
<td style="text-align: left;">Gerald</td>
<td style="text-align: left;">Krause</td>
<td style="text-align: left;">SAP SE</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Heiko</td>
<td style="text-align: left;">Theißen</td>
<td style="text-align: left;">SAP SE</td>
</tr>
<tr class="even">
<td style="text-align: left;">Mark</td>
<td style="text-align: left;">Biamonte</td>
<td style="text-align: left;">Progress Software</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Martin</td>
<td style="text-align: left;">Zurmuehl</td>
<td style="text-align: left;">SAP SE</td>
</tr>
</tbody>
</table>
</details>
</details>
<hr />
<details open><summary>
<h1 id="appendix-d-revision-history"><a id="RevisionHistory" href="#RevisionHistory">Appendix D. Revision History</a></h1>
</summary>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">Revision</th>
<th style="text-align: left;">Date</th>
<th style="text-align: left;">Editor</th>
<th style="text-align: left;">Changes Made</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Committee Specification Draft 01</td>
<td style="text-align: left;">2024-02-28</td>
<td style="text-align: left;">Michael Pizzo<br>Ralf Handl<br>Heiko Theißen</td>
<td style="text-align: left;">Import material from OData JSON Format Version 4.01 <br>Changes listed in <a href="#ChangesfromEarlierVersions">section 1.1</a></td>
</tr>
</tbody>
</table>
</details>
<hr />
<details open><summary>
<h1 id="appendix-e-notices"><a id="Notices" href="#Notices">Appendix E. Notices</a></h1>
</summary>
<!-- Required section. Do not modify. -->

<p>Copyright © OASIS Open 2024. All Rights Reserved.</p>
<p>All capitalized terms in the following text have the meanings assigned to them in the OASIS Intellectual Property Rights Policy (the “OASIS IPR Policy”). The full <a href="https://www.oasis-open.org/policies-guidelines/ipr/">Policy</a> may be found at the OASIS website.</p>
<p>This document and translations of it may be copied and furnished to others, and derivative works that comment on or otherwise explain it or assist in its implementation may be prepared, copied, published, and distributed, in whole or in part, without restriction of any kind, provided that the above copyright notice and this section are included on all such copies and derivative works. However, this document itself may not be modified in any way, including by removing the copyright notice or references to OASIS, except as needed for the purpose of developing any document or deliverable produced by an OASIS Technical Committee (in which case the rules applicable to copyrights, as set forth in the OASIS IPR Policy, must be followed) or as required to translate it into languages other than English.</p>
<p>The limited permissions granted above are perpetual and will not be revoked by OASIS or its successors or assigns.</p>
<p>This document and the information contained herein is provided on an “AS IS” basis and OASIS DISCLAIMS ALL WARRANTIES, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE INFORMATION HEREIN WILL NOT INFRINGE ANY OWNERSHIP RIGHTS OR ANY IMPLIED WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.</p>
<p>As stated in the OASIS IPR Policy, the following three paragraphs in brackets apply to OASIS Standards Final Deliverable documents (Committee Specification, Candidate OASIS Standard, OASIS Standard, or Approved Errata).</p>
<p>[OASIS requests that any OASIS Party or any other party that believes it has patent claims that would necessarily be infringed by implementations of this OASIS Standards Final Deliverable, to notify OASIS TC Administrator and provide an indication of its willingness to grant patent licenses to such patent claims in a manner consistent with the IPR Mode of the OASIS Technical Committee that produced this deliverable.]</p>
<p>[OASIS invites any party to contact the OASIS TC Administrator if it is aware of a claim of ownership of any patent claims that would necessarily be infringed by implementations of this OASIS Standards Final Deliverable by a patent holder that is not willing to provide a license to such patent claims in a manner consistent with the IPR Mode of the OASIS Technical Committee that produced this OASIS Standards Final Deliverable. OASIS may include such claims on its website, but disclaims any obligation to do so.]</p>
<p>[OASIS takes no position regarding the validity or scope of any intellectual property or other rights that might be claimed to pertain to the implementation or use of the technology described in this OASIS Standards Final Deliverable or the extent to which any license under such rights might or might not be available; neither does it represent that it has made any effort to identify any such rights. Information on OASIS’ procedures with respect to rights in any document or deliverable produced by an OASIS Technical Committee can be found on the OASIS website. Copies of claims of rights made available for publication and any assurances of licenses to be made available, or the result of an attempt made to obtain a general license or permission for the use of such proprietary rights by implementers or users of this OASIS Standards Final Deliverable, can be obtained from the OASIS TC Administrator. OASIS makes no representation that any information or list of intellectual property rights will at any time be complete, or that any claims in such list are, in fact, Essential Claims.]</p>
<p>The name “OASIS” is a trademark of <a href="https://www.oasis-open.org/">OASIS</a>, the owner and developer of this specification, and should be used only to refer to the organization and its official outputs. OASIS welcomes reference to, and implementation and use of, specifications, while reserving the right to enforce its marks against misleading uses. Please see <a href="https://www.oasis-open.org/policies-guidelines/trademark/">https://www.oasis-open.org/policies-guidelines/trademark/</a> for above guidance.</p>
</body>
</html>
